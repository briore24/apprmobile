(this["webpackJsonp@maximo/component-documentation"]=this["webpackJsonp@maximo/component-documentation"]||[]).push([[6],{167:function(e,t,n){var o=n(62).default,i=n(23).default,a=n(5).default,u=n(677).default,c=n(581).default,s=n(18).default,l=n(95).default,d=n(14).default,m=n(22).default,g=n(334).default,p=n(12).default,h=n(13).default,v=["uid"];!function(){"use strict";var t=function typeOf$1(e){if(null===e)return"null";if(void 0===e)return"undefined";var t=typeof e;return"object"===t&&(Array.prototype.isPrototypeOf(e)||e.constructor&&"Array"===e.constructor.name)?"array":"object"===t&&(String.prototype.isPrototypeOf(e)||e.constructor&&"String"===e.constructor.name)?"string":t},n=function eq$2(e){return{eq:e}},b=n((function(e,t){return e===t})),y=function eqArray(e){return n((function(t,n){if(t.length!==n.length)return!1;for(var o=t.length,i=0;i<o;i++)if(!e.eq(t[i],n[i]))return!1;return!0}))},C=function eqSortedArray(e,t){return function contramap(e,t){return n((function(n,o){return e.eq(t(n),t(o))}))}(y(e),(function(e){return function sort$1(e,t){return Array.prototype.slice.call(e).sort(t)}(e,t)}))},w=function eqRecord(e){return n((function(t,n){var o=Object.keys(t),i=Object.keys(n);if(!C(b).eq(o,i))return!1;for(var a=o.length,u=0;u<a;u++){var c=o[u];if(!e.eq(t[c],n[c]))return!1}return!0}))},x=n((function(e,n){if(e===n)return!0;var o=t(e);return o===t(n)&&(function isEquatableType(e){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(e)}(o)?e===n:"array"===o?y(x).eq(e,n):"object"===o&&w(x).eq(e,n))})),S=Object.getPrototypeOf,k=function hasProto(e,t,n){var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},T=function isType$1(e){return function(t){return function typeOf(e){var t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&k(e,String,(function(e,t){return t.isPrototypeOf(e)}))?"string":t}(t)===e}},E=function isSimpleType(e){return function(t){return typeof t===e}},O=function eq$1(e){return function(t){return e===t}},A=function is$4(e,t){return R(e)&&k(e,t,(function(e,t){return S(e)===t}))},D=T("string"),R=T("object"),N=function isPlainObject(e){return A(e,Object)},M=T("array"),B=O(null),I=E("boolean"),P=O(void 0),L=function isNullable(e){return null===e||void 0===e},F=function isNonNullable(e){return!L(e)},H=E("function"),$=E("number"),z=function isArrayOf(e,t){if(M(e)){for(var n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},V=function noop(){},U=function compose(e,t){return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e(t.apply(null,o))}},Z=function compose1(e,t){return function(n){return e(t(n))}},W=function constant(e){return function(){return e}},j=function identity(e){return e},G=function tripleEquals(e,t){return e===t};function curry(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];var a=n.concat(o);return e.apply(null,a)}}var q=function not(e){return function(t){return!e(t)}},K=function die(e){return function(){throw new Error(e)}},Y=function apply$1(e){return e()},X=function call(e){e()},J=W(!1),Q=W(!0),ee=function(){function Optional(e,t){p(this,Optional),this.tag=e,this.value=t}return h(Optional,[{key:"fold",value:function fold(e,t){return this.tag?t(this.value):e()}},{key:"isSome",value:function isSome(){return this.tag}},{key:"isNone",value:function isNone(){return!this.tag}},{key:"map",value:function map(e){return this.tag?Optional.some(e(this.value)):Optional.none()}},{key:"bind",value:function bind(e){return this.tag?e(this.value):Optional.none()}},{key:"exists",value:function exists(e){return this.tag&&e(this.value)}},{key:"forall",value:function forall(e){return!this.tag||e(this.value)}},{key:"filter",value:function filter(e){return!this.tag||e(this.value)?this:Optional.none()}},{key:"getOr",value:function getOr(e){return this.tag?this.value:e}},{key:"or",value:function or(e){return this.tag?this:e}},{key:"getOrThunk",value:function getOrThunk(e){return this.tag?this.value:e()}},{key:"orThunk",value:function orThunk(e){return this.tag?this:e()}},{key:"getOrDie",value:function getOrDie(e){if(this.tag)return this.value;throw new Error(null!==e&&void 0!==e?e:"Called getOrDie on None")}},{key:"getOrNull",value:function getOrNull(){return this.tag?this.value:null}},{key:"getOrUndefined",value:function getOrUndefined(){return this.value}},{key:"each",value:function each(e){this.tag&&e(this.value)}},{key:"toArray",value:function toArray(){return this.tag?[this.value]:[]}},{key:"toString",value:function toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}],[{key:"some",value:function some(e){return new Optional(!0,e)}},{key:"none",value:function none(){return Optional.singletonNone}},{key:"from",value:function from(e){return F(e)?Optional.some(e):Optional.none()}}]),Optional}();ee.singletonNone=new ee(!1);var te=Array.prototype.slice,ne=Array.prototype.indexOf,re=Array.prototype.push,oe=function rawIndexOf(e,t){return ne.call(e,t)},ie=function contains$2(e,t){return oe(e,t)>-1},ae=function exists(e,t){for(var n=0,o=e.length;n<o;n++){if(t(e[n],n))return!0}return!1},ue=function map$3(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;i++){var a=e[i];o[i]=t(a,i)}return o},ce=function each$e(e,t){for(var n=0,o=e.length;n<o;n++){t(e[n],n)}},se=function eachr(e,t){for(var n=e.length-1;n>=0;n--){t(e[n],n)}},le=function partition$2(e,t){for(var n=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i];(t(u,i)?n:o).push(u)}return{pass:n,fail:o}},fe=function filter$5(e,t){for(var n=[],o=0,i=e.length;o<i;o++){var a=e[o];t(a,o)&&n.push(a)}return n},de=function foldr(e,t,n){return se(e,(function(e,o){n=t(n,e,o)})),n},me=function foldl(e,t,n){return ce(e,(function(e,o){n=t(n,e,o)})),n},ge=function findUntil$1(e,t,n){for(var o=0,i=e.length;o<i;o++){var a=e[o];if(t(a,o))return ee.some(a);if(n(a,o))break}return ee.none()},pe=function find$2(e,t){return ge(e,t,J)},he=function findIndex$2(e,t){for(var n=0,o=e.length;n<o;n++){if(t(e[n],n))return ee.some(n)}return ee.none()},ve=function flatten(e){for(var t=[],n=0,o=e.length;n<o;++n){if(!M(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);re.apply(t,e[n])}return t},be=function bind$3(e,t){return ve(ue(e,t))},ye=function forall(e,t){for(var n=0,o=e.length;n<o;++n){if(!0!==t(e[n],n))return!1}return!0},Ce=function reverse(e){var t=te.call(e,0);return t.reverse(),t},we=function difference(e,t){return fe(e,(function(e){return!ie(t,e)}))},xe=function mapToObject(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[String(a)]=t(a,o)}return n},Se=function sort(e,t){var n=te.call(e,0);return n.sort(t),n},ke=function get$b(e,t){return t>=0&&t<e.length?ee.some(e[t]):ee.none()},Te=function head(e){return ke(e,0)},Ee=function last$3(e){return ke(e,e.length-1)},Oe=H(Array.from)?Array.from:function(e){return te.call(e)},Ae=function findMap(e,t){for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o.isSome())return o}return ee.none()},_e=Object.keys,De=Object.hasOwnProperty,Re=function each$d(e,t){for(var n=_e(e),o=0,i=n.length;o<i;o++){var a=n[o];t(e[a],a)}},Ne=function map$2(e,t){return Me(e,(function(e,n){return{k:n,v:t(e,n)}}))},Me=function tupleMap(e,t){var n={};return Re(e,(function(e,o){var i=t(e,o);n[i.k]=i.v})),n},Be=function objAcc(e){return function(t,n){e[n]=t}},Ie=function internalFilter(e,t,n,o){Re(e,(function(e,i){(t(e,i)?n:o)(e,i)}))},Pe=function filter$4(e,t){var n={};return Ie(e,t,Be(n),V),n},Le=function mapToArray(e,t){var n=[];return Re(e,(function(e,o){n.push(t(e,o))})),n},Fe=function values(e){return Le(e,j)},He=function get$a(e,t){return $e(e,t)?ee.from(e[t]):ee.none()},$e=function has$2(e,t){return De.call(e,t)},ze=function hasNonNullableKey(e,t){return $e(e,t)&&void 0!==e[t]&&null!==e[t]},Ve=function stringArray(e){var t={};return ce(e,(function(e){t[e]={}})),_e(t)},Ue=function isArrayLike(e){return void 0!==e.length},Ze=Array.isArray,We=function each$c(e,t,n){if(!e)return!1;if(n=n||e,Ue(e)){for(var o=0,i=e.length;o<i;o++)if(!1===t.call(n,e[o],o,e))return!1}else for(var a in e)if($e(e,a)&&!1===t.call(n,e[a],a,e))return!1;return!0},je=function map$1(e,t){var n=[];return We(e,(function(o,i){n.push(t(o,i,e))})),n},Ge=function filter$3(e,t){var n=[];return We(e,(function(o,i){t&&!t(o,i,e)||n.push(o)})),n},qe=function reduce(e,t,n,o){for(var i=P(n)?e[0]:n,a=0;a<e.length;a++)i=t.call(o,i,e[a],a);return i},Ke=function findIndex$1(e,t,n){for(var o=0,i=e.length;o<i;o++)if(t.call(n,e[o],o,e))return o;return-1},Ye=function last$2(e){return e[e.length-1]},Xe=function cached(e){var t,n=!1;return function(){if(!n){n=!0;for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];t=e.apply(null,i)}return t}},Je=function unknown$2(){return Qe(0,0)},Qe=function nu$3(e,t){return{major:e,minor:t}},et={nu:Qe,detect:function detect$5(e,t){var n=String(t).toLowerCase();return 0===e.length?Je():function find$1(e,t){var n=function firstMatch(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(o.test(t))return o}}(e,t);if(!n)return{major:0,minor:0};var o=function group(e){return Number(t.replace(n,"$"+e))};return Qe(o(1),o(2))}(e,n)},unknown:Je},tt=function detect$4(e,t){var n=String(t).toLowerCase();return pe(e,(function(e){return e.search(n)}))},nt=function checkRange(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},rt=function removeLeading(e,t){return it(e,t)?function removeFromStart(e,t){return e.substring(t)}(e,t.length):e},ot=function contains$1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0,i=e.indexOf(t,n);return-1!==i&&(!!P(o)||i+t.length<=o)},it=function startsWith(e,t){return nt(e,t,0)},at=function endsWith(e,t){return nt(e,t,e.length-t.length)},ut=function blank(e){return function(t){return t.replace(e,"")}},ct=ut(/^\s+|\s+$/g),st=ut(/^\s+/g),lt=ut(/\s+$/g),ft=function isNotEmpty(e){return e.length>0},dt=function isEmpty$3(e){return!ft(e)},mt=function toInt(e){var t=parseInt(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:10);return isNaN(t)?ee.none():ee.some(t)},gt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,pt=function checkContains(e){return function(t){return ot(t,e)}},ht=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function search(e){return ot(e,"edge/")&&ot(e,"chrome")&&ot(e,"safari")&&ot(e,"applewebkit")}},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,gt],search:function search(e){return ot(e,"chrome")&&!ot(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function search(e){return ot(e,"msie")||ot(e,"trident")}},{name:"Opera",versionRegexes:[gt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:pt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:pt("firefox")},{name:"Safari",versionRegexes:[gt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function search(e){return(ot(e,"safari")||ot(e,"mobile/"))&&ot(e,"applewebkit")}}],vt=[{name:"Windows",search:pt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function search(e){return ot(e,"iphone")||ot(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:pt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:pt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:pt("linux"),versionRegexes:[]},{name:"Solaris",search:pt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:pt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:pt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],bt={browsers:W(ht),oses:W(vt)},yt="Edge",Ct="Chromium",wt="Opera",xt="Firefox",St="Safari",kt=function nu$2(e){var t=e.current,n=e.version,o=function isBrowser(e){return function(){return t===e}};return{current:t,version:n,isEdge:o(yt),isChromium:o(Ct),isIE:o("IE"),isOpera:o(wt),isFirefox:o(xt),isSafari:o(St)}},Tt={unknown:function unknown$1(){return kt({current:void 0,version:et.unknown()})},nu:kt,edge:W(yt),chromium:W(Ct),ie:W("IE"),opera:W(wt),firefox:W(xt),safari:W(St)},Et="Windows",Ot="Android",At="Linux",_t="macOS",Dt="Solaris",Rt="FreeBSD",Nt="ChromeOS",Mt=function nu$1(e){var t=e.current,n=e.version,o=function isOS(e){return function(){return t===e}};return{current:t,version:n,isWindows:o(Et),isiOS:o("iOS"),isAndroid:o(Ot),isMacOS:o(_t),isLinux:o(At),isSolaris:o(Dt),isFreeBSD:o(Rt),isChromeOS:o(Nt)}},Bt={unknown:function unknown(){return Mt({current:void 0,version:et.unknown()})},nu:Mt,windows:W(Et),ios:W("iOS"),android:W(Ot),linux:W(At),macos:W(_t),solaris:W(Dt),freebsd:W(Rt),chromeos:W(Nt)},It=function detect$3(e,t,n){var o=bt.browsers(),i=bt.oses(),a=t.bind((function(e){return function detectBrowser$1(e,t){return Ae(t.brands,(function(t){var n=t.brand.toLowerCase();return pe(e,(function(e){var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((function(e){return{current:e.name,version:et.nu(parseInt(t.version,10),0)}}))}))}(o,e)})).orThunk((function(){return function detectBrowser(e,t){return tt(e,t).map((function(e){var n=et.detect(e.versionRegexes,t);return{current:e.name,version:n}}))}(o,e)})).fold(Tt.unknown,Tt.nu),u=function detectOs(e,t){return tt(e,t).map((function(e){var n=et.detect(e.versionRegexes,t);return{current:e.name,version:n}}))}(i,e).fold(Bt.unknown,Bt.nu),c=function DeviceType(e,t,n,o){var i=e.isiOS()&&!0===/ipad/i.test(n),a=e.isiOS()&&!i,u=e.isiOS()||e.isAndroid(),c=u||o("(pointer:coarse)"),s=i||!a&&u&&o("(min-device-width:768px)"),l=a||u&&!s,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),m=!l&&!s&&!d;return{isiPad:W(i),isiPhone:W(a),isTablet:W(s),isPhone:W(l),isTouch:W(c),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:W(d),isDesktop:W(m)}}(u,a,e,n);return{browser:a,os:u,deviceType:c}},Pt=function mediaMatch(e){return window.matchMedia(e).matches},Lt=Xe((function(){return It(navigator.userAgent,ee.from(navigator.userAgentData),Pt)})),Ft=function detect$2(){return Lt()},Ht=navigator.userAgent,$t=Ft(),zt=$t.browser,Vt=$t.os,Ut=$t.deviceType,Zt=-1!==Ht.indexOf("Windows Phone"),Wt={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:zt.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!zt.isIE(),windowsPhone:Zt,browser:{current:zt.current,version:zt.version,isChromium:zt.isChromium,isEdge:zt.isEdge,isFirefox:zt.isFirefox,isIE:zt.isIE,isOpera:zt.isOpera,isSafari:zt.isSafari},os:{current:Vt.current,version:Vt.version,isAndroid:Vt.isAndroid,isChromeOS:Vt.isChromeOS,isFreeBSD:Vt.isFreeBSD,isiOS:Vt.isiOS,isLinux:Vt.isLinux,isMacOS:Vt.isMacOS,isSolaris:Vt.isSolaris,isWindows:Vt.isWindows},deviceType:{isDesktop:Ut.isDesktop,isiPad:Ut.isiPad,isiPhone:Ut.isiPhone,isPhone:Ut.isPhone,isTablet:Ut.isTablet,isTouch:Ut.isTouch,isWebView:Ut.isWebView}},jt=/^\s*|\s*$/g,Gt=function trim$3(e){return L(e)?"":(""+e).replace(jt,"")},qt=$e,Kt={trim:Gt,isArray:Ze,is:function is$3(e,t){return t?!("array"!==t||!Ze(e))||typeof e===t:void 0!==e},toArray:function toArray$1(e){if(Ze(e))return e;for(var t=[],n=0,o=e.length;n<o;n++)t[n]=e[n];return t},makeMap:function makeMap$4(e,t){for(var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=D(e)?e.split(t||","):e||[],i=o.length;i--;)n[o[i]]={};return n},each:We,map:je,grep:Ge,inArray:function indexOf(e,t){if(e)for(var n=0,o=e.length;n<o;n++)if(e[n]===t)return n;return-1},hasOwn:qt,extend:function extend$3(e){for(var t=0;t<(arguments.length<=1?0:arguments.length-1);t++){var n=t+1<1||arguments.length<=t+1?void 0:arguments[t+1];for(var o in n)if($e(n,o)){var i=n[o];void 0!==i&&(e[o]=i)}}return e},walk:function walk$4(e,t,n,o){o=o||this,e&&(n&&(e=e[n]),We(e,(function(e,i){return!1!==t.call(o,e,i,n)&&(walk$4(e,t,n,o),!0)})))},resolve:function resolve$3(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window,n=e.split("."),o=0,i=n.length;o<i&&(t=t[n[o]]);o++);return t},explode:function explode$3(e,t){return M(e)?e:""===e?[]:je(e.split(t||","),Gt)},_addCacheSuffix:function _addCacheSuffix(e){var t=Wt.cacheSuffix;return t&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}},Yt=function is$2(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:G;return e.exists((function(e){return n(e,t)}))},Xt=function equals(e,t){return Jt(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:G).getOr(e.isNone()&&t.isNone())},Jt=function lift2(e,t,n){return e.isSome()&&t.isSome()?ee.some(n(e.getOrDie(),t.getOrDie())):ee.none()},Qt=function someIf(e,t){return e?ee.some(t):ee.none()},en="undefined"!==typeof window?window:Function("return this;")(),tn=function resolve$2(e,t){return function path(e,t){for(var n=void 0!==t&&null!==t?t:en,o=0;o<e.length&&void 0!==n&&null!==n;++o)n=n[e[o]];return n}(e.split("."),t)},nn=function getOrDie(e,t){var n=function unsafe(e,t){return tn(e,t)}(e,t);if(void 0===n||null===n)throw new Error(e+" not available on this browser");return n},rn=Object.getPrototypeOf,an=function isPrototypeOf(e){var t=tn("ownerDocument.defaultView",e);return R(e)&&(function sandHTMLElement(e){return nn("HTMLElement",e)}(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(rn(e).constructor.name))},un=function name(e){return e.dom.nodeName.toLowerCase()},cn=function type$1(e){return e.dom.nodeType},sn=function isType(e){return function(t){return cn(t)===e}},ln=function isHTMLElement$1(e){return fn(e)&&an(e.dom)},fn=sn(1),dn=sn(3),mn=sn(9),gn=sn(11),pn=function isTag(e){return function(t){return fn(t)&&un(t)===e}},hn=function rawSet(e,t,n){if(!(D(n)||I(n)||$(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},vn=function set$3(e,t,n){hn(e.dom,t,n)},bn=function setAll$1(e,t){var n=e.dom;Re(t,(function(e,t){hn(n,t,e)}))},yn=function get$9(e,t){var n=e.dom.getAttribute(t);return null===n?void 0:n},Cn=function getOpt(e,t){return ee.from(yn(e,t))},wn=function has$1(e,t){var n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},xn=function remove$a(e,t){e.dom.removeAttribute(t)},Sn=function clone$4(e){return me(e.dom.attributes,(function(e,t){return e[t.name]=t.value,e}),{})},kn=function read$4(e,t){var n=yn(e,t);return void 0===n||""===n?[]:n.split(" ")},Tn=function supports(e){return void 0!==e.dom.classList},En=function get$8(e){return kn(e,"class")},On=function add$3(e,t){return function add$4(e,t,n){var o=kn(e,t).concat([n]);return vn(e,t,o.join(" ")),!0}(e,"class",t)},An=function remove$8(e,t){return function remove$9(e,t,n){var o=fe(kn(e,t),(function(e){return e!==n}));return o.length>0?vn(e,t,o.join(" ")):xn(e,t),!1}(e,"class",t)},_n=function add$2(e,t){Tn(e)?e.dom.classList.add(t):On(e,t)},Dn=function cleanClass(e){0===(Tn(e)?e.dom.classList:En(e)).length&&xn(e,"class")},Rn=function remove$7(e,t){Tn(e)?e.dom.classList.remove(t):An(e,t);Dn(e)},Nn=function toggle$1(e,t){var n=Tn(e)?e.dom.classList.toggle(t):function toggle$2(e,t){return ie(En(e),t)?An(e,t):On(e,t)}(e,t);return Dn(e),n},Mn=function has(e,t){return Tn(e)&&e.dom.classList.contains(t)},Bn=function fromDom$2(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:e}},In={fromHtml:function fromHtml$1(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){var o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return Bn(n.childNodes[0])},fromTag:function fromTag(e,t){var n=(t||document).createElement(e);return Bn(n)},fromText:function fromText(e,t){var n=(t||document).createTextNode(e);return Bn(n)},fromDom:Bn,fromPoint:function fromPoint$2(e,t,n){return ee.from(e.dom.elementFromPoint(t,n)).map(Bn)}},Pn=function toArray(e,t){var n=[],o=function recurse(e){return n.push(e),t(e)},i=t(e);do{i=i.bind(o)}while(i.isSome());return n},Ln=function is$1(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Fn=function bypassSelector(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount},Hn=function eq(e,t){return e.dom===t.dom},$n=function contains(e,t){var n=e.dom,o=t.dom;return n!==o&&n.contains(o)},zn=function owner$1(e){return In.fromDom(e.dom.ownerDocument)},Vn=function documentOrOwner(e){return mn(e)?e:zn(e)},Un=function defaultView(e){return In.fromDom(Vn(e).dom.defaultView)},Zn=function parent(e){return ee.from(e.dom.parentNode).map(In.fromDom)},Wn=function parentElement(e){return ee.from(e.dom.parentElement).map(In.fromDom)},jn=function parents$1(e,t){for(var n=H(t)?t:J,o=e.dom,i=[];null!==o.parentNode&&void 0!==o.parentNode;){var a=o.parentNode,u=In.fromDom(a);if(i.push(u),!0===n(u))break;o=a}return i},Gn=function prevSibling(e){return ee.from(e.dom.previousSibling).map(In.fromDom)},qn=function nextSibling(e){return ee.from(e.dom.nextSibling).map(In.fromDom)},Kn=function prevSiblings(e){return Ce(Pn(e,Gn))},Yn=function nextSiblings(e){return Pn(e,qn)},Xn=function children$1(e){return ue(e.dom.childNodes,In.fromDom)},Jn=function child$1(e,t){var n=e.dom.childNodes;return ee.from(n[t]).map(In.fromDom)},Qn=function firstChild(e){return Jn(e,0)},er=function lastChild(e){return Jn(e,e.dom.childNodes.length-1)},tr=function childNodesCount(e){return e.dom.childNodes.length},nr=function isShadowRoot(e){return gn(e)&&F(e.dom.host)},rr=H(Element.prototype.attachShadow)&&H(Node.prototype.getRootNode),ir=W(rr),ar=rr?function(e){return In.fromDom(e.dom.getRootNode())}:Vn,ur=function getStyleContainer(e){return nr(e)?e:function getHead(e){var t=e.dom.head;if(null===t||void 0===t)throw new Error("Head is not available yet");return In.fromDom(t)}(Vn(e))},cr=function getShadowHost(e){return In.fromDom(e.dom.host)},sr=function getOriginalEventTarget(e){if(ir()&&F(e.target)){var t=In.fromDom(e.target);if(fn(t)&&lr(t)&&e.composed&&e.composedPath){var n=e.composedPath();if(n)return Te(n)}}return ee.from(e.target)},lr=function isOpenShadowHost(e){return F(e.dom.shadowRoot)},fr=function inBody(e){var t=dn(e)?e.dom.parentNode:e.dom;if(void 0===t||null===t||null===t.ownerDocument)return!1;var n=t.ownerDocument;return function getShadowRoot(e){var t=ar(e);return nr(t)?ee.some(t):ee.none()}(In.fromDom(t)).fold((function(){return n.body.contains(t)}),Z(inBody,cr))},dr=function ClosestOrAncestor(e,t,n,o,i){return e(n,o)?ee.some(n):H(i)&&i(n)?ee.none():t(n,o,i)},mr=function ancestor$4(e,t,n){for(var o=e.dom,i=H(n)?n:J;o.parentNode;){o=o.parentNode;var a=In.fromDom(o);if(t(a))return ee.some(a);if(i(a))break}return ee.none()},gr=function closest$4(e,t,n){return dr((function is(e,t){return t(e)}),mr,e,t,n)},pr=function child(e,t){return pe(e.dom.childNodes,(function pred(e){return t(In.fromDom(e))})).map(In.fromDom)},hr=function descendant$2(e,t){return function descend(e){for(var n=0;n<e.childNodes.length;n++){var o=In.fromDom(e.childNodes[n]);if(t(o))return ee.some(o);var i=descend(e.childNodes[n]);if(i.isSome())return i}return ee.none()}(e.dom)},vr=function ancestor$3(e,t,n){return mr(e,(function(e){return Ln(e,t)}),n)},yr=function descendant$1(e,t){return function one(e,t){var n=void 0===t?document:t.dom;return Fn(n)?ee.none():ee.from(n.querySelector(e)).map(In.fromDom)}(t,e)},Cr=function closest$3(e,t,n){return dr((function is(e,t){return Ln(e,t)}),vr,e,t,n)},wr=function isEditable$2(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return fr(e)?e.dom.isContentEditable:function closest$2(e){return Cr(e,"[contenteditable]")}(e).fold(W(t),(function(e){return"true"===xr(e)}))},xr=function getRaw$1(e){return e.dom.contentEditable},Sr=function isSupported(e){return void 0!==e.style&&H(e.style.getPropertyValue)},kr=function internalSet(e,t,n){if(!D(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);Sr(e)&&e.style.setProperty(t,n)},Tr=function set$2(e,t,n){var o=e.dom;kr(o,t,n)},Er=function setAll(e,t){var n=e.dom;Re(t,(function(e,t){kr(n,t,e)}))},Or=function get$7(e,t){var n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return""!==o||fr(e)?o:Ar(n,t)},Ar=function getUnsafeProperty(e,t){return Sr(e)?e.style.getPropertyValue(t):""},_r=function getRaw(e,t){var n=e.dom,o=Ar(n,t);return ee.from(o).filter((function(e){return e.length>0}))},Dr=function getAllRaw(e){var t={},n=e.dom;if(Sr(n))for(var o=0;o<n.style.length;o++){var i=n.style.item(o);t[i]=n.style[i]}return t},Rr=function remove$6(e,t){!function internalRemove(e,t){Sr(e)&&e.style.removeProperty(t)}(e.dom,t),Yt(Cn(e,"style").map(ct),"")&&xn(e,"style")},Nr=function before$3(e,t){Zn(e).each((function(n){n.dom.insertBefore(t.dom,e.dom)}))},Mr=function after$4(e,t){qn(e).fold((function(){Zn(e).each((function(e){Ir(e,t)}))}),(function(e){Nr(e,t)}))},Br=function prepend(e,t){Qn(e).fold((function(){Ir(e,t)}),(function(n){e.dom.insertBefore(t.dom,n.dom)}))},Ir=function append$1(e,t){e.dom.appendChild(t.dom)},Pr=function wrap$2(e,t){Nr(e,t),Ir(t,e)},Lr=function append(e,t){ce(t,(function(t){Ir(e,t)}))},Fr=function empty(e){e.dom.textContent="",ce(Xn(e),(function(e){Hr(e)}))},Hr=function remove$5(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},$r=function unwrap(e){var t=Xn(e);t.length>0&&function after$3(e,t){ce(t,(function(n,o){var i=0===o?e:t[o-1];Mr(i,n)}))}(e,t),Hr(e)},zr=function fromDom$1(e){return ue(e,In.fromDom)},Vr=function get$6(e){return e.dom.innerHTML},Ur=function set$1(e,t){var n=zn(e).dom,o=In.fromDom(n.createDocumentFragment()),i=function fromHtml(e,t){var n=(t||document).createElement("div");return n.innerHTML=e,Xn(In.fromDom(n))}(t,n);Lr(o,i),Fr(e),Ir(e,o)},Zr=function handle$1(e,t){return function(n){e(n)&&t(function fromRawEvent(e){var t=In.fromDom(sr(e).getOr(e.target)),n=function stop(){return e.stopPropagation()},o=function prevent(){return e.preventDefault()},i=U(o,n);return function mkEvent(e,t,n,o,i,a,u){return{target:e,x:t,y:n,stop:o,prevent:i,kill:a,raw:u}}(t,e.clientX,e.clientY,n,o,i,e)}(n))}},Wr=function bind$2(e,t,n,o){return function binder(e,t,n,o,i){var a=Zr(n,o);return e.dom.addEventListener(t,a,i),{unbind:curry(jr,e,t,a,i)}}(e,t,n,o,!1)},jr=function unbind(e,t,n,o){e.dom.removeEventListener(t,n,o)},Gr=function r(e,t){return{left:e,top:t,translate:function translate(n,o){return r(e+n,t+o)}}},qr=function firstDefinedOrZero(e,t){return void 0!==e?e:void 0!==t?t:0},Kr=function viewport(e){var t=e.dom,n=t.ownerDocument.body;return n===t?Gr(n.offsetLeft,n.offsetTop):fr(e)?function boxPosition(e){var t=e.getBoundingClientRect();return Gr(t.left,t.top)}(t):Gr(0,0)},Yr=function get$5(e){var t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return Gr(n,o)},Xr=function to(e,t,n){var o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(e,t)},Jr=function intoView(e,t){Ft().browser.isSafari()&&H(e.dom.scrollIntoViewIfNeeded)?e.dom.scrollIntoViewIfNeeded(!1):e.dom.scrollIntoView(t)},Qr=function bounds(e,t,n,o){return{x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}},eo=function getBounds(e){var t=void 0===e?window:e,n=t.document,o=Yr(In.fromDom(n));return function get$4(e){var t=void 0===e?window:e;return Ft().browser.isFirefox()?ee.none():ee.from(t.visualViewport)}(t).fold((function(){var e=t.document.documentElement,n=e.clientWidth,i=e.clientHeight;return Qr(o.left,o.top,n,i)}),(function(e){return Qr(Math.max(e.pageLeft,o.left),Math.max(e.pageTop,o.top),e.width,e.height)}))},no=function descendants$1(e,t){var n=[];return ce(Xn(e),(function(e){t(e)&&(n=n.concat([e])),n=n.concat(descendants$1(e,t))})),n},ro=function descendants(e,t){return function all(e,t){var n=void 0===t?document:t.dom;return Fn(n)?[]:ue(n.querySelectorAll(e),In.fromDom)}(t,e)},oo=function ancestor$2(e,t,n){return vr(e,t,n).isSome()},io=function(){function DomTreeWalker(e,t){p(this,DomTreeWalker),this.node=e,this.rootNode=t,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}return h(DomTreeWalker,[{key:"current",value:function current(){return this.node}},{key:"next",value:function next(e){return this.node=this.findSibling(this.node,"firstChild","nextSibling",e),this.node}},{key:"prev",value:function prev(e){return this.node=this.findSibling(this.node,"lastChild","previousSibling",e),this.node}},{key:"prev2",value:function prev2(e){return this.node=this.findPreviousNode(this.node,e),this.node}},{key:"findSibling",value:function findSibling(e,t,n,o){if(e){if(!o&&e[t])return e[t];if(e!==this.rootNode){var i=e[n];if(i)return i;for(var a=e.parentNode;a&&a!==this.rootNode;a=a.parentNode)if(i=a[n])return i}}}},{key:"findPreviousNode",value:function findPreviousNode(e,t){if(e){var n=e.previousSibling;if(this.rootNode&&n===this.rootNode)return;if(n){if(!t)for(var o=n.lastChild;o;o=o.lastChild)if(!o.lastChild)return o;return n}var i=e.parentNode;if(i&&i!==this.rootNode)return i}}}]),DomTreeWalker}(),ao=function isNodeType(e){return function(t){return!!t&&t.nodeType===e}},uo=function isRestrictedNode(e){return!!e&&!Object.getPrototypeOf(e)},co=ao(1),so=function isHTMLElement(e){return co(e)&&ln(In.fromDom(e))},lo=function matchNodeName(e){var t=e.toLowerCase();return function(e){return F(e)&&e.nodeName.toLowerCase()===t}},fo=function matchNodeNames(e){var t=e.map((function(e){return e.toLowerCase()}));return function(e){if(e&&e.nodeName){var n=e.nodeName.toLowerCase();return ie(t,n)}return!1}},mo=function matchStyleValues(e,t){var n=t.toLowerCase().split(" ");return function(t){if(co(t)){var o=t.ownerDocument.defaultView;if(o)for(var i=0;i<n.length;i++){var a=o.getComputedStyle(t,null);if((a?a.getPropertyValue(e):null)===n[i])return!0}}return!1}},po=function hasAttribute(e){return function(t){return co(t)&&t.hasAttribute(e)}},ho=function isBogus$2(e){return co(e)&&e.hasAttribute("data-mce-bogus")},vo=function isTable$2(e){return co(e)&&"TABLE"===e.tagName},bo=function hasContentEditableState(e){return function(t){if(so(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},yo=fo(["textarea","input"]),Co=ao(3),wo=ao(4),xo=ao(7),So=ao(8),ko=ao(9),To=ao(11),Eo=lo("br"),Oo=lo("img"),Ao=bo("true"),_o=bo("false"),Do=fo(["td","th"]),Ro=fo(["td","th","caption"]),No=fo(["video","audio","object","embed"]),Mo=lo("li"),Bo=lo("details"),Io=lo("summary"),Po="\ufeff",Lo="\xa0",Fo=function isZwsp$2(e){return e===Po},Ho=function NodeValue(e,t){var n=function getOption(t){return e(t)?ee.from(t.dom.nodeValue):ee.none()};return{get:function get(o){if(!e(o))throw new Error("Can only get "+t+" value of a "+t+" node");return n(o).getOr("")},getOption:n,set:function set(n,o){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=o}}}(dn,"text"),$o=function get$3(e){return Ho.get(e)},zo=function getOption(e){return Ho.getOption(e)},Vo=function lazyLookup(e){var t;return function(n){return t=t||xe(e,Q),$e(t,un(n))}},Uo=function isBr$5(e){return fn(e)&&"br"===un(e)},Zo=Vo(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Wo=Vo(["ul","ol","dl"]),jo=Vo(["li","dd","dt"]),Go=Vo(["thead","tbody","tfoot"]),qo=Vo(["td","th"]),Ko=Vo(["pre","script","textarea","style"]),Yo=function removeTrailingBr(e){var t=ro(e,"br"),n=fe(function getLastChildren$1(e){for(var t=[],n=e.dom;n;)t.push(In.fromDom(n)),n=n.lastChild;return t}(e).slice(-1),Uo);t.length===n.length&&ce(n,Hr)},Xo=function createPaddingBr(){var e=In.fromTag("br");return vn(e,"data-mce-bogus","1"),e},Jo=function fillWithPaddingBr(e){Fr(e),Ir(e,Xo())},Qo=Po,ei=Fo,ti=function removeZwsp(e){return e.replace(/\uFEFF/g,"")},ni=co,ri=Co,oi=function isCaretContainerBlock$1(e){return ri(e)&&(e=e.parentNode),ni(e)&&e.hasAttribute("data-mce-caret")},ii=function isCaretContainerInline(e){return ri(e)&&ei(e.data)},ai=function isCaretContainer$2(e){return oi(e)||ii(e)},ui=function hasContent(e){return e.firstChild!==e.lastChild||!Eo(e.firstChild)},ci=function isBeforeInline(e){var t=e.container();return!!Co(t)&&(t.data.charAt(e.offset())===Qo||e.isAtStart()&&ii(t.previousSibling))},si=function isAfterInline(e){var t=e.container();return!!Co(t)&&(t.data.charAt(e.offset()-1)===Qo||e.isAtEnd()&&ii(t.nextSibling))},li=function startsWithCaretContainer$1(e){return ri(e)&&e.data[0]===Qo},fi=function endsWithCaretContainer$1(e){return ri(e)&&e.data[e.data.length-1]===Qo},di=function showCaretContainerBlock(e){return e&&e.hasAttribute("data-mce-caret")?(function trimBogusBr(e){var t,n=e.getElementsByTagName("br"),o=n[n.length-1];ho(o)&&(null===(t=o.parentNode)||void 0===t||t.removeChild(o))}(e),e.removeAttribute("data-mce-caret"),e.removeAttribute("data-mce-bogus"),e.removeAttribute("style"),e.removeAttribute("data-mce-style"),e.removeAttribute("_moz_abspos"),e):null},mi=function isRangeInCaretContainerBlock(e){return oi(e.startContainer)},gi=Ao,hi=_o,vi=Eo,bi=Co,yi=fo(["script","style","textarea"]),Ci=fo(["img","input","textarea","hr","iframe","video","audio","object","embed"]),wi=fo(["table"]),xi=ai,Si=function isCaretCandidate$3(e){return!xi(e)&&(bi(e)?!yi(e.parentNode):Ci(e)||vi(e)||wi(e)||ki(e))},ki=function isNonUiContentEditableFalse(e){return!function isUnselectable(e){return co(e)&&"true"===e.getAttribute("unselectable")}(e)&&hi(e)},Ti=function isEditableCaretCandidate$1(e,t){return Si(e)&&function isInEditable(e,t){for(var n=e.parentNode;n&&n!==t;n=n.parentNode){if(ki(n))return!1;if(gi(n))return!0}return!0}(e,t)},Ei=/^[ \t\r\n]*$/,Oi=function isWhitespaceText(e){return Ei.test(e)},Ai=function isZwsp(e){var t,n=g(e);try{for(n.s();!(t=n.n()).done;){var o=t.value;if(!Fo(o))return!1}}catch(i){n.e(i)}finally{n.f()}return!0},_i=function isNewLineChar(e){return"\n"===e||"\r"===e},Di=function normalize$4(e){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],n=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=function repeat(e,t){return t<=0?"":new Array(t+1).join(e)}(" ",arguments.length>1&&void 0!==arguments[1]?arguments[1]:4),i=e.replace(/\t/g,o),a=me(i,(function(e,o){return function isCollapsibleWhitespace$1(e){return-1!==" \f\t\v".indexOf(e)}(o)||o===Lo?e.pcIsSpace||""===e.str&&t||e.str.length===i.length-1&&n||function isNewline(e,t){return t<e.length&&t>=0&&_i(e[t])}(i,e.str.length+1)?{pcIsSpace:!1,str:e.str+Lo}:{pcIsSpace:!0,str:e.str+" "}:{pcIsSpace:_i(o),str:e.str+o}}),{pcIsSpace:!1,str:""});return a.str},Ri=function isWhitespace$1(e,t){return Co(e)&&Oi(e.data)&&!function hasWhitespacePreserveParent(e,t){var n=In.fromDom(t),o=In.fromDom(e);return oo(o,"pre,code",curry(Hn,n))}(e,t)},Ni=function isContent$1(e,t){return Si(e)&&!Ri(e,t)||function isNamedAnchor(e){return co(e)&&"A"===e.nodeName&&!e.hasAttribute("href")&&(e.hasAttribute("name")||e.hasAttribute("id"))}(e)||Mi(e)},Mi=po("data-mce-bookmark"),Bi=po("data-mce-bogus"),Ii=function hasAttributeValue(e,t){return function(n){return co(n)&&n.getAttribute(e)===t}}("data-mce-bogus","all"),Pi=function hasNonEditableParent(e){return Wn(In.fromDom(e)).exists((function(e){return!wr(e)}))},Li=function isEmpty$2(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return function isEmptyNode(e,t){var n=0;if(Ni(e,e))return!1;var o=e.firstChild;if(!o)return!0;var i=new io(o,e);do{if(t){if(Ii(o)){o=i.next(!0);continue}if(Bi(o)){o=i.next();continue}}if(Ao(o)&&Pi(o))return!1;if(Eo(o))n++,o=i.next();else{if(Ni(o,e))return!1;o=i.next()}}while(o);return n<=1}(e.dom,t)},Fi=function isNonHtmlElementRootName(e){return"svg"===e.toLowerCase()},Hi=function isNonHtmlElementRoot(e){return Fi(e.nodeName)},$i=function toScopeType(e){return"svg"===(null===e||void 0===e?void 0:e.nodeName)?"svg":"html"},zi=["svg"],Vi="data-mce-block",Ui=function makeSelectorFromSchemaMap(e){return ue(function elementNames(e){return fe(_e(e),(function(e){return!/[A-Z]/.test(e)}))}(e),(function(e){return"".concat(e,":")+ue(zi,(function(t){return"not(".concat(t," ").concat(e,")")})).join(":")})).join(",")},Zi=function updateTransparent(e,t){return F(t.querySelector(e))?(t.setAttribute(Vi,"true"),"inline-boundary"===t.getAttribute("data-mce-selected")&&t.removeAttribute("data-mce-selected"),!0):(t.removeAttribute(Vi),!1)},Wi=function updateBlockStateOnChildren(e,t){var n=Ui(e.getTransparentElements()),o=Ui(e.getBlockElements());return fe(t.querySelectorAll(n),(function(e){return Zi(o,e)}))},ji=function trimEdge(e,t){for(var n,o=t?"lastChild":"firstChild",i=e[o];i;i=i[o])if(Li(In.fromDom(i)))return void(null===(n=i.parentNode)||void 0===n||n.removeChild(i))},Gi=function splitInvalidChildren(e,t,n){var o=e.getBlockElements(),i=In.fromDom(t),a=function isBlock(e){return un(e)in o},u=function isRoot(e){return Hn(e,i)};ce(zr(n),(function(t){mr(t,a,u).each((function(n){var o=function children(e,t){return fe(Xn(e),t)}(t,(function(t){return a(t)&&!e.isValidChild(un(n),un(t))}));if(o.length>0){var i=Wn(n);ce(o,(function(e){mr(e,a,u).each((function(t){!function split$2(e,t){var n=document.createRange(),o=e.parentNode;if(o){n.setStartBefore(e),n.setEndBefore(t);var i=n.extractContents();ji(i,!0),n.setStartAfter(t),n.setEndAfter(e);var a=n.extractContents();ji(a,!1),Li(In.fromDom(i))||o.insertBefore(i,e),Li(In.fromDom(t))||o.insertBefore(t,e),Li(In.fromDom(a))||o.insertBefore(a,e),o.removeChild(e)}}(t.dom,e.dom)}))})),i.each((function(t){return Wi(e,t.dom)}))}}))}))},qi=function updateChildren(e,t){var n=Wi(e,t);Gi(e,t,n),function unwrapInvalidChildren(e,t,n){ce([].concat(m(n),m(Qi(e,t)?[t]:[])),(function(t){return ce(ro(In.fromDom(t),t.nodeName.toLowerCase()),(function(t){ea(e,t.dom)&&$r(t)}))}))}(e,t,n)},Ki=function updateElement(e,t){if(Ji(e,t)){var n=Ui(e.getBlockElements());Zi(n,t)}},Yi=function hasBlockAttr(e){return e.hasAttribute(Vi)},Xi=function isTransparentElementName(e,t){return $e(e.getTransparentElements(),t)},Ji=function isTransparentElement(e,t){return co(t)&&Xi(e,t.nodeName)},Qi=function isTransparentBlock(e,t){return Ji(e,t)&&Yi(t)},ea=function isTransparentInline(e,t){return Ji(e,t)&&!Yi(t)},ta=function isTransparentAstBlock(e,t){return 1===t.type&&Xi(e,t.name)&&D(t.attr(Vi))},na=Ft().browser,ra=function firstElement(e){return pe(e,fn)},oa=function hasChild(e,t){return e.children&&ie(e.children,t)},ia=function getPos(e,t,n){var o=0,i=0,a=e.ownerDocument;if(n=n||e,t){if(n===e&&t.getBoundingClientRect&&"static"===Or(In.fromDom(e),"position")){var u=t.getBoundingClientRect();return{x:o=u.left+(a.documentElement.scrollLeft||e.scrollLeft)-a.documentElement.clientLeft,y:i=u.top+(a.documentElement.scrollTop||e.scrollTop)-a.documentElement.clientTop}}for(var c=t;c&&c!==n&&c.nodeType&&!oa(c,n);){var s=c;o+=s.offsetLeft||0,i+=s.offsetTop||0,c=s.offsetParent}for(c=t.parentNode;c&&c!==n&&c.nodeType&&!oa(c,n);)o-=c.scrollLeft||0,i-=c.scrollTop||0,c=c.parentNode;i+=function getTableCaptionDeltaY(e){return na.isFirefox()&&"table"===un(e)?ra(Xn(e)).filter((function(e){return"caption"===un(e)})).bind((function(e){return ra(Yn(e)).map((function(t){var n=t.dom.offsetTop,o=e.dom.offsetTop,i=e.dom.offsetHeight;return n<=o?-i:0}))})).getOr(0):0}(In.fromDom(t))}return{x:o,y:i}},aa=function StyleSheetLoader(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=0,o={},i=In.fromDom(e),a=Vn(i),u=function addStyle(e){Ir(ur(i),e)},c=function removeStyle(e){var t=ur(i);yr(t,"#"+e).each(Hr)},s=function getOrCreateState(e){return He(o,e).getOrThunk((function(){return{id:"mce-u"+n++,passed:[],failed:[],count:0}}))},l=function load(e){return new Promise((function(n,i){var c,l=Kt._addCacheSuffix(e),d=s(l);o[l]=d,d.count++;var m=function resolve(e,t){ce(e,X),d.status=t,d.passed=[],d.failed=[],c&&(c.onload=null,c.onerror=null,c=null)},g=function passed(){return m(d.passed,2)},p=function failed(){return m(d.failed,3)};if(n&&d.passed.push(n),i&&d.failed.push(i),1!==d.status)if(2!==d.status)if(3!==d.status){d.status=1;var h=In.fromTag("link",a.dom);bn(h,{rel:"stylesheet",type:"text/css",id:d.id}),t.contentCssCors&&vn(h,"crossOrigin","anonymous"),t.referrerPolicy&&vn(h,"referrerpolicy",t.referrerPolicy),(c=h.dom).onload=g,c.onerror=p,u(h),vn(h,"href",l)}else p();else g()}))},d=function unload(e){var t=Kt._addCacheSuffix(e);He(o,t).each((function(e){0===--e.count&&(delete o[t],c(e.id))}))};return{load:l,loadRawCss:function loadRawCss(e,t){var n=s(e);o[e]=n,n.count++;var i=In.fromTag("style",a.dom);bn(i,{rel:"stylesheet",type:"text/css",id:n.id}),i.dom.innerHTML=t,u(i)},loadAll:function loadAll(e){return Promise.allSettled(ue(e,(function(e){return l(e).then(W(e))}))).then((function(e){var t=le(e,(function(e){return"fulfilled"===e.status}));return t.fail.length>0?Promise.reject(ue(t.fail,(function(e){return e.reason}))):ue(t.pass,(function(e){return e.value}))}))},unload:d,unloadRawCss:function unloadRawCss(e){He(o,e).each((function(t){0===--t.count&&(delete o[e],c(t.id))}))},unloadAll:function unloadAll(e){ce(e,(function(e){d(e)}))},_setReferrerPolicy:function _setReferrerPolicy(e){t.referrerPolicy=e},_setContentCssCors:function _setContentCssCors(e){t.contentCssCors=e}}},ua=function create$d(){var e=new WeakMap;return{forElement:function forElement(t,n){var o=ar(t).dom;return ee.from(e.get(o)).getOrThunk((function(){var t=aa(o,n);return e.set(o,t),t}))}}}(),ca=function isInlineContent(e,t,n){return F(e)&&(Ni(e,t)||n.isInline(e.nodeName.toLowerCase()))},sa=function isBookmarkNode$2(e){return function isSpan(e){return"span"===e.nodeName.toLowerCase()}(e)&&"bookmark"===e.getAttribute("data-mce-type")},la=function isKeepTextNode(e,t,n){return Co(e)&&e.data.length>0&&function surroundedByInlineContent(e,t,n){var o=new io(e,t).prev(!1),i=new io(e,t).next(!1),a=P(o)||ca(o,t,n),u=P(i)||ca(i,t,n);return a&&u}(e,t,n)},fa=function trimNode(e,t,n,o){var i,a=o||t;if(co(t)&&sa(t))return t;for(var u=t.childNodes,c=u.length-1;c>=0;c--)trimNode(e,u[c],n,a);if(co(t)){var s=t.childNodes;1===s.length&&sa(s[0])&&(null===(i=t.parentNode)||void 0===i||i.insertBefore(s[0],t))}return function isDocument(e){return To(e)||ko(e)}(t)||Ni(t,a)||function isKeepElement(e){return!!co(e)&&e.childNodes.length>0}(t)||la(t,a,n)||e.remove(t),t},da=Kt.makeMap,ma=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,ga=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,pa=/[<>&\"\']/g,ha=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,va={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"},ba={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ya={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},Ca=function buildEntitiesLookup(e,t){var n={};if(e){var o=e.split(",");t=t||10;for(var i=0;i<o.length;i+=2){var a=String.fromCharCode(parseInt(o[i],t));if(!ba[a]){var u="&"+o[i+1]+";";n[a]=u,n[u]=a}}return n}},wa=Ca("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),xa=function encodeRaw(e,t){return e.replace(t?ma:ga,(function(e){return ba[e]||e}))},Sa=function encodeNumeric(e,t){return e.replace(t?ma:ga,(function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":ba[e]||"&#"+e.charCodeAt(0)+";"}))},ka=function encodeNamed(e,t,n){var o=n||wa;return e.replace(t?ma:ga,(function(e){return ba[e]||o[e]||e}))},Ta={encodeRaw:xa,encodeAllRaw:function encodeAllRaw(e){return(""+e).replace(pa,(function(e){return ba[e]||e}))},encodeNumeric:Sa,encodeNamed:ka,getEncodeFunc:function getEncodeFunc(e,t){var n=Ca(t)||wa,o=da(e.replace(/\+/g,","));return o.named&&o.numeric?function encodeNamedAndNumeric(e,t){return e.replace(t?ma:ga,(function(e){return void 0!==ba[e]?ba[e]:void 0!==n[e]?n[e]:e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":"&#"+e.charCodeAt(0)+";"}))}:o.named?t?function encodeCustomNamed(e,t){return ka(e,t,n)}:ka:o.numeric?Sa:xa},decode:function decode(e){return e.replace(ha,(function(e,t){return t?(t="x"===t.charAt(0).toLowerCase()?parseInt(t.substr(1),16):parseInt(t,10))>65535?(t-=65536,String.fromCharCode(55296+(t>>10),56320+(1023&t))):va[t]||String.fromCharCode(t):ya[e]||wa[e]||function nativeDecode(e){var t=In.fromTag("div").dom;return t.innerHTML=e,t.textContent||t.innerText||e}(e)}))}},Ea=function split$1(e,t){return(e=Kt.trim(e))?e.split(t||" "):[]},Oa=function patternToRegExp(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")},Aa=function parseValidElementsRules(e,t){var n=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return be(Ea(t,","),(function(t){var o=n.exec(t);if(o){var i=o[1],a=o[2],u=o[3],c=o[4],s=o[5],l={attributes:{},attributesOrder:[]};if(e.each((function(e){return function cloneAttributesInto(e,t){var n;Re(e.attributes,(function(e,n){t.attributes[n]=e})),(n=t.attributesOrder).push.apply(n,m(e.attributesOrder))}(e,l)})),"#"===i?l.paddEmpty=!0:"-"===i&&(l.removeEmpty=!0),"!"===c&&(l.removeEmptyAttrs=!0),s&&function parseValidElementsAttrDataIntoElement(e,t){var n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,o=/[*?+]/,i=t.attributes,a=t.attributesOrder;ce(Ea(e,"|"),(function(e){var u=n.exec(e);if(u){var c={},s=u[1],l=u[2].replace(/[\\:]:/g,":"),d=u[3],m=u[4];if("!"===s&&(t.attributesRequired=t.attributesRequired||[],t.attributesRequired.push(l),c.required=!0),"-"===s)return delete i[l],void a.splice(Kt.inArray(a,l),1);if(d&&("="===d?(t.attributesDefault=t.attributesDefault||[],t.attributesDefault.push({name:l,value:m}),c.defaultValue=m):"~"===d?(t.attributesForced=t.attributesForced||[],t.attributesForced.push({name:l,value:m}),c.forcedValue=m):"<"===d&&(c.validValues=Kt.makeMap(m,"?"))),o.test(l)){var g=c;t.attributePatterns=t.attributePatterns||[],g.pattern=Oa(l),t.attributePatterns.push(g)}else i[l]||a.push(l),i[l]=c}}))}(s,l),u&&(l.outputName=a),"@"===a){if(!e.isNone())return[];e=ee.some(l)}return[u?{name:a,element:l,aliasName:u}:{name:a,element:l}]}return[]}))},_a={},Da=Kt.makeMap,Ra=Kt.each,Na=Kt.extend,Ma=Kt.explode,Ba=function createMap(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Da(e," ",Da(e.toUpperCase()," "));return Na(n,t)},Ia=function getTextRootBlockElements(e){return Ba("td th li dt dd figcaption caption details summary",e.getTextBlockElements())},Pa=function compileElementMap(e,t){if(e){var n={};return D(e)&&(e={"*":e}),Ra(e,(function(e,o){n[o]=n[o.toUpperCase()]="map"===t?Da(e,/[, ]/):Ma(e,/[, ]/)})),n}},La=function Schema(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={},o={},i=[],a={},u={},c=function createLookupTable(e,n,o){var i=t[e];if(i)return Da(i,/[, ]/,Da(i.toUpperCase(),/[, ]/));var a=_a[e];return a||(a=Ba(n,o),_a[e]=a),a},s=null!==(e=t.schema)&&void 0!==e?e:"html5",l=function makeSchema(e){var t=function getElementSetsAsStrings(e){var t,n,o;t="id accesskey class dir lang style tabindex title role",n="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",o="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==e&&(t+=" contenteditable contextmenu draggable dropzone hidden spellcheck translate",n+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",o+=" audio canvas command datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==e&&(t+=" xml:lang",o=[o,"acronym applet basefont big font strike tt"].join(" "),n=[n,"center dir isindex noframes"].join(" "));var i=[n,o].join(" ");return{globalAttributes:t,blockContent:n,phrasingContent:o,flowContent:i}}(e),n=t.globalAttributes,o=t.phrasingContent,i=t.flowContent,a={},u=function addElement(e,t,n){a[e]={attributes:xe(t,W({})),attributesOrder:t,children:xe(n,W({}))}},c=function add(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=Ea(arguments.length>2&&void 0!==arguments[2]?arguments[2]:""),i=Ea(e),a=i.length,c=Ea([n,t].join(" "));a--;)u(i[a],c.slice(),o)},s=function addAttrs(e,t){for(var n=Ea(e),o=Ea(t),i=n.length;i--;)for(var u=a[n[i]],c=0,s=o.length;c<s;c++)u.attributes[o[c]]={},u.attributesOrder.push(o[c])};"html5-strict"!==e&&(ce(Ea("acronym applet basefont big font strike tt"),(function(e){c(e,"",o)})),ce(Ea("center dir isindex noframes"),(function(e){c(e,"",i)})));return c("html","manifest","head body"),c("head","","base command link meta noscript script style title"),c("title hr noscript br"),c("base","href target"),c("link","href rel media hreflang type sizes hreflang"),c("meta","name http-equiv content charset"),c("style","media type scoped"),c("script","src async defer type charset"),c("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i),c("dd div","",i),c("address dt caption","","html4"===e?o:i),c("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",o),c("blockquote","cite",i),c("ol","reversed start type","li"),c("ul","","li"),c("li","value",i),c("dl","","dt dd"),c("a","href target rel media hreflang type","html4"===e?o:i),c("q","cite",o),c("ins del","cite datetime",i),c("img","src sizes srcset alt usemap ismap width height"),c("iframe","src name width height",i),c("embed","src type width height"),c("object","data type typemustmatch name usemap form width height",[i,"param"].join(" ")),c("param","name value"),c("map","name",[i,"area"].join(" ")),c("area","alt coords shape href target rel media hreflang type"),c("table","border","caption colgroup thead tfoot tbody tr"+("html4"===e?" col":"")),c("colgroup","span","col"),c("col","span"),c("tbody thead tfoot","","tr"),c("tr","","td th"),c("td","colspan rowspan headers",i),c("th","colspan rowspan headers scope abbr",i),c("form","accept-charset action autocomplete enctype method name novalidate target",i),c("fieldset","disabled form name",[i,"legend"].join(" ")),c("label","form for",o),c("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),c("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===e?i:o),c("select","disabled form multiple name required size","option optgroup"),c("optgroup","disabled label","option"),c("option","disabled label selected value"),c("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),c("menu","type label",[i,"li"].join(" ")),c("noscript","",i),"html4"!==e&&(c("wbr"),c("ruby","",[o,"rt rp"].join(" ")),c("figcaption","",i),c("mark rt rp bdi","",o),c("summary","",[o,"h1 h2 h3 h4 h5 h6"].join(" ")),c("canvas","width height",i),c("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" ")),c("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" ")),c("picture","","img source"),c("source","src srcset type media sizes"),c("track","kind src srclang label default"),c("datalist","",[o,"option"].join(" ")),c("article section nav aside main header footer","",i),c("hgroup","","h1 h2 h3 h4 h5 h6"),c("figure","",[i,"figcaption"].join(" ")),c("time","datetime",o),c("dialog","open",i),c("command","type label icon disabled checked radiogroup command"),c("output","for form name",o),c("progress","value max",o),c("meter","value min max low high optimum",o),c("details","open",[i,"summary"].join(" ")),c("keygen","autofocus challenge disabled form keytype name"),u("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==e&&(s("script","language xml:space"),s("style","xml:space"),s("object","declare classid code codebase codetype archive standby align border hspace vspace"),s("embed","align name hspace vspace"),s("param","valuetype type"),s("a","charset name rev shape coords"),s("br","clear"),s("applet","codebase archive code object alt name width height align hspace vspace"),s("img","name longdesc align border hspace vspace"),s("iframe","longdesc frameborder marginwidth marginheight scrolling align"),s("font basefont","size color face"),s("input","usemap align"),s("select"),s("textarea"),s("h1 h2 h3 h4 h5 h6 div p legend caption","align"),s("ul","type compact"),s("li","type"),s("ol dl menu dir","compact"),s("pre","width xml:space"),s("hr","align noshade size width"),s("isindex","prompt"),s("table","summary width frame rules cellspacing cellpadding align bgcolor"),s("col","width align char charoff valign"),s("colgroup","width align char charoff valign"),s("thead","align char charoff valign"),s("tr","align char charoff valign bgcolor"),s("th","axis align char charoff valign nowrap bgcolor width height"),s("form","accept"),s("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),s("tfoot","align char charoff valign"),s("tbody","align char charoff valign"),s("area","nohref"),s("body","background bgcolor text link vlink alink")),"html4"!==e&&(s("input button select textarea","autofocus"),s("input textarea","placeholder"),s("a","download"),s("link script img","crossorigin"),s("img","loading"),s("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==e&&ce([a.video,a.audio],(function(e){delete e.children.audio,delete e.children.video})),ce(Ea("a form meter progress dfn"),(function(e){a[e]&&delete a[e].children[e]})),delete a.caption.children.table,delete a.script,a}(s);!1===t.verify_html&&(t.valid_elements="*[*]");var d=Pa(t.valid_styles),m=Pa(t.invalid_styles,"map"),g=Pa(t.valid_classes,"map"),p=c("whitespace_elements","pre script noscript style textarea video audio iframe object code"),h=c("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),v=c("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),b=c("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),y="td th iframe video audio object script code",C=c("non_empty_elements",y+" pre svg",v),w=c("move_caret_before_on_enter_elements",y+" table",v),x="h1 h2 h3 h4 h5 h6",S=c("text_block_elements",x+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),k=c("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",S),T=c("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),E=c("transparent_elements","a ins del canvas map"),O=c("wrap_block_elements","pre "+x);Ra("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),(function(e){u[e]=new RegExp("</"+e+"[^>]*>","gi")}));var A=function addValidElements(e){var t=ee.from(n["@"]),o=/[*?+]/;ce(Aa(t,null!==e&&void 0!==e?e:""),(function(e){var t=e.name,a=e.element,u=e.aliasName;if(u&&(n[u]=a),o.test(t)){var c=a;c.pattern=Oa(t),i.push(c)}else n[t]=a}))},D=function setValidElements(e){i=[],ce(_e(n),(function(e){delete n[e]})),A(e)},R=function addCustomElements(e){delete _a.text_block_elements,delete _a.block_elements,ce(function parseCustomElementsRules(e){var t=/^(~)?(.+)$/;return be(Ea(e,","),(function(e){var n=t.exec(e);if(n){var o="~"===n[1];return[{inline:o,cloneName:o?"span":"div",name:n[2]}]}return[]}))}(null!==e&&void 0!==e?e:""),(function(e){var t=e.inline,i=e.name,u=e.cloneName;if(o[i]=o[u],a[i]=u,C[i.toUpperCase()]={},C[i]={},t||(k[i.toUpperCase()]={},k[i]={}),!n[i]){var c=n[u];delete(c=Na({},c)).removeEmptyAttrs,delete c.removeEmpty,n[i]=c}Re(o,(function(e,t){e[u]&&(o[t]=e=Na({},o[t]),e[i]=e[u])}))}))},N=function addValidChildren(e){ce(function parseValidChildrenRules(e){var t=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return be(Ea(e,","),(function(e){var n=t.exec(e);if(n){var o=n[1],i=o?function prefixToOperation(e){return"-"===e?"remove":"add"}(o):"replace";return[{operation:i,name:n[2],validChildren:Ea(n[3],"|")}]}return[]}))}(null!==e&&void 0!==e?e:""),(function(e){var t=e.operation,n=e.name,i=e.validChildren,a="replace"===t?{"#comment":{}}:o[n];ce(i,(function(e){"remove"===t?delete a[e]:a[e]={}})),o[n]=a}))},M=function getElementRule(e){var t=n[e];if(t)return t;for(var o=i.length;o--;){var a=i[o];if(a.pattern.test(e))return a}};t.valid_elements?(D(t.valid_elements),Ra(l,(function(e,t){o[t]=e.children}))):(Ra(l,(function(e,t){n[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},o[t]=e.children})),Ra(Ea("strong/b em/i"),(function(e){var t=Ea(e,"/");n[t[1]].outputName=t[0]})),Ra(T,(function(e,o){n[o]&&(t.padd_empty_block_inline_children&&(n[o].paddInEmptyBlock=!0),n[o].removeEmpty=!0)})),Ra(Ea("ol ul blockquote a table tbody"),(function(e){n[e]&&(n[e].removeEmpty=!0)})),Ra(Ea("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),(function(e){n[e]&&(n[e].paddEmpty=!0)})),Ra(Ea("span"),(function(e){n[e].removeEmptyAttrs=!0}))),delete n.svg,R(t.custom_elements),N(t.valid_children),A(t.extended_valid_elements),N("+ol[ul|ol],+ul[ul|ol]"),Ra({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},(function(e,t){n[t]&&(n[t].parentsRequired=Ea(e))})),t.invalid_elements&&Ra(Ma(t.invalid_elements),(function(e){n[e]&&delete n[e]})),M("span")||A("span[!data-mce-type|*]");var B=W(d),I=W(m),P=W(g),L=W(b),F=W(k),H=W(S),$=W(T),z=W(Object.seal(v)),V=W(h),U=W(C),Z=W(w),j=W(p),G=W(E),q=W(O),K=W(Object.seal(u)),Y=function isValid(e,t){var n=M(e);if(n){if(!t)return!0;if(n.attributes[t])return!0;var o=n.attributePatterns;if(o)for(var i=o.length;i--;)if(o[i].pattern.test(t))return!0}return!1},X=function isBlock(e){return $e(F(),e)},J=function isInline(e){return!it(e,"#")&&Y(e)&&!X(e)},Q=W(a);return{type:s,children:o,elements:n,getValidStyles:B,getValidClasses:P,getBlockElements:F,getInvalidStyles:I,getVoidElements:z,getTextBlockElements:H,getTextInlineElements:$,getBoolAttrs:L,getElementRule:M,getSelfClosingElements:V,getNonEmptyElements:U,getMoveCaretBeforeOnEnterElements:Z,getWhitespaceElements:j,getTransparentElements:G,getSpecialElements:K,isValidChild:function isValidChild(e,t){var n=o[e.toLowerCase()];return!(!n||!n[t.toLowerCase()])},isValid:Y,isBlock:X,isInline:J,isWrapper:function isWrapper(e){return $e(q(),e)||J(e)},getCustomElements:Q,addValidElements:A,setValidElements:D,addCustomElements:R,addValidChildren:N}},Fa=function normalizeHex(e){return rt(e,"#").toUpperCase()},Ha=function toHex(e){var t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},$a=function fromRgba(e){return function hexColour(e){return{value:Fa(e)}}(Ha(e.red)+Ha(e.green)+Ha(e.blue))},za=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Va=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Ua=function rgbaColour(e,t,n,o){return{red:e,green:t,blue:n,alpha:o}},Za=function fromStringValues(e,t,n,o){var i=parseInt(e,10),a=parseInt(t,10),u=parseInt(n,10),c=parseFloat(o);return Ua(i,a,u,c)},Wa=function fromString(e){if("transparent"===e)return ee.some(Ua(0,0,0,0));var t=za.exec(e);if(null!==t)return ee.some(Za(t[1],t[2],t[3],"1"));var n=Va.exec(e);return null!==n?ee.some(Za(n[1],n[2],n[3],n[4])):ee.none()},ja=function rgbaToHexString(e){return Wa(e).map($a).map((function(e){return"#"+e.value})).getOr(e)},Ga=function Styles(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},o=arguments.length>1?arguments[1]:void 0,i=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,a=/\s*([^:]+):\s*([^;]+);?/g,u=/\s+$/,c={},s=Po;o&&(e=o.getValidStyles(),t=o.getInvalidStyles());for(var l="\\\" \\' \\; \\: ; : \ufeff".split(" "),d=0;d<l.length;d++)c[l[d]]=s+d,c[s+d]=l[d];var m={parse:function parse(e){var t={},o=!1,l=n.url_converter,d=n.url_converter_scope||m,g=function compress(e,n,o){var i=t[e+"-top"+n];if(i){var a=t[e+"-right"+n];if(a){var u=t[e+"-bottom"+n];if(u){var c=t[e+"-left"+n];if(c){for(var s=[i,a,u,c],l=s.length-1;l--&&s[l]===s[l+1];);l>-1&&o||(t[e+n]=-1===l?s[0]:s.join(" "),delete t[e+"-top"+n],delete t[e+"-right"+n],delete t[e+"-bottom"+n],delete t[e+"-left"+n])}}}}},p=function canCompress(e){var n=t[e];if(n){for(var o=n.indexOf(",")>-1?[n]:n.split(" "),i=o.length;i--;)if(o[i]!==o[0])return!1;return t[e]=o[0],!0}},h=function encode(e){return o=!0,c[e]},v=function decode(e,t){return o&&(e=e.replace(/\uFEFF[0-9]/g,(function(e){return c[e]}))),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e},b=function decodeSingleHexSequence(e){return String.fromCharCode(parseInt(e.slice(1),16))},y=function decodeHexSequences(e){return e.replace(/\\[0-9a-f]+/gi,b)},C=function processUrl(e,t,o,i,a,u){if(a=a||u)return"'"+(a=v(a)).replace(/\'/g,"\\'")+"'";if(t=v(t||o||i||""),!n.allow_script_urls){var c=t.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(c))return"";if(!n.allow_svg_data_urls&&/^data:image\/svg/i.test(c))return""}return l&&(t=l.call(d,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')"};if(e){var w;e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,h).replace(/\"[^\"]+\"|\'[^\']+\'/g,(function(e){return e.replace(/[;:]/g,h)}));for(var x=function _loop(){a.lastIndex=w.index+w[0].length;var e=w[1].replace(u,"").toLowerCase(),c=w[2].replace(u,"");if(e&&c){if(e=y(e),c=y(c),-1!==e.indexOf(s)||-1!==e.indexOf('"'))return"continue";if(!n.allow_script_urls&&("behavior"===e||/expression\s*\(|\/\*|\*\//.test(c)))return"continue";"font-weight"===e&&"700"===c?c="bold":"color"!==e&&"background-color"!==e||(c=c.toLowerCase()),D(n.force_hex_color)&&"off"!==n.force_hex_color&&Wa(c).each((function(e){"always"!==n.force_hex_color&&1!==e.alpha||(c=ja(function toString(e){return"rgba(".concat(e.red,",").concat(e.green,",").concat(e.blue,",").concat(e.alpha,")")}(e)))})),c=c.replace(i,C),t[e]=o?v(c,!0):c}};w=a.exec(e);)x();g("border","",!0),g("border","-width"),g("border","-color"),g("border","-style"),g("padding",""),g("margin",""),function compress2(e,n,o,i){p(n)&&p(o)&&p(i)&&(t[e]=t[n]+" "+t[o]+" "+t[i],delete t[n],delete t[o],delete t[i])}("border","border-width","border-style","border-color"),"medium none"===t.border&&delete t.border,"none"===t["border-image"]&&delete t["border-image"]}return t},serialize:function serialize(n,o){var i="",a=function serializeStyles(e,t){var o=t[e];if(o)for(var a=0,u=o.length;a<u;a++){var c=o[a],s=n[c];s&&(i+=(i.length>0?" ":"")+c+": "+s+";")}};return o&&e?(a("*",e),a(o,e)):Re(n,(function(e,n){e&&function isValid(e,n){if(!t||!n)return!0;var o=t["*"];return(!o||!o[e])&&!((o=t[n])&&o[e])}(n,o)&&(i+=(i.length>0?" ":"")+n+": "+e+";")})),i}};return m},qa={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Ka=function needsNormalizing(e){return L(e.preventDefault)||function isNativeEvent(e){return e instanceof Event||H(e.initEvent)}(e)},Ya=function clone$3(e,t){var n=null!==t&&void 0!==t?t:{};for(var o in e)$e(qa,o)||(n[o]=e[o]);return F(e.composedPath)&&(n.composedPath=function(){return e.composedPath()}),F(e.getModifierState)&&(n.getModifierState=function(t){return e.getModifierState(t)}),F(e.getTargetRanges)&&(n.getTargetRanges=function(){return e.getTargetRanges()}),n},Xa=function normalize$3(e,t,n,o){var i,a=Ya(t,o);return a.type=e,L(a.target)&&(a.target=null!==(i=a.srcElement)&&void 0!==i?i:n),Ka(t)&&(a.preventDefault=function(){a.defaultPrevented=!0,a.isDefaultPrevented=Q,H(t.preventDefault)&&t.preventDefault()},a.stopPropagation=function(){a.cancelBubble=!0,a.isPropagationStopped=Q,H(t.stopPropagation)&&t.stopPropagation()},a.stopImmediatePropagation=function(){a.isImmediatePropagationStopped=Q,a.stopPropagation()},function hasIsDefaultPrevented(e){return e.isDefaultPrevented===Q||e.isDefaultPrevented===J}(a)||(a.isDefaultPrevented=!0===a.defaultPrevented?Q:J,a.isPropagationStopped=!0===a.cancelBubble?Q:J,a.isImmediatePropagationStopped=J)),a},Ja=/^(?:mouse|contextmenu)|click/,Qa=function addEvent(e,t,n,o){e.addEventListener(t,n,o||!1)},eu=function removeEvent(e,t,n,o){e.removeEventListener(t,n,o||!1)},tu=function fix(e,t){var n=Xa(e.type,e,document,t);if(function isMouseEvent(e){return F(e)&&Ja.test(e.type)}(e)&&P(e.pageX)&&!P(e.clientX)){var o=n.target.ownerDocument||document,i=o.documentElement,a=o.body,u=n;u.pageX=e.clientX+(i&&i.scrollLeft||a&&a.scrollLeft||0)-(i&&i.clientLeft||a&&a.clientLeft||0),u.pageY=e.clientY+(i&&i.scrollTop||a&&a.scrollTop||0)-(i&&i.clientTop||a&&a.clientTop||0)}return n},ru=function bindOnReady(e,t,n){var o=e.document,i={type:"ready"};if(n.domLoaded)t(i);else{var a=function readyHandler(){eu(e,"DOMContentLoaded",readyHandler),eu(e,"load",readyHandler),n.domLoaded||(n.domLoaded=!0,t(i)),e=null};!function isDocReady(){return"complete"===o.readyState||"interactive"===o.readyState&&o.body}()?Qa(e,"DOMContentLoaded",a):a(),n.domLoaded||Qa(e,"load",a)}},ou=function(){function EventUtils(){p(this,EventUtils),this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}return h(EventUtils,[{key:"bind",value:function bind(e,t,n,o){var i,a,u=this,c=window,s=function defaultNativeHandler(e){u.executeHandlers(tu(e||c.event),a)};if(!e||Co(e)||So(e))return n;e[u.expando]?a=e[u.expando]:(a=u.count++,e[u.expando]=a,u.events[a]={}),o=o||e;for(var l=t.split(" "),d=l.length;d--;){var m=l[d],g=s,p=!1,h=!1;"DOMContentLoaded"===m&&(m="ready"),u.domLoaded&&"ready"===m&&"complete"===e.readyState?n.call(o,tu({type:m})):(u.hasFocusIn||"focusin"!==m&&"focusout"!==m||(p=!0,h="focusin"===m?"focus":"blur",g=function nativeHandler(e){var t=tu(e||c.event);t.type="focus"===t.type?"focusin":"focusout",u.executeHandlers(t,a)}),(i=u.events[a][m])?"ready"===m&&u.domLoaded?n(tu({type:m})):i.push({func:n,scope:o}):(u.events[a][m]=i=[{func:n,scope:o}],i.fakeName=h,i.capture=p,i.nativeHandler=g,"ready"===m?ru(e,g,u):Qa(e,h||m,g,p)))}return e=i=null,n}},{key:"unbind",value:function unbind(e,t,n){if(!e||Co(e)||So(e))return this;var o=e[this.expando];if(o){var i=this.events[o];if(t)for(var a=t.split(" "),u=a.length;u--;){var c=a[u],s=i[c];if(s){if(n)for(var l=s.length;l--;)if(s[l].func===n){var d=s.nativeHandler,m=s.fakeName,g=s.capture,p=s.slice(0,l).concat(s.slice(l+1));p.nativeHandler=d,p.fakeName=m,p.capture=g,i[c]=p}n&&0!==s.length||(delete i[c],eu(e,s.fakeName||c,s.nativeHandler,s.capture))}}else Re(i,(function(t,n){eu(e,t.fakeName||n,t.nativeHandler,t.capture)})),i={};for(var h in i)if($e(i,h))return this;delete this.events[o];try{delete e[this.expando]}catch(v){e[this.expando]=null}}return this}},{key:"fire",value:function fire(e,t,n){return this.dispatch(e,t,n)}},{key:"dispatch",value:function dispatch(e,t,n){if(!e||Co(e)||So(e))return this;var o=tu({type:t,target:e},n);do{var i=e[this.expando];i&&this.executeHandlers(o,i),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!o.isPropagationStopped());return this}},{key:"clean",value:function clean(e){if(!e||Co(e)||So(e))return this;if(e[this.expando]&&this.unbind(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName){this.unbind(e);for(var t=e.getElementsByTagName("*"),n=t.length;n--;)(e=t[n])[this.expando]&&this.unbind(e)}return this}},{key:"destroy",value:function destroy(){this.events={}}},{key:"cancel",value:function cancel(e){return e&&(e.preventDefault(),e.stopImmediatePropagation()),!1}},{key:"executeHandlers",value:function executeHandlers(e,t){var n=this.events[t],o=n&&n[e.type];if(o)for(var i=0,a=o.length;i<a;i++){var u=o[i];if(u&&!1===u.func.call(u.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}}}]),EventUtils}();ou.Event=new ou;var iu=Kt.each,au=Kt.grep,uu="data-mce-style",cu=Kt.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),su=function legacySetAttribute(e,t,n){L(n)||""===n?xn(e,t):vn(e,t,n)},lu=function camelCaseToHyphens(e){return e.replace(/[A-Z]/g,(function(e){return"-"+e.toLowerCase()}))},fu=function findNodeIndex(e,t){var n=0;if(e)for(var o=e.nodeType,i=e.previousSibling;i;i=i.previousSibling){var a=i.nodeType;(!t||!Co(i)||a!==o&&i.data.length)&&(n++,o=a)}return n},du=function updateInternalStyleAttr(e,t){var n=yn(t,"style"),o=e.serialize(e.parse(n),un(t));su(t,uu,o)},mu=function applyStyle$1(e,t,n){var o=lu(t);L(n)||""===n?Rr(e,o):Tr(e,o,function convertStyleToString(e,t){return $(e)?$e(cu,t)?e+"":e+"px":e}(n,o))},gu=function DOMUtils(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={},o=window,i={},a=0,u=ua.forElement(In.fromDom(e),{contentCssCors:t.contentCssCors,referrerPolicy:t.referrerPolicy}),c=[],s=t.schema?t.schema:La({}),l=Ga({url_converter:t.url_converter,url_converter_scope:t.url_converter_scope,force_hex_color:t.force_hex_color},t.schema),m=t.ownEvents?new ou:ou.Event,g=s.getBlockElements(),p=function get(t){return t&&e&&D(t)?e.getElementById(t):t},h=function _get(e){var t=p(e);return F(t)?In.fromDom(t):null},v=function getAttrib(e,t){var n,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",i=h(e);if(F(i)&&fn(i)){var a=q[t];n=a&&a.get?a.get(i.dom,t):yn(i,t)}return F(n)?n:o},b=function getAttribs(e){var t=p(e);return L(t)?[]:t.attributes},y=function setAttrib(e,n,o){O(e,(function(e){if(co(e)){var i=In.fromDom(e),a=""===o?null:o,u=yn(i,n),c=q[n];c&&c.set?c.set(i.dom,a,n):su(i,n,a),u!==a&&t.onSetAttrib&&t.onSetAttrib({attrElm:i.dom,attrName:n,attrValue:a})}}))},C=function getRoot(){return t.root_element||e.body},w=function getPos$1(t,n){return ia(e.body,p(t),n)},x=function getStyle(e,t,n){var o=p(e);if(!L(o)&&(so(o)||function isSVGElement(e){return co(e)&&"http://www.w3.org/2000/svg"===e.namespaceURI}(o)))return n?Or(In.fromDom(o),lu(t)):("float"===(t=t.replace(/-(\D)/g,(function(e,t){return t.toUpperCase()})))&&(t="cssFloat"),o.style?o.style[t]:void 0)},S=function getSize(e){var t=p(e);if(!t)return{w:0,h:0};var n=x(t,"width"),o=x(t,"height");return n&&-1!==n.indexOf("px")||(n="0"),o&&-1!==o.indexOf("px")||(o="0"),{w:parseInt(n,10)||t.offsetWidth||t.clientWidth,h:parseInt(o,10)||t.offsetHeight||t.clientHeight}},k=function is(e,t){if(!e)return!1;var n=M(e)?e:[e];return ae(n,(function(e){return Ln(In.fromDom(e),t)}))},T=function getParents(e,t,n,o){var i=[],a=p(e);o=void 0===o;var u=n||("BODY"!==C().nodeName?C().parentNode:null);if(D(t))if("*"===t)t=co;else{var c=t;t=function selector(e){return k(e,c)}}for(;a&&!(a===u||L(a.nodeType)||ko(a)||To(a));){if(!t||t(a)){if(!o)return[a];i.push(a)}a=a.parentNode}return o?i:null},E=function _findSib(e,t,n){var o=t;if(e){D(t)&&(o=function func(e){return k(e,t)});for(var i=e[n];i;i=i[n])if(H(o)&&o(i))return i}return null},O=function run(e,t,n){var o=null!==n&&void 0!==n?n:this;if(M(e)){var i=[];return iu(e,(function(e,n){var a=p(e);a&&i.push(t.call(o,a,n))})),i}var a=p(e);return!!a&&t.call(o,a)},A=function setAttribs(e,t){O(e,(function(e){Re(t,(function(t,n){y(e,n,t)}))}))},R=function setHTML(e,t){O(e,(function(e){var n=In.fromDom(e);Ur(n,t)}))},N=function add(t,n,o,i,a){return O(t,(function(t){var u=D(n)?e.createElement(n):n;return F(o)&&A(u,o),i&&(!D(i)&&i.nodeType?u.appendChild(i):D(i)&&R(u,i)),a?u:t.appendChild(u)}))},B=function create(t,n,o){return N(e.createElement(t),t,n,o,!0)},I=Ta.encodeAllRaw,P=function remove(e,t){return O(e,(function(e){var n=In.fromDom(e);return t&&ce(Xn(n),(function(e){dn(e)&&0===e.dom.length?Hr(e):Nr(n,e)})),Hr(n),n.dom}))},$=function toggleClass(e,t,n){O(e,(function(e){if(co(e)){var o=In.fromDom(e),i=t.split(" ");ce(i,(function(e){F(n)?(n?_n:Rn)(o,e):Nn(o,e)}))}}))},z=function replace(e,t,n){return O(t,(function(o){var i,a=M(t)?e.cloneNode(!0):e;return n&&iu(au(o.childNodes),(function(e){a.appendChild(e)})),null===(i=o.parentNode)||void 0===i||i.replaceChild(a,o),o}))},U=function isNonEmptyElement(e){if(co(e)){var t="a"===e.nodeName.toLowerCase()&&!v(e,"href")&&v(e,"id");if(v(e,"name")||v(e,"data-mce-bookmark")||t)return!0}return!1},Z=function createRng(){return e.createRange()},j=function getContentEditable(e){if(e&&so(e)){var t=e.getAttribute("data-mce-contenteditable");return t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null}return null},G={doc:e,settings:t,win:o,files:i,stdMode:!0,boxModel:!0,styleSheetLoader:u,boundEvents:c,styles:l,schema:s,events:m,isBlock:function isBlock(e){return D(e)?$e(g,e):co(e)&&($e(g,e.nodeName)||Qi(s,e))},root:null,clone:function clone(e,t){return e.cloneNode(t)},getRoot:C,getViewPort:function getViewPort(e){var t=eo(e);return{x:t.x,y:t.y,w:t.width,h:t.height}},getRect:function getRect(e){var t=p(e),n=w(t),o=S(t);return{x:n.x,y:n.y,w:o.w,h:o.h}},getSize:S,getParent:function getParent(e,t,n){var o=T(e,t,n,!1);return o&&o.length>0?o[0]:null},getParents:T,get:p,getNext:function getNext(e,t){return E(e,t,"nextSibling")},getPrev:function getPrev(e,t){return E(e,t,"previousSibling")},select:function select(n,o){var i,a,u=null!==(a=null!==(i=p(o))&&void 0!==i?i:t.root_element)&&void 0!==a?a:e;return function isParentNode(e){return H(e.querySelectorAll)}(u)?Oe(u.querySelectorAll(n)):[]},is:k,add:N,create:B,createHTML:function createHTML(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o="<"+e;for(var i in t)ze(t,i)&&(o+=" "+i+'="'+I(t[i])+'"');return dt(n)&&$e(s.getVoidElements(),e)?o+" />":o+">"+n+"</"+e+">"},createFragment:function createFragment(t){var n,o=e.createElement("div"),i=e.createDocumentFragment();for(i.appendChild(o),t&&(o.innerHTML=t);n=o.firstChild;)i.appendChild(n);return i.removeChild(o),i},remove:P,setStyle:function setStyle(e,n,o){O(e,(function(e){var i=In.fromDom(e);mu(i,n,o),t.update_styles&&du(l,i)}))},getStyle:x,setStyles:function setStyles(e,n){O(e,(function(e){var o=In.fromDom(e);Re(n,(function(e,t){mu(o,t,e)})),t.update_styles&&du(l,o)}))},removeAllAttribs:function removeAllAttribs(e){return O(e,(function(e){for(var t=e.attributes,n=t.length-1;n>=0;n--)e.removeAttributeNode(t.item(n))}))},setAttrib:y,setAttribs:A,getAttrib:v,getPos:w,parseStyle:function parseStyle(e){return l.parse(e)},serializeStyle:function serializeStyle(e,t){return l.serialize(e,t)},addStyle:function addStyle(t){if(G!==DOMUtils.DOM&&e===document){if(n[t])return;n[t]=!0}var o=e.getElementById("mceDefaultStyles");if(!o){(o=e.createElement("style")).id="mceDefaultStyles",o.type="text/css";var i=e.head;i.firstChild?i.insertBefore(o,i.firstChild):i.appendChild(o)}o.styleSheet?o.styleSheet.cssText+=t:o.appendChild(e.createTextNode(t))},loadCSS:function loadCSS(e){e||(e=""),ce(e.split(","),(function(e){i[e]=!0,u.load(e).catch(V)}))},addClass:function addClass(e,t){$(e,t,!0)},removeClass:function removeClass(e,t){$(e,t,!1)},hasClass:function hasClass(e,t){var n=h(e),o=t.split(" ");return F(n)&&ye(o,(function(e){return Mn(n,e)}))},toggleClass:$,show:function show(e){O(e,(function(e){return Rr(In.fromDom(e),"display")}))},hide:function hide(e){O(e,(function(e){return Tr(In.fromDom(e),"display","none")}))},isHidden:function isHidden(e){var t=h(e);return F(t)&&Yt(_r(t,"display"),"none")},uniqueId:function uniqueId(e){return(e||"mce_")+a++},setHTML:R,getOuterHTML:function getOuterHTML(e){var t=h(e);return F(t)?co(t.dom)?t.dom.outerHTML:function getOuter(e){var t=In.fromTag("div"),n=In.fromDom(e.dom.cloneNode(!0));return Ir(t,n),Vr(t)}(t):""},setOuterHTML:function setOuterHTML(e,t){O(e,(function(e){co(e)&&(e.outerHTML=t)}))},decode:Ta.decode,encode:I,insertAfter:function insertAfter(e,t){var n=p(t);return O(e,(function(e){var t=null===n||void 0===n?void 0:n.parentNode,o=null===n||void 0===n?void 0:n.nextSibling;return t&&(o?t.insertBefore(e,o):t.appendChild(e)),e}))},replace:z,rename:function rename(e,t){if(e.nodeName!==t.toUpperCase()){var n=B(t);return iu(b(e),(function(t){y(n,t.nodeName,v(e,t.nodeName))})),z(n,e,!0),n}return e},findCommonAncestor:function findCommonAncestor(e,t){for(var n=e;n;){for(var o=t;o&&n!==o;)o=o.parentNode;if(n===o)break;n=n.parentNode}return!n&&e.ownerDocument?e.ownerDocument.documentElement:n},run:O,getAttribs:b,isEmpty:function isEmpty(e,t,n){var o=0;if(U(e))return!1;var i=e.firstChild;if(i){var a=new io(i,e),u=s?s.getWhitespaceElements():{},c=t||(s?s.getNonEmptyElements():null),l=i;do{if(co(l)){var d=l.getAttribute("data-mce-bogus");if(d){l=a.next("all"===d);continue}var m=l.nodeName.toLowerCase();if(c&&c[m]){if("br"===m){o++,l=a.next();continue}return!1}if(U(l))return!1}if(So(l))return!1;if(Co(l)&&!Oi(l.data)&&(!(null===n||void 0===n?void 0:n.includeZwsp)||!Ai(l.data)))return!1;if(Co(l)&&l.parentNode&&u[l.parentNode.nodeName]&&Oi(l.data))return!1;l=a.next()}while(l)}return o<=1},createRng:Z,nodeIndex:fu,split:function split(e,t,n){var o,i,a=Z();if(e&&t&&e.parentNode&&t.parentNode){var u=e.parentNode;return a.setStart(u,fu(e)),a.setEnd(t.parentNode,fu(t)),o=a.extractContents(),(a=Z()).setStart(t.parentNode,fu(t)+1),a.setEnd(u,fu(e)+1),i=a.extractContents(),u.insertBefore(fa(G,o,s),e),n?u.insertBefore(n,e):u.insertBefore(t,e),u.insertBefore(fa(G,i,s),e),P(e),n||t}},bind:function bind(n,i,a,u){if(M(n)){for(var s=n.length,l=[];s--;)l[s]=bind(n[s],i,a,u);return l}return!t.collect||n!==e&&n!==o||c.push([n,i,a,u]),m.bind(n,i,a,u||G)},unbind:function unbind(t,n,i){if(M(t)){for(var a=t.length,u=[];a--;)u[a]=unbind(t[a],n,i);return u}if(c.length>0&&(t===e||t===o))for(var s=c.length;s--;){var l=d(c[s],3),g=l[0],p=l[1],h=l[2];t!==g||n&&n!==p||i&&i!==h||m.unbind(g,p,h)}return m.unbind(t,n,i)},fire:function fire(e,t,n){return m.dispatch(e,t,n)},dispatch:function dispatch(e,t,n){return m.dispatch(e,t,n)},getContentEditable:j,getContentEditableParent:function getContentEditableParent(e){for(var t=C(),n=null,o=e;o&&o!==t&&null===(n=j(o));o=o.parentNode);return n},isEditable:function isEditable(e){if(F(e)){var t=co(e)?e:e.parentElement;return F(t)&&so(t)&&wr(In.fromDom(t))}return!1},destroy:function destroy(){if(c.length>0)for(var e=c.length;e--;){var t=d(c[e],3),n=t[0],o=t[1],a=t[2];m.unbind(n,o,a)}Re(i,(function(e,t){u.unload(t),delete i[t]}))},isChildOf:function isChildOf(e,t){return e===t||t.contains(e)},dumpRng:function dumpRng(e){return"startContainer: "+e.startContainer.nodeName+", startOffset: "+e.startOffset+", endContainer: "+e.endContainer.nodeName+", endOffset: "+e.endOffset}},q=function setupAttrHooks(e,t,n){var o=t.keep_values,i={set:function set(e,o,i){var a=In.fromDom(e);H(t.url_converter)&&F(o)&&(o=t.url_converter.call(t.url_converter_scope||n(),String(o),i,e)),su(a,"data-mce-"+i,o),su(a,i,o)},get:function get(e,t){var n=In.fromDom(e);return yn(n,"data-mce-"+t)||yn(n,t)}},a={style:{set:function set(t,n){var i=In.fromDom(t);o&&su(i,uu,n),xn(i,"style"),D(n)&&Er(i,e.parse(n))},get:function get(t){var n=In.fromDom(t),o=yn(n,uu)||yn(n,"style");return e.serialize(e.parse(o),un(n))}}};return o&&(a.href=a.src=i),a}(l,t,W(G));return G};gu.DOM=gu(document),gu.nodeIndex=fu;var pu=gu.DOM,hu=function(){function ScriptLoader(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};p(this,ScriptLoader),this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=e}return h(ScriptLoader,[{key:"_setReferrerPolicy",value:function _setReferrerPolicy(e){this.settings.referrerPolicy=e}},{key:"loadScript",value:function loadScript(e){var t=this;return new Promise((function(n,o){var i,a=pu,u=function cleanup(){a.remove(c),i&&(i.onerror=i.onload=i=null)},c=a.uniqueId();(i=document.createElement("script")).id=c,i.type="text/javascript",i.src=Kt._addCacheSuffix(e),t.settings.referrerPolicy&&a.setAttrib(i,"referrerpolicy",t.settings.referrerPolicy),i.onload=function done(){u(),n()},i.onerror=function error(){u(),o("Failed to load script: "+e)},(document.getElementsByTagName("head")[0]||document.body).appendChild(i)}))}},{key:"isDone",value:function isDone(e){return 2===this.states[e]}},{key:"markDone",value:function markDone(e){this.states[e]=2}},{key:"add",value:function add(e){var t=this;return t.queue.push(e),void 0===t.states[e]&&(t.states[e]=0),new Promise((function(n,o){t.scriptLoadedCallbacks[e]||(t.scriptLoadedCallbacks[e]=[]),t.scriptLoadedCallbacks[e].push({resolve:n,reject:o})}))}},{key:"load",value:function load(e){return this.add(e)}},{key:"remove",value:function remove(e){delete this.states[e],delete this.scriptLoadedCallbacks[e]}},{key:"loadQueue",value:function loadQueue(){var e=this.queue;return this.queue=[],this.loadScripts(e)}},{key:"loadScripts",value:function loadScripts(e){var t=this,n=function execCallbacks(e,n){He(t.scriptLoadedCallbacks,n).each((function(t){ce(t,(function(t){return t[e](n)}))})),delete t.scriptLoadedCallbacks[n]},o=function processResults(e){var t=fe(e,(function(e){return"rejected"===e.status}));return t.length>0?Promise.reject(be(t,(function(e){var t=e.reason;return M(t)?t:[t]}))):Promise.resolve()},i=function load(e){return Promise.allSettled(ue(e,(function(e){return 2===t.states[e]?(n("resolve",e),Promise.resolve()):3===t.states[e]?(n("reject",e),Promise.reject(e)):(t.states[e]=1,t.loadScript(e).then((function(){t.states[e]=2,n("resolve",e);var i=t.queue;return i.length>0?(t.queue=[],load(i).then(o)):Promise.resolve()}),(function(){return t.states[e]=3,n("reject",e),Promise.reject(e)})))})))},a=function processQueue(e){return t.loading=!0,i(e).then((function(e){t.loading=!1;var n=t.queueLoadedCallbacks.shift();return ee.from(n).each(X),o(e)}))},u=Ve(e);return t.loading?new Promise((function(e,n){t.queueLoadedCallbacks.push((function(){a(u).then(e,n)}))})):a(u)}}]),ScriptLoader}();hu.ScriptLoader=new hu;var vu=function Cell(e){var t=e;return{get:function get(){return t},set:function set(e){t=e}}},bu={},yu=vu("en"),Cu=function getLanguageData(){return He(bu,yu.get())},wu={getData:function getData$1(){return Ne(bu,(function(e){return l({},e)}))},setCode:function setCode(e){e&&yu.set(e)},getCode:function getCode(){return yu.get()},add:function add$1(e,t){var n=bu[e];n||(bu[e]=n={});var o=ue(_e(t),(function(e){return e.toLowerCase()}));Re(t,(function(e,i){var a=i.toLowerCase();a!==i&&function isDuplicated(e,t){var n=e.indexOf(t);return-1!==n&&e.indexOf(t,n+1)>n}(o,a)?($e(t,a)||(n[a]=e),n[i]=e):n[a]=e}))},translate:function translate(e){var t=Cu().getOr({}),n=function toString(e){return H(e)?Object.prototype.toString.call(e):o(e)?"":""+e},o=function isEmpty(e){return""===e||null===e||void 0===e},i=function getLangData(e){var o=n(e);return $e(t,o)?n(t[o]):He(t,o.toLowerCase()).map(n).getOr(o)},a=function removeContext(e){return e.replace(/{context:\w+}$/,"")};if(o(e))return"";if(function isRaw(e){return R(e)&&$e(e,"raw")}(e))return n(e.raw);if(function isTokenised(e){return M(e)&&e.length>1}(e)){var u=e.slice(1);return a(i(e[0]).replace(/\{([0-9]+)\}/g,(function(e,t){return $e(u,t)?n(u[t]):e})))}return a(i(e))},isRtl:function isRtl$1(){return Cu().bind((function(e){return He(e,"_dir")})).exists((function(e){return"rtl"===e}))},hasCode:function hasCode(e){return $e(bu,e)}},xu=function AddOnManager(){var e=[],t={},n={},o=[],i=function runListeners(e,t){var n=fe(o,(function(n){return n.name===e&&n.state===t}));ce(n,(function(e){return e.resolve()}))},a=function isLoaded(e){return $e(t,e)},u=function loadLanguagePack(e,n){var o=wu.getCode();!o||n&&-1===(","+(n||"")+",").indexOf(","+o+",")||hu.ScriptLoader.add(t[e]+"/langs/"+o+".js")},c=function waitFor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"added";return"added"===t&&function isAdded(e){return $e(n,e)}(e)||"loaded"===t&&a(e)?Promise.resolve():new Promise((function(n){o.push({name:e,state:t,resolve:n})}))};return{items:e,urls:t,lookup:n,get:function get(e){if(n[e])return n[e].instance},requireLangPack:function requireLangPack(e,t){!1!==AddOnManager.languageLoad&&(a(e)?u(e,t):c(e,"loaded").then((function(){return u(e,t)})))},add:function add(t,o){return e.push(o),n[t]={instance:o},i(t,"added"),o},remove:function remove(e){delete t[e],delete n[e]},createUrl:function createUrl(e,t){return D(t)?D(e)?{prefix:"",resource:t,suffix:""}:{prefix:e.prefix,resource:t,suffix:e.suffix}:t},load:function load(e,o){if(t[e])return Promise.resolve();var a=D(o)?o:o.prefix+o.resource+o.suffix;0!==a.indexOf("/")&&-1===a.indexOf("://")&&(a=AddOnManager.baseURL+"/"+a),t[e]=a.substring(0,a.lastIndexOf("/"));var u=function done(){return i(e,"loaded"),Promise.resolve()};return n[e]?u():hu.ScriptLoader.add(a).then(u)},waitFor:c}};xu.languageLoad=!0,xu.baseURL="",xu.PluginManager=xu(),xu.ThemeManager=xu(),xu.ModelManager=xu();var Su=function repeatable(e){var t=vu(ee.none()),n=function revoke(){return t.get().each((function(e){return clearInterval(e)}))};return{clear:function clear(){n(),t.set(ee.none())},isSet:function isSet(){return t.get().isSome()},get:function get(){return t.get()},set:function set(o){n(),t.set(ee.some(setInterval(o,e)))}}},ku=function value$2(){var e=function singleton(e){var t=vu(ee.none()),n=function revoke(){return t.get().each(e)};return{clear:function clear(){n(),t.set(ee.none())},isSet:function isSet(){return t.get().isSome()},get:function get(){return t.get()},set:function set(e){n(),t.set(ee.some(e))}}}(V);return l(l({},e),{},{on:function on(t){return e.get().each(t)}})},Tu=function first$1(e,t){var n=null;return{cancel:function cancel(){B(n)||(clearTimeout(n),n=null)},throttle:function throttle(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];B(n)&&(n=setTimeout((function(){n=null,e.apply(null,i)}),t))}}},Eu=function last$1(e,t){var n=null,o=function cancel(){B(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:function throttle(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];o(),n=setTimeout((function(){n=null,e.apply(null,a)}),t)}}},Ou=W("mce-annotation"),Au=W("data-mce-annotation"),_u=W("data-mce-annotation-uid"),Du=W("data-mce-annotation-active"),Ru=W("data-mce-annotation-classes"),Nu=W("data-mce-annotation-attrs"),Mu=function isRoot$1(e){return function(t){return Hn(t,e)}},Bu=function identify(e,t){var n=e.selection.getRng(),o=In.fromDom(n.startContainer),i=In.fromDom(e.getBody()),a=t.fold((function(){return"."+Ou()}),(function(e){return"[".concat(Au(),'="').concat(e,'"]')})),u=Jn(o,n.startOffset).getOr(o);return Cr(u,a,Mu(i)).bind((function(t){return Cn(t,"".concat(_u())).bind((function(n){return Cn(t,"".concat(Au())).map((function(t){var o=Pu(e,n);return{uid:n,name:t,elements:o}}))}))}))},Iu=function isBogusElement(e,t){return wn(e,"data-mce-bogus")||oo(e,'[data-mce-bogus="all"]',Mu(t))},Pu=function findMarkers(e,t){var n=In.fromDom(e.getBody()),o=ro(n,"[".concat(_u(),'="').concat(t,'"]'));return fe(o,(function(e){return!Iu(e,n)}))},Lu=function findAll(e,t){var n=In.fromDom(e.getBody()),o=ro(n,"[".concat(Au(),'="').concat(t,'"]')),i={};return ce(o,(function(e){if(!Iu(e,n)){var t=yn(e,_u()),o=He(i,t).getOr([]);i[t]=o.concat([e])}})),i},Fu=function setup$y(e,t){var n=vu({}),o=function initData(){return{listeners:[],previous:ku()}},i=function withCallbacks(e,t){a(e,(function(e){return t(e),e}))},a=function updateCallbacks(e,t){var i=n.get(),a=t(He(i,e).getOrThunk(o));i[e]=a,n.set(i)},u=function toggleActiveAttr(t,n){ce(Pu(e,t),(function(e){n?vn(e,Du(),"true"):xn(e,Du())}))},c=Eu((function(){var n=Se(t.getNames());ce(n,(function(t){a(t,(function(n){var o=n.previous.get();return Bu(e,ee.some(t)).fold((function(){o.each((function(e){!function fireNoAnnotation(e){i(e,(function(t){ce(t.listeners,(function(t){return t(!1,e)}))}))}(t),n.previous.clear(),u(e,!1)}))}),(function(e){var t=e.uid,a=e.name,c=e.elements;Yt(o,t)||(o.each((function(e){return u(e,!1)})),function fireCallbacks(e,t,n){i(e,(function(o){ce(o.listeners,(function(o){return o(!0,e,{uid:t,nodes:ue(n,(function(e){return e.dom}))})}))}))}(a,t,c),n.previous.set(t),u(t,!0))})),{previous:n.previous,listeners:n.listeners}}))}))}),30);e.on("remove",(function(){c.cancel()})),e.on("NodeChange",(function(){c.throttle()}));return{addListener:function addListener(e,t){a(e,(function(e){return{previous:e.previous,listeners:e.listeners.concat([t])}}))}}},Hu=function setup$x(e,t){var n=Au();e.serializer.addTempAttr(Du()),e.serializer.addAttributeFilter(n,(function(e){var o,i=g(e);try{var a=function _loop2(){var e=o.value;(function identifyParserNode(e){return ee.from(e.attr(n)).bind(t.lookup)})(e).each((function(t){!1===t.persistent&&("span"===e.name?e.unwrap():function removeDirectAnnotation(e){var t,n;e.attr(_u(),null),e.attr(Au(),null),e.attr(Du(),null);var o=ee.from(e.attr(Nu())).map((function(e){return e.split(",")})).getOr([]),i=ee.from(e.attr(Ru())).map((function(e){return e.split(",")})).getOr([]);ce(o,(function(t){return e.attr(t,null)}));var a=null!==(n=null===(t=e.attr("class"))||void 0===t?void 0:t.split(" "))&&void 0!==n?n:[],u=we(a,[Ou()].concat(i));e.attr("class",u.length>0?u.join(" "):null),e.attr(Ru(),null),e.attr(Nu(),null)}(e))}))};for(i.s();!(o=i.n()).done;)a()}catch(u){i.e(u)}finally{i.f()}}))},$u=0,zu=function generate$1(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++$u+String(t)},Vu=function clone$2(e,t){return In.fromDom(e.dom.cloneNode(t))},Uu=function shallow$1(e){return Vu(e,!1)},Zu=function deep$1(e){return Vu(e,!0)},Wu=function mutate(e,t){var n=function shallowAs(e,t){var n=In.fromTag(t),o=Sn(e);return bn(n,o),n}(e,t);Mr(e,n);var o=Xn(e);return Lr(n,o),Hr(e),n},ju=function TextWalker(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:J,o=new io(e,t),i=function walk(e){var t;do{t=o[e]()}while(t&&!Co(t)&&!n(t));return ee.from(t).filter(Co)};return{current:function current(){return ee.from(o.current()).filter(Co)},next:function next(){return i("next")},prev:function prev(){return i("prev")},prev2:function prev2(){return i("prev2")}}},Gu=function TextSeeker(e,t){var n=t||function(t){return e.isBlock(t)||Eo(t)||_o(t)},o=function walk(e,t,n,o){if(Co(e)){var i=o(e,t,e.data);if(-1!==i)return ee.some({container:e,offset:i})}return n().bind((function(e){return walk(e.container,e.offset,n,o)}))};return{backwards:function backwards(t,i,a,u){var c=ju(t,null!==u&&void 0!==u?u:e.getRoot(),n);return o(t,i,(function(){return c.prev().map((function(e){return{container:e,offset:e.length}}))}),a).getOrNull()},forwards:function forwards(t,i,a,u){var c=ju(t,null!==u&&void 0!==u?u:e.getRoot(),n);return o(t,i,(function(){return c.next().map((function(e){return{container:e,offset:0}}))}),a).getOrNull()}}},qu=Math.round,Ku=function clone$1(e){return e?{left:qu(e.left),top:qu(e.top),bottom:qu(e.bottom),right:qu(e.right),width:qu(e.width),height:qu(e.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0}},Yu=function collapse(e,t){return e=Ku(e),t||(e.left=e.left+e.width),e.right=e.left,e.width=0,e},Xu=function isValidOverflow(e,t,n){return e>=0&&e<=Math.min(t.height,n.height)/2},Ju=function isAbove$1(e,t){var n=Math.min(t.height/2,e.height/2);return e.bottom-n<t.top||!(e.top>t.bottom)&&Xu(t.top-e.bottom,e,t)},Qu=function isBelow$1(e,t){return e.top>t.bottom||!(e.bottom<t.top)&&Xu(t.bottom-e.top,e,t)},ec=function distanceToRectEdgeFromXY(e,t,n){var o=Math.max(Math.min(t,e.left+e.width),e.left),i=Math.max(Math.min(n,e.top+e.height),e.top);return Math.sqrt((t-o)*(t-o)+(n-i)*(n-i))},tc=function getSelectedNode(e){var t=e.startContainer,n=e.startOffset;return t===e.endContainer&&t.hasChildNodes()&&e.endOffset===n+1?t.childNodes[n]:null},nc=function getNode$1(e,t){if(co(e)&&e.hasChildNodes()){var n=e.childNodes,o=function clamp$2(e,t,n){return Math.min(Math.max(e,t),n)}(t,0,n.length-1);return n[o]}return e},oc=new RegExp("[\u0300-\u036f\u0483-\u0487\u0488-\u0489\u0591-\u05bd\u05bf\u05c1-\u05c2\u05c4-\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7-\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e3-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962-\u0963\u0981\u09bc\u09be\u09c1-\u09c4\u09cd\u09d7\u09e2-\u09e3\u0a01-\u0a02\u0a3c\u0a41-\u0a42\u0a47-\u0a48\u0a4b-\u0a4d\u0a51\u0a70-\u0a71\u0a75\u0a81-\u0a82\u0abc\u0ac1-\u0ac5\u0ac7-\u0ac8\u0acd\u0ae2-\u0ae3\u0b01\u0b3c\u0b3e\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b57\u0b62-\u0b63\u0b82\u0bbe\u0bc0\u0bcd\u0bd7\u0c00\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55-\u0c56\u0c62-\u0c63\u0c81\u0cbc\u0cbf\u0cc2\u0cc6\u0ccc-\u0ccd\u0cd5-\u0cd6\u0ce2-\u0ce3\u0d01\u0d3e\u0d41-\u0d44\u0d4d\u0d57\u0d62-\u0d63\u0dca\u0dcf\u0dd2-\u0dd4\u0dd6\u0ddf\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb-\u0ebc\u0ec8-\u0ecd\u0f18-\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86-\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039-\u103a\u103d-\u103e\u1058-\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085-\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752-\u1753\u1772-\u1773\u17b4-\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927-\u1928\u1932\u1939-\u193b\u1a17-\u1a18\u1a1b\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1ab0-\u1abd\u1abe\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80-\u1b81\u1ba2-\u1ba5\u1ba8-\u1ba9\u1bab-\u1bad\u1be6\u1be8-\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36-\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1cf8-\u1cf9\u1dc0-\u1df5\u1dfc-\u1dff\u200c-\u200d\u20d0-\u20dc\u20dd-\u20e0\u20e1\u20e2-\u20e4\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u302e-\u302f\u3099-\u309a\ua66f\ua670-\ua672\ua674-\ua67d\ua69e-\ua69f\ua6f0-\ua6f1\ua802\ua806\ua80b\ua825-\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\ua9e5\uaa29-\uaa2e\uaa31-\uaa32\uaa35-\uaa36\uaa43\uaa4c\uaa7c\uaab0\uaab2-\uaab4\uaab7-\uaab8\uaabe-\uaabf\uaac1\uaaec-\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\uff9e-\uff9f]"),ic=function isExtendingChar(e){return D(e)&&e.charCodeAt(0)>=768&&oc.test(e)},ac=co,uc=Si,cc=mo("display","block table"),sc=mo("float","left right"),lc=function and(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=0;n<t.length;n++)if(!t[n](e))return!1;return!0}}(ac,uc,q(sc)),fc=q(mo("white-space","pre pre-line pre-wrap")),dc=Co,mc=Eo,gc=gu.nodeIndex,pc=function getNodeUnsafe(e,t){return t<0&&co(e)&&e.hasChildNodes()?void 0:nc(e,t)},hc=function createRange$1(e){return e?e.createRange():gu.DOM.createRng()},vc=function isWhiteSpace$1(e){return D(e)&&/[\r\n\t ]/.test(e)},bc=function isRange(e){return!!e.setStart&&!!e.setEnd},yc=function isHiddenWhiteSpaceRange(e){var t=e.startContainer,n=e.startOffset;if(vc(e.toString())&&fc(t.parentNode)&&Co(t)){var o=t.data;if(vc(o[n-1])||vc(o[n+1]))return!0}return!1},Cc=function getBoundingClientRectWebKitText(e){var t=e.startContainer,n=e.endContainer,o=e.startOffset,i=e.endOffset;if(t===n&&Co(n)&&0===o&&1===i){var a=e.cloneRange();return a.setEndAfter(n),xc(a)}return null},wc=function isZeroRect(e){return 0===e.left&&0===e.right&&0===e.top&&0===e.bottom},xc=function getBoundingClientRect$1(e){var t,n,o=e.getClientRects();return n=o.length>0?Ku(o[0]):Ku(e.getBoundingClientRect()),!bc(e)&&mc(e)&&wc(n)?function getBrClientRect(e){var t=e.ownerDocument,n=hc(t),o=t.createTextNode(Lo),i=e.parentNode;i.insertBefore(o,e),n.setStart(o,0),n.setEnd(o,1);var a=Ku(n.getBoundingClientRect());return i.removeChild(o),a}(e):wc(n)&&bc(e)&&null!==(t=Cc(e))&&void 0!==t?t:n},Sc=function collapseAndInflateWidth(e,t){var n=Yu(e,t);return n.width=1,n.right=n.left+1,n},kc=function getCaretPositionClientRects(e){var t=[],n=function addUniqueAndValidRect(e){0!==e.height&&(t.length>0&&function isEqual(e,t){return e.left===t.left&&e.top===t.top&&e.bottom===t.bottom&&e.right===t.right}(e,t[t.length-1])||t.push(e))},o=function addCharacterOffset(e,t){var o=hc(e.ownerDocument);if(t<e.data.length){if(ic(e.data[t]))return;if(ic(e.data[t-1])&&(o.setStart(e,t),o.setEnd(e,t+1),!yc(o)))return void n(Sc(xc(o),!1))}t>0&&(o.setStart(e,t-1),o.setEnd(e,t),yc(o)||n(Sc(xc(o),!1))),t<e.data.length&&(o.setStart(e,t),o.setEnd(e,t+1),yc(o)||n(Sc(xc(o),!0)))},i=e.container(),a=e.offset();if(dc(i))return o(i,a),t;if(ac(i))if(e.isAtEnd()){var u=pc(i,a);dc(u)&&o(u,u.data.length),lc(u)&&!mc(u)&&n(Sc(xc(u),!1))}else{var c=pc(i,a);if(dc(c)&&o(c,0),lc(c)&&e.isAtEnd())return n(Sc(xc(c),!1)),t;var s=pc(e.container(),e.offset()-1);lc(s)&&!mc(s)&&(cc(s)||cc(c)||!lc(c))&&n(Sc(xc(s),!1)),lc(c)&&n(Sc(xc(c),!0))}return t},Tc=function CaretPosition(e,t,n){var o=function getClientRects(){return n||(n=kc(CaretPosition(e,t))),n};return{container:W(e),offset:W(t),toRange:function toRange(){var n=hc(e.ownerDocument);return n.setStart(e,t),n.setEnd(e,t),n},getClientRects:o,isVisible:function isVisible(){return o().length>0},isAtStart:function isAtStart(){return dc(e),0===t},isAtEnd:function isAtEnd(){return dc(e)?t>=e.data.length:t>=e.childNodes.length},isEqual:function isEqual(n){return n&&e===n.container()&&t===n.offset()},getNode:function getNode(n){return pc(e,n?t-1:t)}}};Tc.fromRangeStart=function(e){return Tc(e.startContainer,e.startOffset)},Tc.fromRangeEnd=function(e){return Tc(e.endContainer,e.endOffset)},Tc.after=function(e){return Tc(e.parentNode,gc(e)+1)},Tc.before=function(e){return Tc(e.parentNode,gc(e))},Tc.isAbove=function(e,t){return Jt(Te(t.getClientRects()),Ee(e.getClientRects()),Ju).getOr(!1)},Tc.isBelow=function(e,t){return Jt(Ee(t.getClientRects()),Te(e.getClientRects()),Qu).getOr(!1)},Tc.isAtStart=function(e){return!!e&&e.isAtStart()},Tc.isAtEnd=function(e){return!!e&&e.isAtEnd()},Tc.isTextPosition=function(e){return!!e&&Co(e.container())},Tc.isElementPosition=function(e){return!Tc.isTextPosition(e)};var Ec=function trimEmptyTextNode$1(e,t){Co(t)&&0===t.data.length&&e.remove(t)},Oc=function rangeInsertNode(e,t,n){To(n)?function insertFragment(e,t,n){var o=ee.from(n.firstChild),i=ee.from(n.lastChild);t.insertNode(n),o.each((function(t){return Ec(e,t.previousSibling)})),i.each((function(t){return Ec(e,t.nextSibling)}))}(e,t,n):function insertNode(e,t,n){t.insertNode(n),Ec(e,n.previousSibling),Ec(e,n.nextSibling)}(e,t,n)},Ac=Co,_c=ho,Dc=gu.nodeIndex,Rc=function normalizedParent(e){var t=e.parentNode;return _c(t)?normalizedParent(t):t},Nc=function getChildNodes(e){return e?qe(e.childNodes,(function(e,t){return _c(t)&&"BR"!==t.nodeName?e=e.concat(getChildNodes(t)):e.push(t),e}),[]):[]},Mc=function equal(e){return function(t){return e===t}},Bc=function normalizedNodeIndex(e){var t,n;t=Nc(Rc(e)),n=Ke(t,Mc(e),e),t=t.slice(0,n+1);var o=qe(t,(function(e,n,o){return Ac(n)&&Ac(t[o-1])&&e++,e}),0);return t=Ge(t,fo([e.nodeName])),(n=Ke(t,Mc(e),e))-o},Ic=function createPathItem(e){return(Ac(e)?"text()":e.nodeName.toLowerCase())+"["+Bc(e)+"]"},Pc=function create$b(e,t){var n,o=[],i=t.container(),a=t.offset();if(Ac(i))n=function normalizedTextOffset(e,t){for(var n=e;(n=n.previousSibling)&&Ac(n);)t+=n.data.length;return t}(i,a);else{var u=i.childNodes;a>=u.length?(n="after",a=u.length-1):n="before",i=u[a]}o.push(Ic(i));var c=function parentsUntil$1(e,t,n){for(var o=[],i=t.parentNode;i&&i!==e&&(!n||!n(i));i=i.parentNode)o.push(i);return o}(e,i);return c=Ge(c,q(ho)),(o=o.concat(je(c,(function(e){return Ic(e)})))).reverse().join("/")+","+n},Lc=function resolve$1(e,t){if(!t)return null;var n,o=t.split(","),i=o[0].split("/"),a=o.length>1?o[1]:"before",u=qe(i,(function(e,t){var n=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(t);return n?("text()"===n[1]&&(n[1]="#text"),function resolvePathItem(e,t,n){var o=Nc(e);return o=Ge(o,(function(e,t){return!Ac(e)||!Ac(o[t-1])})),(o=Ge(o,fo([t])))[n]}(e,n[1],parseInt(n[2],10))):null}),e);return u?!Ac(u)&&u.parentNode?(n="after"===a?Dc(u)+1:Dc(u),Tc(u.parentNode,n)):function findTextPosition(e,t){for(var n=e,o=0;Ac(n);){var i=n.data.length;if(t>=o&&t<=o+i){e=n,t-=o;break}if(!Ac(n.nextSibling)){e=n,t=i;break}o+=i,n=n.nextSibling}return Ac(e)&&t>e.data.length&&(t=e.data.length),Tc(e,t)}(u,parseInt(a,10)):null},Fc=_o,Hc=function getPoint(e,t,n,o,i){var a=i?o.startContainer:o.endContainer,u=i?o.startOffset:o.endOffset,c=[],s=e.getRoot();if(Co(a))c.push(n?function getNormalizedTextOffset$1(e,t,n){for(var o=e(t.data.slice(0,n)).length,i=t.previousSibling;i&&Co(i);i=i.previousSibling)o+=e(i.data).length;return o}(t,a,u):u);else{var l=0,d=a.childNodes;u>=d.length&&d.length&&(l=1,u=Math.max(0,d.length-1)),c.push(e.nodeIndex(d[u],n)+l)}for(var m=a;m&&m!==s;m=m.parentNode)c.push(e.nodeIndex(m,n));return c},$c=function findIndex(e,t,n){var o=0;return Kt.each(e.select(t),(function(e){return"all"===e.getAttribute("data-mce-bogus")?void 0:e!==n&&void o++})),o},zc=function moveEndPoint$1(e,t){var n=t?e.startContainer:e.endContainer,o=t?e.startOffset:e.endOffset;if(co(n)&&"TR"===n.nodeName){var i=n.childNodes;(n=i[Math.min(t?o:o-1,i.length-1)])&&(o=t?0:n.childNodes.length,t?e.setStart(n,o):e.setEnd(n,o))}},Vc=function normalizeTableCellSelection(e){return zc(e,!0),zc(e,!1),e},Uc=function findSibling(e,t){if(co(e)&&(e=nc(e,t),Fc(e)))return e;if(ai(e)){Co(e)&&oi(e)&&(e=e.parentNode);var n=e.previousSibling;if(Fc(n))return n;if(n=e.nextSibling,Fc(n))return n}},Zc=function getOffsetBookmark(e,t,n){var o=n.getNode(),i=n.getRng();if("IMG"===o.nodeName||Fc(o)){var a=o.nodeName;return{name:a,index:$c(n.dom,a,o)}}var u=function findAdjacentContentEditableFalseElm(e){return Uc(e.startContainer,e.startOffset)||Uc(e.endContainer,e.endOffset)}(i);if(u){var c=u.tagName;return{name:c,index:$c(n.dom,c,u)}}return function getLocation(e,t,n,o){var i=t.dom,a=Hc(i,e,n,o,!0),u=t.isForward(),c=mi(o)?{isFakeCaret:!0}:{};if(t.isCollapsed())return l({start:a,forward:u},c);var s=Hc(i,e,n,o,!1);return l({start:a,end:s,forward:u},c)}(e,n,t,i)},Wc=function createBookmarkSpan(e,t,n){var o={"data-mce-type":"bookmark",id:t,style:"overflow:hidden;line-height:0px"};return n?e.create("span",o,"&#xFEFF;"):e.create("span",o)},jc=function getPersistentBookmark(e,t){var n=e.dom,o=e.getRng(),i=n.uniqueId(),a=e.isCollapsed(),u=e.getNode(),c=u.nodeName,s=e.isForward();if("IMG"===c)return{name:c,index:$c(n,c,u)};var l=Vc(o.cloneRange());if(!a){l.collapse(!1);var d=Wc(n,i+"_end",t);Oc(n,l,d)}(o=Vc(o)).collapse(!0);var m=Wc(n,i+"_start",t);return Oc(n,o,m),e.moveToBookmark({id:i,keep:!0,forward:s}),{id:i,forward:s}},Gc=function getBookmark$2(e,t){return 2===t?Zc(ti,arguments.length>2&&void 0!==arguments[2]&&arguments[2],e):3===t?function getCaretBookmark(e){var t=e.getRng();return{start:Pc(e.dom.getRoot(),Tc.fromRangeStart(t)),end:Pc(e.dom.getRoot(),Tc.fromRangeEnd(t)),forward:e.isForward()}}(e):t?function getRangeBookmark(e){return{rng:e.getRng(),forward:e.isForward()}}(e):jc(e,!1)},qc=curry(Zc,j,!0),Kc=function value$1(e){var t=function applyHelper(t){return t(e)},n=W(e),o=function outputHelper(){return i},i={tag:!0,inner:e,fold:function fold(t,n){return n(e)},isValue:Q,isError:J,map:function map(t){return Xc.value(t(e))},mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:function each(t){t(e)},toOptional:function toOptional(){return ee.some(e)}};return i},Yc=function error(e){var t=function outputHelper(){return n},n={tag:!1,inner:e,fold:function fold(t,n){return t(e)},isValue:J,isError:Q,map:t,mapError:function mapError(t){return Xc.error(t(e))},bind:t,exists:J,forall:Q,getOr:j,or:j,getOrThunk:Y,orThunk:Y,getOrDie:K(String(e)),each:V,toOptional:ee.none};return n},Xc={value:Kc,error:Yc,fromOption:function fromOption(e,t){return e.fold((function(){return Yc(t)}),Kc)}},Jc=function generate(e){if(!M(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return ce(e,(function(o,i){var a=_e(o);if(1!==a.length)throw new Error("one and only one name per case");var u=a[0],c=o[u];if(void 0!==n[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!M(c))throw new Error("case arguments must be an array");t.push(u),n[u]=function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=o.length;if(s!==c.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+c.length+" ("+c+"), got "+s);return{fold:function fold(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+n.length);return n[i].apply(null,o)},match:function match(e){var n=_e(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!ye(t,(function(e){return ie(n,e)})))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[u].apply(null,o)},log:function log(e){console.log(e,{constructors:t,constructor:u,params:o})}}}})),n};Jc([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var Qc,es=function isInlinePattern(e){return"inline-command"===e.type||"inline-format"===e.type},ts=function isBlockPattern(e){return"block-command"===e.type||"block-format"===e.type},ns=function normalizePattern(e){var t=function err(t){return Xc.error({message:t,pattern:e})},n=function formatOrCmd(n,o,i){if(void 0!==e.format){var a;if(M(e.format)){if(!ye(e.format,D))return t(n+" pattern has non-string items in the `format` array");a=e.format}else{if(!D(e.format))return t(n+" pattern has non-string `format` parameter");a=[e.format]}return Xc.value(o(a))}return void 0!==e.cmd?D(e.cmd)?Xc.value(i(e.cmd,e.value)):t(n+" pattern has non-string `cmd` parameter"):t(n+" pattern is missing both `format` and `cmd` parameters")};if(!R(e))return t("Raw pattern is not an object");if(!D(e.start))return t("Raw pattern is missing `start` parameter");if(void 0!==e.end){if(!D(e.end))return t("Inline pattern has non-string `end` parameter");if(0===e.start.length&&0===e.end.length)return t("Inline pattern has empty `start` and `end` parameters");var o=e.start,i=e.end;return 0===i.length&&(i=o,o=""),n("Inline",(function(e){return{type:"inline-format",start:o,end:i,format:e}}),(function(e,t){return{type:"inline-command",start:o,end:i,cmd:e,value:t}}))}return void 0!==e.replacement?D(e.replacement)?0===e.start.length?t("Replacement pattern has empty `start` parameter"):Xc.value({type:"inline-command",start:"",end:e.start,cmd:"mceInsertContent",value:e.replacement}):t("Replacement pattern has non-string `replacement` parameter"):0===e.start.length?t("Block pattern has empty `start` parameter"):n("Block",(function(t){return{type:"block-format",start:e.start,format:t[0]}}),(function(t,n){return{type:"block-command",start:e.start,cmd:t,value:n}}))},rs=function getBlockPatterns(e){return fe(e,ts)},os=function getInlinePatterns(e){return fe(e,es)},as=function fromRawPatterns(e){var t=function partition$1(e){var t=[],n=[];return ce(e,(function(e){e.fold((function(e){t.push(e)}),(function(e){n.push(e)}))})),{errors:t,values:n}}(ue(e,ns));return ce(t.errors,(function(e){return console.error(e.message,e.pattern)})),t.values},us=function fromRawPatternsLookup(e){return function(t){var n=e(t);return as(n)}},cs=Ft().deviceType,ss=cs.isTouch(),ls=gu.DOM,fs=function isRegExp(e){return A(e,RegExp)},ds=function option(e){return function(t){return t.options.get(e)}},ms=function stringOrObjectProcessor(e){return D(e)||R(e)},gs=function bodyOptionProcessor(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return function(n){var o=D(n);if(o){if(-1!==n.indexOf("=")){var i=function getHash(e){var t=e.indexOf("=")>0?e.split(/[;,](?![^=;,]*(?:[;,]|$))/):e.split(",");return me(t,(function(e,t){var n=t.split("="),o=n[0],i=n.length>1?n[1]:o;return e[ct(o)]=ct(i),e}),{})}(n);return{value:He(i,e.id).getOr(t),valid:o}}return{value:n,valid:o}}return{valid:!1,message:"Must be a string."}}},ps=ds("iframe_attrs"),hs=ds("doctype"),vs=ds("document_base_url"),bs=ds("body_id"),ys=ds("body_class"),Cs=ds("content_security_policy"),ws=ds("br_in_pre"),xs=ds("forced_root_block"),Ss=ds("forced_root_block_attrs"),ks=ds("newline_behavior"),Ts=ds("br_newline_selector"),Es=ds("no_newline_selector"),Os=ds("keep_styles"),As=ds("end_container_on_empty_block"),_s=ds("automatic_uploads"),Ds=ds("images_reuse_filename"),Rs=ds("images_replace_blob_uris"),Ns=ds("icons"),Ms=ds("icons_url"),Bs=ds("images_upload_url"),Is=ds("images_upload_base_path"),Ps=ds("images_upload_credentials"),Ls=ds("images_upload_handler"),Fs=ds("content_css_cors"),Hs=ds("referrer_policy"),$s=ds("language"),zs=ds("language_url"),Vs=ds("indent_use_margin"),Us=ds("indentation"),Zs=ds("content_css"),Ws=ds("content_style"),js=ds("font_css"),Gs=ds("directionality"),qs=ds("inline_boundaries_selector"),Ks=ds("object_resizing"),Ys=ds("resize_img_proportional"),Xs=ds("placeholder"),Js=ds("event_root"),Qs=ds("service_message"),el=ds("theme"),tl=ds("theme_url"),nl=ds("model"),rl=ds("model_url"),ol=ds("inline_boundaries"),il=ds("formats"),al=ds("preview_styles"),ul=ds("format_empty_lines"),cl=ds("format_noneditable_selector"),sl=ds("custom_ui_selector"),ll=ds("inline"),fl=ds("hidden_input"),dl=ds("submit_patch"),ml=ds("add_form_submit_trigger"),gl=ds("add_unload_trigger"),pl=ds("custom_undo_redo_levels"),hl=ds("disable_nodechange"),vl=ds("readonly"),bl=ds("editable_root"),yl=ds("content_css_cors"),Cl=ds("plugins"),wl=ds("external_plugins"),xl=ds("block_unsupported_drop"),Sl=ds("visual"),kl=ds("visual_table_class"),Tl=ds("visual_anchor_class"),El=ds("iframe_aria_text"),Ol=ds("setup"),Al=ds("init_instance_callback"),_l=ds("urlconverter_callback"),Dl=ds("auto_focus"),Rl=ds("browser_spellcheck"),Nl=ds("protect"),Ml=ds("paste_block_drop"),Bl=ds("paste_data_images"),Il=ds("paste_preprocess"),Pl=ds("paste_postprocess"),Ll=ds("newdocument_content"),Fl=ds("paste_webkit_styles"),Hl=ds("paste_remove_styles_if_webkit"),$l=ds("paste_merge_formats"),zl=ds("smart_paste"),Vl=ds("paste_as_text"),Ul=ds("paste_tab_spaces"),Zl=ds("allow_html_data_urls"),Wl=ds("text_patterns"),jl=ds("text_patterns_lookup"),Gl=ds("noneditable_class"),ql=ds("editable_class"),Kl=ds("noneditable_regexp"),Yl=ds("preserve_cdata"),Xl=ds("highlight_on_focus"),Jl=ds("xss_sanitization"),Ql=ds("init_content_sync"),ef=function getAllowedImageFileTypes(e){return Kt.explode(e.options.get("images_file_types"))},tf=ds("table_tab_navigation"),nf=ds("details_initial_state"),rf=ds("details_serialized_state"),of=ds("force_hex_color"),af=ds("sandbox_iframes"),uf=co,cf=Co,sf=function removeNode$1(e){var t=e.parentNode;t&&t.removeChild(e)},lf=function trimCount(e){var t=ti(e);return{count:e.length-t.length,text:t}},ff=function deleteZwspChars(e){for(var t;-1!==(t=e.data.lastIndexOf(Qo));)e.deleteData(t,1)},df=function removeUnchanged(e,t){return hf(e),t},mf=function removeElementAndReposition(e,t){var n=t.container(),o=function indexOf$1(e,t){var n=oe(e,t);return-1===n?ee.none():ee.some(n)}(Oe(n.childNodes),e).map((function(e){return e<t.offset()?Tc(n,t.offset()-1):t})).getOr(t);return hf(e),o},gf=function removeTextCaretContainer(e,t){return cf(e)&&t.container()===e?function removeTextAndReposition(e,t){var n=lf(e.data.substr(0,t.offset())),o=lf(e.data.substr(t.offset()));return(n.text+o.text).length>0?(ff(e),Tc(e,t.offset()-n.count)):t}(e,t):df(e,t)},pf=function removeAndReposition(e,t){return Tc.isTextPosition(t)?gf(e,t):function removeElementCaretContainer(e,t){return t.container()===e.parentNode?mf(e,t):df(e,t)}(e,t)},hf=function remove$3(e){uf(e)&&ai(e)&&(ui(e)?e.removeAttribute("data-mce-caret"):sf(e)),cf(e)&&(ff(e),0===e.data.length&&sf(e))},vf=_o,bf=No,yf=Do,Cf=function getAbsoluteClientRect(e,t,n){var o,i,a=Yu(t.getBoundingClientRect(),n);if("BODY"===e.tagName){var u=e.ownerDocument.documentElement;o=e.scrollLeft||u.scrollLeft,i=e.scrollTop||u.scrollTop}else{var c=e.getBoundingClientRect();o=e.scrollLeft-c.left,i=e.scrollTop-c.top}a.left+=o,a.right+=o,a.top+=i,a.bottom+=i,a.width=1;var s=t.offsetWidth-t.clientWidth;return s>0&&(n&&(s*=-1),a.left+=s,a.right+=s),a},wf=function FakeCaret(e,t,n,o){var i,a,u=ku(),c=xs(e),s=e.dom,d=function hide(){!function trimInlineCaretContainers(e){for(var t,n,o=ro(In.fromDom(e),"*[contentEditable=false],video,audio,embed,object"),i=0;i<o.length;i++){var a=o[i].dom,u=a.previousSibling;if(fi(u)){var c=u.data;1===c.length?null===(t=u.parentNode)||void 0===t||t.removeChild(u):u.deleteData(c.length-1,1)}u=a.nextSibling,li(u)&&(1===u.data.length?null===(n=u.parentNode)||void 0===n||n.removeChild(u):u.deleteData(0,1))}}(t),a&&(hf(a),a=null),u.on((function(e){s.remove(e.caret),u.clear()})),i&&(clearInterval(i),i=void 0)},m=function startBlink(){i=setInterval((function(){u.on((function(e){o()?s.toggleClass(e.caret,"mce-visual-caret-hidden"):s.addClass(e.caret,"mce-visual-caret-hidden")}))}),500)};return{show:function show(e,o){var i;if(d(),yf(o))return null;if(!n(o))return a=function insertInline$1(e,t){var n,o=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createTextNode(Qo),i=e.parentNode;if(t){var a=e.previousSibling;if(ri(a)){if(ai(a))return a;if(fi(a))return a.splitText(a.data.length-1)}null===i||void 0===i||i.insertBefore(o,e)}else{var u=e.nextSibling;if(ri(u)){if(ai(u))return u;if(li(u))return u.splitText(1),u}e.nextSibling?null===i||void 0===i||i.insertBefore(o,e.nextSibling):null===i||void 0===i||i.appendChild(o)}return o}(o,e),i=o.ownerDocument.createRange(),Sf(a.nextSibling)?(i.setStart(a,0),i.setEnd(a,0)):(i.setStart(a,1),i.setEnd(a,1)),i;var g=function insertBlock(e,t,n){var o,i=(null!==(o=t.ownerDocument)&&void 0!==o?o:document).createElement(e);i.setAttribute("data-mce-caret",n?"before":"after"),i.setAttribute("data-mce-bogus","all"),i.appendChild(Xo().dom);var a=t.parentNode;return n?null===a||void 0===a||a.insertBefore(i,t):t.nextSibling?null===a||void 0===a||a.insertBefore(i,t.nextSibling):null===a||void 0===a||a.appendChild(i),i}(c,o,e),p=Cf(t,o,e);s.setStyle(g,"top",p.top),a=g;var h=s.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});return s.setStyles(h,l({},p)),s.add(t,h),u.set({caret:h,element:o,before:e}),e&&s.addClass(h,"mce-visual-caret-before"),m(),(i=o.ownerDocument.createRange()).setStart(g,0),i.setEnd(g,0),i},hide:d,getCss:function getCss(){return".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}"},reposition:function reposition(){u.on((function(e){var n=Cf(t,e.element,e.before);s.setStyles(e.caret,l({},n))}))},destroy:function destroy(){return clearInterval(i)}}},xf=function isFakeCaretTableBrowser(){return Wt.browser.isFirefox()},Sf=function isInlineFakeCaretTarget(e){return vf(e)||bf(e)},kf=function isFakeCaretTarget(e){return(Sf(e)||vo(e)&&xf())&&Wn(In.fromDom(e)).exists(wr)},Tf=Ao,Ef=_o,Of=No,Af=mo("display","block table table-cell table-caption list-item"),_f=ai,Df=oi,Rf=co,Nf=Co,Mf=Si,Bf=function isForwards(e){return e>0},If=function isBackwards(e){return e<0},Pf=function skipCaretContainers(e,t){for(var n;n=e(t);)if(!Df(n))return n;return null},Lf=function findNode(e,t,n,o,i){var a,u=new io(e,o),c=Ef(e)||Df(e);if(If(t)){if(c&&n(a=Pf(u.prev.bind(u),!0)))return a;for(;a=Pf(u.prev.bind(u),i);)if(n(a))return a}if(Bf(t)){if(c&&n(a=Pf(u.next.bind(u),!0)))return a;for(;a=Pf(u.next.bind(u),i);)if(n(a))return a}return null},Ff=function getParentBlock$3(e,t){for(;e&&e!==t;){if(Af(e))return e;e=e.parentNode}return null},Hf=function isInSameBlock(e,t,n){return Ff(e.container(),n)===Ff(t.container(),n)},$f=function getChildNodeAtRelativeOffset(e,t){if(!t)return ee.none();var n=t.container(),o=t.offset();return Rf(n)?ee.from(n.childNodes[o+e]):ee.none()},zf=function beforeAfter(e,t){var n,o=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createRange();return e?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),o},Vf=function isNodesInSameBlock(e,t,n){return Ff(t,e)===Ff(n,e)},Uf=function lean(e,t,n){for(var o=e?"previousSibling":"nextSibling",i=n;i&&i!==t;){var a=i[o];if(a&&_f(a)&&(a=a[o]),Ef(a)||Of(a)){if(Vf(t,a,i))return a;break}if(Mf(a))break;i=i.parentNode}return null},Zf=curry(zf,!0),Wf=curry(zf,!1),jf=function normalizeRange(e,t,n){var o,i=curry(Uf,!0,t),a=curry(Uf,!1,t),u=n.startContainer,c=n.startOffset;if(oi(u)){var s=Nf(u)?u.parentNode:u,l=s.getAttribute("data-mce-caret");if("before"===l&&(o=s.nextSibling,kf(o)))return Zf(o);if("after"===l&&(o=s.previousSibling,kf(o)))return Wf(o)}if(!n.collapsed)return n;if(Co(u)){if(_f(u)){if(1===e){if(o=a(u))return Zf(o);if(o=i(u))return Wf(o)}if(-1===e){if(o=i(u))return Wf(o);if(o=a(u))return Zf(o)}return n}if(fi(u)&&c>=u.data.length-1)return 1===e&&(o=a(u))?Zf(o):n;if(li(u)&&c<=1)return-1===e&&(o=i(u))?Wf(o):n;if(c===u.data.length)return(o=a(u))?Zf(o):n;if(0===c)return(o=i(u))?Wf(o):n}return n},Gf=function getRelativeCefElm(e,t){return $f(e?0:-1,t).filter(Ef)},qf=function getNormalizedRangeEndPoint(e,t,n){var o=jf(e,t,n);return-1===e?Tc.fromRangeStart(o):Tc.fromRangeEnd(o)},Kf=function getElementFromPosition(e){return ee.from(e.getNode()).map(In.fromDom)},Yf=function getVisualCaretPosition(e,t){for(var n=t;n=e(n);)if(n.isVisible())return n;return n},Xf=function isMoveInsideSameBlock(e,t){var n=Hf(e,t);return!(n||!Eo(e.getNode()))||n};!function(e){e[e.Backwards=-1]="Backwards",e[e.Forwards=1]="Forwards"}(Qc||(Qc={}));var Jf=_o,Qf=Co,ed=co,td=Eo,nd=Si,rd=function isAtomic$1(e){return Ci(e)||function isAtomicContentEditableFalse(e){return!!ki(e)&&!me(Oe(e.getElementsByTagName("*")),(function(e,t){return e||gi(t)}),!1)}(e)},od=Ti,id=function nodeAtIndex(e,t){return e.hasChildNodes()&&t<e.childNodes.length?e.childNodes[t]:null},ad=function getCaretCandidatePosition(e,t){if(Bf(e)){if(nd(t.previousSibling)&&!Qf(t.previousSibling))return Tc.before(t);if(Qf(t))return Tc(t,0)}if(If(e)){if(nd(t.nextSibling)&&!Qf(t.nextSibling))return Tc.after(t);if(Qf(t))return Tc(t,t.data.length)}return If(e)?td(t)?Tc.before(t):Tc.after(t):Tc.before(t)},ud=function moveForwardFromBr(e,t){var n=t.nextSibling;return n&&nd(n)?Qf(n)?Tc(n,0):Tc.before(n):cd(Qc.Forwards,Tc.after(t),e)},cd=function findCaretPosition$1(e,t,n){var o,i,a,u;if(!ed(n)||!t)return null;if(t.isEqual(Tc.after(n))&&n.lastChild){if(u=Tc.after(n.lastChild),If(e)&&nd(n.lastChild)&&ed(n.lastChild))return td(n.lastChild)?Tc.before(n.lastChild):u}else u=t;var c=u.container(),s=u.offset();if(Qf(c)){if(If(e)&&s>0)return Tc(c,--s);if(Bf(e)&&s<c.length)return Tc(c,++s);o=c}else{if(If(e)&&s>0&&(i=id(c,s-1),nd(i)))return!rd(i)&&(a=Lf(i,e,od,i))?Qf(a)?Tc(a,a.data.length):Tc.after(a):Qf(i)?Tc(i,i.data.length):Tc.before(i);if(Bf(e)&&s<c.childNodes.length&&(i=id(c,s),nd(i)))return td(i)?ud(n,i):!rd(i)&&(a=Lf(i,e,od,i))?Qf(a)?Tc(a,0):Tc.before(a):Qf(i)?Tc(i,0):Tc.after(i);o=i||u.getNode()}if(o&&(Bf(e)&&u.isAtEnd()||If(e)&&u.isAtStart())&&(o=Lf(o,e,Q,n,!0),od(o,n)))return ad(e,o);i=o?Lf(o,e,od,n):o;var l=Ye(fe(function getParents$3(e,t){for(var n=[],o=e;o&&o!==t;)n.push(o),o=o.parentNode;return n}(c,n),Jf));return!l||i&&l.contains(i)?i?ad(e,i):null:u=Bf(e)?Tc.after(l):Tc.before(l)},sd=function CaretWalker(e){return{next:function next(t){return cd(Qc.Forwards,t,e)},prev:function prev(t){return cd(Qc.Backwards,t,e)}}},ld=function isBeforeOrStart(e){return Tc.isTextPosition(e)?0===e.offset():Si(e.getNode())},fd=function isAfterOrEnd(e){if(Tc.isTextPosition(e)){var t=e.container();return e.offset()===t.data.length}return Si(e.getNode(!0))},dd=function isBeforeAfterSameElement(e,t){return!Tc.isTextPosition(e)&&!Tc.isTextPosition(t)&&e.getNode()===t.getNode(!0)},md=function shouldSkipPosition(e,t,n){return e?!dd(t,n)&&!function isAtBr(e){return!Tc.isTextPosition(e)&&Eo(e.getNode())}(t)&&fd(t)&&ld(n):!dd(n,t)&&ld(t)&&fd(n)},gd=function fromPosition(e,t,n){var o=sd(t);return ee.from(e?o.next(n):o.prev(n))},pd=function navigate(e,t,n){return gd(e,t,n).bind((function(o){return Hf(n,o,t)&&md(e,n,o)?gd(e,t,o):ee.some(o)}))},hd=function navigateIgnore(e,t,n,o){return pd(e,t,n).bind((function(n){return o(n)?navigateIgnore(e,t,n,o):ee.some(n)}))},vd=function positionIn(e,t){var n=e?t.firstChild:t.lastChild;return Co(n)?ee.some(Tc(n,e?0:n.data.length)):n?Si(n)?ee.some(e?Tc.before(n):function afterElement(e){return Eo(e)?Tc.before(e):Tc.after(e)}(n)):function walkToPositionIn(e,t,n){var o=e?Tc.before(n):Tc.after(n);return gd(e,t,o)}(e,t,n):ee.none()},bd=curry(gd,!0),yd=curry(gd,!1),Cd=curry(vd,!0),wd=curry(vd,!1),xd="_mce_caret",Sd=function isCaretNode(e){return co(e)&&e.id===xd},kd=function getParentCaretContainer(e,t){for(var n=t;n&&n!==e;){if(Sd(n))return n;n=n.parentNode}return null},Td=function isIndexBookmark(e){return $e(e,"name")},Ed=function isPathBookmark(e){return Kt.isArray(e.start)},Od=function isForwardBookmark(e){return!(!Td(e)&&I(e.forward))||e.forward},Ad=function addBogus(e,t){return co(t)&&e.isBlock(t)&&!t.innerHTML&&(t.innerHTML='<br data-mce-bogus="1" />'),t},_d=function tryFindRangePosition(e,t){return wd(e).fold(J,(function(e){return t.setStart(e.container(),e.offset()),t.setEnd(e.container(),e.offset()),!0}))},Dd=function padEmptyCaretContainer(e,t,n){return!(!function isEmpty$1(e){return!e.hasChildNodes()}(t)||!kd(e,t))&&(function insertZwsp(e,t){var n,o=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createTextNode(Qo);e.appendChild(o),t.setStart(o,0),t.setEnd(o,0)}(t,n),!0)},Rd=function setEndPoint(e,t,n,o){var i=n[t?"start":"end"],a=e.getRoot();if(i){for(var u=a,c=i[0],s=i.length-1;u&&s>=1;s--){var l=u.childNodes;if(Dd(a,u,o))return!0;if(i[s]>l.length-1)return!!Dd(a,u,o)||_d(u,o);u=l[i[s]]}Co(u)&&(c=Math.min(i[0],u.data.length)),co(u)&&(c=Math.min(i[0],u.childNodes.length)),t?o.setStart(u,c):o.setEnd(u,c)}return!0},Nd=function isValidTextNode(e){return Co(e)&&e.data.length>0},Md=function restoreEndPoint(e,t,n){var o=e.get(n.id+"_"+t),i=null===o||void 0===o?void 0:o.parentNode,a=n.keep;if(o&&i){var u,c;if("start"===t?a?o.hasChildNodes()?(u=o.firstChild,c=1):Nd(o.nextSibling)?(u=o.nextSibling,c=0):Nd(o.previousSibling)?(u=o.previousSibling,c=o.previousSibling.data.length):(u=i,c=e.nodeIndex(o)+1):(u=i,c=e.nodeIndex(o)):a?o.hasChildNodes()?(u=o.firstChild,c=1):Nd(o.previousSibling)?(u=o.previousSibling,c=o.previousSibling.data.length):(u=i,c=e.nodeIndex(o)):(u=i,c=e.nodeIndex(o)),!a){var s,l=o.previousSibling,d=o.nextSibling;for(Kt.each(Kt.grep(o.childNodes),(function(e){Co(e)&&(e.data=e.data.replace(/\uFEFF/g,""))}));s=e.get(n.id+"_"+t);)e.remove(s,!0);if(Co(d)&&Co(l)&&!Wt.browser.isOpera()){var m=l.data.length;l.appendData(d.data),e.remove(d),u=l,c=m}}return ee.some(Tc(u,c))}return ee.none()},Bd=function resolve(e,t){var n=e.dom;if(t){if(Ed(t))return function resolvePaths(e,t){var n=e.createRng();return Rd(e,!0,t,n)&&Rd(e,!1,t,n)?ee.some({range:n,forward:Od(t)}):ee.none()}(n,t);if(function isStringPathBookmark(e){return D(e.start)}(t))return function resolveCaretPositionBookmark(e,t){var n=ee.from(Lc(e.getRoot(),t.start)),o=ee.from(Lc(e.getRoot(),t.end));return Jt(n,o,(function(n,o){var i=e.createRng();return i.setStart(n.container(),n.offset()),i.setEnd(o.container(),o.offset()),{range:i,forward:Od(t)}}))}(n,t);if(function isIdBookmark(e){return $e(e,"id")}(t))return function resolveId(e,t){var n=Md(e,"start",t),o=Md(e,"end",t);return Jt(n,o.or(n),(function(n,o){var i=e.createRng();return i.setStart(Ad(e,n.container()),n.offset()),i.setEnd(Ad(e,o.container()),o.offset()),{range:i,forward:Od(t)}}))}(n,t);if(Td(t))return function resolveIndex(e,t){return ee.from(e.select(t.name)[t.index]).map((function(t){var n=e.createRng();return n.selectNode(t),{range:n,forward:!0}}))}(n,t);if(function isRangeBookmark(e){return $e(e,"rng")}(t))return ee.some({range:t.rng,forward:Od(t)})}return ee.none()},Id=function getBookmark$1(e,t,n){return Gc(e,t,n)},Pd=function moveToBookmark(e,t){Bd(e,t).each((function(t){var n=t.range,o=t.forward;e.setRng(n,o)}))},Ld=function isBookmarkNode$1(e){return co(e)&&"SPAN"===e.tagName&&"bookmark"===e.getAttribute("data-mce-type")},Fd=function is(e){return function(t){return e===t}}(Lo),Hd=function isWhiteSpace(e){return""!==e&&-1!==" \f\n\r\t\v".indexOf(e)},$d=function isContent(e){return!Hd(e)&&!Fd(e)&&!Fo(e)},zd=function getRanges$1(e){var t=[];if(e)for(var n=0;n<e.rangeCount;n++)t.push(e.getRangeAt(n));return t},Vd=function getCellsFromRanges(e){return fe(function getSelectedNodes(e){return be(e,(function(e){var t=tc(e);return t?[In.fromDom(t)]:[]}))}(e),qo)},Ud=function getCellsFromElementOrRanges(e,t){var n=function getCellsFromElement(e){return ro(e,"td[data-mce-selected],th[data-mce-selected]")}(t);return n.length>0?n:Vd(e)},Zd=function getCellsFromEditor(e){return Ud(zd(e.selection.getSel()),In.fromDom(e.getBody()))},Wd=function getClosestTable(e,t){return vr(e,"table",t)},jd=function getFirstChildren(e){return Qn(e).fold(W([e]),(function(t){return[e].concat(getFirstChildren(t))}))},Gd=function getLastChildren(e){return er(e).fold(W([e]),(function(t){return"br"===un(t)?Gn(t).map((function(t){return[e].concat(getLastChildren(t))})).getOr([]):[e].concat(getLastChildren(t))}))},qd=function hasAllContentsSelected(e,t){return Jt(function getStartNode(e){var t=e.startContainer,n=e.startOffset;return Co(t)?0===n?ee.some(In.fromDom(t)):ee.none():ee.from(t.childNodes[n]).map(In.fromDom)}(t),function getEndNode(e){var t=e.endContainer,n=e.endOffset;return Co(t)?n===t.data.length?ee.some(In.fromDom(t)):ee.none():ee.from(t.childNodes[n-1]).map(In.fromDom)}(t),(function(t,n){var o=pe(jd(e),curry(Hn,t)),i=pe(Gd(e),curry(Hn,n));return o.isSome()&&i.isSome()})).getOr(!1)},Kd=function moveEndPoint(e,t,n,o){var i=n,a=new io(n,i),u=Pe(e.schema.getMoveCaretBeforeOnEnterElements(),(function(e,t){return!ie(["td","th","table"],t.toLowerCase())})),c=n;do{if(Co(c)&&0!==Kt.trim(c.data).length)return void(o?t.setStart(c,0):t.setEnd(c,c.data.length));if(u[c.nodeName])return void(o?t.setStartBefore(c):"BR"===c.nodeName?t.setEndBefore(c):t.setEndAfter(c))}while(c=o?a.next():a.prev());"BODY"===i.nodeName&&(o?t.setStart(i,0):t.setEnd(i,i.childNodes.length))},Yd=function hasAnyRanges(e){var t=e.selection.getSel();return F(t)&&t.rangeCount>0},Xd=function runOnRanges(e,t){var n=Zd(e);n.length>0?ce(n,(function(n){var o=n.dom,i=e.dom.createRng();i.setStartBefore(o),i.setEndAfter(o),t(i,!0)})):t(e.selection.getRng(),!1)},Jd=function preserve(e,t,n){var o=jc(e,t);n(o),e.moveToBookmark(o)},Qd=function isNode(e){return $(null===e||void 0===e?void 0:e.nodeType)},em=function isElementNode$1(e){return co(e)&&!Ld(e)&&!Sd(e)&&!ho(e)},tm=function preserveSelection(e,t,n){var o=e.selection,i=e.dom,a=o.getNode(),u=_o(a);Jd(o,!0,(function(){t()})),u&&_o(a)&&i.isChildOf(a,e.getBody())?e.selection.select(a):n(o.getStart())&&nm(i,o)},nm=function moveStartToNearestText(e,t){var n,o,i=t.getRng(),a=i.startContainer,u=i.startOffset;if(!function isElementDirectlySelected(e,t){if(em(t)&&!/^(TD|TH)$/.test(t.nodeName)){var n=e.getAttrib(t,"data-mce-selected"),o=parseInt(n,10);return!isNaN(o)&&o>0}return!1}(e,t.getNode())&&co(a)){var c,s=a.childNodes,l=e.getRoot();if(u<s.length){var d=s[u];c=new io(d,null!==(n=e.getParent(d,e.isBlock))&&void 0!==n?n:l)}else{var m=s[s.length-1];(c=new io(m,null!==(o=e.getParent(m,e.isBlock))&&void 0!==o?o:l)).next(!0)}for(var g=c.current();g;g=c.next()){if("false"===e.getContentEditable(g))return;if(Co(g)&&!am(g))return i.setStart(g,0),void t.setRng(i)}}},rm=function getNonWhiteSpaceSibling(e,t,n){if(e){var o=t?"nextSibling":"previousSibling";for(e=n?e:e[o];e;e=e[o])if(co(e)||!am(e))return e}},om=function isTextBlock$1(e,t){return!!e.getTextBlockElements()[t.nodeName.toLowerCase()]||Qi(e,t)},im=function isValid(e,t,n){return e.schema.isValidChild(t,n)},am=function isWhiteSpaceNode$1(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(F(e)&&Co(e)){var n=t?e.data.replace(/ /g,"\xa0"):e.data;return Oi(n)}return!1},um=function isWrappableNoneditable(e,t){var n=e.dom;return em(t)&&"false"===n.getContentEditable(t)&&function isWrapNoneditableTarget(e,t){var n="[data-mce-cef-wrappable]",o=cl(e),i=dt(o)?n:"".concat(n,",").concat(o);return Ln(In.fromDom(t),i)}(e,t)&&0===n.select('[contenteditable="true"]',t).length},cm=function replaceVars(e,t){return H(e)?e(t):(F(t)&&(e=e.replace(/%(\w+)/g,(function(e,n){return t[n]||e}))),e)},sm=function isEq$5(e,t){return t=t||"",e=""+((e=e||"").nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()===t.toLowerCase()},lm=function normalizeStyleValue(e,t){if(L(e))return null;var n=String(e);return"color"!==t&&"backgroundColor"!==t||(n=ja(n)),"fontWeight"===t&&700===e&&(n="bold"),"fontFamily"===t&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n},fm=function getStyle(e,t,n){var o=e.getStyle(t,n);return lm(o,n)},dm=function getTextDecoration(e,t){var n;return e.getParent(t,(function(t){return!!co(t)&&(!!(n=e.getStyle(t,"text-decoration"))&&"none"!==n)})),n},mm=function getParents$2(e,t,n){return e.getParents(t,n,e.getRoot())},gm=function isFormatPredicate(e,t,n){var o=e.formatter.get(t);return F(o)&&ae(o,n)},pm=function areSimilarFormats(e,t,n){var o=["inline","block","selector","attributes","styles","classes"],i=function filterObj(e){return Pe(e,(function(e,t){return ae(o,(function(e){return e===t}))}))};return gm(e,t,(function(t){var o=i(t);return gm(e,n,(function(e){var t=i(e);return function equal$1(e,t){return w(arguments.length>2&&void 0!==arguments[2]?arguments[2]:x).eq(e,t)}(o,t)}))}))},hm=function isBlockFormat(e){return ze(e,"block")},vm=function isSelectorFormat(e){return ze(e,"selector")},bm=function isInlineFormat(e){return ze(e,"inline")},ym=function shouldExpandToSelector(e){return vm(e)&&!1!==e.expand&&!bm(e)},Cm=function isCaretContainerEmpty(e){return function getEmptyCaretContainers(e){for(var t=[],n=e;n;){if(Co(n)&&n.data!==Qo||n.childNodes.length>1)return[];co(n)&&t.push(n),n=n.firstChild}return t}(e).length>0},wm=function isEmptyCaretFormatElement(e){return Sd(e.dom)&&Cm(e.dom)},xm=Ld,Sm=mm,km=am,Tm=om,Em=function isBogusBr(e){return Eo(e)&&e.getAttribute("data-mce-bogus")&&!e.nextSibling},Om=function findParentContentEditable(e,t){for(var n=t;n;){if(co(n)&&e.getContentEditable(n))return"false"===e.getContentEditable(n)?n:t;n=n.parentNode}return t},Am=function walkText(e,t,n,o){var i=t.data;if(e){for(var a=n;a>0;a--)if(o(i.charAt(a-1)))return a}else for(var u=n;u<i.length;u++)if(o(i.charAt(u)))return u;return-1},_m=function findSpace(e,t,n){return Am(e,t,n,(function(e){return Fd(e)||Hd(e)}))},Dm=function findContent(e,t,n){return Am(e,t,n,$d)},Rm=function findWordEndPoint(e,t,n,o,i,a){var u,c=e.getParent(n,e.isBlock)||t,s=function walk(t,n,o){var a=Gu(e),s=i?a.backwards:a.forwards;return ee.from(s(t,n,(function(e,t){return xm(e.parentNode)?-1:(u=e,o(i,e,t))}),c))};return s(n,o,_m).bind((function(e){return a?s(e.container,e.offset+(i?-1:0),Dm):ee.some(e)})).orThunk((function(){return u?ee.some({container:u,offset:i?0:u.length}):ee.none()}))},Nm=function findSelectorEndPoint(e,t,n,o,i){var a=o[i];Co(o)&&dt(o.data)&&a&&(o=a);for(var u=Sm(e,o),c=0;c<u.length;c++)for(var s=0;s<t.length;s++){var l=t[s];if((!F(l.collapsed)||l.collapsed===n.collapsed)&&(vm(l)&&e.is(u[c],l.selector)))return u[c]}return o},Mm=function findBlockEndPoint(e,t,n,o){var i,a=n,u=e.getRoot(),c=t[0];if(hm(c)&&(a=c.wrapper?null:e.getParent(n,c.block,u)),!a){var s=null!==(i=e.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==i?i:u;a=e.getParent(Co(n)?n.parentNode:n,(function(t){return t!==u&&Tm(e.schema,t)}),s)}if(a&&hm(c)&&c.wrapper&&(a=Sm(e,a,"ul,ol").reverse()[0]||a),!a)for(a=n;a&&a[o]&&!e.isBlock(a[o])&&(a=a[o],!sm(a,"br")););return a||n},Bm=function isAtBlockBoundary$1(e,t,n,o){var i=n.parentNode;return!F(n[o])&&(!(i!==t&&!L(i)&&!e.isBlock(i))||isAtBlockBoundary$1(e,t,i,o))},Im=function findParentContainer(e,t,n,o,i){var a=n,u=i?"previousSibling":"nextSibling",c=e.getRoot();if(Co(n)&&!km(n)&&(i?o>0:o<n.data.length))return n;for(;a;){if(!t[0].block_expand&&e.isBlock(a))return a;for(var s=a[u];s;s=s[u]){var l=Co(s)&&!Bm(e,c,s,u);if(!xm(s)&&!Em(s)&&!km(s,l))return a}if(a===c||a.parentNode===c){n=a;break}a=a.parentNode}return n},Pm=function isSelfOrParentBookmark(e){return xm(e.parentNode)||xm(e)},Lm=function expandRng(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=t.startContainer,a=t.startOffset,u=t.endContainer,c=t.endOffset,s=n[0];(co(i)&&i.hasChildNodes()&&(i=nc(i,a),Co(i)&&(a=0)),co(u)&&u.hasChildNodes()&&(u=nc(u,t.collapsed?c:c-1),Co(u)&&(c=u.data.length)),i=Om(e,i),u=Om(e,u),Pm(i)&&(i=xm(i)?i:i.parentNode,i=t.collapsed?i.previousSibling||i:i.nextSibling||i,Co(i)&&(a=t.collapsed?i.length:0)),Pm(u)&&(u=xm(u)?u:u.parentNode,u=t.collapsed?u.nextSibling||u:u.previousSibling||u,Co(u)&&(c=t.collapsed?0:u.length)),t.collapsed)&&(Rm(e,e.getRoot(),i,a,!0,o).each((function(e){var t=e.container,n=e.offset;i=t,a=n})),Rm(e,e.getRoot(),u,c,!1,o).each((function(e){var t=e.container,n=e.offset;u=t,c=n})));return(bm(s)||s.block_expand)&&(bm(s)&&Co(i)&&0!==a||(i=Im(e,n,i,a,!0)),bm(s)&&Co(u)&&c!==u.data.length||(u=Im(e,n,u,c,!1))),ym(s)&&(i=Nm(e,n,t,i,"previousSibling"),u=Nm(e,n,t,u,"nextSibling")),(hm(s)||vm(s))&&(i=Mm(e,n,i,"previousSibling"),u=Mm(e,n,u,"nextSibling"),hm(s)&&(e.isBlock(i)||(i=Im(e,n,i,a,!0)),e.isBlock(u)||(u=Im(e,n,u,c,!1)))),co(i)&&i.parentNode&&(a=e.nodeIndex(i),i=i.parentNode),co(u)&&u.parentNode&&(c=e.nodeIndex(u)+1,u=u.parentNode),{startContainer:i,startOffset:a,endContainer:u,endOffset:c}},Fm=function walk$3(e,t,n){var o,i=t.startOffset,a=nc(t.startContainer,i),u=t.endOffset,c=nc(t.endContainer,u-1),s=function exclude(e){var t=e[0];Co(t)&&t===a&&i>=t.data.length&&e.splice(0,1);var n=e[e.length-1];return 0===u&&e.length>0&&n===c&&Co(n)&&e.splice(e.length-1,1),e},l=function collectSiblings(e,t,n){for(var o=[];e&&e!==n;e=e[t])o.push(e);return o},d=function findEndPoint(t,n){return e.getParent(t,(function(e){return e.parentNode===n}),n)},m=function walkBoundary(e,t,o){for(var i=o?"nextSibling":"previousSibling",a=e,u=a.parentNode;a&&a!==t;a=u){u=a.parentNode;var c=l(a===e?a:a[i],i);c.length&&(o||c.reverse(),n(s(c)))}};if(a===c)return n(s([a]));var g=null!==(o=e.findCommonAncestor(a,c))&&void 0!==o?o:e.getRoot();if(e.isChildOf(a,c))return m(a,g,!0);if(e.isChildOf(c,a))return m(c,g);var p=d(a,g)||a,h=d(c,g)||c;m(a,p,!0);var v=l(p===a?p:p.nextSibling,"nextSibling",h===c?h.nextSibling:h);v.length&&n(s(v)),m(c,h)},Hm=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],$m=function context(e,t,n,o){return Zn(t).fold((function(){return"skipping"}),(function(i){return"br"===o||function isZeroWidth(e){return dn(e)&&$o(e)===Qo}(t)?"valid":function isAnnotation(e){return fn(e)&&Mn(e,Ou())}(t)?"existing":Sd(t.dom)?"caret":ae(Hm,(function(e){return Ln(t,e)}))?"valid-block":im(e,n,o)&&im(e,un(i),n)?"valid":"invalid-child"}))},zm=function applyAnnotation(e,t,n,o,i,a){var u=n.uid,c=void 0===u?t:u,l=s(n,v);_n(e,Ou()),vn(e,"".concat(_u()),c),vn(e,"".concat(Au()),o);var d=i(c,l),m=d.attributes,g=void 0===m?{}:m,p=d.classes,h=void 0===p?[]:p;if(bn(e,g),function add(e,t){ce(t,(function(t){_n(e,t)}))}(e,h),a){h.length>0&&vn(e,"".concat(Ru()),h.join(","));var b=_e(g);b.length>0&&vn(e,"".concat(Nu()),b.join(","))}},Vm=function removeDirectAnnotation(e){Rn(e,Ou()),xn(e,"".concat(_u())),xn(e,"".concat(Au())),xn(e,"".concat(Du()));var t=Cn(e,"".concat(Nu())).map((function(e){return e.split(",")})).getOr([]),n=Cn(e,"".concat(Ru())).map((function(e){return e.split(",")})).getOr([]);ce(t,(function(t){return xn(e,t)})),function remove$4(e,t){ce(t,(function(t){Rn(e,t)}))}(e,n),xn(e,"".concat(Ru())),xn(e,"".concat(Nu()))},Um=function makeAnnotation(e,t,n,o,i){var a=In.fromTag("span",e);return zm(a,t,n,o,i,!1),a},Zm=function annotate(e,t,n,o,i,a){var u=[],c=Um(e.getDoc(),n,a,o,i),s=ku(),l=function finishWrapper(){s.clear()},d=function processElements(e){ce(e,m)},m=function processElement(t){switch($m(e,t,"span",un(t))){case"invalid-child":l();var m=Xn(t);d(m),l();break;case"valid-block":l(),zm(t,n,a,o,i,!0);break;case"valid":var g=function getOrOpenWrapper(){return s.get().getOrThunk((function(){var e=Uu(c);return u.push(e),s.set(e),e}))}();Pr(t,g)}};return Fm(e.dom,t,(function(e){l(),function processNodes(e){var t=ue(e,In.fromDom);d(t)}(e)})),u},Wm=function annotateWithBookmark(e,t,n,o){e.undoManager.transact((function(){var i=e.selection,a=i.getRng(),u=Zd(e).length>0,c=zu("mce-annotation");if(a.collapsed&&!u&&function applyWordGrab(e,t){var n=Lm(e.dom,t,[{inline:"span"}]);t.setStart(n.startContainer,n.startOffset),t.setEnd(n.endContainer,n.endOffset),e.selection.setRng(t)}(e,a),i.getRng().collapsed&&!u){var s=Um(e.getDoc(),c,o,t,n.decorate);Ur(s,Lo),i.getRng().insertNode(s.dom),i.select(s.dom)}else Jd(i,!1,(function(){Xd(e,(function(i){Zm(e,i,c,t,n.decorate,o)}))}))}))},jm=function Annotator(e){var t=function create$c(){var e={};return{register:function register(t,n){e[t]={name:t,settings:n}},lookup:function lookup(t){return He(e,t).map((function(e){return e.settings}))},getNames:function getNames(){return _e(e)}}}();Hu(e,t);var n=Fu(e,t),o=pn("span"),i=function removeAnnotations(e){ce(e,(function(e){o(e)?$r(e):Vm(e)}))};return{register:function register(e,n){t.register(e,n)},annotate:function annotate(n,o){t.lookup(n).each((function(t){Wm(e,n,t,o)}))},annotationChanged:function annotationChanged(e,t){n.addListener(e,t)},remove:function remove(t){Bu(e,ee.some(t)).each((function(t){var n=t.elements,o=e.selection.getBookmark();i(n),e.selection.moveToBookmark(o)}))},removeAll:function removeAll(t){var n=e.selection.getBookmark();Re(Lu(e,t),(function(e,t){i(e)})),e.selection.moveToBookmark(n)},getAll:function getAll(t){var n=Lu(e,t);return Ne(n,(function(e){return ue(e,(function(e){return e.dom}))}))}}},Gm=function BookmarkManager(e){return{getBookmark:curry(Id,e),moveToBookmark:curry(Pd,e)}};Gm.isBookmarkNode=Ld;var qm=function isXYWithinRange(e,t,n){return!n.collapsed&&ae(n.getClientRects(),(function(n){return function containsXY(e,t,n){return t>=e.left&&t<=e.right&&n>=e.top&&n<=e.bottom}(n,e,t)}))},Km=function fireError(e,t,n){e.dispatch(t,n)},Ym=function fireFormatApply(e,t,n,o){e.dispatch("FormatApply",{format:t,node:n,vars:o})},Xm=function fireFormatRemove(e,t,n,o){e.dispatch("FormatRemove",{format:t,node:n,vars:o})},Jm=function fireSetContent(e,t){return e.dispatch("SetContent",t)},Qm=function fireGetContent(e,t){return e.dispatch("GetContent",t)},eg=function firePastePlainTextToggle(e,t){return e.dispatch("PastePlainTextToggle",{state:t})},tg={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:function modifierPressed(e){return e.shiftKey||e.ctrlKey||e.altKey||tg.metaKeyPressed(e)},metaKeyPressed:function metaKeyPressed(e){return Wt.os.isMacOS()||Wt.os.isiOS()?e.metaKey:e.ctrlKey&&!e.altKey}},ng="data-mce-selected",rg=Math.abs,og=Math.round,ig={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},ag=function ControlSelection(e,t){var n,o,i,a,u,c,s,l,d,m,g,p,h,v,b,y=t.dom,C=t.getDoc(),w=document,x=t.getBody(),S=function isImage(e){return F(e)&&(Oo(e)||y.is(e,"figure.image"))},k=function isMedia(e){return No(e)||y.hasClass(e,"mce-preview-object")},T=function contextMenuSelectImage(e){var n=e.target;(function isEventOnImageOutsideRange(e,t){if(function isTouchEvent(e){return"longpress"===e.type||0===e.type.indexOf("touch")}(e)){var n=e.touches[0];return S(e.target)&&!qm(n.clientX,n.clientY,t)}return S(e.target)&&!qm(e.clientX,e.clientY,t)})(e,t.selection.getRng())&&!e.isDefaultPrevented()&&t.selection.select(n)},E=function getResizeTargets(e){return y.hasClass(e,"mce-preview-object")&&F(e.firstElementChild)?[e,e.firstElementChild]:y.is(e,"figure.image")?[e.querySelector("img")]:[e]},O=function isResizable(e){var n=Ks(t);return!!n&&("false"!==e.getAttribute("data-mce-resize")&&(e!==t.getBody()&&(y.hasClass(e,"mce-preview-object")&&F(e.firstElementChild)?Ln(In.fromDom(e.firstElementChild),n):Ln(In.fromDom(e),n))))},A=function setSizeProp(e,n,o){if(F(o)){var i=E(e);ce(i,(function(e){e.style[n]||!t.schema.isValid(e.nodeName.toLowerCase(),n)?y.setStyle(e,n,o):y.setAttrib(e,n,""+o)}))}},D=function setGhostElmSize(e,t,n){A(e,"width",t),A(e,"height",n)},R=function resizeGhostElement(e){var u,C,w,T;u=e.screenX-c,C=e.screenY-s,p=u*a[2]+l,h=C*a[3]+d,p=p<5?5:p,h=h<5?5:h,((S(n)||k(n))&&!1!==Ys(t)?!tg.modifierPressed(e):tg.modifierPressed(e))&&(rg(u)>rg(C)?(h=og(p*m),p=og(h/m)):(p=og(h/m),h=og(p*m))),D(o,p,h),w=(w=a.startPos.x+u)>0?w:0,T=(T=a.startPos.y+C)>0?T:0,y.setStyles(i,{left:w,top:T,display:"block"}),i.innerHTML=p+" &times; "+h,a[2]<0&&o.clientWidth<=p&&y.setStyle(o,"left",undefined+(l-p)),a[3]<0&&o.clientHeight<=h&&y.setStyle(o,"top",undefined+(d-h)),(u=x.scrollWidth-v)+(C=x.scrollHeight-b)!==0&&y.setStyles(i,{left:w-u,top:T-C}),g||(!function fireObjectResizeStart(e,t,n,o,i){e.dispatch("ObjectResizeStart",{target:t,width:n,height:o,origin:i})}(t,n,l,d,"corner-"+a.name),g=!0)},N=function endGhostResize(){var e=g;g=!1,e&&(A(n,"width",p),A(n,"height",h)),y.unbind(C,"mousemove",R),y.unbind(C,"mouseup",endGhostResize),w!==C&&(y.unbind(w,"mousemove",R),y.unbind(w,"mouseup",endGhostResize)),y.remove(o),y.remove(i),y.remove(u),M(n),e&&(!function fireObjectResized(e,t,n,o,i){e.dispatch("ObjectResized",{target:t,width:n,height:o,origin:i})}(t,n,p,h,"corner-"+a.name),y.setAttrib(n,"style",y.getAttrib(n,"style"))),t.nodeChanged()},M=function showResizeRect(e){H();var g=y.getPos(e,x),S=g.x,T=g.y,A=e.getBoundingClientRect(),M=A.width||A.right-A.left,B=A.height||A.bottom-A.top;n!==e&&(I(),n=e,p=h=0);var P=t.dispatch("ObjectSelected",{target:e});O(e)&&!P.isDefaultPrevented()?Re(ig,(function(e,t){var g=function startDrag(g){var p=E(n)[0];c=g.screenX,s=g.screenY,l=p.clientWidth,d=p.clientHeight,m=d/l,(a=e).name=t,a.startPos={x:M*e[0]+S,y:B*e[1]+T},v=x.scrollWidth,b=x.scrollHeight,u=y.add(x,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),y.setStyles(u,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),o=function createGhostElement(e){return k(e)?y.create("img",{src:Wt.transparentSrc}):e.cloneNode(!0)}(n),y.addClass(o,"mce-clonedresizable"),y.setAttrib(o,"data-mce-bogus","all"),o.contentEditable="false",y.setStyles(o,{left:S,top:T,margin:0}),D(o,M,B),o.removeAttribute(ng),x.appendChild(o),y.bind(C,"mousemove",R),y.bind(C,"mouseup",N),w!==C&&(y.bind(w,"mousemove",R),y.bind(w,"mouseup",N)),i=y.add(x,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},l+" &times; "+d)},p=y.get("mceResizeHandle"+t);p&&y.remove(p),p=y.add(x,"div",{id:"mceResizeHandle"+t,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+t+"-resize; margin:0; padding:0"}),y.bind(p,"mousedown",(function(e){e.stopImmediatePropagation(),e.preventDefault(),g(e)})),e.elm=p,y.setStyles(p,{left:M*e[0]+S-p.offsetWidth/2,top:B*e[1]+T-p.offsetHeight/2})})):I(!1)},B=Tu(M,0),I=function hideResizeRect(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];B.cancel(),H(),n&&e&&n.removeAttribute(ng),Re(ig,(function(e,t){var n=y.get("mceResizeHandle"+t);n&&(y.unbind(n),y.remove(n))}))},P=function isChildOrEqual(e,t){return y.isChildOf(e,t)},L=function updateResizeRect(n){if(!(g||t.removed||t.composing)){var o="mousedown"===n.type?n.target:e.getNode(),i=Cr(In.fromDom(o),"table,img,figure.image,hr,video,span.mce-preview-object,details").map((function(e){return e.dom})).filter((function(e){return y.isEditable(e.parentElement)||"IMG"===e.nodeName&&y.isEditable(e)})).getOrUndefined(),a=F(i)?y.getAttrib(i,ng,"1"):"1";if(ce(y.select("img[".concat(ng,"],hr[").concat(ng,"]")),(function(e){e.removeAttribute(ng)})),F(i)&&P(i,x)&&t.hasFocus()){$();var u=e.getStart(!0);if(P(u,i)&&P(e.getEnd(!0),i))return y.setAttrib(i,ng,a),void B.throttle(i)}I()}},H=function unbindResizeHandleEvents(){Re(ig,(function(e){e.elm&&(y.unbind(e.elm),delete e.elm)}))},$=function disableGeckoResize(){try{t.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(e){}};t.on("init",(function(){$(),t.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",L),t.on("keyup compositionend",(function(e){n&&"TABLE"===n.nodeName&&L(e)})),t.on("hide blur",I),t.on("contextmenu longpress",T,!0)})),t.on("remove",H);return{isResizable:O,showResizeRect:M,hideResizeRect:I,updateResizeRect:L,destroy:function destroy(){B.cancel(),n=o=u=null}}},ug=function relativeToNative(e,t,n){var o=e.document.createRange();return function setStart(e,t){t.fold((function(t){e.setStartBefore(t.dom)}),(function(t,n){e.setStart(t.dom,n)}),(function(t){e.setStartAfter(t.dom)}))}(o,t),function setFinish(e,t){t.fold((function(t){e.setEndBefore(t.dom)}),(function(t,n){e.setEnd(t.dom,n)}),(function(t){e.setEndAfter(t.dom)}))}(o,n),o},cg=function exactToNative(e,t,n,o,i){var a=e.document.createRange();return a.setStart(t.dom,n),a.setEnd(o.dom,i),a},sg=Jc([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),lg=function fromRange(e,t,n){return t(In.fromDom(n.startContainer),n.startOffset,In.fromDom(n.endContainer),n.endOffset)},fg=function diagnose(e,t){var n=function getRanges(e,t){return t.match({domRange:function domRange(e){return{ltr:W(e),rtl:ee.none}},relative:function relative(t,n){return{ltr:Xe((function(){return ug(e,t,n)})),rtl:Xe((function(){return ee.some(ug(e,n,t))}))}},exact:function exact(t,n,o,i){return{ltr:Xe((function(){return cg(e,t,n,o,i)})),rtl:Xe((function(){return ee.some(cg(e,o,i,t,n))}))}}})}(e,t);return function doDiagnose(e,t){var n=t.ltr();return n.collapsed?t.rtl().filter((function(e){return!1===e.collapsed})).map((function(e){return sg.rtl(In.fromDom(e.endContainer),e.endOffset,In.fromDom(e.startContainer),e.startOffset)})).getOrThunk((function(){return lg(0,sg.ltr,n)})):lg(0,sg.ltr,n)}(0,n)};sg.ltr,sg.rtl;var dg=function create$a(e,t,n,o){return{start:e,soffset:t,finish:n,foffset:o}},mg=function caretPositionFromPoint(e,t,n){var o,i;return ee.from(null===(i=(o=e.dom).caretPositionFromPoint)||void 0===i?void 0:i.call(o,t,n)).bind((function(t){if(null===t.offsetNode)return ee.none();var n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),ee.some(n)}))},gg=function caretRangeFromPoint(e,t,n){var o,i;return ee.from(null===(i=(o=e.dom).caretRangeFromPoint)||void 0===i?void 0:i.call(o,t,n))},pg=document.caretPositionFromPoint?mg:document.caretRangeFromPoint?gg:ee.none,hg=Jc([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),vg={before:hg.before,on:hg.on,after:hg.after,cata:function cata(e,t,n,o){return e.fold(t,n,o)},getStart:function getStart$2(e){return e.fold(j,j,j)}},bg=Jc([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),yg={domRange:bg.domRange,relative:bg.relative,exact:bg.exact,exactFromRange:function exactFromRange(e){return bg.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function getWin(e){var t=function getStart$1(e){return e.match({domRange:function domRange(e){return In.fromDom(e.startContainer)},relative:function relative(e,t){return vg.getStart(e)},exact:function exact(e,t,n,o){return e}})}(e);return Un(t)},range:dg},Cg=function beforeSpecial(e,t){var n=un(e);return"input"===n?vg.after(e):ie(["br","img"],n)?0===t?vg.before(e):vg.after(e):vg.on(e,t)},wg=function preprocessRelative(e,t){var n=e.fold(vg.before,Cg,vg.after),o=t.fold(vg.before,Cg,vg.after);return yg.relative(n,o)},xg=function preprocessExact(e,t,n,o){var i=Cg(e,t),a=Cg(n,o);return yg.relative(i,a)},Sg=function fromElements(e,t){var n=(t||document).createDocumentFragment();return ce(e,(function(e){n.appendChild(e.dom)})),In.fromDom(n)},kg=function toNative(e){var t=yg.getWin(e).dom,n=function getDomRange(e,n,o,i){return cg(t,e,n,o,i)},o=function preprocess(e){return e.match({domRange:function domRange(e){var t=In.fromDom(e.startContainer),n=In.fromDom(e.endContainer);return xg(t,e.startOffset,n,e.endOffset)},relative:wg,exact:xg})}(e);return fg(t,o).match({ltr:n,rtl:n})},Tg=function getAtPoint(e,t,n){return function fromPoint$1(e,t,n){var o=In.fromDom(e.document);return pg(o,t,n).map((function(e){return dg(In.fromDom(e.startContainer),e.startOffset,In.fromDom(e.endContainer),e.endOffset)}))}(e,t,n)},Eg=function fromPoint(e,t,n){var o=Un(In.fromDom(n));return Tg(o.dom,e,t).map((function(e){var t=n.createRange();return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),t})).getOrUndefined()},Og=function isEq$4(e,t){return F(e)&&F(t)&&e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset},Ag=function hasParent$1(e,t,n){return null!==function findParent(e,t,n){for(var o=e;o&&o!==t;){if(n(o))return o;o=o.parentNode}return null}(e,t,n)},_g=function hasParentWithName(e,t,n){return Ag(e,t,(function(e){return e.nodeName===n}))},Dg=function isCeFalseCaretContainer(e,t){return ai(e)&&!Ag(e,t,Sd)},Rg=function hasBrBeforeAfter(e,t,n){var o=t.parentNode;if(o)for(var i,a=new io(t,e.getParent(o,e.isBlock)||e.getRoot());i=a[n?"prev":"next"]();)if(Eo(i))return!0;return!1},Ng=function findTextNodeRelative(e,t,n,o,i){var a,u,c=e.getRoot(),s=e.schema.getNonEmptyElements(),l=i.parentNode;if(!l)return ee.none();var d=e.getParent(l,e.isBlock)||c;if(o&&Eo(i)&&t&&e.isEmpty(d))return ee.some(Tc(l,e.nodeIndex(i)));for(var m=new io(i,d);u=m[o?"prev":"next"]();){if("false"===e.getContentEditableParent(u)||Dg(u,c))return ee.none();if(Co(u)&&u.data.length>0)return _g(u,c,"A")?ee.none():ee.some(Tc(u,o?u.data.length:0));if(e.isBlock(u)||s[u.nodeName.toLowerCase()])return ee.none();a=u}return So(a)?ee.none():n&&a?ee.some(Tc(a,0)):ee.none()},Mg=function normalizeEndPoint(e,t,n,o){var i,a=e.getRoot(),u=!1,c=n?o.startContainer:o.endContainer,s=n?o.startOffset:o.endOffset,l=co(c)&&s===c.childNodes.length,d=e.schema.getNonEmptyElements(),m=n;if(ai(c))return ee.none();if(co(c)&&s>c.childNodes.length-1&&(m=!1),ko(c)&&(c=a,s=0),c===a){if(m&&(i=c.childNodes[s>0?s-1:0])){if(ai(i))return ee.none();if(d[i.nodeName]||vo(i))return ee.none()}if(c.hasChildNodes()){if(s=Math.min(!m&&s>0?s-1:s,c.childNodes.length-1),c=c.childNodes[s],s=Co(c)&&l?c.data.length:0,!t&&c===a.lastChild&&vo(c))return ee.none();if(function hasContentEditableFalseParent(e,t){for(var n=t;n&&n!==e;){if(_o(n))return!0;n=n.parentNode}return!1}(a,c)||ai(c))return ee.none();if(Bo(c))return ee.none();if(c.hasChildNodes()&&!vo(c)){i=c;var g=new io(c,a);do{if(_o(i)||ai(i)){u=!1;break}if(Co(i)&&i.data.length>0){s=m?0:i.data.length,c=i,u=!0;break}if(d[i.nodeName.toLowerCase()]&&!Ro(i)){s=e.nodeIndex(i),c=i.parentNode,m||s++,u=!0;break}}while(i=m?g.next():g.prev())}}}return t&&(Co(c)&&0===s&&Ng(e,l,t,!0,c).each((function(e){c=e.container(),s=e.offset(),u=!0})),co(c)&&((i=c.childNodes[s])||(i=c.childNodes[s-1]),!i||!Eo(i)||function isPrevNode(e,t){var n;return(null===(n=e.previousSibling)||void 0===n?void 0:n.nodeName)===t}(i,"A")||Rg(e,i,!1)||Rg(e,i,!0)||Ng(e,l,t,!0,i).each((function(e){c=e.container(),s=e.offset(),u=!0})))),m&&!t&&Co(c)&&s===c.data.length&&Ng(e,l,t,!1,c).each((function(e){c=e.container(),s=e.offset(),u=!0})),u&&c?ee.some(Tc(c,s)):ee.none()},Bg=function normalize$2(e,t){var n=t.collapsed,o=t.cloneRange(),i=Tc.fromRangeStart(t);return Mg(e,n,!0,o).each((function(e){n&&Tc.isAbove(i,e)||o.setStart(e.container(),e.offset())})),n||Mg(e,n,!1,o).each((function(e){o.setEnd(e.container(),e.offset())})),n&&o.collapse(!0),Og(t,o)?ee.none():ee.some(o)},Ig=function splitText(e,t){return e.splitText(t)},Pg=function split(e){var t=e.startContainer,n=e.startOffset,o=e.endContainer,i=e.endOffset;if(t===o&&Co(t)){if(n>0&&n<t.data.length)if(t=(o=Ig(t,n)).previousSibling,i>n){var a=Ig(o,i-=n).previousSibling;t=o=a,i=a.data.length,n=0}else i=0}else if(Co(t)&&n>0&&n<t.data.length&&(t=Ig(t,n),n=0),Co(o)&&i>0&&i<o.data.length){var u=Ig(o,i).previousSibling;o=u,i=u.data.length}return{startContainer:t,startOffset:n,endContainer:o,endOffset:i}},Lg=function RangeUtils(e){return{walk:function walk(t,n){return Fm(e,t,n)},split:Pg,expand:function expand(t){if("word"===(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:"word"}).type){var n=Lm(e,t,[{inline:"span"}]),o=e.createRng();return o.setStart(n.startContainer,n.startOffset),o.setEnd(n.endContainer,n.endOffset),o}return t},normalize:function normalize(t){return Bg(e,t).fold(J,(function(e){return t.setStart(e.startContainer,e.startOffset),t.setEnd(e.endContainer,e.endOffset),!0}))}}};Lg.compareRanges=Og,Lg.getCaretRangeFromPoint=Eg,Lg.getSelectedNode=tc,Lg.getNode=nc;var Fg,Hg=function Dimension(e,t){var n=function get(n){var o=t(n);if(o<=0||null===o){var i=Or(n,e);return parseFloat(i)||0}return o},o=function aggregate(e,t){return me(t,(function(t,n){var o=Or(e,n),i=void 0===o?0:parseInt(o,10);return isNaN(i)?t:t+i}),0)};return{set:function set(t,n){if(!$(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);var o=t.dom;Sr(o)&&(o.style[e]=n+"px")},get:n,getOuter:n,aggregate:o,max:function max(e,t,n){var i=o(e,n);return t>i?t-i:0}}}("height",(function(e){var t=e.dom;return fr(e)?t.getBoundingClientRect().height:t.offsetHeight})),$g=function getDocument(){return In.fromDom(document)},zg=function walkUp(e,t){return e.view(t).fold(W([]),(function(t){var n=e.owner(t),o=walkUp(e,n);return[t].concat(o)}))},Vg=function pathTo(e,t){var n=t.owner(e);return zg(t,n)},Ug=Object.freeze({__proto__:null,view:function view(e){var t;return(e.dom===document?ee.none():ee.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(In.fromDom)},owner:function owner(e){return Vn(e)}}),Zg=function excludeFromDescend(e){return"textarea"===un(e)},Wg=function markerInfo(e,t){var n=function absolute(e){var t=e.dom.ownerDocument,n=t.body,o=t.defaultView,i=t.documentElement;if(n===e.dom)return Gr(n.offsetLeft,n.offsetTop);var a=qr(null===o||void 0===o?void 0:o.pageYOffset,i.scrollTop),u=qr(null===o||void 0===o?void 0:o.pageXOffset,i.scrollLeft),c=qr(i.clientTop,n.clientTop),s=qr(i.clientLeft,n.clientLeft);return Kr(e).translate(u-s,a-c)}(e),o=function get$2(e){return Hg.get(e)}(e);return{element:e,bottom:n.top+o,height:o,pos:n,cleanup:t}},jg=function createMarker$1(e,t){var n=function descend(e,t){var n=Xn(e);if(0===n.length||Zg(e))return{element:e,offset:t};if(t<n.length&&!Zg(n[t]))return{element:n[t],offset:0};var o=n[n.length-1];return Zg(o)?{element:e,offset:t}:"img"===un(o)?{element:o,offset:1}:dn(o)?{element:o,offset:$o(o).length}:{element:o,offset:Xn(o).length}}(e,t),o=In.fromHtml('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return Nr(n.element,o),Wg(o,(function(){return Hr(o)}))},Gg=function withMarker(e,t,n,o){Xg(e,(function(i,a){return Kg(e,t,n,o)}),n)},qg=function withScrollEvents(e,t,n,o,i){var a={elm:o.element.dom,alignToTop:i};(function fireScrollIntoViewEvent(e,t){return e.dispatch("ScrollIntoView",t).isDefaultPrevented()})(e,a)||(n(e,t,Yr(t).top,o,i),function fireAfterScrollIntoViewEvent(e,t){e.dispatch("AfterScrollIntoView",t)}(e,a))},Kg=function applyWithMarker(e,t,n,o){var i=In.fromDom(e.getBody()),a=In.fromDom(e.getDoc());!function reflow(e){e.dom.offsetWidth}(i);var u=jg(In.fromDom(n.startContainer),n.startOffset);qg(e,a,t,u,o),u.cleanup()},Yg=function withElement(e,t,n,o){var i=In.fromDom(e.getDoc());qg(e,i,n,function elementMarker(e){return Wg(In.fromDom(e),V)}(t),o)},Xg=function preserveWith(e,t,n){var o=n.startContainer,i=n.startOffset,a=n.endContainer,u=n.endOffset;t(In.fromDom(o),In.fromDom(a));var c=e.dom.createRng();c.setStart(o,i),c.setEnd(a,u),e.selection.setRng(n)},Jg=function scrollToMarker(e,t,n,o,i){var a=t.pos;if(o)Xr(a.left,a.top,i);else{var u=a.top-n+t.height;Xr(-e.getBody().getBoundingClientRect().left,u,i)}},Qg=function intoWindowIfNeeded(e,t,n,o,i,a){var u=o+n,c=i.pos.top,s=i.bottom,l=s-c>=o;if(c<n)Jg(e,i,o,!1!==a,t);else if(c>u){Jg(e,i,o,l?!1!==a:!0===a,t)}else s>u&&!l&&Jg(e,i,o,!0===a,t)},ep=function intoWindow(e,t,n,o,i){var a=Un(t).dom.innerHeight;Qg(e,t,n,a,o,i)},tp=function intoFrame(e,t,n,o,i){var a=Un(t).dom.innerHeight;Qg(e,t,n,a,o,i);var u=function find(e){var t=$g(),n=Yr(t),o=Vg(e,Ug),i=Kr(e),a=de(o,(function(e,t){var n=Kr(t);return{left:e.left+n.left,top:e.top+n.top}}),{left:0,top:0});return Gr(a.left+i.left+n.left,a.top+i.top+n.top)}(o.element),c=eo(window);u.top<c.y?Jr(o.element,!1!==i):u.top>c.bottom&&Jr(o.element,!0===i)},np=function rangeIntoWindow(e,t,n){return Gg(e,ep,t,n)},rp=function elementIntoWindow(e,t,n){return Yg(e,t,ep,n)},op=function rangeIntoFrame(e,t,n){return Gg(e,tp,t,n)},ip=function elementIntoFrame(e,t,n){return Yg(e,t,tp,n)},ap=function scrollRangeIntoView(e,t,n){(e.inline?np:op)(e,t,n)},up=function focus$1(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.dom.focus({preventScroll:t})},cp=function hasFocus$1(e){var t=ar(e).dom;return e.dom===t.activeElement},sp=function active$1(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$g();return ee.from(e.dom.activeElement).map(In.fromDom)},lp=function clamp$1(e,t){var n=dn(t)?$o(t).length:Xn(t).length+1;return e>n?n:e<0?0:e},fp=function normalizeRng(e){return yg.range(e.start,lp(e.soffset,e.start),e.finish,lp(e.foffset,e.finish))},dp=function isOrContains(e,t){return!uo(t.dom)&&($n(e,t)||Hn(e,t))},mp=function isRngInRoot(e){return function(t){return dp(e,t.start)&&dp(e,t.finish)}},gp=function nativeRangeToSelectionRange(e){return yg.range(In.fromDom(e.startContainer),e.startOffset,In.fromDom(e.endContainer),e.endOffset)},pp=function getBookmark(e){return function readRange(e){var t=e.getSelection();return(t&&0!==t.rangeCount?ee.from(t.getRangeAt(0)):ee.none()).map(gp)}(Un(e).dom).filter(mp(e))},hp=function bookmarkToNativeRng(e){var t=document.createRange();try{return t.setStart(e.start.dom,e.soffset),t.setEnd(e.finish.dom,e.foffset),ee.some(t)}catch(n){return ee.none()}},vp=function store(e){var t=function shouldStore(e){return e.inline||Wt.browser.isFirefox()}(e)?pp(In.fromDom(e.getBody())):ee.none();e.bookmark=t.isSome()?t:e.bookmark},bp=function getRng(e){return(e.bookmark?e.bookmark:ee.none()).bind((function(t){return function validate(e,t){return ee.from(t).filter(mp(e)).map(fp)}(In.fromDom(e.getBody()),t)})).bind(hp)},yp={isEditorUIElement:function isEditorUIElement$1(e){var t=e.className.toString();return-1!==t.indexOf("tox-")||-1!==t.indexOf("mce-")}},Cp={setEditorTimeout:function setEditorTimeout(e,t,n){return function wrappedSetTimeout(e,t){return $(t)||(t=0),setTimeout(e,t)}((function(){e.removed||t()}),n)},setEditorInterval:function setEditorInterval(e,t,n){var o=function wrappedSetInterval(e,t){return $(t)||(t=0),setInterval(e,t)}((function(){e.removed?clearInterval(o):t()}),n);return o}},wp=function register$6(e){var t=Tu((function(){vp(e)}),0);e.on("init",(function(){e.inline&&function registerPageMouseUp(e,t){var n=function mouseUpPage(){t.throttle()};gu.DOM.bind(document,"mouseup",n),e.on("remove",(function(){gu.DOM.unbind(document,"mouseup",n)}))}(e,t),function registerEditorEvents(e,t){!function registerMouseUp(e,t){e.on("mouseup touchend",(function(e){t.throttle()}))}(e,t),e.on("keyup NodeChange AfterSetSelectionRange",(function(t){(function isManualNodeChange(e){return"nodechange"===e.type&&e.selectionChange})(t)||vp(e)}))}(e,t)})),e.on("remove",(function(){t.cancel()}))},xp=gu.DOM,Sp=function isEditorContentAreaElement(e){var t=e.classList;return void 0!==t&&(t.contains("tox-edit-area")||t.contains("tox-edit-area__iframe")||t.contains("mce-content-body"))},kp=function isUIElement(e,t){var n=sl(e),o=xp.getParent(t,(function(t){return function isEditorUIElement(e){return co(e)&&yp.isEditorUIElement(e)}(t)||!!n&&e.dom.is(t,n)}));return null!==o},Tp=function getActiveElement(e){try{var t=ar(In.fromDom(e.getElement()));return sp(t).fold((function(){return document.body}),(function(e){return e.dom}))}catch(n){return document.body}},Ep=function registerEvents$1(e,t){var n=t.editor;wp(n);var o=function toggleContentAreaOnFocus(e,t){Xl(e)&&!0!==e.inline&&t(In.fromDom(e.getContainer()),"tox-edit-focus")};n.on("focusin",(function(){var t=e.focusedEditor;Sp(Tp(n))&&o(n,_n),t!==n&&(t&&t.dispatch("blur",{focusedEditor:n}),e.setActive(n),e.focusedEditor=n,n.dispatch("focus",{blurredEditor:t}),n.focus(!0))})),n.on("focusout",(function(){Cp.setEditorTimeout(n,(function(){var t=e.focusedEditor;Sp(Tp(n))&&t===n||o(n,Rn),kp(n,Tp(n))||t!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null)}))})),Fg||(Fg=function documentFocusInHandler(t){var n=e.activeEditor;n&&sr(t).each((function(t){var o=t;o.ownerDocument===document&&(o===document.body||kp(n,o)||e.focusedEditor!==n||(n.dispatch("blur",{focusedEditor:null}),e.focusedEditor=null))}))},xp.bind(document,"focusin",Fg))},Op=function unregisterDocumentEvents(e,t){e.focusedEditor===t.editor&&(e.focusedEditor=null),!e.activeEditor&&Fg&&(xp.unbind(document,"focusin",Fg),Fg=null)},Ap=function getFocusInElement(e,t){return function getCollapsedNode(e){return e.collapsed?ee.from(nc(e.startContainer,e.startOffset)).map(In.fromDom):ee.none()}(t).bind((function(t){return Go(t)?ee.some(t):$n(e,t)?ee.none():ee.some(e)}))},_p=function normalizeSelection(e,t){Ap(In.fromDom(e.getBody()),t).bind((function(e){return Cd(e.dom)})).fold((function(){e.selection.normalize()}),(function(t){return e.selection.setRng(t.toRange())}))},Dp=function focusBody(e){if(e.setActive)try{e.setActive()}catch(t){e.focus()}else e.focus()},Rp=function hasElementFocus(e){return cp(e)||function search(e){return sp(ar(e)).filter((function(t){return e.dom.contains(t.dom)}))}(e).isSome()},Np=function hasFocus(e){return e.inline?function hasInlineFocus(e){var t=e.getBody();return t&&Rp(In.fromDom(t))}(e):function hasIframeFocus(e){return F(e.iframeElement)&&cp(In.fromDom(e.iframeElement))}(e)},Mp=function hasEditorOrUiFocus(e){return Np(e)||function hasUiFocus(e){var t=ar(In.fromDom(e.getElement()));return sp(t).filter((function(t){return!Sp(t.dom)&&kp(e,t.dom)})).isSome()}(e)},Bp=function activateEditor(e){return e.editorManager.setActive(e)},Ip=function focus(e,t){e.removed||(t?Bp(e):function focusEditor(e){var t=e.selection,n=e.getBody(),o=t.getRng();e.quirks.refreshContentEditable(),F(e.bookmark)&&!Np(e)&&bp(e).each((function(t){e.selection.setRng(t),o=t}));var i=function getContentEditableHost(e,t){return e.dom.getParent(t,(function(t){return"true"===e.dom.getContentEditable(t)}))}(e,t.getNode());if(i&&e.dom.isChildOf(i,n))return Dp(i),_p(e,o),void Bp(e);e.inline||(Wt.browser.isOpera()||Dp(n),e.getWin().focus()),(Wt.browser.isFirefox()||e.inline)&&(Dp(n),_p(e,o)),Bp(e)}(e))},Pp=function isEditableRange(e,t){return t.collapsed?e.isEditable(t.startContainer):e.isEditable(t.startContainer)&&e.isEditable(t.endContainer)},Lp=function getEndpointElement(e,t,n,o,i){var a=n?t.startContainer:t.endContainer,u=n?t.startOffset:t.endOffset;return ee.from(a).map(In.fromDom).map((function(e){return o&&t.collapsed?e:Jn(e,i(e,u)).getOr(e)})).bind((function(e){return fn(e)?ee.some(e):Zn(e).filter(fn)})).map((function(e){return e.dom})).getOr(e)},Fp=function getStart(e,t){return Lp(e,t,!0,arguments.length>2&&void 0!==arguments[2]&&arguments[2],(function(e,t){return Math.min(tr(e),t)}))},Hp=function getEnd$1(e,t){return Lp(e,t,!1,arguments.length>2&&void 0!==arguments[2]&&arguments[2],(function(e,t){return t>0?t-1:t}))},$p=function skipEmptyTextNodes(e,t){for(var n=e;e&&Co(e)&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n},zp=function processRanges(e,t){return ue(t,(function(t){var n=e.dispatch("GetSelectionRange",{range:t});return n.range!==t?n.range:t}))},Vp=["img","br"],Up=function isCursorPosition(e){var t=function isTextNodeWithCursorPosition(e){return zo(e).filter((function(e){return 0!==e.trim().length||e.indexOf(Lo)>-1})).isSome()}(e);return t||ie(Vp,un(e))||function isContentEditableFalse$5(e){return ln(e)&&"false"===yn(e,"contenteditable")}(e)},Zp=function descendantRtl(e,t){return function descend(e){for(var n=Xn(e),o=n.length-1;o>=0;o--){var i=n[o];if(t(i))return ee.some(i);var a=descend(i);if(a.isSome())return a}return ee.none()}(e)},Wp="[data-mce-autocompleter]",jp=function create$9(e,t){if(Gp(In.fromDom(e.getBody())).isNone()){var n=In.fromHtml('<span data-mce-autocompleter="1" data-mce-bogus="1"></span>',e.getDoc());Ir(n,In.fromDom(t.extractContents())),t.insertNode(n.dom),Zn(n).each((function(e){return e.dom.normalize()})),function last(e){return Zp(e,Up)}(n).map((function(t){e.selection.setCursorLocation(t.dom,function getEnd(e){return"img"===un(e)?1:zo(e).fold((function(){return Xn(e).length}),(function(e){return e.length}))}(t))}))}},Gp=function findIn(e){return yr(e,Wp)},qp={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Kp=function walk$2(e,t,n){var o=n?"lastChild":"firstChild",i=n?"prev":"next";if(e[o])return e[o];if(e!==t){var a=e[i];if(a)return a;for(var u=e.parent;u&&u!==t;u=u.parent)if(a=u[i])return a}},Yp=function isEmptyTextNode(e){var t,n=null!==(t=e.value)&&void 0!==t?t:"";if(!Oi(n))return!1;var o=e.parent;return!o||"span"===o.name&&!o.attr("style")||!/^[ ]+$/.test(n)},Xp=function isNonEmptyElement(e){var t="a"===e.name&&!e.attr("href")&&e.attr("id");return e.attr("name")||e.attr("id")&&!e.firstChild||e.attr("data-mce-bookmark")||t},Jp=function(){function AstNode(e,t){p(this,AstNode),this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}return h(AstNode,[{key:"replace",value:function replace(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t}},{key:"attr",value:function attr(e,t){var n=this;if(!D(e))return F(e)&&Re(e,(function(e,t){n.attr(t,e)})),n;var o=n.attributes;if(o){if(void 0!==t){if(null===t){if(e in o.map){delete o.map[e];for(var i=o.length;i--;)if(o[i].name===e)return o.splice(i,1),n}return n}if(e in o.map){for(var a=o.length;a--;)if(o[a].name===e){o[a].value=t;break}}else o.push({name:e,value:t});return o.map[e]=t,n}return o.map[e]}}},{key:"clone",value:function clone(){var e=this,clone=new AstNode(e.name,e.type),t=e.attributes;if(t){var n=[];n.map={};for(var o=0,i=t.length;o<i;o++){var a=t[o];"id"!==a.name&&(n[n.length]={name:a.name,value:a.value},n.map[a.name]=a.value)}clone.attributes=n}return clone.value=e.value,clone}},{key:"wrap",value:function wrap(e){var t=this;return t.parent&&(t.parent.insert(e,t),e.append(t)),t}},{key:"unwrap",value:function unwrap(){for(var e=this,t=e.firstChild;t;){var n=t.next;e.insert(t,e,!0),t=n}e.remove()}},{key:"remove",value:function remove(){var e=this,t=e.parent,n=e.next,o=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):o&&(o.next=n),t.lastChild===e?(t.lastChild=o,o&&(o.next=null)):n&&(n.prev=o),e.parent=e.next=e.prev=null),e}},{key:"append",value:function append(e){var t=this;e.parent&&e.remove();var n=t.lastChild;return n?(n.next=e,e.prev=n,t.lastChild=e):t.lastChild=t.firstChild=e,e.parent=t,e}},{key:"insert",value:function insert(e,t,n){e.parent&&e.remove();var o=t.parent||this;return n?(t===o.firstChild?o.firstChild=e:t.prev&&(t.prev.next=e),e.prev=t.prev,e.next=t,t.prev=e):(t===o.lastChild?o.lastChild=e:t.next&&(t.next.prev=e),e.next=t.next,e.prev=t,t.next=e),e.parent=o,e}},{key:"getAll",value:function getAll(e){for(var t=[],n=this.firstChild;n;n=Kp(n,this))n.name===e&&t.push(n);return t}},{key:"children",value:function children(){for(var e=[],t=this.firstChild;t;t=t.next)e.push(t);return e}},{key:"empty",value:function empty(){var e=this;if(e.firstChild){for(var t=[],n=e.firstChild;n;n=Kp(n,e))t.push(n);for(var o=t.length;o--;){var i=t[o];i.parent=i.firstChild=i.lastChild=i.next=i.prev=null}}return e.firstChild=e.lastChild=null,e}},{key:"isEmpty",value:function isEmpty(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0,i=this,a=i.firstChild;if(Xp(i))return!1;if(a)do{if(1===a.type){if(a.attr("data-mce-bogus"))continue;if(e[a.name])return!1;if(Xp(a))return!1}if(8===a.type)return!1;if(3===a.type&&!Yp(a))return!1;if(3===a.type&&a.parent&&n[a.parent.name]&&Oi(null!==(t=a.value)&&void 0!==t?t:""))return!1;if(o&&o(a))return!1}while(a=Kp(a,i));return!0}},{key:"walk",value:function walk(e){return Kp(this,null,e)}}],[{key:"create",value:function create(e,t){var n=new AstNode(e,qp[e]||1);return t&&Re(t,(function(e,t){n.attr(t,e)})),n}}]),AstNode}(),Qp=Kt.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),eh=function containsZwsp(e){return D(e.nodeValue)&&e.nodeValue.includes(Qo)},th=function getTemporaryNodeSelector(e){return"".concat(0===e.length?"":"".concat(ue(e,(function(e){return"[".concat(e,"]")})).join(","),","),'[data-mce-bogus="all"]')},nh=function createZwspCommentWalker(e){return document.createTreeWalker(e,NodeFilter.SHOW_COMMENT,(function(e){return eh(e)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}))},rh=function createUnescapedZwspTextWalker(e){return document.createTreeWalker(e,NodeFilter.SHOW_TEXT,(function(e){if(eh(e)){var t=e.parentNode;return t&&$e(Qp,t.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP}))},oh=function hasZwspComment(e){return null!==nh(e).nextNode()},ih=function hasUnescapedZwspText(e){return null!==rh(e).nextNode()},ah=function hasTemporaryNode(e,t){return null!==t.querySelector(th(e))},uh=function trimTemporaryNodes(e,t){ce(function getTemporaryNodes(e,t){return t.querySelectorAll(th(e))}(e,t),(function(t){var n=In.fromDom(t);"all"===yn(n,"data-mce-bogus")?Hr(n):ce(e,(function(e){wn(n,e)&&xn(n,e)}))}))},ch=function emptyAllNodeValuesInWalker(e){for(var t=e.nextNode();null!==t;)t.nodeValue=null,t=e.nextNode()},sh=U(ch,nh),lh=U(ch,rh),fh=function trim$1(e,t){var n=[{condition:curry(ah,t),action:curry(uh,t)},{condition:oh,action:sh},{condition:ih,action:lh}],o=e,i=!1;return ce(n,(function(t){var n=t.condition,a=t.action;n(o)&&(i||(o=e.cloneNode(!0),i=!0),a(o))})),o},dh=function cleanupBogusElements(e){var t=ro(e,"[data-mce-bogus]");ce(t,(function(e){"all"===yn(e,"data-mce-bogus")?Hr(e):Uo(e)?(Nr(e,In.fromText(Po)),Hr(e)):$r(e)}))},mh=function cleanupInputNames(e){var t=ro(e,"input");ce(t,(function(e){xn(e,"name")}))},gh=function getPlainTextContent(e,t){var n=e.getDoc(),o=ar(In.fromDom(e.getBody())),i=In.fromTag("div",n);vn(i,"data-mce-bogus","all"),Er(i,{position:"fixed",left:"-9999999px",top:"0"}),Ur(i,t.innerHTML),dh(i),mh(i);var a=function getContentContainer(e){return nr(e)?e:In.fromDom(Vn(e).dom.body)}(o);Ir(a,i);var u=ti(i.dom.innerText);return Hr(i),u},ph=function getContentFromBody(e,t,n){var o;return o="raw"===t.format?Kt.trim(ti(fh(n,e.serializer.getTempAttrs()).innerHTML)):"text"===t.format?gh(e,n):"tree"===t.format?e.serializer.serialize(n,t):function trimEmptyContents(e,t){var n=xs(e),o=new RegExp("^(<".concat(n,"[^>]*>(&nbsp;|&#160;|\\s|\xa0|<br \\/>|)<\\/").concat(n,">[\r\n]*|<br \\/>[\r\n]*)$"));return t.replace(o,"")}(e,e.serializer.serialize(n,t)),"text"!==t.format&&!Ko(In.fromDom(n))&&D(o)?Kt.trim(o):o},hh=Kt.makeMap,vh=function Writer(e){var t=[],n=(e=e||{}).indent,o=hh(e.indent_before||""),i=hh(e.indent_after||""),a=Ta.getEncodeFunc(e.entity_encoding||"raw",e.entities),u="xhtml"!==e.element_format;return{start:function start(e,c,s){if(n&&o[e]&&t.length>0){var l=t[t.length-1];l.length>0&&"\n"!==l&&t.push("\n")}if(t.push("<",e),c)for(var d=0,m=c.length;d<m;d++){var g=c[d];t.push(" ",g.name,'="',a(g.value,!0),'"')}if(t[t.length]=!s||u?">":" />",s&&n&&i[e]&&t.length>0){var p=t[t.length-1];p.length>0&&"\n"!==p&&t.push("\n")}},end:function end(e){var o;t.push("</",e,">"),n&&i[e]&&t.length>0&&(o=t[t.length-1]).length>0&&"\n"!==o&&t.push("\n")},text:function text(e,n){e.length>0&&(t[t.length]=n?e:a(e))},cdata:function cdata(e){t.push("<![CDATA[",e,"]]>")},comment:function comment(e){t.push("\x3c!--",e,"--\x3e")},pi:function pi(e,o){o?t.push("<?",e," ",a(o),"?>"):t.push("<?",e,"?>"),n&&t.push("\n")},doctype:function doctype(e){t.push("<!DOCTYPE",e,">",n?"\n":"")},reset:function reset(){t.length=0},getContent:function getContent(){return t.join("").replace(/\n$/,"")}}},bh=function HtmlSerializer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:La(),n=vh(e);e.validate=!("validate"in e)||e.validate;return{serialize:function serialize(o){var i=e.validate,a={3:function _(e){var t;n.text(null!==(t=e.value)&&void 0!==t?t:"",e.raw)},8:function _(e){var t;n.comment(null!==(t=e.value)&&void 0!==t?t:"")},7:function _(e){n.pi(e.name,e.value)},10:function _(e){var t;n.doctype(null!==(t=e.value)&&void 0!==t?t:"")},4:function _(e){var t;n.cdata(null!==(t=e.value)&&void 0!==t?t:"")},11:function _(e){var t=e;if(t=t.firstChild)do{u(t)}while(t=t.next)}};n.reset();var u=function walk(e){var o,u=a[e.type];if(u)u(e);else{var c=e.name,s=c in t.getVoidElements(),l=e.attributes;if(i&&l&&l.length>1){var d=[];d.map={};var m=t.getElementRule(e.name);if(m){for(var g=0,p=m.attributesOrder.length;g<p;g++){var h=m.attributesOrder[g];if(h in l.map){var v=l.map[h];d.map[h]=v,d.push({name:h,value:v})}}for(var b=0,y=l.length;b<y;b++){var C=l[b].name;if(!(C in d.map)){var w=l.map[C];d.map[C]=w,d.push({name:C,value:w})}}l=d}}if(n.start(c,l,s),Fi(c))D(e.value)&&n.text(e.value,!0),n.end(c);else if(!s){var x=e.firstChild;if(x){"pre"!==c&&"textarea"!==c||3!==x.type||"\n"!==(null===(o=x.value)||void 0===o?void 0:o[0])||n.text("\n",!0);do{walk(x)}while(x=x.next)}n.end(c)}}};return 1!==o.type||e.inner?3===o.type?a[3](o):a[11](o):u(o),n.getContent()}}},yh=new Set;ce(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],(function(e){yh.add(e)}));var Ch=["font","text-decoration","text-emphasis"],wh=function getStyleProps(e,t){return _e(e.parseStyle(e.getAttrib(t,"style")))},xh=function hasInheritableStyles(e,t){return ye(wh(e,t),(function(e){return!function isNonInheritableStyle(e){return yh.has(e)}(e)}))},Sh=function hasStyleConflict(e,t,n){var o=wh(e,t),i=wh(e,n),a=function valueMismatch(o){var i,a,u=null!==(i=e.getStyle(t,o))&&void 0!==i?i:"",c=null!==(a=e.getStyle(n,o))&&void 0!==a?a:"";return ft(u)&&ft(c)&&u!==c};return ae(o,(function(e){var t=function propExists(t){return ae(t,(function(t){return t===e}))};if(!t(i)&&t(Ch)){var n=function getLonghandStyleProps(e){return fe(e,(function(e){return ae(Ch,(function(t){return it(e,t)}))}))}(i);return ae(n,a)}return a(e)}))},kh=function isChar(e,t,n){return ee.from(n.container()).filter(Co).exists((function(o){var i=e?0:-1;return t(o.data.charAt(n.offset()+i))}))},Th=curry(kh,!0,Hd),Eh=curry(kh,!1,Hd),Oh=function isEmptyText(e){var t=e.container();return Co(t)&&(0===t.data.length||ei(t.data)&&Gm.isBookmarkNode(t.parentNode))},Ah=function matchesElementPosition(e,t){return function(n){return $f(e?0:-1,n).filter(t).isSome()}},_h=function isImageBlock(e){return Oo(e)&&"block"===Or(In.fromDom(e),"display")},Dh=function isCefNode(e){return _o(e)&&!function isBogusAll$1(e){return co(e)&&"all"===e.getAttribute("data-mce-bogus")}(e)},Rh=Ah(!0,_h),Nh=Ah(!1,_h),Mh=Ah(!0,No),Bh=Ah(!1,No),Ih=Ah(!0,vo),Ph=Ah(!1,vo),Lh=Ah(!0,Dh),Fh=Ah(!1,Dh),Hh=function parents(e,t){return function parentsUntil(e,t,n){return $n(t,e)?function dropLast(e){return e.slice(0,-1)}(jn(e,(function(e){return n(e)||Hn(e,t)}))):[]}(e,t,J)},$h=function parentsAndSelf(e,t){return[e].concat(Hh(e,t))},zh=function navigateIgnoreEmptyTextNodes(e,t,n){return hd(e,t,n,Oh)},Vh=function getClosestBlock$1(e,t,n){return pe($h(In.fromDom(t.container()),e),function isBlock$1(e){return function(t){return e.isBlock(un(t))}}(n))},Uh=function isAtBeforeAfterBlockBoundary(e,t,n,o){return zh(e,t.dom,n).forall((function(e){return Vh(t,n,o).fold((function(){return!Hf(e,n,t.dom)}),(function(o){return!Hf(e,n,t.dom)&&$n(o,In.fromDom(e.container()))}))}))},Zh=function isAtBlockBoundary(e,t,n,o){return Vh(t,n,o).fold((function(){return zh(e,t.dom,n).forall((function(e){return!Hf(e,n,t.dom)}))}),(function(t){return zh(e,t.dom,n).isNone()}))},Wh=curry(Zh,!1),jh=curry(Zh,!0),Gh=curry(Uh,!1),qh=curry(Uh,!0),Kh=function isBr$1(e){return Kf(e).exists(Uo)},Yh=function findBr(e,t,n,o){var i=fe($h(In.fromDom(n.container()),t),(function(e){return o.isBlock(un(e))})),a=Te(i).getOr(t);return gd(e,a.dom,n).filter(Kh)},Xh=function isBeforeBr$1(e,t,n){return Kf(t).exists(Uo)||Yh(!0,e,t,n).isSome()},Jh=function isAfterBr(e,t,n){return function getElementFromPrevPosition(e){return ee.from(e.getNode(!0)).map(In.fromDom)}(t).exists(Uo)||Yh(!1,e,t,n).isSome()},Qh=curry(Yh,!1),ev=curry(Yh,!0),tv=function isInMiddleOfText(e){return Tc.isTextPosition(e)&&!e.isAtStart()&&!e.isAtEnd()},nv=function getClosestBlock(e,t,n){var o=fe($h(In.fromDom(t.container()),e),(function(e){return n.isBlock(un(e))}));return Te(o).getOr(e)},rv=function hasSpaceBefore(e,t,n){return tv(t)?Eh(t):Eh(t)||yd(nv(e,t,n).dom,t).exists(Eh)},ov=function hasSpaceAfter(e,t,n){return tv(t)?Th(t):Th(t)||bd(nv(e,t,n).dom,t).exists(Th)},iv=function isInPre(e){return Kf(e).bind((function(e){return gr(e,fn)})).exists((function(e){return function isPreValue(e){return ie(["pre","pre-wrap"],e)}(Or(e,"white-space"))}))},av=function isAtLineBoundary(e,t,n){return function isAtBeginningOfBody(e,t){return yd(e.dom,t).isNone()}(e,t)||function isAtEndOfBody(e,t){return bd(e.dom,t).isNone()}(e,t)||Wh(e,t,n)||jh(e,t,n)||Jh(e,t,n)||Xh(e,t,n)},uv=function isSiblingCefBlock(e,t){return function(n){return function isCefBlock(e){return F(e)&&_o(e)&&Af(e)}(new io(n,e)[t]())}},cv=function needsToHaveNbsp(e,t,n){return!iv(t)&&(av(e,t,n)||rv(e,t,n)||ov(e,t,n))},sv=function needsToBeNbspLeft(e,t,n){return!iv(t)&&(Wh(e,t,n)||Gh(e,t,n)||Jh(e,t,n)||rv(e,t,n)||function isAfterCefBlock(e,t){var n=yd(e.dom,t).getOr(t),o=uv(e.dom,"prev");return t.isAtStart()&&(o(t.container())||o(n.container()))}(e,t))},lv=function needsToBeNbspRight(e,t,n){return!iv(t)&&(jh(e,t,n)||qh(e,t,n)||Xh(e,t,n)||ov(e,t,n)||function isBeforeCefBlock(e,t){var n=bd(e.dom,t).getOr(t),o=uv(e.dom,"next");return t.isAtEnd()&&(o(t.container())||o(n.container()))}(e,t))},fv=function needsToBeNbsp(e,t,n){return sv(e,t,n)||lv(e,function leanRight(e){var t=e.container(),n=e.offset();return Co(t)&&n<t.data.length?Tc(t,n+1):e}(t),n)},dv=function isNbspAt(e,t){return Fd(e.charAt(t))},mv=function isWhiteSpaceAt(e,t){return Hd(e.charAt(t))},gv=function normalizeNbspAtStart(e,t,n,o){var i=t.data,a=Tc(t,0);return n||!dv(i,0)||fv(e,a,o)?!!(n&&mv(i,0)&&sv(e,a,o))&&(t.data=Lo+i.slice(1),!0):(t.data=" "+i.slice(1),!0)},pv=function normalizeNbspInMiddleOfTextNode(e){var t=e.data,n=function normalizeNbspMiddle(e){var t=e.split("");return ue(t,(function(e,n){return Fd(e)&&n>0&&n<t.length-1&&$d(t[n-1])&&$d(t[n+1])?" ":e})).join("")}(t);return n!==t&&(e.data=n,!0)},hv=function normalizeNbspAtEnd(e,t,n,o){var i=t.data,a=Tc(t,i.length-1);return n||!dv(i,i.length-1)||fv(e,a,o)?!!(n&&mv(i,i.length-1)&&lv(e,a,o))&&(t.data=i.slice(0,-1)+Lo,!0):(t.data=i.slice(0,-1)+" ",!0)},vv=function normalizeNbsps(e,t,n){var o=t.container();if(!Co(o))return ee.none();if(function hasNbsp(e){var t=e.container();return Co(t)&&ot(t.data,Lo)}(t)){var i=gv(e,o,!1,n)||pv(o)||hv(e,o,!1,n);return Qt(i,t)}if(fv(e,t,n)){var a=gv(e,o,!0,n)||hv(e,o,!0,n);return Qt(a,t)}return ee.none()},bv=function normalize$1(e,t,n,o){if(0!==n){var i=In.fromDom(e),a=mr(i,(function(e){return o.isBlock(un(e))})).getOr(i),u=e.data.slice(t,t+n),c=t+n>=e.data.length&&lv(a,Tc(e,e.data.length),o),s=0===t&&sv(a,Tc(e,0),o);e.replaceData(t,n,Di(u,4,s,c))}},yv=function normalizeWhitespaceAfter(e,t,n){var o=e.data.slice(t),i=o.length-st(o).length;bv(e,t,i,n)},Cv=function normalizeWhitespaceBefore(e,t,n){var o=e.data.slice(0,t),i=o.length-lt(o).length;bv(e,t-i,i,n)},wv=function mergeTextNodes(e,t,n,o){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=lt(e.data).length,u=i?e:t,c=i?t:e;return i?u.appendData(c.data):u.insertData(0,c.data),Hr(In.fromDom(c)),o&&yv(u,a,n),u},xv=function reposition(e,t){return function needsReposition(e,t){var n=e.container(),o=e.offset();return!Tc.isTextPosition(e)&&n===t.parentNode&&o>Tc.before(t).offset()}(t,e)?Tc(t.container(),t.offset()-1):t},Sv=function getPreviousSiblingCaretPosition(e){return Si(e.previousSibling)?ee.some(function afterOrEndOf(e){return Co(e)?Tc(e,e.data.length):Tc.after(e)}(e.previousSibling)):e.previousSibling?wd(e.previousSibling):ee.none()},kv=function getNextSiblingCaretPosition(e){return Si(e.nextSibling)?ee.some(function beforeOrStartOf(e){return Co(e)?Tc(e,0):Tc.before(e)}(e.nextSibling)):e.nextSibling?Cd(e.nextSibling):ee.none()},Tv=function findCaretPositionBackwards(e,t){return Sv(t).orThunk((function(){return kv(t)})).orThunk((function(){return function findCaretPositionBackwardsFromElm(e,t){return ee.from(t.previousSibling?t.previousSibling:t.parentNode).bind((function(t){return yd(e,Tc.before(t))})).orThunk((function(){return bd(e,Tc.after(t))}))}(e,t)}))},Ev=function findCaretPositionForward(e,t){return kv(t).orThunk((function(){return Sv(t)})).orThunk((function(){return function findCaretPositionForwardsFromElm(e,t){return bd(e,Tc.after(t)).orThunk((function(){return yd(e,Tc.before(t))}))}(e,t)}))},Ov=function findCaretPosOutsideElmAfterDelete(e,t,n){return function findCaretPosition(e,t,n){return e?Ev(t,n):Tv(t,n)}(e,t,n).map(curry(xv,n))},Av=function setSelection$1(e,t,n){n.fold((function(){e.focus()}),(function(n){e.selection.setRng(n.toRange(),t)}))},_v=function isBlock(e,t){return t&&$e(e.schema.getBlockElements(),un(t))},Dv=function deleteNormalized(e,t,n,o){var i=Gn(e).filter(dn),a=qn(e).filter(dn);return Hr(e),function lift3(e,t,n,o){return e.isSome()&&t.isSome()&&n.isSome()?ee.some(o(e.getOrDie(),t.getOrDie(),n.getOrDie())):ee.none()}(i,a,t,(function(e,t,i){var a=e.dom,u=t.dom,c=a.data.length;return wv(a,u,n,o),i.container()===u?Tc(a,c):i})).orThunk((function(){return o&&(i.each((function(e){return Cv(e.dom,e.dom.length,n)})),a.each((function(e){return yv(e.dom,0,n)}))),t}))},Rv=function deleteElement$2(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=Ov(t,e.getBody(),n.dom),u=mr(n,curry(_v,e),function eqRawNode(e){return function(t){return t.dom===e}}(e.getBody())),c=Dv(n,a,e.schema,function isInlineElement(e,t){return $e(e.schema.getTextInlineElements(),un(t))}(e,n));e.dom.isEmpty(e.getBody())?(e.setContent(""),e.selection.setCursorLocation()):u.bind((function(e){return function paddEmptyBlock(e,t){if(Li(e)){var n=In.fromHtml('<br data-mce-bogus="1">');return t?ce(Xn(e),(function(e){wm(e)||Hr(e)})):Fr(e),Ir(e,n),ee.some(Tc.before(n.dom))}return ee.none()}(e,i)})).fold((function(){o&&Av(e,t,c)}),(function(n){o&&Av(e,t,ee.some(n))}))},Nv=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,Mv=function isInlineTarget(e,t){return Ln(In.fromDom(t),qs(e))&&!Qi(e.schema,t)&&e.dom.isEditable(t)},Bv=function isRtl(e){var t;return"rtl"===gu.DOM.getStyle(e,"direction",!0)||function hasStrongRtl(e){return Nv.test(e)}(null!==(t=e.textContent)&&void 0!==t?t:"")},Iv=function findRootInline(e,t,n){var o=function findInlineParents(e,t,n){return fe(gu.DOM.getParents(n.container(),"*",t),e)}(e,t,n);return ee.from(o[o.length-1])},Pv=function normalizePosition(e,t){var n=t.container(),o=t.offset();return e?ii(n)?Co(n.nextSibling)?Tc(n.nextSibling,0):Tc.after(n):ci(t)?Tc(n,o+1):t:ii(n)?Co(n.previousSibling)?Tc(n.previousSibling,n.previousSibling.data.length):Tc.before(n):si(t)?Tc(n,o-1):t},Lv=curry(Pv,!0),Fv=curry(Pv,!1),Hv=function execCommandIgnoreInputEvents(e,t){var n=function inputBlocker(e){return e.stopImmediatePropagation()};e.on("beforeinput input",n,!0),e.getDoc().execCommand(t),e.off("beforeinput input",n)},$v=function execNativeDeleteCommand(e){return Hv(e,"Delete")},zv=function isTextBlockOrListItem(e){return Zo(e)||jo(e)},Vv=function getParentBlock$2(e,t){return $n(e,t)?gr(t,zv,function isBeforeRoot(e){return function(t){return Yt(Zn(t),e,Hn)}}(e)):ee.none()},Uv=function paddEmptyBody(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];e.dom.isEmpty(e.getBody())&&e.setContent("",{no_selection:!t})},Zv=function willDeleteLastPositionInElement(e,t,n){return Jt(Cd(n),wd(n),(function(o,i){var a=Pv(!0,o),u=Pv(!1,i),c=Pv(!1,t);return e?bd(n,c).exists((function(e){return e.isEqual(u)&&t.isEqual(a)})):yd(n,c).exists((function(e){return e.isEqual(a)&&t.isEqual(u)}))})).getOr(!0)},Wv=function freefallRtl(e){return(function isComment$1(e){return 8===cn(e)||"#comment"===un(e)}(e)?Gn(e):er(e)).bind(freefallRtl).orThunk((function(){return ee.some(e)}))},jv=function deleteRangeContents(e,t,n){var o,i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];t.deleteContents();var a=Wv(n).getOr(n),u=In.fromDom(null!==(o=e.dom.getParent(a.dom,e.dom.isBlock))&&void 0!==o?o:n.dom);if(u.dom===e.getBody()?Uv(e,i):Li(u)&&(Jo(u),i&&e.selection.setCursorLocation(u.dom,0)),!Hn(n,u)){var c=Yt(Zn(u),n)?[]:function siblings(e){return Zn(e).map(Xn).map((function filterSelf(t){return fe(t,(function(t){return!Hn(e,t)}))})).getOr([])}(u);ce(c.concat(Xn(n)),(function(e){Hn(e,u)||$n(e,u)||!Li(e)||Hr(e)}))}},Gv=function sibling(e,t){return function sibling$1(e,t){var n=e.dom;return n.parentNode?pr(In.fromDom(n.parentNode),(function(n){return!Hn(e,n)&&t(n)})):ee.none()}(e,t).isSome()},qv=function descendant(e,t){return hr(e,t).isSome()},Kv=function getTableCells(e){return ro(e,"td,th")},Yv=function getTable$1(e,t){return Wd(In.fromDom(e),t)},Xv=function adjustQuirksInDetails(e){return function selectionInTableWithNestedTable(e){return Jt(e.startTable,e.endTable,(function(t,n){var o=qv(t,(function(e){return Hn(e,n)})),i=qv(n,(function(e){return Hn(e,t)}));return o||i?l(l({},e),{},{startTable:o?ee.none():e.startTable,endTable:i?ee.none():e.endTable,isSameTable:!1,isMultiTable:!1}):e})).getOr(e)}(e)},Jv=function tableCellRng(e,t){return{start:e,end:t}},Qv=Jc([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),eb=function getClosestCell$1(e,t){return Cr(In.fromDom(e),"td,th",t)},tb=function isExpandedCellRng(e){return!Hn(e.start,e.end)},nb=function getTableFromCellRng(e,t){return Wd(e.start,t).bind((function(n){return Wd(e.end,t).bind((function(e){return Qt(Hn(n,e),n)}))}))},rb=function getTableSelectionFromCellRng(e){return function(t){return nb(t,e).map((function(e){return function tableSelection(e,t,n){return{rng:e,table:t,cells:n}}(t,e,Kv(e))}))}},ob=function getTableSelections(e,t,n,o){if(n.collapsed||!e.forall(tb))return ee.none();if(t.isSameTable){var i=e.bind(rb(o));return ee.some({start:i,end:i})}var a=eb(n.startContainer,o),u=eb(n.endContainer,o),c=a.bind(function getCellRangeFromStartTable(e){return function(t){return Wd(t,e).bind((function(e){return Ee(Kv(e)).map((function(e){return Jv(t,e)}))}))}}(o)).bind(rb(o)),s=u.bind(function getCellRangeFromEndTable(e){return function(t){return Wd(t,e).bind((function(e){return Te(Kv(e)).map((function(e){return Jv(e,t)}))}))}}(o)).bind(rb(o));return ee.some({start:c,end:s})},ib=function getCellIndex(e,t){return he(e,(function(e){return Hn(e,t)}))},ab=function getSelectedCells(e){return Jt(ib(e.cells,e.rng.start),ib(e.cells,e.rng.end),(function(t,n){return e.cells.slice(t,n+1)}))},ub=function isSingleCellTableContentSelected(e,t,n){return e.exists((function(e){return function isSingleCellTable(e,t){return!tb(e)&&nb(e,t).exists((function(e){var t=e.dom.rows;return 1===t.length&&1===t[0].cells.length}))}(e,n)&&qd(e.start,t)}))},cb=function unselectCells(e,t){var n=t.startTable,o=t.endTable,i=e.cloneRange();return n.each((function(e){return i.setStartAfter(e.dom)})),o.each((function(e){return i.setEndBefore(e.dom)})),i},sb=function getActionFromRange(e,t){var n=function isRootFromElement(e){return function(t){return Hn(e,t)}}(e),o=function getCellRng(e,t){var n=eb(e.startContainer,t),o=eb(e.endContainer,t);return Jt(n,o,Jv)}(t,n),i=function getTableDetailsFromRange(e,t){var n=Yv(e.startContainer,t),o=Yv(e.endContainer,t),i=n.isSome(),a=o.isSome(),u=Jt(n,o,Hn).getOr(!1);return Xv({startTable:n,endTable:o,isStartInTable:i,isEndInTable:a,isSameTable:u,isMultiTable:!u&&i&&a})}(t,n);return ub(o,t,n)?o.map((function(e){return Qv.singleCellTable(t,e.start)})):i.isMultiTable?function handleMultiTable(e,t,n,o){return ob(e,t,n,o).bind((function(e){var o=e.start,i=e.end,a=o.bind(ab).getOr([]),u=i.bind(ab).getOr([]);if(a.length>0&&u.length>0){var c=cb(n,t);return ee.some(Qv.multiTable(a,u,c))}return ee.none()}))}(o,i,t,n):function handleSingleTable(e,t,n,o){return ob(e,t,n,o).bind((function(e){var t=e.start,n=e.end;return t.or(n)})).bind((function(e){var o=t.isSameTable,i=ab(e).getOr([]);if(o&&e.cells.length===i.length)return ee.some(Qv.fullTable(e.table));if(i.length>0){if(o)return ee.some(Qv.partialTable(i,ee.none()));var a=cb(n,t);return ee.some(Qv.partialTable(i,ee.some(l(l({},t),{},{rng:a}))))}return ee.none()}))}(o,i,t,n)},lb=function cleanCells(e){return ce(e,(function(e){xn(e,"contenteditable"),Jo(e)}))},fb=function deleteContentInsideCell(e,t,n,o){var i=n.cloneRange();o?(i.setStart(n.startContainer,n.startOffset),i.setEndAfter(t.dom.lastChild)):(i.setStartBefore(t.dom.firstChild),i.setEnd(n.endContainer,n.endOffset)),pb(e,i,t,!1).each((function(e){return e()}))},db=function collapseAndRestoreCellSelection(e){var t=Zd(e),n=In.fromDom(e.selection.getNode());Do(n.dom)&&Li(n)?e.selection.setCursorLocation(n.dom,0):e.selection.collapse(!0),t.length>1&&ae(t,(function(e){return Hn(e,n)}))&&vn(n,"data-mce-selected","1")},mb=function emptySingleTableCells(e,t,n){return ee.some((function(){var o=e.selection.getRng(),i=n.bind((function(n){var i=n.rng,a=n.isStartInTable,u=function getOutsideBlock(e,t){return ee.from(e.dom.getParent(t,e.dom.isBlock)).map(In.fromDom)}(e,a?i.endContainer:i.startContainer);i.deleteContents(),function handleEmptyBlock(e,t,n){n.each((function(n){t?Hr(n):(Jo(n),e.selection.setCursorLocation(n.dom,0))}))}(e,a,u.filter(Li));var c=a?t[0]:t[t.length-1];return fb(e,c,o,a),Li(c)?ee.none():ee.some(a?t.slice(1):t.slice(0,-1))})).getOr(t);lb(i),db(e)}))},gb=function emptyMultiTableCells(e,t,n,o){return ee.some((function(){var i=e.selection.getRng(),a=t[0],u=n[n.length-1];fb(e,a,i,!0),fb(e,u,i,!1);var c=Li(a)?t:t.slice(1),s=Li(u)?n:n.slice(0,-1);lb(c.concat(s)),o.deleteContents(),db(e)}))},pb=function deleteCellContents(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return ee.some((function(){jv(e,t,n,o)}))},hb=function deleteTableElement(e,t){return ee.some((function(){return Rv(e,!1,t)}))},vb=function deleteTableRange(e,t,n,o){return yb(t,o).fold((function(){return function deleteCellRange(e,t,n){return sb(t,n).bind((function(t){return t.fold(curry(pb,e),curry(hb,e),curry(mb,e),curry(gb,e))}))}(e,t,n)}),(function(t){return function deleteCaptionRange(e,t){return Cb(e,t)}(e,t)}))},bb=function getParentCell(e,t){return pe($h(t,e),qo)},yb=function getParentCaption(e,t){return pe($h(t,e),pn("caption"))},Cb=function emptyElement(e,t){return ee.some((function(){Jo(t),e.selection.setCursorLocation(t.dom,0)}))},wb=function deleteCaretInsideCaption(e,t,n,o,i){return pd(n,e.getBody(),i).fold((function(){return ee.some(V)}),(function(a){return function isDeleteOfLastCharPos(e,t,n,o){return Cd(e.dom).bind((function(i){return wd(e.dom).map((function(e){return t?n.isEqual(i)&&o.isEqual(e):n.isEqual(e)&&o.isEqual(i)}))})).getOr(!0)}(o,n,i,a)?function emptyCaretCaption(e,t){return Cb(e,t)}(e,o):function validateCaretCaption(e,t,n){return yb(e,In.fromDom(n.getNode())).fold((function(){return ee.some(V)}),(function(e){return Qt(!Hn(e,t),V)}))}(t,o,a)}))},xb=function deleteCaretCells(e,t,n,o){var i=Tc.fromRangeStart(e.selection.getRng());return bb(n,o).bind((function(o){return Li(o)?Cb(e,o):function deleteBetweenCells(e,t,n,o,i){return pd(n,e.getBody(),i).bind((function(e){return bb(t,In.fromDom(e.getNode())).bind((function(e){return Hn(e,o)?ee.none():ee.some(V)}))}))}(e,n,t,o,i)}))},Sb=function isNearTable(e,t){return e?Ih(t):Ph(t)},kb=function deleteCaret$3(e,t,n){var o=In.fromDom(e.getBody());return yb(o,n).fold((function(){return xb(e,t,o,n).orThunk((function(){return Qt(function isBeforeOrAfterTable(e,t){var n=Tc.fromRangeStart(e.selection.getRng());return Sb(t,n)||gd(t,e.getBody(),n).exists((function(e){return Sb(t,e)}))}(e,t),V)}))}),(function(n){return function deleteCaretCaption(e,t,n,o){var i=Tc.fromRangeStart(e.selection.getRng());return Li(o)?Cb(e,o):wb(e,n,t,o,i)}(e,t,o,n)}))},Tb=function backspaceDelete$a(e,t){var n=In.fromDom(e.selection.getStart(!0)),o=Zd(e);return e.selection.isCollapsed()&&0===o.length?kb(e,t,n):function deleteRange$3(e,t,n){var o=In.fromDom(e.getBody()),i=e.selection.getRng();return 0!==n.length?mb(e,n,ee.none()):vb(e,o,i,t)}(e,n,o)},Eb=function getContentEditableRoot$1(e,t){for(var n=t;n&&n!==e;){if(Ao(n)||_o(n))return n;n=n.parentNode}return null},Ob=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],Ab=Kt.each,_b=function ElementUtils(e){var t=e.dom,n=new Set(e.serializer.getTempAttrs()),o=function isAttributeInternal(e){return ae(Ob,(function(t){return it(e,t)}))||n.has(e)};return{compare:function compare(e,n){if(e.nodeName!==n.nodeName||e.nodeType!==n.nodeType)return!1;var i=function getAttribs(e){var n={};return Ab(t.getAttribs(e),(function(i){var a=i.nodeName.toLowerCase();"style"===a||o(a)||(n[a]=t.getAttrib(e,a))})),n},a=function compareObjects(e,t){for(var n in e)if($e(e,n)){var o=t[n];if(P(o))return!1;if(e[n]!==o)return!1;delete t[n]}for(var i in t)if($e(t,i))return!1;return!0};if(co(e)&&co(n)){if(!a(i(e),i(n)))return!1;if(!a(t.parseStyle(t.getAttrib(e,"style")),t.parseStyle(t.getAttrib(n,"style"))))return!1}return!Ld(e)&&!Ld(n)},isAttributeInternal:o}},Db=function isHeading(e){return["h1","h2","h3","h4","h5","h6"].includes(e.name)},Rb=function matchNode$1(e,t,n,o){for(var i=n.name,a=0,u=e.length;a<u;a++){var c=e[a];if(c.name===i){var s=o.nodes[i];s?s.nodes.push(n):o.nodes[i]={filter:c,nodes:[n]}}}if(n.attributes)for(var l=0,d=t.length;l<d;l++){var m=t[l],g=m.name;if(g in n.attributes.map){var p=o.attributes[g];p?p.nodes.push(n):o.attributes[g]={filter:m,nodes:[n]}}}},Nb=function runFilters(e,t){var n=function run(e,n){Re(e,(function(e){var o=Oe(e.nodes);ce(e.filter.callbacks,(function(i){for(var a=o.length-1;a>=0;a--){var u=o[a];(n?void 0!==u.attr(e.filter.name):u.name===e.filter.name)&&!L(u.parent)||o.splice(a,1)}o.length>0&&i(o,e.filter.name,t)}))}))};n(e.nodes,!1),n(e.attributes,!0)},Mb=function filter$2(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=function findMatchingNodes(e,t,n){var o={nodes:{},attributes:{}};return n.firstChild&&function traverse(e,t){for(var n=e;n=n.walk();)t(n)}(n,(function(n){Rb(e,t,n,o)})),o}(e,t,n);Nb(i,o)},Bb=function paddEmptyNode(e,t,n,o){if((e.pad_empty_with_br||t.insert)&&n(o)){var i=new Jp("br",1);t.insert&&i.attr("data-mce-bogus","1"),o.empty().append(i)}else o.empty().append(new Jp("#text",3)).value=Lo},Ib=function hasOnlyChild(e,t){var n=null===e||void 0===e?void 0:e.firstChild;return F(n)&&n===e.lastChild&&n.name===t},Pb=function isEmpty(e,t,n,o){return o.isEmpty(t,n,(function(t){return function isPadded(e,t){var n=e.getElementRule(t.name);return!0===(null===n||void 0===n?void 0:n.paddEmpty)}(e,t)}))},Lb=function findClosestEditingHost(e){for(var t,n=e;n;n=n.parent){var o=n.attr("contenteditable");if("false"===o)break;"true"===o&&(t=n)}return ee.from(t)},Fb=function removeOrUnwrapInvalidNode(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.parent;if(t.getSpecialElements()[e.name])e.empty().remove();else{var o,i=e.children(),a=g(i);try{for(a.s();!(o=a.n()).done;){var u=o.value;n&&!t.isValidChild(n.name,u.name)&&removeOrUnwrapInvalidNode(u,t,n)}}catch(c){a.e(c)}finally{a.f()}e.unwrap()}},Hb=function cleanInvalidNodes(e,t,n){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:V,i=t.getTextBlockElements(),a=t.getNonEmptyElements(),u=t.getWhitespaceElements(),c=Kt.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),s=new Set,l=function isSplittableElement(e){return e!==n&&!c[e.name]},d=0;d<e.length;d++){var m=e[d],g=void 0,p=void 0,h=void 0;if(m.parent&&!s.has(m))if(i[m.name]&&"li"===m.parent.name){for(var v=m.next;v&&i[v.name];)v.name="li",s.add(v),m.parent.insert(v,m.parent),v=v.next;m.unwrap()}else{var b=[m];for(g=m.parent;g&&!t.isValidChild(g.name,m.name)&&l(g);g=g.parent)b.push(g);if(g&&b.length>1)if($b(t,m,g))Fb(m,t);else{b.reverse(),o(p=b[0].clone());for(var y=p,C=0;C<b.length-1;C++){t.isValidChild(y.name,b[C].name)&&C>0?(o(h=b[C].clone()),y.append(h)):h=y;for(var w=b[C].firstChild;w&&w!==b[C+1];){var x=w.next;h.append(w),w=x}y=h}Pb(t,a,u,p)?g.insert(m,b[0],!0):(g.insert(p,b[0],!0),g.insert(m,p)),g=b[0],(Pb(t,a,u,g)||Ib(g,"br"))&&g.empty().remove()}else if(m.parent){if("li"===m.name){var S=m.prev;if(S&&("ul"===S.name||"ol"===S.name)){S.append(m);continue}if((S=m.next)&&("ul"===S.name||"ol"===S.name)&&S.firstChild){S.insert(m,S.firstChild,!0);continue}var k=new Jp("ul",1);o(k),m.wrap(k);continue}if(t.isValidChild(m.parent.name,"div")&&t.isValidChild("div",m.name)){var T=new Jp("div",1);o(T),m.wrap(T)}else Fb(m,t)}}}},$b=function isInvalid(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.parent;return!!n&&(!(!e.children[t.name]||e.isValidChild(n.name,t.name))||(!("a"!==t.name||!function hasClosest(e,t){for(var n=e;n;){if(n.name===t)return!0;n=n.parent}return!1}(n,"a"))||!(!function isSummary(e){return"summary"===e.name}(n)||!Db(t))&&!((null===n||void 0===n?void 0:n.firstChild)===t&&(null===n||void 0===n?void 0:n.lastChild)===t)))},zb=function normalizeBlockSelectionRange(e){var t=Tc.fromRangeStart(e),n=Tc.fromRangeEnd(e),o=e.commonAncestorContainer;return gd(!1,o,n).map((function(i){return!Hf(t,n,o)&&Hf(t,i,o)?function createRange(e,t,n,o){var i=document.createRange();return i.setStart(e,t),i.setEnd(n,o),i}(t.container(),t.offset(),i.container(),i.offset()):e})).getOr(e)},Vb=function normalize(e){return e.collapsed?e:zb(e)},Ub=function isPaddedEmptyBlock(e,t){return e.getBlockElements()[t.name]&&function hasOnlyOneChild$1(e){return F(e.firstChild)&&e.firstChild===e.lastChild}(t)&&function isPaddingNode(e){return"br"===e.name||e.value===Lo}(t.firstChild)},Zb=function isListFragment(e,t){var n=t.firstChild,o=t.lastChild;return n&&"meta"===n.name&&(n=n.next),o&&"mce_marker"===o.attr("id")&&(o=o.prev),function isEmptyFragmentElement(e,t){var n=e.getNonEmptyElements();return F(t)&&(t.isEmpty(n)||Ub(e,t))}(e,o)&&(o=null===o||void 0===o?void 0:o.prev),!(!n||n!==o)&&("ul"===n.name||"ol"===n.name)},Wb=function isListItemPadded(e){return F(null===e||void 0===e?void 0:e.firstChild)&&e.firstChild===e.lastChild&&function isPadding(e){return e.data===Lo||Eo(e)}(e.firstChild)},jb=function trimListItems(e){return e.length>0&&function isEmptyOrPadded(e){return!e.firstChild||Wb(e)}(e[e.length-1])?e.slice(0,-1):e},Gb=function getParentLi(e,t){var n=e.getParent(t,e.isBlock);return n&&"LI"===n.nodeName?n:null},qb=function findLastOf(e,t){var n=Tc.after(e),o=sd(t).prev(n);return o?o.toRange():null},Kb=function insertBefore$2(e,t,n){var o=e.parentNode;return o&&Kt.each(t,(function(t){o.insertBefore(t,e)})),function findFirstIn(e,t){var n=Tc.before(e),o=sd(t).next(n);return o?o.toRange():null}(e,n)},Yb=function insertAtCaret$1(e,t,n,o){var i=function toDomFragment(e,t,n){var o=t.serialize(n);return function cleanupDomFragment(e){var t,n,o=e.firstChild,i=e.lastChild;return o&&"META"===o.nodeName&&(null===(t=o.parentNode)||void 0===t||t.removeChild(o)),i&&"mce_marker"===i.id&&(null===(n=i.parentNode)||void 0===n||n.removeChild(i)),e}(e.createFragment(o))}(t,e,o),a=Gb(t,n.startContainer),u=jb(function listItems(e){var t;return fe(null!==(t=null===e||void 0===e?void 0:e.childNodes)&&void 0!==t?t:[],(function(e){return"LI"===e.nodeName}))}(i.firstChild)),c=t.getRoot(),s=function isAt(e){var o=Tc.fromRangeStart(n),i=sd(t.getRoot()),u=1===e?i.prev(o):i.next(o),c=null===u||void 0===u?void 0:u.getNode();return!c||Gb(t,c)!==a};return a?s(1)?Kb(a,u,c):s(2)?function insertAfter$2(e,t,n,o){return o.insertAfter(t.reverse(),e),qb(t[0],n)}(a,u,c,t):function insertMiddle(e,t,n,o){var i=function getSplit(e,t){var n=t.cloneRange(),o=t.cloneRange();return n.setStartBefore(e),o.setEndAfter(e),[n.cloneContents(),o.cloneContents()]}(e,o),a=e.parentNode;return a&&(a.insertBefore(i[0],e),Kt.each(t,(function(t){a.insertBefore(t,e)})),a.insertBefore(i[1],e),a.removeChild(e)),qb(t[t.length-1],n)}(a,u,c,n):null},Xb=["pre"],Jb=Do,Qb=function trimBrsFromTableCell(e,t,n){ee.from(e.getParent(t,"td,th")).map(In.fromDom).each((function(e){return function trimBlockTrailingBr(e,t){er(e).each((function(n){Gn(n).each((function(o){t.isBlock(un(e))&&Uo(n)&&t.isBlock(un(o))&&Hr(n)}))}))}(e,n)}))},ey=function deleteSelectedContent(e){var t=e.dom,n=Vb(e.selection.getRng());e.selection.setRng(n);var o=t.getParent(n.startContainer,Jb);!function isTableCellContentSelected(e,t,n){return!!F(n)&&n===e.getParent(t.endContainer,Jb)&&qd(In.fromDom(n),t)}(t,n,o)?n.startContainer===n.endContainer&&n.endOffset-n.startOffset===1&&Co(n.startContainer.childNodes[n.startOffset])?n.deleteContents():e.getDoc().execCommand("Delete",!1):pb(e,n,In.fromDom(o))},ty=function insertHtmlAtCaret(e,t,n){var o,i,a=e.selection,u=e.dom,c=e.parser,s=n.merge,l=bh({validate:!0},e.schema),d='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(t=ti(t)),-1===t.indexOf("{$caret}")&&(t+="{$caret}"),t=t.replace(/\{\$caret\}/,d);var m=a.getRng(),g=m.startContainer,p=e.getBody();g===p&&a.isCollapsed()&&u.isBlock(p.firstChild)&&function canHaveChildren(e,t){return F(t)&&!e.schema.getVoidElements()[t.nodeName]}(e,p.firstChild)&&u.isEmpty(p.firstChild)&&((m=u.createRng()).setStart(p.firstChild,0),m.setEnd(p.firstChild,0),a.setRng(m)),a.isCollapsed()||ey(e);var h=a.getNode(),v={context:h.nodeName.toLowerCase(),data:n.data,insert:!0},b=c.parse(t,v);if(!0===n.paste&&Zb(e.schema,b)&&function isParentBlockLi(e,t){return!!Gb(e,t)}(u,h))return(m=Yb(l,u,a.getRng(),b))&&a.setRng(m),t;!0===n.paste&&function shouldPasteContentOnly(e,t,n,o){var i,a=t.firstChild,u=t.lastChild,c=a===("bookmark"===u.attr("data-mce-type")?u.prev:u),s=ie(Xb,a.name);if(c&&s){var l="false"!==a.attr("contenteditable"),d=(null===(i=e.getParent(n,e.isBlock))||void 0===i?void 0:i.nodeName.toLowerCase())===a.name,m=ee.from(Eb(o,n)).forall(Ao);return l&&d&&m}return!1}(u,b,h,e.getBody())&&(null===(o=b.firstChild)||void 0===o||o.unwrap()),function markFragmentElements(e){for(var t=e;t=t.walk();)1===t.type&&t.attr("data-mce-fragment","1")}(b);var y=b.lastChild;if(y&&"mce_marker"===y.attr("id")){var C=y;for(y=y.prev;y;y=y.walk(!0))if(3===y.type||!u.isBlock(y.name)){y.parent&&e.schema.isValidChild(y.parent.name,"span")&&y.parent.insert(C,y,"br"===y.name);break}}if(e._selectionOverrides.showBlockCaretContainer(h),v.invalid||function notHeadingsInSummary(e,t,n){var o;return ae(n.children(),Db)&&"SUMMARY"===(null===(o=e.getParent(t,e.isBlock))||void 0===o?void 0:o.nodeName)}(u,h,b)){e.selection.setContent(d);var w,x=a.getNode(),S=e.getBody();for(ko(x)?x=w=S:w=x;w&&w!==S;)x=w,w=w.parentNode;t=x===S?S.innerHTML:u.getOuterHTML(x);var k=c.parse(t),T=function findMarkerNode(e){for(var t=e;t;t=t.walk())if("mce_marker"===t.attr("id"))return ee.some(t);return ee.none()}(k),E=T.bind(Lb).getOr(k);T.each((function(e){return e.replace(b)}));var O=b.children(),A=null!==(i=b.parent)&&void 0!==i?i:k;b.unwrap();var D=fe(O,(function(t){return $b(e.schema,t,A)}));Hb(D,e.schema,E),Mb(c.getNodeFilters(),c.getAttributeFilters(),k),t=l.serialize(k),x===S?u.setHTML(S,t):u.setOuterHTML(x,t)}else t=l.serialize(b),function validInsertion(e,t,n){var o;if("all"===n.getAttribute("data-mce-bogus"))null===(o=n.parentNode)||void 0===o||o.insertBefore(e.dom.createFragment(t),n);else{var i=n.firstChild,a=n.lastChild;!i||i===a&&"BR"===i.nodeName?e.dom.setHTML(n,t):e.selection.setContent(t,{no_events:!0})}}(e,t,h);return function reduceInlineTextElements(e,t){var n=e.schema.getTextInlineElements(),o=e.dom;if(t){var i=e.getBody(),a=_b(e);Kt.each(o.select("*[data-mce-fragment]"),(function(e){if(F(n[e.nodeName.toLowerCase()])&&xh(o,e))for(var t=e.parentElement;F(t)&&t!==i&&!Sh(o,e,t);t=t.parentElement)if(a.compare(t,e)){o.remove(e,!0);break}}))}}(e,s),function moveSelectionToMarker(e,t){var n,o,i,a,u=e.dom,c=e.selection;if(t){c.scrollIntoView(t);var s=Eb(e.getBody(),t);if(s&&"false"===u.getContentEditable(s))return u.remove(t),void c.select(s);var l=u.createRng(),d=t.previousSibling;if(Co(d)){l.setStart(d,null!==(o=null===(n=d.nodeValue)||void 0===n?void 0:n.length)&&void 0!==o?o:0);var m=t.nextSibling;Co(m)&&(d.appendData(m.data),null===(i=m.parentNode)||void 0===i||i.removeChild(m))}else l.setStartBefore(t),l.setEndBefore(t);var g=u.getParent(t,u.isBlock);if(u.remove(t),g&&u.isEmpty(g)){var p=Jb(g);Fr(In.fromDom(g)),l.setStart(g,0),l.setEnd(g,0),p||function isPartOfFragment(e){return!!e.getAttribute("data-mce-fragment")}(g)||!(a=function findNextCaretRng(t){var n=Tc.fromRangeStart(t);return null===(n=sd(e.getBody()).next(n))||void 0===n?void 0:n.toRange()}(l))?u.add(g,u.create("br",p?{}:{"data-mce-bogus":"1"})):(l=a,u.remove(g))}c.setRng(l)}}(e,u.get("mce_marker")),function unmarkFragmentElements(e){Kt.each(e.getElementsByTagName("*"),(function(e){e.removeAttribute("data-mce-fragment")}))}(e.getBody()),Qb(u,a.getStart(),e.schema),function updateCaret(e,t,n){var o=jn(In.fromDom(n),(function isRoot(e){return Hn(e,In.fromDom(t))}));ke(o,o.length-2).filter(fn).fold((function(){return qi(e,t)}),(function(t){return qi(e,t.dom)}))}(e.schema,e.getBody(),a.getStart()),t},ny=function isTreeNode(e){return e instanceof Jp},ry=function setEditorHtml(e,t,n){e.dom.setHTML(e.getBody(),t),!0!==n&&function moveSelection(e){Np(e)&&Cd(e.getBody()).each((function(t){var n=t.getNode(),o=vo(n)?Cd(n).getOr(t):t;e.selection.setRng(o.toRange())}))}(e)},oy=function setContentInternal(e,t,n){return ee.from(e.getBody()).map((function(o){return ny(t)?function setContentTree(e,t,n,o){Mb(e.parser.getNodeFilters(),e.parser.getAttributeFilters(),n);var i=bh({validate:!1},e.schema).serialize(n),a=ti(Ko(In.fromDom(t))?i:Kt.trim(i));return ry(e,a,o.no_selection),{content:n,html:a}}(e,o,t,n):function setContentString(e,t,n,o){if(0===(n=ti(n)).length||/^\s+$/.test(n)){var i='<br data-mce-bogus="1">';"TABLE"===t.nodeName?n="<tr><td>"+i+"</td></tr>":/^(UL|OL)$/.test(t.nodeName)&&(n="<li>"+i+"</li>");var a=xs(e);return e.schema.isValidChild(t.nodeName.toLowerCase(),a.toLowerCase())?(n=i,n=e.dom.createHTML(a,Ss(e),n)):n||(n=i),ry(e,n,o.no_selection),{content:n,html:n}}"raw"!==o.format&&(n=bh({validate:!1},e.schema).serialize(e.parser.parse(n,{isRootContent:!0,insert:!0})));var u=Ko(In.fromDom(t))?n:Kt.trim(n);return ry(e,u,o.no_selection),{content:u,html:u}}(e,o,t,n)})).getOr({content:t,html:ny(n.content)?"":n.content})},iy=function ensureIsRoot(e){return H(e)?e:J},ay=function closest$1(e,t,n){var o=t(e),i=iy(n);return o.orThunk((function(){return i(e)?ee.none():function ancestor(e,t,n){for(var o=e.dom,i=iy(n);o.parentNode;){o=o.parentNode;var a=In.fromDom(o),u=t(a);if(u.isSome())return u;if(i(a))break}return ee.none()}(e,t,i)}))},uy=sm,cy=function matchesUnInheritedFormatSelector(e,t,n){var o=e.formatter.get(n);if(o)for(var i=0;i<o.length;i++){var a=o[i];if(vm(a)&&!1===a.inherit&&e.dom.is(t,a.selector))return!0}return!1},sy=function matchParents(e,t,n,o,i){var a=e.dom.getRoot();if(t===a)return!1;var u=e.dom.getParent(t,(function(t){return!!cy(e,t,n)||(t.parentNode===a||!!dy(e,t,n,o,!0))}));return!!dy(e,u,n,o,i)},ly=function matchName(e,t,n){return!(!bm(n)||!uy(t,n.inline))||(!(!hm(n)||!uy(t,n.block))||!!vm(n)&&(co(t)&&e.is(t,n.selector)))},fy=function matchItems(e,t,n,o,i,a){var u=n[o],c="attributes"===o;if(H(n.onmatch))return n.onmatch(t,n,o);if(u)if(Ue(u)){for(var s=0;s<u.length;s++)if(c?e.getAttrib(t,u[s]):fm(e,t,u[s]))return!0}else for(var l in u)if($e(u,l)){var d=c?e.getAttrib(t,l):fm(e,t,l),m=cm(u[l],a),g=L(d)||dt(d);if(g&&L(m))continue;if(i&&g&&!n.exact)return!1;if((!i||n.exact)&&!uy(d,lm(m,l)))return!1}return!0},dy=function matchNode(e,t,n,o,i){var a=e.formatter.get(n),u=e.dom;if(a&&co(t))for(var c=0;c<a.length;c++){var s=a[c];if(ly(e.dom,t,s)&&fy(u,t,s,"attributes",i,o)&&fy(u,t,s,"styles",i,o)){var l=s.classes;if(l)for(var d=0;d<l.length;d++)if(!e.dom.hasClass(t,cm(l[d],o)))return;return s}}},my=function match$2(e,t,n,o,i){if(o)return sy(e,o,t,n,i);if(o=e.selection.getNode(),sy(e,o,t,n,i))return!0;var a=e.selection.getStart();return!(a===o||!sy(e,a,t,n,i))},gy=function closest(e,t){var n=function isRoot(t){return Hn(t,In.fromDom(e.getBody()))};return ee.from(e.selection.getStart(!0)).bind((function(o){return ay(In.fromDom(o),(function(n){return Ae(t,(function(t){return function match(t,n){return dy(e,t.dom,n)?ee.some(n):ee.none()}(n,t)}))}),n)})).getOrNull()},py=function matchAllOnNode(e,t,n){return me(n,(function(n,o){var i=function isVariableFormatName(e,t){return gm(e,t,(function hasVariableValues(e){var t=function isVariableValue(e){return H(e)||e.length>1&&"%"===e.charAt(0)};return ae(["styles","attributes"],(function(n){return He(e,n).exists((function(e){var n=M(e)?e:Fe(e);return ae(n,t)}))}))}))}(e,o);return e.formatter.matchNode(t,o,{},i)?n.concat([o]):n}),[])},hy=Qo,vy=function findFirstTextNode(e){if(e)for(var t=new io(e,e),n=t.current();n;n=t.next())if(Co(n))return n;return null},yy=function createCaretContainer(e){var t=In.fromTag("span");return bn(t,{id:xd,"data-mce-bogus":"1","data-mce-type":"format-caret"}),e&&Ir(t,In.fromText(hy)),t},Cy=function removeCaretContainerNode(e,t,n){var o=e.dom,i=e.selection;if(Cm(t))Rv(e,!1,In.fromDom(t),n,!0);else{var a=i.getRng(),u=o.getParent(t,o.isBlock),c=a.startContainer,s=a.startOffset,l=a.endContainer,d=a.endOffset,m=function trimZwspFromCaretContainer(e){var t=vy(e);return t&&t.data.charAt(0)===hy&&t.deleteData(0,1),t}(t);o.remove(t,!0),c===m&&s>0&&a.setStart(m,s-1),l===m&&d>0&&a.setEnd(m,d-1),u&&o.isEmpty(u)&&Jo(In.fromDom(u)),i.setRng(a)}},wy=function removeCaretContainer(e,t,n){var o=e.dom,i=e.selection;if(t)Cy(e,t,n);else if(!(t=kd(e.getBody(),i.getStart())))for(;t=o.get(xd);)Cy(e,t,n)},xy=function appendNode(e,t){return e.appendChild(t),t},Sy=function insertFormatNodesIntoCaretContainer(e,t){var n,o=de(e,(function(e,t){return xy(e,t.cloneNode(!1))}),t),i=null!==(n=o.ownerDocument)&&void 0!==n?n:document;return xy(o,i.createTextNode(hy))},ky=function removeCaretFormat(e,t,n,o){var i=e.dom,a=e.selection,u=!1,c=e.formatter.get(t);if(c){var s=a.getRng(),l=s.startContainer,d=s.startOffset,g=l;Co(l)&&(d!==l.data.length&&(u=!0),g=g.parentNode);for(var p,h=[];g;){if(dy(e,g,t,n,o)){p=g;break}g.nextSibling&&(u=!0),h.push(g),g=g.parentNode}if(p)if(u){var v=a.getBookmark();s.collapse(!0);var b=Lm(i,s,c,!0);b=Pg(b),e.formatter.remove(t,n,b,o),a.moveToBookmark(v)}else{var y=kd(e.getBody(),p),C=F(y)?i.getParents(p.parentNode,Q,y):[],w=yy(!1).dom;!function insertCaretContainerNode(e,t,n){var o,i,a=e.dom,u=a.getParent(n,curry(om,e.schema));u&&a.isEmpty(u)?null===(o=n.parentNode)||void 0===o||o.replaceChild(t,n):(Yo(In.fromDom(n)),a.isEmpty(n)?null===(i=n.parentNode)||void 0===i||i.replaceChild(t,n):a.insertAfter(t,n))}(e,w,null!==y&&void 0!==y?y:p);var x=function cleanFormatNode(e,t,n,o,i,a){var u=e.formatter,c=e.dom,s=fe(_e(u.get()),(function(e){return e!==o&&!ot(e,"removeformat")})),l=py(e,n,s);if(fe(l,(function(t){return!pm(e,t,o)})).length>0){var d=n.cloneNode(!1);return c.add(t,d),u.remove(o,i,d,a),c.remove(d),ee.some(d)}return ee.none()}(e,w,p,t,n,o),S=Sy([].concat(h,m(x.toArray()),m(C)),w);y&&Cy(e,y,F(y)),a.setCursorLocation(S,1),i.isEmpty(p)&&i.remove(p)}}},Ty=function setup$v(e){e.on("mouseup keydown",(function(t){!function disableCaretContainer(e,t,n){var o=e.selection,i=e.getBody();wy(e,null,n),8!==t&&46!==t||!o.isCollapsed()||o.getStart().innerHTML!==hy||wy(e,kd(i,o.getStart()),!0),37!==t&&39!==t||wy(e,kd(i,o.getStart()),!0)}(e,t.keyCode,function endsWithNbsp(e){return Co(e)&&at(e.data,Lo)}(e.selection.getRng().endContainer))}))},Ey=function createCaretFormat(e){var t=yy(!1),n=Sy(e,t.dom);return{caretContainer:t,caretPosition:Tc(n,0)}},Oy=function replaceWithCaretFormat(e,t){var n=Ey(t),o=n.caretContainer,i=n.caretPosition;return Nr(In.fromDom(e),o),Hr(In.fromDom(e)),i},Ay=function isFormatElement(e,t){if(Sd(t.dom))return!1;var n=e.schema.getTextInlineElements();return $e(n,un(t))&&!Sd(t.dom)&&!ho(t.dom)},_y={},Dy=fo(["pre"]);!function addPostProcessHook(e,t){_y[e]||(_y[e]=[]),_y[e].push(t)}("pre",(function(e){var t=e.selection.getRng();if(!t.collapsed){var n=e.selection.getSelectedBlocks(),o=fe(fe(n,Dy),function hasPreSibling(e){return function(t){var n=t.previousSibling;return Dy(n)&&ie(e,n)}}(n));ce(o,(function(e){!function joinPre(e,t){var n=In.fromDom(t),o=Vn(n).dom;Hr(n),Lr(In.fromDom(e),[In.fromTag("br",o),In.fromTag("br",o)].concat(m(Xn(n))))}(e.previousSibling,e)}))}}));var Ry=["fontWeight","fontStyle","color","fontSize","fontFamily"],Ny=function findExpandedListItemFormat(e){return pe(e,(function(e){return bm(e)&&"span"===e.inline&&function hasListStyles(e){return R(e.styles)&&ae(_e(e.styles),(function(e){return ie(Ry,e)}))}(e)}))},My=function getExpandedListItemFormat(e,t){var n=e.get(t);return M(n)?Ny(n):ee.none()},By=function isRngStartAtStartOfElement(e,t){return yd(t,Tc.fromRangeStart(e)).isNone()},Iy=function isRngEndAtEndOfElement(e,t){return!1===bd(t,Tc.fromRangeEnd(e)).exists((function(e){return!Eo(e.getNode())||bd(t,e).isSome()}))},Py=function isEditableListItem(e){return function(t){return Mo(t)&&e.isEditable(t)}},Ly=function getFullySelectedListItems(e){return fe(function getFullySelectedBlocks(e){var t=e.getSelectedBlocks(),n=e.getRng();if(e.isCollapsed())return[];if(1===t.length)return By(n,t[0])&&Iy(n,t[0])?t:[];var o=Te(t).filter((function(e){return By(n,e)})).toArray(),i=Ee(t).filter((function(e){return Iy(n,e)})).toArray(),a=t.slice(1,-1);return o.concat(a).concat(i)}(e),Py(e.dom))},Fy=function getPartiallySelectedListItems(e){return fe(e.getSelectedBlocks(),Py(e.dom))},Hy=Kt.each,$y=function isElementNode(e){return co(e)&&!Ld(e)&&!Sd(e)&&!ho(e)},zy=function findElementSibling(e,t){for(var n=e;n;n=n[t]){if(Co(n)&&ft(n.data))return e;if(co(n)&&!Ld(n))return n}return e},Vy=function mergeSiblingsNodes(e,t,n){var o=_b(e),i=so(t)&&e.dom.isEditable(t),a=so(n)&&e.dom.isEditable(n);if(i&&a){var u=zy(t,"previousSibling"),c=zy(n,"nextSibling");if(o.compare(u,c)){for(var s=u.nextSibling;s&&s!==c;){var l=s;s=s.nextSibling,u.appendChild(l)}return e.dom.remove(c),Kt.each(Kt.grep(c.childNodes),(function(e){u.appendChild(e)})),u}}return n},Uy=function mergeSiblings(e,t,n,o){var i;if(o&&!1!==t.merge_siblings){var a=null!==(i=Vy(e,rm(o),o))&&void 0!==i?i:o;Vy(e,a,rm(a,!0))}},Zy=function processChildElements(e,t,n){Hy(e.childNodes,(function(e){$y(e)&&(t(e)&&n(e),e.hasChildNodes()&&processChildElements(e,t,n))}))},Wy=function hasStyle(e,t){return function(n){return!(!n||!fm(e,n,t))}},jy=function applyStyle(e,t,n){return function(o){e.setStyle(o,t,n),""===o.getAttribute("style")&&o.removeAttribute("style"),function unwrapEmptySpan(e,t){"SPAN"===t.nodeName&&0===e.getAttribs(t).length&&e.remove(t,!0)}(e,o)}},Gy=Jc([{keep:[]},{rename:["name"]},{removed:[]}]),qy=/^(src|href|style)$/,Ky=Kt.each,Yy=sm,Xy=function isChildOfInlineParent(e,t,n){return e.isChildOf(t,n)&&t!==n&&!e.isBlock(n)},Jy=function getContainer(e,t,n){var o=t[n?"startContainer":"endContainer"],i=t[n?"startOffset":"endOffset"];if(co(o)){var a=o.childNodes.length-1;!n&&i&&i--,o=o.childNodes[i>a?a:i]}return Co(o)&&n&&i>=o.data.length&&(o=new io(o,e.getBody()).next()||o),Co(o)&&!n&&0===i&&(o=new io(o,e.getBody()).prev()||o),o},Qy=function normalizeTableSelection(e,t){var n=t?"firstChild":"lastChild",o=e[n];return function isTableCellOrRow(e){return/^(TR|TH|TD)$/.test(e.nodeName)}(e)&&o?"TR"===e.nodeName&&o[n]||o:e},eC=function wrap$1(e,t,n,o){var i,a=e.create(n,o);return null===(i=t.parentNode)||void 0===i||i.insertBefore(a,t),a.appendChild(t),a},tC=function wrapWithSiblings(e,t,n,o,i){var a=In.fromDom(t),u=In.fromDom(e.create(o,i)),c=n?Yn(a):Kn(a);return Lr(u,c),n?(Nr(a,u),Br(u,a)):(Mr(a,u),Ir(u,a)),u.dom},nC=function removeNode(e,t,n){var o,i=t.parentNode,a=e.dom,u=xs(e);hm(n)&&i===a.getRoot()&&(n.list_block&&Yy(t,n.list_block)||ce(Oe(t.childNodes),(function(t){im(e,u,t.nodeName.toLowerCase())?o?o.appendChild(t):(o=eC(a,t,u),a.setAttribs(o,Ss(e))):o=null}))),function isMixedFormat(e){return vm(e)&&bm(e)&&Yt(He(e,"mixed"),!0)}(n)&&!Yy(n.inline,t)||a.remove(t,!0)},rC=function processFormatAttrOrStyle(e,t,n){return $(e)?{name:t,value:null}:{name:e,value:cm(t,n)}},oC=function removeEmptyStyleAttributeIfNeeded(e,t){""===e.getAttrib(t,"style")&&(t.removeAttribute("style"),t.removeAttribute("data-mce-style"))},iC=function removeStyles(e,t,n,o,i){var a=!1;Ky(n.styles,(function(u,c){var s=rC(c,u,o),l=s.name,d=s.value,m=lm(d,l);(n.remove_similar||B(d)||!co(i)||Yy(fm(e,i,l),m))&&e.setStyle(t,l,""),a=!0})),a&&oC(e,t)},aC=function removeNodeFormatInternal(e,t,n,o,i){var a=e.dom,u=_b(e),c=e.schema;if(bm(t)&&Xi(c,t.inline)&&Qi(c,o)&&o.parentElement===e.getBody())return nC(e,o,t),Gy.removed();if(!t.ceFalseOverride&&o&&"false"===a.getContentEditableParent(o))return Gy.keep();if(o&&!ly(a,o,t)&&!function isColorFormatAndAnchor(e,t){return t.links&&"A"===e.nodeName}(o,t))return Gy.keep();var s=o,l=t.preserve_attributes;if(bm(t)&&"all"===t.remove&&M(l)){var d=fe(a.getAttribs(s),(function(e){return ie(l,e.name.toLowerCase())}));if(a.removeAllAttribs(s),ce(d,(function(e){return a.setAttrib(s,e.name,e.value)})),d.length>0)return Gy.rename("span")}if("all"!==t.remove){iC(a,s,t,n,i),Ky(t.attributes,(function(e,o){var u=rC(o,e,n),c=u.name,l=u.value;if(t.remove_similar||B(l)||!co(i)||Yy(a.getAttrib(i,c),l)){if("class"===c){var d=a.getAttrib(s,c);if(d){var m="";if(ce(d.split(/\s+/),(function(e){/mce\-\w+/.test(e)&&(m+=(m?" ":"")+e)})),m)return void a.setAttrib(s,c,m)}}if(qy.test(c)&&s.removeAttribute("data-mce-"+c),"style"===c&&fo(["li"])(s)&&"none"===a.getStyle(s,"list-style-type"))return s.removeAttribute(c),void a.setStyle(s,"list-style-type","none");"class"===c&&s.removeAttribute("className"),s.removeAttribute(c)}})),Ky(t.classes,(function(e){e=cm(e,n),co(i)&&!a.hasClass(i,e)||a.removeClass(s,e)}));for(var m=a.getAttribs(s),g=0;g<m.length;g++){var p=m[g].nodeName;if(!u.isAttributeInternal(p))return Gy.keep()}}return"none"!==t.remove?(nC(e,s,t),Gy.removed()):Gy.keep()},uC=function removeNodeFormatFromClone(e,t,n,o){return aC(e,t,n,o,o).fold(W(o),(function(t){return e.dom.createFragment().appendChild(o),e.dom.rename(o,t)}),W(null))},cC=function removeFormatInternal(e,t,n,o,i){var a=e.formatter.get(t),u=a[0],c=e.dom,s=e.selection,l=function splitToFormatRoot(o){var c=function findFormatRoot(e,t,n,o,i){var a;return t.parentNode&&ce(mm(e.dom,t.parentNode).reverse(),(function(t){if(!a&&co(t)&&"_start"!==t.id&&"_end"!==t.id){var u=dy(e,t,n,o,i);u&&!1!==u.split&&(a=t)}})),a}(e,o,t,n,i);return function wrapAndSplit(e,t,n,o,i,a,u,c){var s,l,d,m,g=e.dom;if(n){for(var p=n.parentNode,h=o.parentNode;h&&h!==p;h=h.parentNode){for(var v=g.clone(h,!1),b=0;b<t.length&&null!==(v=uC(e,t[b],c,v));b++);v&&(d&&v.appendChild(d),m||(m=v),d=v)}!a||u.mixed&&g.isBlock(n)||(o=null!==(s=g.split(n,o))&&void 0!==s?s:o),d&&m&&(null===(l=i.parentNode)||void 0===l||l.insertBefore(d,i),m.appendChild(i),bm(u)&&Uy(e,u,0,d))}return o}(e,a,c,o,o,!0,u,n)},d=function removeFormatOnNode(t){return ae(a,(function(o){return lC(e,o,n,t,t)}))},m=function process(t){var n=Oe(t.childNodes),o=d(t)||ae(a,(function(e){return ly(c,t,e)})),i=t.parentNode;if(!o&&F(i)&&ym(u)&&d(i),u.deep&&n.length)for(var s=0;s<n.length;s++)process(n[s]);ce(["underline","line-through","overline"],(function(n){co(t)&&e.dom.getStyle(t,"text-decoration")===n&&t.parentNode&&dm(c,t.parentNode)===n&&lC(e,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},void 0,t)}))},g=function unwrap(e){var t=c.get(e?"_start":"_end");if(t){var n=t[e?"firstChild":"lastChild"];return function isRemoveBookmarkNode(e){return Ld(e)&&co(e)&&("_start"===e.id||"_end"===e.id)}(n)&&(n=n[e?"firstChild":"lastChild"]),Co(n)&&0===n.data.length&&(n=e?t.previousSibling||t.nextSibling:t.nextSibling||t.previousSibling),c.remove(t,!0),n}return null},p=function removeRngStyle(t){var n,o,i=Lm(c,t,a,t.collapsed);if(u.split){if(i=Pg(i),(n=Jy(e,i,!0))!==(o=Jy(e,i))){if(n=Qy(n,!0),o=Qy(o,!1),Xy(c,n,o)){var s=ee.from(n.firstChild).getOr(n);return l(tC(c,s,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void g(!0)}if(Xy(c,o,n)){var d=ee.from(o.lastChild).getOr(o);return l(tC(c,d,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void g(!1)}n=eC(c,n,"span",{id:"_start","data-mce-type":"bookmark"}),o=eC(c,o,"span",{id:"_end","data-mce-type":"bookmark"});var p=c.createRng();p.setStartAfter(n),p.setEndBefore(o),Fm(c,p,(function(e){ce(e,(function(e){Ld(e)||Ld(e.parentNode)||l(e)}))})),l(n),l(o),n=g(!0),o=g()}else n=o=l(n);i.startContainer=n.parentNode?n.parentNode:n,i.startOffset=c.nodeIndex(n),i.endContainer=o.parentNode?o.parentNode:o,i.endOffset=c.nodeIndex(o)+1}Fm(c,i,(function(e){ce(e,m)}))};if(o){if(Qd(o)){var h=c.createRng();h.setStartBefore(o),h.setEndAfter(o),p(h)}else p(o);Xm(e,t,o,n)}else s.isCollapsed()&&bm(u)&&!Zd(e).length?ky(e,t,n,i):(tm(e,(function(){return Xd(e,p)}),(function(o){return bm(u)&&my(e,t,n,o)})),e.nodeChanged()),function removeListStyleFormats(e,t,n){"removeformat"===t?ce(Fy(e.selection),(function(t){ce(Ry,(function(n){return e.dom.setStyle(t,n,"")})),oC(e.dom,t)})):My(e.formatter,t).each((function(t){ce(Fy(e.selection),(function(o){return iC(e.dom,o,t,n,null)}))}))}(e,t,n),Xm(e,t,o,n)},sC=function removeFormat$1(e,t,n,o,i){(o||e.selection.isEditable())&&cC(e,t,n,o,i)},lC=function removeNodeFormat(e,t,n,o,i){return aC(e,t,n,o,i).fold(J,(function(t){return e.dom.rename(o,t),!0}),Q)},fC=Kt.each,dC=function mergeWithChildren(e,t,n,o){fC(t,(function(t){bm(t)&&fC(e.dom.select(t.inline,o),(function(o){$y(o)&&lC(e,t,n,o,t.exact?o:null)})),function clearChildStyles(e,t,n){if(t.clear_child_styles){var o=t.links?"*:not(a)":"*";Hy(e.select(o,n),(function(n){$y(n)&&e.isEditable(n)&&Hy(t.styles,(function(t,o){e.setStyle(n,o,"")}))}))}}(e.dom,t,o)}))},mC=Kt.each,gC=function applyStyles(e,t,n,o){if(mC(n.styles,(function(n,i){e.setStyle(t,i,cm(n,o))})),n.styles){var i=e.getAttrib(t,"style");i&&e.setAttrib(t,"data-mce-style",i)}},pC=function applyFormatAction(e,t,n,o){var i=e.formatter.get(t),a=i[0],u=!o&&e.selection.isCollapsed(),c=e.dom,s=e.selection,l=function setElementFormat(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a;H(t.onformat)&&t.onformat(e,t,n,o),gC(c,e,t,n),mC(t.attributes,(function(t,o){c.setAttrib(e,o,cm(t,n))})),mC(t.classes,(function(t){var o=cm(t,n);c.hasClass(e,o)||c.addClass(e,o)}))},d=function applyNodeStyle(e,t){var n=!1;return mC(e,(function(e){return!!vm(e)&&("false"===c.getContentEditable(t)&&!e.ceFalseOverride||(!(!F(e.collapsed)||e.collapsed===u)||(!(c.is(t,e.selector)&&!Sd(t))||(l(t,e),n=!0,!1))))})),n},m=function createWrapElement(e){if(D(e)){var t=c.create(e);return l(t),t}return null},g=function applyRngStyle(o,u,c){var s=[],g=!0,p=a.inline||a.block,h=m(p),v=function isMatchingWrappingBlock(o){return function isWrappingBlockFormat(e){return hm(e)&&!0===e.wrapper}(a)&&dy(e,o,t,n)},b=function canRenameBlock(t,n,o){var i=function isNonWrappingBlockFormat(e){return hm(e)&&!0!==e.wrapper}(a)&&om(e.schema,t)&&im(e,n,p);return o&&i};Fm(o,u,(function(t){var n;ce(t,(function process(t){var u=!1,m=g,y=!1,C=t.parentNode,w=C.nodeName.toLowerCase(),x=o.getContentEditable(t);F(x)&&(m=g,g="true"===x,u=!0,y=um(e,t));var S=g&&!u;if(Eo(t)&&!function canFormatBR(e,t,n,o){if(ul(e)&&bm(t)&&n.parentNode){var i=Ia(e.schema),a=Gv(In.fromDom(n),(function(e){return Sd(e.dom)}));return ze(i,o)&&Li(In.fromDom(n.parentNode),!1)&&!a}return!1}(e,a,t,w))return n=null,void(hm(a)&&o.remove(t));if(v(t))n=null;else{if(b(t,w,S)){var k=o.rename(t,p);return l(k),s.push(k),void(n=null)}if(vm(a)){var T=d(i,t);if(!T&&F(C)&&ym(a)&&(T=d(i,C)),!bm(a)||T)return void(n=null)}F(h)&&function canWrapNode(t,n,i,u){var s=t.nodeName.toLowerCase(),l=im(e,p,s)&&im(e,n,p),d=!c&&Co(t)&&ei(t.data),m=Sd(t),g=!bm(a)||!o.isBlock(t);return(i||u)&&l&&!d&&!m&&g}(t,w,S,y)?(n||(n=o.clone(h,!1),C.insertBefore(n,t),s.push(n)),y&&u&&(g=m),n.appendChild(t)):(n=null,ce(Oe(t.childNodes),process),u&&(g=m),n=null)}}))})),!0===a.links&&ce(s,(function(e){!function process(e){"A"===e.nodeName&&l(e,a),ce(Oe(e.childNodes),process)}(e)})),ce(s,(function(u){var c=function getChildCount(e){var t=0;return ce(e.childNodes,(function(e){(function isEmptyTextNode$1(e){return F(e)&&Co(e)&&0===e.length})(e)||Ld(e)||t++})),t}(u);!(s.length>1)&&o.isBlock(u)||0!==c?(bm(a)||hm(a)&&a.wrapper)&&(a.exact||1!==c||(u=function mergeStyles(e){var t=pe(e.childNodes,em).filter((function(e){return"false"!==o.getContentEditable(e)&&ly(o,e,a)}));return t.map((function(t){var n=o.clone(t,!1);return l(n),o.replace(n,e,!0),o.remove(t,!0),n})).getOr(e)}(u)),dC(e,i,n,u),function mergeWithParents(e,t,n,o,i){var a=i.parentNode;dy(e,a,n,o)&&lC(e,t,o,i)||t.merge_with_parents&&a&&e.dom.getParent(a,(function(a){return!!dy(e,a,n,o)&&(lC(e,t,o,i),!0)}))}(e,a,t,n,u),function mergeBackgroundColorAndFontSize(e,t,n,o){if(t.styles&&t.styles.backgroundColor){var i=Wy(e,"fontSize");Zy(o,(function(t){return i(t)&&e.isEditable(t)}),jy(e,"backgroundColor",cm(t.styles.backgroundColor,n)))}}(o,a,n,u),function mergeTextDecorationsAndColor(e,t,n,o){var i=function processTextDecorationsAndColor(t){if(so(t)&&co(t.parentNode)&&e.isEditable(t)){var n=dm(e,t.parentNode);e.getStyle(t,"color")&&n?e.setStyle(t,"text-decoration",n):e.getStyle(t,"text-decoration")===n&&e.setStyle(t,"text-decoration",null)}};t.styles&&(t.styles.color||t.styles.textDecoration)&&(Kt.walk(o,i,"childNodes"),i(o))}(o,a,0,u),function mergeSubSup(e,t,n,o){if(bm(t)&&("sub"===t.inline||"sup"===t.inline)){var i=Wy(e,"fontSize");Zy(o,(function(t){return i(t)&&e.isEditable(t)}),jy(e,"fontSize",""));var a=fe(e.select("sup"===t.inline?"sub":"sup",o),e.isEditable);e.remove(a,!0)}}(o,a,0,u),Uy(e,a,0,u)):o.remove(u,!0)}))},p=Qd(o)?o:s.getNode();if("false"===c.getContentEditable(p)&&!um(e,p))return d(i,o=p),void Ym(e,t,o,n);if(a){if(o)if(Qd(o)){if(!d(i,o)){var h=c.createRng();h.setStartBefore(o),h.setEndAfter(o),g(c,Lm(c,h,i),!0)}}else g(c,o,!0);else u&&bm(a)&&!Zd(e).length?function applyCaretFormat(e,t,n){var o,i=e.selection,a=e.formatter.get(t);if(a){var u=i.getRng(),c=u.startOffset,s=u.startContainer.nodeValue;o=kd(e.getBody(),i.getStart());var l=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(s&&c>0&&c<s.length&&l.test(s.charAt(c))&&l.test(s.charAt(c-1))){var d=i.getBookmark();u.collapse(!0);var m=Lm(e.dom,u,a);m=Pg(m),e.formatter.apply(t,n,m),i.moveToBookmark(d)}else{var g=o?vy(o):null;o&&(null===g||void 0===g?void 0:g.data)===hy||(g=(o=function importNode(e,t){return e.importNode(t,!0)}(e.getDoc(),yy(!0).dom)).firstChild,u.insertNode(o),c=1),e.formatter.apply(t,n,o),i.setCursorLocation(g,c)}}}(e,t,n):(s.setRng(Vb(s.getRng())),tm(e,(function(){Xd(e,(function(e,t){var n=t?e:Lm(c,e,i);g(c,n,!1)}))}),Q),e.nodeChanged()),My(e.formatter,t).each((function(t){ce(Ly(e.selection),(function(e){return gC(c,e,t,n)}))}));!function postProcess$1(e,t){$e(_y,e)&&ce(_y[e],(function(e){e(t)}))}(t,e)}Ym(e,t,o,n)},hC=function applyFormat$1(e,t,n,o){(o||e.selection.isEditable())&&pC(e,t,n,o)},vC=function hasVars(e){return $e(e,"vars")},bC=function fallbackElement(e){return e.selection.getStart()},yC=function matchingNode(e,t,n,o,i){return ge(t,(function isMatchingNode(t){var a=e.formatter.matchNode(t,n,null!==i&&void 0!==i?i:{},o);return!P(a)}),(function isUnableToMatch(t){return!!cy(e,t,n)||!o&&F(e.formatter.matchNode(t,n,i,!0))}))},CC=function getParents(e,t){var n=null!==t&&void 0!==t?t:bC(e);return fe(mm(e.dom,n),(function(e){return co(e)&&!ho(e)}))},wC=function updateAndFireChangeCallbacks(e,t,n){var o=CC(e,t);Re(n,(function(n,i){var a=function runIfChanged(n){var a=yC(e,o,i,n.similar,vC(n)?n.vars:void 0),u=a.isSome();if(n.state.get()!==u){n.state.set(u);var c=a.getOr(t);vC(n)?n.callback(u,{node:c,format:i,parents:o}):ce(n.callbacks,(function(e){return e(u,{node:c,format:i,parents:o})}))}};ce([n.withSimilar,n.withoutSimilar],a),ce(n.withVars,a)}))},xC=function formatChangedInternal(e,t,n,o,i,a){return function addListeners(e,t,n,o,i,a){var u=t.get();ce(n.split(","),(function(t){var n=He(u,t).getOrThunk((function(){var e={withSimilar:{state:vu(!1),similar:!0,callbacks:[]},withoutSimilar:{state:vu(!1),similar:!1,callbacks:[]},withVars:[]};return u[t]=e,e})),c=function getCurrent(){var n=CC(e);return yC(e,n,t,i,a).isSome()};if(P(a)){var s=i?n.withSimilar:n.withoutSimilar;s.callbacks.push(o),1===s.callbacks.length&&s.state.set(c())}else n.withVars.push({state:vu(c()),similar:i,vars:a,callback:o})})),t.set(u)}(e,t,n,o,i,a),{unbind:function unbind(){return function removeListeners(e,t,n){var o=e.get();ce(t.split(","),(function(e){return He(o,e).each((function(t){o[e]={withSimilar:l(l({},t.withSimilar),{},{callbacks:fe(t.withSimilar.callbacks,(function(e){return e!==n}))}),withoutSimilar:l(l({},t.withoutSimilar),{},{callbacks:fe(t.withoutSimilar.callbacks,(function(e){return e!==n}))}),withVars:fe(t.withVars,(function(e){return e.callback!==n}))}}))})),e.set(o)}(t,n,o)}}},SC=Kt.explode,kC=function create$8(){var e={};return{addFilter:function addFilter(t,n){ce(SC(t),(function(t){$e(e,t)||(e[t]={name:t,callbacks:[]}),e[t].callbacks.push(n)}))},getFilters:function getFilters(){return Fe(e)},removeFilter:function removeFilter(t,n){ce(SC(t),(function(t){if($e(e,t))if(F(n)){var o=e[t],i=fe(o.callbacks,(function(e){return e!==n}));i.length>0?o.callbacks=i:delete e[t]}else delete e[t]}))}}},TC=function addFontToSpansFilter(e,t,n){e.addNodeFilter("font",(function(e){ce(e,(function(e){var o=t.parse(e.attr("style")),i=e.attr("color"),a=e.attr("face"),u=e.attr("size");i&&(o.color=i),a&&(o["font-family"]=a),u&&mt(u).each((function(e){o["font-size"]=n[e-1]})),e.name="span",e.attr("style",t.serialize(o)),function removeAttrs(e,t){ce(t,(function(t){e.attr(t,null)}))}(e,["color","face","size"])}))}))},EC=function addFilters(e,t,n){var o,i=Ga();t.convert_fonts_to_spans&&TC(e,i,Kt.explode(null!==(o=t.font_size_legacy_values)&&void 0!==o?o:"")),function addStrikeFilter(e,t,n){e.addNodeFilter("strike",(function(e){var o="html4"!==t.type;ce(e,(function(e){if(o)e.name="s";else{var t=n.parse(e.attr("style"));t["text-decoration"]="line-through",e.name="span",e.attr("style",n.serialize(t))}}))}))}(e,n,i)},OC=function addNodeFilter(e,t,n){t.addNodeFilter("br",(function(t,o,i){var a=Kt.extend({},n.getBlockElements()),u=n.getNonEmptyElements(),c=n.getWhitespaceElements();a.body=1;for(var s=function isBlock(e){return e.name in a||ta(n,e)},l=0,d=t.length;l<d;l++){var m=t[l],g=m.parent;if(g&&s(g)&&m===g.lastChild){for(var p=m.prev;p;){var h=p.name;if("span"!==h||"bookmark"!==p.attr("data-mce-type")){"br"===h&&(m=null);break}p=p.prev}if(m&&(m.remove(),Pb(n,u,c,g))){var v=n.getElementRule(g.name);v&&(v.removeEmpty?g.remove():v.paddEmpty&&Bb(e,i,s,g))}}else{for(var b=m;g&&g.firstChild===b&&g.lastChild===b&&(b=g,!a[g.name]);)g=g.parent;if(b===g){var y=new Jp("#text",3);y.value=Lo,m.replace(y)}}}}))},AC=function parseDataUri(e){var t=e.split(","),n=c(t),o=n[0],i=n.slice(1).join(","),a=/data:([^/]+\/[^;]+)(;.+)?/.exec(o);if(a){var u=";base64"===a[2],s=u?function extractBase64Data(e){var t=/([a-z0-9+\/=\s]+)/i.exec(e);return t?t[1]:""}(i):decodeURIComponent(i);return ee.some({type:a[1],data:s,base64Encoded:u})}return ee.none()},_C=function buildBlob(e,t){var n=t;if(!(arguments.length>2&&void 0!==arguments[2])||arguments[2])try{n=atob(t)}catch(a){return ee.none()}for(var o=new Uint8Array(n.length),i=0;i<o.length;i++)o[i]=n.charCodeAt(i);return ee.some(new Blob([o],{type:e}))},DC=function uriToBlob(e){return it(e,"blob:")?function blobUriToBlob(e){return fetch(e).then((function(e){return e.ok?e.blob():Promise.reject()})).catch((function(){return Promise.reject({message:"Cannot convert ".concat(e," to Blob. Resource might not exist or is inaccessible."),uriType:"blob"})}))}(e):it(e,"data:")?function dataUriToBlob(e){return new Promise((function(t,n){AC(e).bind((function(e){var t=e.type,n=e.data,o=e.base64Encoded;return _C(t,n,o)})).fold((function(){return n("Invalid data URI")}),t)}))}(e):Promise.reject("Unknown URI format")},RC=function blobToDataUri(e){return new Promise((function(t,n){var o=new FileReader;o.onloadend=function(){t(o.result)},o.onerror=function(){var e;n(null===(e=o.error)||void 0===e?void 0:e.message)},o.readAsDataURL(e)}))},NC=0,MC=function processDataUri(e,t,n){return AC(e).bind((function(e){var o=e.data,i=e.type,a=e.base64Encoded;if(t&&!a)return ee.none();var u=a?o:btoa(o);return n(u,i)}))},BC=function createBlobInfo$1(e,t,n){var o=e.create(function uniqueId$1(e){return(e||"blobid")+NC++}(),t,n);return e.add(o),o},IC=function dataUriToBlobInfo(e,t){return MC(t,arguments.length>2&&void 0!==arguments[2]&&arguments[2],(function(t,n){return ee.from(e.getByData(t,n)).orThunk((function(){return _C(n,t).map((function(n){return BC(e,n,t)}))}))}))},PC=function registerBase64ImageFilter(e,t){var n=t.blob_cache;if(n){var o=function processImage(e){var t=e.attr("src");(function isInternalImageSource(e){return e.attr("src")===Wt.transparentSrc||F(e.attr("data-mce-placeholder"))})(e)||function isBogusImage(e){return F(e.attr("data-mce-bogus"))}(e)||L(t)||IC(n,t,!0).each((function(t){e.attr("src",t.blobUri())}))};e.addAttributeFilter("src",(function(e){return ce(e,o)}))}},LC=function isMimeType(e,t){return it(e,"".concat(t,"/"))},FC=function register$4(e,t){var n=e.schema;t.remove_trailing_brs&&OC(t,e,n),e.addAttributeFilter("href",(function(e){var n=e.length,o=function addNoOpener(e){var t=e?Kt.trim(e):"";return/\b(noopener)\b/g.test(t)?t:function appendRel(e){return e.split(" ").filter((function(e){return e.length>0})).concat(["noopener"]).sort().join(" ")}(t)};if(!t.allow_unsafe_link_target)for(;n--;){var i=e[n];"a"===i.name&&"_blank"===i.attr("target")&&i.attr("rel",o(i.attr("rel")))}})),t.allow_html_in_named_anchor||e.addAttributeFilter("id,name",(function(e){for(var t,n,o,i,a=e.length;a--;)if("a"===(i=e[a]).name&&i.firstChild&&!i.attr("href"))for(o=i.parent,t=i.lastChild;t&&o;)n=t.prev,o.insert(t,i),t=n})),t.fix_list_elements&&e.addNodeFilter("ul,ol",(function(e){for(var t,n,o=e.length;o--;)if((n=(t=e[o]).parent)&&("ul"===n.name||"ol"===n.name))if(t.prev&&"li"===t.prev.name)t.prev.append(t);else{var i=new Jp("li",1);i.attr("style","list-style-type: none"),t.wrap(i)}}));var o=n.getValidClasses();t.validate&&o&&e.addAttributeFilter("class",(function(e){for(var t,n=e.length;n--;){for(var i=e[n],a=null!==(t=i.attr("class"))&&void 0!==t?t:"",u=Kt.explode(a," "),c="",s=0;s<u.length;s++){var l=u[s],d=!1,m=o["*"];m&&m[l]&&(d=!0),m=o[i.name],!d&&m&&m[l]&&(d=!0),d&&(c&&(c+=" "),c+=l)}c.length||(c=null),i.attr("class",c)}})),PC(e,t),t.convert_unsafe_embeds&&e.addNodeFilter("object,embed",(function(e){return ce(e,(function(e){e.replace(function createSafeEmbed(e,t,n,o,i){var a;a=P(e)?"iframe":LC(e,"image")?"img":LC(e,"video")?"video":LC(e,"audio")?"audio":"iframe";var u=new Jp(a,1);return u.attr("audio"===a?{src:t}:{src:t,width:n,height:o}),"audio"!==a&&"video"!==a||u.attr("controls",""),"iframe"===a&&i&&u.attr("sandbox",""),u}(e.attr("type"),"object"===e.name?e.attr("data"):e.attr("src"),e.attr("width"),e.attr("height"),t.sandbox_iframes))}))})),t.sandbox_iframes&&e.addNodeFilter("iframe",(function(e){return ce(e,(function(e){return e.attr("sandbox","")}))}))},HC=Object.entries,$C=Object.setPrototypeOf,zC=Object.isFrozen,VC=Object.getPrototypeOf,UC=Object.getOwnPropertyDescriptor,ZC=Object.freeze,WC=Object.seal,jC=Object.create,GC="undefined"!==typeof Reflect&&Reflect,qC=GC.apply,KC=GC.construct;qC||(qC=function apply(e,t,n){return e.apply(t,n)}),ZC||(ZC=function freeze(e){return e}),WC||(WC=function seal(e){return e}),KC||(KC=function construct(e,t){return u(e,m(t))});var YC=unapply(Array.prototype.forEach),XC=unapply(Array.prototype.pop),JC=unapply(Array.prototype.push),QC=unapply(String.prototype.toLowerCase),ew=unapply(String.prototype.toString),tw=unapply(String.prototype.match),nw=unapply(String.prototype.replace),rw=unapply(String.prototype.indexOf),ow=unapply(String.prototype.trim),iw=unapply(RegExp.prototype.test),aw=function unconstruct(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return KC(e,n)}}(TypeError);function unapply(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return qC(e,t,o)}}function addToSet(e,t,n){var o;n=null!==(o=n)&&void 0!==o?o:QC,$C&&$C(e,null);for(var i=t.length;i--;){var a=t[i];if("string"===typeof a){var u=n(a);u!==a&&(zC(t)||(t[i]=u),a=u)}e[a]=!0}return e}function clone(e){var t,n=jC(null),o=g(HC(e));try{for(o.s();!(t=o.n()).done;){var i=d(t.value,2),a=i[0],u=i[1];n[a]=u}}catch(c){o.e(c)}finally{o.f()}return n}function lookupGetter(e,t){for(;null!==e;){var n=UC(e,t);if(n){if(n.get)return unapply(n.get);if("function"===typeof n.value)return unapply(n.value)}e=VC(e)}return function fallbackValue(e){return console.warn("fallback value for",e),null}}var uw=ZC(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),cw=ZC(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),sw=ZC(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),lw=ZC(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),fw=ZC(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),dw=ZC(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),mw=ZC(["#text"]),gw=ZC(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),pw=ZC(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),hw=ZC(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),vw=ZC(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),bw=WC(/\{\{[\w\W]*|[\w\W]*\}\}/gm),yw=WC(/<%[\w\W]*|[\w\W]*%>/gm),Cw=WC(/\${[\w\W]*}/gm),ww=WC(/^data-[\-\w.\u00B7-\uFFFF]/),xw=WC(/^aria-[\-\w]+$/),Sw=WC(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),kw=WC(/^(?:\w+script|data):/i),Tw=WC(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ew=WC(/^html$/i),Ow=Object.freeze({__proto__:null,MUSTACHE_EXPR:bw,ERB_EXPR:yw,TMPLIT_EXPR:Cw,DATA_ATTR:ww,ARIA_ATTR:xw,IS_ALLOWED_URI:Sw,IS_SCRIPT_OR_DATA:kw,ATTR_WHITESPACE:Tw,DOCTYPE_NAME:Ew}),Aw=function getGlobal(){return"undefined"===typeof window?null:window};var _w,Dw=function createDOMPurify(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Aw(),t=function DOMPurify(e){return createDOMPurify(e)};if(t.version="3.0.5",t.removed=[],!e||!e.document||9!==e.document.nodeType)return t.isSupported=!1,t;var n,o=e.document,i=o.currentScript,a=e.document,u=e.DocumentFragment,c=e.HTMLTemplateElement,s=e.Node,l=e.Element,d=e.NodeFilter,g=e.NamedNodeMap,p=void 0===g?e.NamedNodeMap||e.MozNamedAttrMap:g,h=e.HTMLFormElement,v=e.DOMParser,b=e.trustedTypes,y=l.prototype,C=lookupGetter(y,"cloneNode"),w=lookupGetter(y,"nextSibling"),x=lookupGetter(y,"childNodes"),S=lookupGetter(y,"parentNode");if("function"===typeof c){var k=a.createElement("template");k.content&&k.content.ownerDocument&&(a=k.content.ownerDocument)}var T="",E=a,O=E.implementation,A=E.createNodeIterator,D=E.createDocumentFragment,R=E.getElementsByTagName,N=o.importNode,M={};t.isSupported="function"===typeof HC&&"function"===typeof S&&O&&void 0!==O.createHTMLDocument;var B,I,P=Ow.MUSTACHE_EXPR,L=Ow.ERB_EXPR,F=Ow.TMPLIT_EXPR,H=Ow.DATA_ATTR,$=Ow.ARIA_ATTR,z=Ow.IS_SCRIPT_OR_DATA,V=Ow.ATTR_WHITESPACE,U=Ow.IS_ALLOWED_URI,Z=null,W=addToSet({},[].concat(m(uw),m(cw),m(sw),m(fw),m(mw))),j=null,G=addToSet({},[].concat(m(gw),m(pw),m(hw),m(vw))),q=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),K=null,Y=null,X=!0,J=!0,Q=!1,ee=!0,te=!1,ne=!1,re=!1,oe=!1,ie=!1,ae=!1,ue=!1,ce=!0,se=!1,le=!0,fe=!1,de={},me=null,ge=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),pe=null,he=addToSet({},["audio","video","img","source","image","track"]),ve=null,be=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ye="http://www.w3.org/1998/Math/MathML",Ce="http://www.w3.org/2000/svg",we="http://www.w3.org/1999/xhtml",xe=we,Se=!1,ke=null,Te=addToSet({},[ye,Ce,we],ew),Ee=["application/xhtml+xml","text/html"],Oe=null,Ae=a.createElement("form"),_e=function isRegexOrFunction(e){return e instanceof RegExp||e instanceof Function},De=function _parseConfig(e){if(!Oe||Oe!==e){if(e&&"object"===typeof e||(e={}),e=clone(e),B=B=-1===Ee.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,I="application/xhtml+xml"===B?ew:QC,Z="ALLOWED_TAGS"in e?addToSet({},e.ALLOWED_TAGS,I):W,j="ALLOWED_ATTR"in e?addToSet({},e.ALLOWED_ATTR,I):G,ke="ALLOWED_NAMESPACES"in e?addToSet({},e.ALLOWED_NAMESPACES,ew):Te,ve="ADD_URI_SAFE_ATTR"in e?addToSet(clone(be),e.ADD_URI_SAFE_ATTR,I):be,pe="ADD_DATA_URI_TAGS"in e?addToSet(clone(he),e.ADD_DATA_URI_TAGS,I):he,me="FORBID_CONTENTS"in e?addToSet({},e.FORBID_CONTENTS,I):ge,K="FORBID_TAGS"in e?addToSet({},e.FORBID_TAGS,I):{},Y="FORBID_ATTR"in e?addToSet({},e.FORBID_ATTR,I):{},de="USE_PROFILES"in e&&e.USE_PROFILES,X=!1!==e.ALLOW_ARIA_ATTR,J=!1!==e.ALLOW_DATA_ATTR,Q=e.ALLOW_UNKNOWN_PROTOCOLS||!1,ee=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,te=e.SAFE_FOR_TEMPLATES||!1,ne=e.WHOLE_DOCUMENT||!1,ie=e.RETURN_DOM||!1,ae=e.RETURN_DOM_FRAGMENT||!1,ue=e.RETURN_TRUSTED_TYPE||!1,oe=e.FORCE_BODY||!1,ce=!1!==e.SANITIZE_DOM,se=e.SANITIZE_NAMED_PROPS||!1,le=!1!==e.KEEP_CONTENT,fe=e.IN_PLACE||!1,U=e.ALLOWED_URI_REGEXP||Sw,xe=e.NAMESPACE||we,q=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&_e(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&_e(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(q.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),te&&(J=!1),ae&&(ie=!0),de&&(Z=addToSet({},m(mw)),j=[],!0===de.html&&(addToSet(Z,uw),addToSet(j,gw)),!0===de.svg&&(addToSet(Z,cw),addToSet(j,pw),addToSet(j,vw)),!0===de.svgFilters&&(addToSet(Z,sw),addToSet(j,pw),addToSet(j,vw)),!0===de.mathMl&&(addToSet(Z,fw),addToSet(j,hw),addToSet(j,vw))),e.ADD_TAGS&&(Z===W&&(Z=clone(Z)),addToSet(Z,e.ADD_TAGS,I)),e.ADD_ATTR&&(j===G&&(j=clone(j)),addToSet(j,e.ADD_ATTR,I)),e.ADD_URI_SAFE_ATTR&&addToSet(ve,e.ADD_URI_SAFE_ATTR,I),e.FORBID_CONTENTS&&(me===ge&&(me=clone(me)),addToSet(me,e.FORBID_CONTENTS,I)),le&&(Z["#text"]=!0),ne&&addToSet(Z,["html","head","body"]),Z.table&&(addToSet(Z,["tbody"]),delete K.tbody),e.TRUSTED_TYPES_POLICY){if("function"!==typeof e.TRUSTED_TYPES_POLICY.createHTML)throw aw('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!==typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw aw('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');n=e.TRUSTED_TYPES_POLICY,T=n.createHTML("")}else void 0===n&&(n=function _createTrustedTypesPolicy(e,t){if("object"!==typeof e||"function"!==typeof e.createPolicy)return null;var n=null,o="data-tt-policy-suffix";t&&t.hasAttribute(o)&&(n=t.getAttribute(o));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function createHTML(e){return e},createScriptURL:function createScriptURL(e){return e}})}catch(a){return console.warn("TrustedTypes policy "+i+" could not be created."),null}}(b,i)),null!==n&&"string"===typeof T&&(T=n.createHTML(""));ZC&&ZC(e),Oe=e}},Re=addToSet({},["mi","mo","mn","ms","mtext"]),Ne=addToSet({},["foreignobject","desc","title","annotation-xml"]),Me=addToSet({},["title","style","font","a","script"]),Be=addToSet({},cw);addToSet(Be,sw),addToSet(Be,lw);var Ie=addToSet({},fw);addToSet(Ie,dw);var Pe=function _forceRemove(e){JC(t.removed,{element:e});try{e.parentNode.removeChild(e)}catch(n){e.remove()}},Le=function _removeAttribute(e,n){try{JC(t.removed,{attribute:n.getAttributeNode(e),from:n})}catch(o){JC(t.removed,{attribute:null,from:n})}if(n.removeAttribute(e),"is"===e&&!j[e])if(ie||ae)try{Pe(n)}catch(o){}else try{n.setAttribute(e,"")}catch(o){}},Fe=function _initDocument(e){var t,o;if(oe)e="<remove></remove>"+e;else{var i=tw(e,/^[\r\n\t ]+/);o=i&&i[0]}"application/xhtml+xml"===B&&xe===we&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var u=n?n.createHTML(e):e;if(xe===we)try{t=(new v).parseFromString(u,B)}catch(s){}if(!t||!t.documentElement){t=O.createDocument(xe,"template",null);try{t.documentElement.innerHTML=Se?T:u}catch(s){}}var c=t.body||t.documentElement;return e&&o&&c.insertBefore(a.createTextNode(o),c.childNodes[0]||null),xe===we?R.call(t,ne?"html":"body")[0]:ne?t.documentElement:c},He=function _createIterator(e){return A.call(e.ownerDocument||e,e,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT,null,!1)},$e=function _isNode(e){return"object"===typeof s?e instanceof s:e&&"object"===typeof e&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName},ze=function _executeHook(e,n,o){M[e]&&YC(M[e],(function(e){e.call(t,n,o,Oe)}))},Ve=function _sanitizeElements(e){var n;if(ze("beforeSanitizeElements",e,null),function _isClobbered(e){return e instanceof h&&("string"!==typeof e.nodeName||"string"!==typeof e.textContent||"function"!==typeof e.removeChild||!(e.attributes instanceof p)||"function"!==typeof e.removeAttribute||"function"!==typeof e.setAttribute||"string"!==typeof e.namespaceURI||"function"!==typeof e.insertBefore||"function"!==typeof e.hasChildNodes)}(e))return Pe(e),!0;var o=I(e.nodeName);if(ze("uponSanitizeElement",e,{tagName:o,allowedTags:Z}),e.hasChildNodes()&&!$e(e.firstElementChild)&&(!$e(e.content)||!$e(e.content.firstElementChild))&&iw(/<[/\w]/g,e.innerHTML)&&iw(/<[/\w]/g,e.textContent))return Pe(e),!0;if(!Z[o]||K[o]){if(!K[o]&&Ze(o)){if(q.tagNameCheck instanceof RegExp&&iw(q.tagNameCheck,o))return!1;if(q.tagNameCheck instanceof Function&&q.tagNameCheck(o))return!1}if(le&&!me[o]){var i=S(e)||e.parentNode,a=x(e)||e.childNodes;if(a&&i)for(var u=a.length-1;u>=0;--u)i.insertBefore(C(a[u],!0),w(e))}return Pe(e),!0}return e instanceof l&&!function _checkValidNamespace(e){var t=S(e);t&&t.tagName||(t={namespaceURI:xe,tagName:"template"});var n=QC(e.tagName),o=QC(t.tagName);return!!ke[e.namespaceURI]&&(e.namespaceURI===Ce?t.namespaceURI===we?"svg"===n:t.namespaceURI===ye?"svg"===n&&("annotation-xml"===o||Re[o]):Boolean(Be[n]):e.namespaceURI===ye?t.namespaceURI===we?"math"===n:t.namespaceURI===Ce?"math"===n&&Ne[o]:Boolean(Ie[n]):e.namespaceURI===we?!(t.namespaceURI===Ce&&!Ne[o])&&!(t.namespaceURI===ye&&!Re[o])&&!Ie[n]&&(Me[n]||!Be[n]):!("application/xhtml+xml"!==B||!ke[e.namespaceURI]))}(e)?(Pe(e),!0):"noscript"!==o&&"noembed"!==o&&"noframes"!==o||!iw(/<\/no(script|embed|frames)/i,e.innerHTML)?(te&&3===e.nodeType&&(n=e.textContent,n=nw(n,P," "),n=nw(n,L," "),n=nw(n,F," "),e.textContent!==n&&(JC(t.removed,{element:e.cloneNode()}),e.textContent=n)),ze("afterSanitizeElements",e,null),!1):(Pe(e),!0)},Ue=function _isValidAttribute(e,t,n){if(ce&&("id"===t||"name"===t)&&(n in a||n in Ae))return!1;if(J&&!Y[t]&&iw(H,t));else if(X&&iw($,t));else if(!j[t]||Y[t]){if(!(Ze(e)&&(q.tagNameCheck instanceof RegExp&&iw(q.tagNameCheck,e)||q.tagNameCheck instanceof Function&&q.tagNameCheck(e))&&(q.attributeNameCheck instanceof RegExp&&iw(q.attributeNameCheck,t)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(t))||"is"===t&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&iw(q.tagNameCheck,n)||q.tagNameCheck instanceof Function&&q.tagNameCheck(n))))return!1}else if(ve[t]);else if(iw(U,nw(n,V,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==rw(n,"data:")||!pe[e]){if(Q&&!iw(z,nw(n,V,"")));else if(n)return!1}else;return!0},Ze=function _basicCustomElementTest(e){return e.indexOf("-")>0},We=function _sanitizeAttributes(e){var t,o,i,a;ze("beforeSanitizeAttributes",e,null);var u=e.attributes;if(u){var c={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:j};for(a=u.length;a--;){var s=t=u[a],l=s.name,d=s.namespaceURI,m=o="value"===l?t.value:ow(t.value);if(i=I(l),c.attrName=i,c.attrValue=o,c.keepAttr=!0,c.forceKeepAttr=void 0,ze("uponSanitizeAttribute",e,c),o=c.attrValue,!c.forceKeepAttr)if(c.keepAttr)if(ee||!iw(/\/>/i,o)){te&&(o=nw(o,P," "),o=nw(o,L," "),o=nw(o,F," "));var g=I(e.nodeName);if(Ue(g,i,o)){if(!se||"id"!==i&&"name"!==i||(Le(l,e),o="user-content-"+o),n&&"object"===typeof b&&"function"===typeof b.getAttributeType)if(d);else switch(b.getAttributeType(g,i)){case"TrustedHTML":o=n.createHTML(o);break;case"TrustedScriptURL":o=n.createScriptURL(o)}if(o!==m)try{d?e.setAttributeNS(d,l,o):e.setAttribute(l,o)}catch(p){Le(l,e)}}else Le(l,e)}else Le(l,e);else Le(l,e)}ze("afterSanitizeAttributes",e,null)}},je=function _sanitizeShadowDOM(e){var t,n=He(e);for(ze("beforeSanitizeShadowDOM",e,null);t=n.nextNode();)ze("uponSanitizeShadowNode",t,null),Ve(t)||(t.content instanceof u&&_sanitizeShadowDOM(t.content),We(t));ze("afterSanitizeShadowDOM",e,null)};return t.sanitize=function(e){var i,a,c,l,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((Se=!e)&&(e="\x3c!--\x3e"),"string"!==typeof e&&!$e(e)){if("function"!==typeof e.toString)throw aw("toString is not a function");if("string"!==typeof(e=e.toString()))throw aw("dirty is not a string, aborting")}if(!t.isSupported)return e;if(re||De(d),t.removed=[],"string"===typeof e&&(fe=!1),fe){if(e.nodeName){var m=I(e.nodeName);if(!Z[m]||K[m])throw aw("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof s)1===(a=(i=Fe("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?i=a:i.appendChild(a);else{if(!ie&&!te&&!ne&&-1===e.indexOf("<"))return n&&ue?n.createHTML(e):e;if(!(i=Fe(e)))return ie?null:ue?T:""}i&&oe&&Pe(i.firstChild);for(var g=He(fe?e:i);c=g.nextNode();)Ve(c)||(c.content instanceof u&&je(c.content),We(c));if(fe)return e;if(ie){if(ae)for(l=D.call(i.ownerDocument);i.firstChild;)l.appendChild(i.firstChild);else l=i;return(j.shadowroot||j.shadowrootmode)&&(l=N.call(o,l,!0)),l}var p=ne?i.outerHTML:i.innerHTML;return ne&&Z["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&iw(Ew,i.ownerDocument.doctype.name)&&(p="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+p),te&&(p=nw(p,P," "),p=nw(p,L," "),p=nw(p,F," ")),n&&ue?n.createHTML(p):p},t.setConfig=function(e){De(e),re=!0},t.clearConfig=function(){Oe=null,re=!1},t.isValidAttribute=function(e,t,n){Oe||De({});var o=I(e),i=I(t);return Ue(o,i,n)},t.addHook=function(e,t){"function"===typeof t&&(M[e]=M[e]||[],JC(M[e],t))},t.removeHook=function(e){if(M[e])return XC(M[e])},t.removeHooks=function(e){M[e]&&(M[e]=[])},t.removeAllHooks=function(){M={}},t}(),Rw=Kt.each,Nw=Kt.trim,Mw=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Bw={ftp:21,http:80,https:443,mailto:25},Iw=["img","video"],Pw=function isInvalidUri(e,t,n){var o=function decodeUri(e){try{return decodeURIComponent(e)}catch(t){return unescape(e)}}(t).replace(/\s/g,"");return!e.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(o)||!e.allow_html_data_urls&&(/^data:image\//i.test(o)?function blockSvgDataUris(e,t){return F(e)?!e:!F(t)||!ie(Iw,t)}(e.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(o):/^data:/i.test(o)))},Lw=function(){function URI(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};p(this,URI),this.path="",this.directory="",e=Nw(e),this.settings=t;var n=t.base_uri,o=this;if(/^([\w\-]+):([^\/]{2})/i.test(e)||/^\s*#/.test(e))o.source=e;else{var i=0===e.indexOf("//");if(0!==e.indexOf("/")||i||(e=(n&&n.protocol||"http")+"://mce_host"+e),!/^[\w\-]*:?\/\//.test(e)){var a=n?n.path:new URI(document.location.href).directory;if(""===(null===n||void 0===n?void 0:n.protocol))e="//mce_host"+o.toAbsPath(a,e);else{var u=/([^#?]*)([#?]?.*)/.exec(e);u&&(e=(n&&n.protocol||"http")+"://mce_host"+o.toAbsPath(a,u[1])+u[2])}}e=e.replace(/@@/g,"(mce_at)");var c=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(e);c&&Rw(Mw,(function(e,t){var n=c[t];n&&(n=n.replace(/\(mce_at\)/g,"@@")),o[e]=n})),n&&(o.protocol||(o.protocol=n.protocol),o.userInfo||(o.userInfo=n.userInfo),o.port||"mce_host"!==o.host||(o.port=n.port),o.host&&"mce_host"!==o.host||(o.host=n.host),o.source=""),i&&(o.protocol="")}}return h(URI,[{key:"setPath",value:function setPath(e){var t=/^(.*?)\/?(\w+)?$/.exec(e);t&&(this.path=t[0],this.directory=t[1],this.file=t[2]),this.source="",this.getURI()}},{key:"toRelative",value:function toRelative(e){if("./"===e)return e;var t=new URI(e,{base_uri:this});if("mce_host"!==t.host&&this.host!==t.host&&t.host||this.port!==t.port||this.protocol!==t.protocol&&""!==t.protocol)return t.getURI();var n=this.getURI(),o=t.getURI();if(n===o||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===o)return n;var i=this.toRelPath(this.path,t.path);return t.query&&(i+="?"+t.query),t.anchor&&(i+="#"+t.anchor),i}},{key:"toAbsolute",value:function toAbsolute(e,t){var n=new URI(e,{base_uri:this});return n.getURI(t&&this.isSameOrigin(n))}},{key:"isSameOrigin",value:function isSameOrigin(e){if(this.host==e.host&&this.protocol==e.protocol){if(this.port==e.port)return!0;var t=this.protocol?Bw[this.protocol]:null;if(t&&(this.port||t)==(e.port||t))return!0}return!1}},{key:"toRelPath",value:function toRelPath(e,t){var n,o,i=0,a="",u=e.substring(0,e.lastIndexOf("/")).split("/"),c=t.split("/");if(u.length>=c.length)for(n=0,o=u.length;n<o;n++)if(n>=c.length||u[n]!==c[n]){i=n+1;break}if(u.length<c.length)for(n=0,o=c.length;n<o;n++)if(n>=u.length||u[n]!==c[n]){i=n+1;break}if(1===i)return t;for(n=0,o=u.length-(i-1);n<o;n++)a+="../";for(n=i-1,o=c.length;n<o;n++)a+=n!==i-1?"/"+c[n]:c[n];return a}},{key:"toAbsPath",value:function toAbsPath(e,t){var n=0,o=/\/$/.test(t)?"/":"",i=e.split("/"),a=t.split("/"),u=[];Rw(i,(function(e){e&&u.push(e)}));for(var c=[],s=a.length-1;s>=0;s--)0!==a[s].length&&"."!==a[s]&&(".."!==a[s]?n>0?n--:c.push(a[s]):n++);var l,d=u.length-n;return 0!==(l=d<=0?Ce(c).join("/"):u.slice(0,d).join("/")+"/"+Ce(c).join("/")).indexOf("/")&&(l="/"+l),o&&l.lastIndexOf("/")!==l.length-1&&(l+=o),l}},{key:"getURI",value:function getURI(){var e,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return this.source&&!t||(e="",t||(this.protocol?e+=this.protocol+"://":e+="//",this.userInfo&&(e+=this.userInfo+"@"),this.host&&(e+=this.host),this.port&&(e+=":"+this.port)),this.path&&(e+=this.path),this.query&&(e+="?"+this.query),this.anchor&&(e+="#"+this.anchor),this.source=e),this.source}}],[{key:"parseDataUri",value:function parseDataUri(e){var t,n=decodeURIComponent(e).split(","),o=/data:([^;]+)/.exec(n[0]);return o&&(t=o[1]),{type:t,data:n[1]}}},{key:"isDomSafe",value:function isDomSafe(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(n.allow_script_urls)return!0;var o=Ta.decode(e).replace(/[\s\u0000-\u001F]+/g,"");return!Pw(n,o,t)}},{key:"getDocumentBaseUrl",value:function getDocumentBaseUrl(e){var t,n;return n=0!==e.protocol.indexOf("http")&&"file:"!==e.protocol?null!==(t=e.href)&&void 0!==t?t:"":e.protocol+"//"+e.host+e.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}}]),URI}(),Fw=Kt.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Hw="data-mce-type",$w=0,zw=function processNode(e,t,n,o,i){var a,u,c,s,l=t.validate,d=n.getSpecialElements();8===e.nodeType&&!t.allow_conditional_comments&&/^\[if/i.test(null!==(a=e.nodeValue)&&void 0!==a?a:"")&&(e.nodeValue=" "+e.nodeValue);var m=null!==(u=null===i||void 0===i?void 0:i.tagName)&&void 0!==u?u:e.nodeName.toLowerCase();if("html"!==o&&n.isValid(o))F(i)&&(i.allowedTags[m]=!0);else if(1===e.nodeType&&"body"!==m){var g=In.fromDom(e),p=wn(g,Hw),h=yn(g,"data-mce-bogus");if(p||!D(h)){var v=n.getElementRule(m);if(!l||v){if(F(i)&&(i.allowedTags[m]=!0),l&&v&&!p){if(ce(null!==(c=v.attributesForced)&&void 0!==c?c:[],(function(e){vn(g,e.name,"{$uid}"===e.value?"mce_".concat($w++):e.value)})),ce(null!==(s=v.attributesDefault)&&void 0!==s?s:[],(function(e){wn(g,e.name)||vn(g,e.name,"{$uid}"===e.value?"mce_".concat($w++):e.value)})),v.attributesRequired&&!ae(v.attributesRequired,(function(e){return wn(g,e)})))return void $r(g);if(v.removeEmptyAttrs&&function hasNone(e){var t=e.dom.attributes;return void 0===t||null===t||0===t.length}(g))return void $r(g);v.outputName&&v.outputName!==m&&Wu(g,v.outputName)}}else $e(d,m)?Hr(g):$r(g)}else"all"===h?Hr(g):$r(g)}},Vw=function shouldKeepAttribute(e,t,n,o,i,a){return"html"!==n&&!Fi(o)||!(i in Fw&&Pw(e,a,o))&&(!e.validate||t.isValid(o,i)||it(i,"data-")||it(i,"aria-"))},Uw=function isRequiredAttributeOfInternalElement(e,t){return e.hasAttribute(Hw)&&("id"===t||"class"===t||"style"===t)},Zw=function isBooleanAttribute(e,t){return e in t.getBoolAttrs()},Ww=function filterAttributes(e,t,n,o){for(var i=e.attributes,a=i.length-1;a>=0;a--){var u=i[a],c=u.name,s=u.value;Vw(t,n,o,e.tagName.toLowerCase(),c,s)||Uw(e,c)?Zw(c,n)&&e.setAttribute(c,c):e.removeAttribute(c)}},jw=function setupPurify(e,t,n){var o=Dw();return o.addHook("uponSanitizeElement",(function(o,i){zw(o,e,t,n.track(o),i)})),o.addHook("uponSanitizeAttribute",(function(o,i){!function processAttr(e,t,n,o,i){var a=e.tagName.toLowerCase(),u=i.attrName,c=i.attrValue;i.keepAttr=Vw(t,n,o,a,u,c),i.keepAttr?(i.allowedAttributes[u]=!0,Zw(u,n)&&(i.attrValue=u),t.allow_svg_data_urls&&it(c,"data:image/svg+xml")&&(i.forceKeepAttr=!0)):Uw(e,u)&&(i.forceKeepAttr=!0)}(o,e,t,n.current(),i)})),o},Gw=function sanitizeNamespaceElement(e){var t=["type","href","role","arcrole","title","show","actuate","label","from","to"].map((function(e){return"xlink:".concat(e)})),n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:t};return Dw().sanitize(e,n),e.innerHTML},qw=function getSanitizer(e,t){var n=function createNamespaceTracker(){var e=[],t=function peek(){return e[e.length-1]};return{track:function track(n){Hi(n)&&e.push(n);var o=t();return o&&!o.contains(n)&&(e.pop(),o=t()),$i(o)},current:function current(){return $i(t())},reset:function reset(){e=[]}}}();if(e.sanitize){var o=jw(e,t,n);return{sanitizeHtmlElement:function sanitizeHtmlElement(t,i){o.sanitize(t,function getPurifyConfig(e,t){var n=l({},{IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]});return n.PARSER_MEDIA_TYPE=t,e.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:e.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n}(e,i)),o.removed=[],n.reset()},sanitizeNamespaceElement:Gw}}return{sanitizeHtmlElement:function _sanitizeHtmlElement(o,i){for(var a,u=document.createNodeIterator(o,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);a=u.nextNode();){var c=n.track(a);zw(a,e,t,c),co(a)&&Ww(a,e,t,c)}n.reset()},sanitizeNamespaceElement:V}},Kw=Kt.makeMap,Yw=Kt.extend,Xw=function transferChildren(e,t,n,o){for(var i=e.name,a=(i in n&&"title"!==i&&"textarea"!==i&&"noscript"!==i),u=t.childNodes,c=0,s=u.length;c<s;c++){var l=u[c],d=new Jp(l.nodeName.toLowerCase(),l.nodeType);if(co(l)){for(var m=l.attributes,g=0,p=m.length;g<p;g++){var h=m[g];d.attr(h.name,h.value)}Fi(d.name)&&(o(l),d.value=l.innerHTML)}else Co(l)?(d.value=l.data,a&&(d.raw=!0)):(So(l)||wo(l)||xo(l))&&(d.value=l.data);Fi(d.name)||transferChildren(d,l,n,o),e.append(d)}},Jw=function whitespaceCleaner(e,t,n,o){var i=n.validate,a=t.getNonEmptyElements(),u=t.getWhitespaceElements(),c=Yw(Kw("script,style,head,html,body,title,meta,param"),t.getBlockElements()),s=Ia(t),l=/[ \t\r\n]+/g,d=/^[ \t\r\n]+/,m=/[ \t\r\n]+$/,g=function hasWhitespaceParent(e){for(var t=e.parent;F(t);){if(t.name in u)return!0;t=t.parent}return!1},p=function isBlock(n){return n.name in c||ta(t,n)||Fi(n.name)&&n.parent===e},h=function isAtEdgeOfBlock(t,n){var i=n?t.prev:t.next;return!F(i)&&!L(t.parent)&&(p(t.parent)&&(t.parent!==e||!0===o.isRootContent))};return[function preprocess(e){var t;if(3===e.type&&!g(e)){var n=null!==(t=e.value)&&void 0!==t?t:"";n=n.replace(l," "),(function isLineBreakNode(e,t){return F(e)&&(t(e)||"br"===e.name)}(e.prev,p)||h(e,!0))&&(n=n.replace(d,"")),0===n.length?e.remove():e.value=n}},function postprocess(e){var c;if(1===e.type){var l=t.getElementRule(e.name);if(i&&l){var d=Pb(t,a,u,e);l.paddInEmptyBlock&&d&&function isTextRootBlockEmpty(e){for(var n=e;F(n);){if(n.name in s)return Pb(t,a,u,n);n=n.parent}return!1}(e)?Bb(n,o,p,e):l.removeEmpty&&d?p(e)?e.remove():e.unwrap():l.paddEmpty&&(d||function isPaddedWithNbsp(e){var t;return Ib(e,"#text")&&(null===(t=null===e||void 0===e?void 0:e.firstChild)||void 0===t?void 0:t.value)===Lo}(e))&&Bb(n,o,p,e)}}else if(3===e.type&&!g(e)){var v=null!==(c=e.value)&&void 0!==c?c:"";(e.next&&p(e.next)||h(e,!1))&&(v=v.replace(m,"")),0===v.length?e.remove():e.value=v}}]},Qw=function DomParser(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:La(),n=kC(),o=kC(),i=l({validate:!0,root_name:"body",sanitize:!0},e),a=new DOMParser,u=qw(i,t),c=n.addFilter,s=n.getFilters,m=n.removeFilter,g=o.addFilter,p=o.getFilters,h=o.removeFilter,v=function isWrappableNode(e,n){var o=D(n.attr(Hw)),i=1===n.type&&!$e(e,n.name)&&!ta(t,n)&&!Fi(n.name);return 3===n.type||i&&!o},b={schema:t,addAttributeFilter:g,getAttributeFilters:p,removeAttributeFilter:h,addNodeFilter:c,getNodeFilters:s,removeNodeFilter:m,parse:function parse(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=i.validate,l=null!==(n=o.context)&&void 0!==n?n:i.root_name,m=function parseAndSanitizeWithContext(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"html",i="xhtml"===o?"application/xhtml+xml":"text/html",c=$e(t.getSpecialElements(),n.toLowerCase()),s=c?"<".concat(n,">").concat(e,"</").concat(n,">"):e,l="xhtml"===o?'<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'.concat(s,"</body></html>"):"<body>".concat(s,"</body>"),d=a.parseFromString(l,i).body;return u.sanitizeHtmlElement(d,i),c?d.firstChild:d}(e,l,o.format);qi(t,m);var g=new Jp(l,11);Xw(g,m,t.getSpecialElements(),u.sanitizeNamespaceElement),m.innerHTML="";var h=Jw(g,t,i,o),b=d(h,2),y=b[0],C=b[1],w=[],x=c?function(e){return function findInvalidChildren(e,n){$b(t,e)&&n.push(e)}(e,w)}:V,S={nodes:{},attributes:{}},k=function matchFinder(e){return Rb(s(),p(),e,S)};if(function walkTree(e,t,n){for(var o=[],i=function _loop3(n){var i=n;ce(t,(function(e){return e(i)})),L(i.parent)&&i!==e?n=u:o.push(i),a=n},a=e,u=a;a;u=a,a=a.walk())i(a);for(var c=function _loop4(){var e=o[s];ce(n,(function(t){return t(e)}))},s=o.length-1;s>=0;s--)c()}(g,[y,k],[C,x]),w.reverse(),c&&w.length>0)if(o.context){var T=le(w,(function(e){return e.parent===g})),E=T.pass,O=T.fail;Hb(O,t,g,k),o.invalid=E.length>0}else Hb(w,t,g,k);var A=function getRootBlockName(e,t){var n,o=null!==(n=t.forced_root_block)&&void 0!==n?n:e.forced_root_block;return!1===o?"":!0===o?"p":o}(i,o);return A&&("body"===g.name||o.isRootContent)&&function addRootBlocks(e,n){var o=Yw(Kw("script,style,head,html,body,title,meta,param"),t.getBlockElements()),a=/^[ \t\r\n]+/,u=/[ \t\r\n]+$/,c=e.firstChild,s=null,l=function trim(e){var t,n;e&&((c=e.firstChild)&&3===c.type&&(c.value=null===(t=c.value)||void 0===t?void 0:t.replace(a,"")),(c=e.lastChild)&&3===c.type&&(c.value=null===(n=c.value)||void 0===n?void 0:n.replace(u,"")))};if(t.isValidChild(e.name,n.toLowerCase())){for(;c;){var d=c.next;v(o,c)?(s||((s=new Jp(n,1)).attr(i.forced_root_block_attrs),e.insert(s,c)),s.append(c)):(l(s),s=null),c=d}l(s)}}(g,A),o.invalid||Nb(S,o),g}};return FC(b,i),function register$5(e,t,n){t.inline_styles&&EC(e,t,n)}(b,i,t),b},ex=function withSerializedContent(e,t,n){var o=function serializeContent(e){return ny(e)?bh({validate:!1}).serialize(e):e}(e),i=t(o);if(i.isDefaultPrevented())return i;if(ny(e)){if(i.content!==o){var a=Qw(l({validate:!1,forced_root_block:!1},n)).parse(i.content,{context:e.name});return l(l({},i),{},{content:a})}return l(l({},i),{},{content:e})}return i},tx=function preProcessGetContent(e,t){if(t.no_events)return Xc.value(t);var n=function fireBeforeGetContent(e,t){return e.dispatch("BeforeGetContent",t)}(e,t);return n.isDefaultPrevented()?Xc.error(Qm(e,l({content:""},n)).content):Xc.value(n)},nx=function postProcessGetContent(e,t,n){if(n.no_events)return t;var o=ex(t,(function(t){return Qm(e,l(l({},n),{},{content:t}))}),{sanitize:Jl(e),sandbox_iframes:af(e)});return o.content},rx=function preProcessSetContent(e,t){if(t.no_events)return Xc.value(t);var n=ex(t.content,(function(n){return function fireBeforeSetContent(e,t){return e.dispatch("BeforeSetContent",t)}(e,l(l({},t),{},{content:n}))}),{sanitize:Jl(e),sandbox_iframes:af(e)});return n.isDefaultPrevented()?(Jm(e,n),Xc.error(void 0)):Xc.value(n)},ox=function postProcessSetContent(e,t,n){n.no_events||Jm(e,l(l({},n),{},{content:t}))},ix=function tableModel(e,t,n){return{element:e,width:t,rows:n}},ax=function tableRow(e,t){return{element:e,cells:t}},ux=function cellPosition(e,t){return{x:e,y:t}},cx=function getSpan(e,t){return Cn(e,t).bind(mt).getOr(1)},sx=function cellExists(e,t,n){var o=e.rows;return!!(o[n]?o[n].cells:[])[t]},lx=function getWidth(e){return me(e,(function(e,t){return t.cells.length>e?t.cells.length:e}),0)},fx=function findElementPos(e,t){for(var n=e.rows,o=0;o<n.length;o++)for(var i=n[o].cells,a=0;a<i.length;a++)if(Hn(i[a],t))return ee.some(ux(a,o));return ee.none()},dx=function extractRows(e,t,n,o,i){for(var a=[],u=e.rows,c=n;c<=i;c++){var s=u[c].cells,l=t<o?s.slice(t,o+1):s.slice(o,t+1);a.push(ax(u[c].element,l))}return a},mx=function fromDom(e){var t=ix(Uu(e),0,[]);return ce(ro(e,"tr"),(function(e,n){ce(ro(e,"td,th"),(function(o,i){!function fillout(e,t,n,o,i){for(var a=cx(i,"rowspan"),u=cx(i,"colspan"),c=e.rows,s=n;s<n+a;s++){c[s]||(c[s]=ax(Zu(o),[]));for(var l=t;l<t+u;l++)c[s].cells[l]=s===n&&l===t?i:Uu(i)}}(t,function skipCellsX(e,t,n){for(;sx(e,t,n);)t++;return t}(t,i,n),n,e,o)}))})),ix(t.element,lx(t.rows),t.rows)},gx=function toDom(e){return function createDomTable(e,t){var n=Uu(e.element),o=In.fromTag("tbody");return Lr(o,t),Ir(n,o),n}(e,function modelRowsToDomRows(e){return ue(e.rows,(function(e){var t=ue(e.cells,(function(e){var t=Zu(e);return xn(t,"colspan"),xn(t,"rowspan"),t})),n=Uu(e.element);return Lr(n,t),n}))}(e))},px=function subsection(e,t,n){return fx(e,t).bind((function(t){return fx(e,n).map((function(n){return function subTable(e,t,n){var o=t.x,i=t.y,a=n.x,u=n.y,c=i<u?dx(e,o,i,a,u):dx(e,o,u,a,i);return ix(e.element,lx(c),c)}(e,t,n)}))}))},hx=function getFullySelectedListWrappers(e,t){return pe(e,(function(e){return"li"===un(e)&&qd(e,t)})).fold(W([]),(function(t){return function findParentListContainer(e){return pe(e,(function(e){return"ul"===un(e)||"ol"===un(e)}))}(e).map((function(e){var t=In.fromTag(un(e)),n=Pe(Dr(e),(function(e,t){return it(t,"list-style")}));return Er(t,n),[In.fromTag("li"),t]})).getOr([])}))},vx=function getWrapElements(e,t,n){var o=In.fromDom(t.commonAncestorContainer),i=$h(o,e),a=fe(i,(function(e){return n.isWrapper(un(e))})),u=hx(i,t),c=a.concat(u.length?u:function directListWrappers(e){return jo(e)?Zn(e).filter(Wo).fold(W([]),(function(t){return[e,t]})):Wo(e)?[e]:[]}(o));return ue(c,Uu)},bx=function emptyFragment(){return Sg([])},yx=function getFragmentFromRange(e,t,n){return function wrap(e,t){var n=me(t,(function(e,t){return Ir(t,e),t}),e);return t.length>0?Sg([n]):n}(In.fromDom(t.cloneContents()),vx(e,t,n))},Cx=function getTableFragment(e,t){return function getParentTable(e,t){return vr(t,"table",curry(Hn,e))}(e,t[0]).bind((function(e){var n=t[0],o=t[t.length-1],i=mx(e);return px(i,n,o).map((function(e){return Sg([gx(e)])}))})).getOrThunk(bx)},wx=function read$3(e,t,n){var o=Ud(t,e);return o.length>0?Cx(e,o):function getSelectionFragment(e,t,n){return t.length>0&&t[0].collapsed?bx():yx(e,t[0],n)}(e,t,n)},xx=function isCollapsibleWhitespace(e,t){return t>=0&&t<e.length&&Hd(e.charAt(t))},Sx=function getInnerText(e){return ti(e.innerText)},kx=function extractSelectedContent(e,t){if("text"===t.format)return function getTextContent(e){return ee.from(e.selection.getRng()).map((function(t){var n,o=ee.from(e.dom.getParent(t.commonAncestorContainer,e.dom.isBlock)),i=e.getBody(),a=function getContextNodeName(e){return e.map((function(e){return e.nodeName})).getOr("div").toLowerCase()}(o),u=In.fromDom(t.cloneContents());dh(u),mh(u);var c=e.dom.add(i,a,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},u.dom),s=Sx(c),l=ti(null!==(n=c.textContent)&&void 0!==n?n:"");if(e.dom.remove(c),xx(l,0)||xx(l,l.length-1)){var d=o.getOr(i),m=Sx(d),g=m.indexOf(s);return-1===g?s:(xx(m,g-1)?" ":"")+s+(xx(m,g+s.length)?" ":"")}return s})).getOr("")}(e);var n=function getSerializedContent(e,t){var n=e.selection.getRng(),o=e.dom.create("body"),i=e.selection.getSel(),a=zp(e,zd(i)),u=t.contextual?wx(In.fromDom(e.getBody()),a,e.schema).dom:n.cloneContents();return u&&o.appendChild(u),e.selection.serializer.serialize(o,t)}(e,t);return"tree"===t.format?n:e.selection.isCollapsed()?"":n},Tx=function getSelectedContentInternal(e,t){var n=function setupArgs$3(e,t){return l(l({},e),{},{format:t,get:!0,selection:!0,getInner:!0})}(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t);return tx(e,n).fold(j,(function(t){var n=kx(e,t);return nx(e,n,t)}))},Ex=function getOuterHtml(e){return co(e)?e.outerHTML:Co(e)?Ta.encodeRaw(e.data,!1):So(e)?"\x3c!--"+e.data+"--\x3e":""},Ox=function insertAt(e,t,n){var o=function createFragment(e){var t,n=document.createElement("div"),o=document.createDocumentFragment();for(e&&(n.innerHTML=e);t=n.firstChild;)o.appendChild(t);return o}(t);if(e.hasChildNodes()&&n<e.childNodes.length){var i=e.childNodes[n];e.insertBefore(o,i)}else e.appendChild(o)},Ax=function write(e,t){return function applyDiff(e,t){var n=0;ce(e,(function(e){0===e[0]?n++:1===e[0]?(Ox(t,e[1],n),n++):2===e[0]&&function removeAt(e,t){if(e.hasChildNodes()&&t<e.childNodes.length){var n=e.childNodes[t];e.removeChild(n)}}(t,n)}))}(function diff(e,t){var n=e.length+t.length+2,o=new Array(n),i=new Array(n),a=function buildSnake(n,o,i,a){for(var u=n;u-o<a&&u<i&&e[u]===t[u-o];)++u;return function snake(e,t,n){return{start:e,end:t,diag:n}}(n,u,o)},u=function getMiddleSnake(n,u,c,s){var l=u-n,d=s-c;if(0===l||0===d)return null;var m,g,p,h,v,b=l-d,y=d+l,C=(y%2===0?y:y+1)/2;for(o[1+C]=n,i[1+C]=u+1,m=0;m<=C;++m){for(g=-m;g<=m;g+=2){for(p=g+C,g===-m||g!==m&&o[p-1]<o[p+1]?o[p]=o[p+1]:o[p]=o[p-1]+1,v=(h=o[p])-n+c-g;h<u&&v<s&&e[h]===t[v];)o[p]=++h,++v;if(b%2!==0&&b-m<=g&&g<=b+m&&i[p-b]<=o[p])return a(i[p-b],g+n-c,u,s)}for(g=b-m;g<=b+m;g+=2){for(p=g+C-b,g===b-m||g!==b+m&&i[p+1]<=i[p-1]?i[p]=i[p+1]-1:i[p]=i[p-1],v=(h=i[p]-1)-n+c-g;h>=n&&v>=c&&e[h]===t[v];)i[p]=h--,v--;if(b%2===0&&-m<=g&&g<=m&&i[p]<=o[p+b])return a(i[p],g+n-c,u,s)}}return null},c=[];return function buildScript(n,o,i,a,c){var s=u(n,o,i,a);if(null===s||s.start===o&&s.diag===o-a||s.end===n&&s.diag===n-i)for(var l=n,d=i;l<o||d<a;)l<o&&d<a&&e[l]===t[d]?(c.push([0,e[l]]),++l,++d):o-n>a-i?(c.push([2,e[l]]),++l):(c.push([1,t[d]]),++d);else{buildScript(n,s.start,i,s.start-s.diag,c);for(var m=s.start;m<s.end;++m)c.push([0,e[m]]);buildScript(s.end,o,s.end-s.diag,a,c)}}(0,e.length,0,t.length,c),c}(ue(Oe(t.childNodes),Ex),e),t),t},_x=Xe((function(){return document.implementation.createHTMLDocument("undo")})),Dx=function createFromEditor(e){var t=e.serializer.getTempAttrs(),n=fh(e.getBody(),t);return function hasIframes(e){return null!==e.querySelector("iframe")}(n)?function createFragmentedLevel(e){return{type:"fragmented",fragments:e,content:"",bookmark:null,beforeBookmark:null}}(function read$2(e,t){return fe(ue(Oe(e.childNodes),t?U(ti,Ex):Ex),(function(e){return e.length>0}))}(n,!0)):function createCompleteLevel(e){return{type:"complete",fragments:null,content:e,bookmark:null,beforeBookmark:null}}(ti(n.innerHTML))},Rx=function applyToEditor(e,t,n){var o=n?t.beforeBookmark:t.bookmark;"fragmented"===t.type?Ax(t.fragments,e.getBody()):e.setContent(t.content,{format:"raw",no_selection:!F(o)||!Ed(o)||!o.isFakeCaret}),o&&(e.selection.moveToBookmark(o),e.selection.scrollIntoView())},Nx=function getLevelContent(e){return"fragmented"===e.type?e.fragments.join(""):e.content},Mx=function getCleanLevelContent(e){var t=In.fromTag("body",_x());return Ur(t,Nx(e)),ce(ro(t,"*[data-mce-bogus]"),$r),Vr(t)},Bx=function isEq$1(e,t){return!(!e||!t)&&(!!function hasEqualContent(e,t){return Nx(e)===Nx(t)}(e,t)||function hasEqualCleanedContent(e,t){return Mx(e)===Mx(t)}(e,t))},Ix=function isUnlocked(e){return 0===e.get()},Px=function setTyping(e,t,n){Ix(n)&&(e.typing=t)},Lx=function endTyping(e,t){e.typing&&(Px(e,!1,t),e.add())},Fx=function makePlainAdaptor(e){return{init:{bindEvents:V},undoManager:{beforeChange:function beforeChange(t,n){return function beforeChange$1(e,t,n){Ix(t)&&n.set(qc(e.selection))}(e,t,n)},add:function add(t,n,o,i,a,u){return function addUndoLevel$1(e,t,n,o,i,a,u){var c=Dx(e),s=Kt.extend(a||{},c);if(!Ix(o)||e.removed)return null;var l=t.data[n.get()];if(e.dispatch("BeforeAddUndo",{level:s,lastLevel:l,originalEvent:u}).isDefaultPrevented())return null;if(l&&Bx(l,s))return null;t.data[n.get()]&&i.get().each((function(e){t.data[n.get()].beforeBookmark=e}));var d=pl(e);if(d&&t.data.length>d){for(var m=0;m<t.data.length-1;m++)t.data[m]=t.data[m+1];t.data.length--,n.set(t.data.length)}s.bookmark=qc(e.selection),n.get()<t.data.length-1&&(t.data.length=n.get()+1),t.data.push(s),n.set(t.data.length-1);var g={level:s,lastLevel:l,originalEvent:u};return n.get()>0?(e.setDirty(!0),e.dispatch("AddUndo",g),e.dispatch("change",g)):e.dispatch("AddUndo",g),s}(e,t,n,o,i,a,u)},undo:function undo(t,n,o){return function undo$1(e,t,n,o){var i;return t.typing&&(t.add(),t.typing=!1,Px(t,!1,n)),o.get()>0&&(o.set(o.get()-1),i=t.data[o.get()],Rx(e,i,!0),e.setDirty(!0),e.dispatch("Undo",{level:i})),i}(e,t,n,o)},redo:function redo(t,n){return function redo$1(e,t,n){var o;return t.get()<n.length-1&&(t.set(t.get()+1),o=n[t.get()],Rx(e,o,!1),e.setDirty(!0),e.dispatch("Redo",{level:o})),o}(e,t,n)},clear:function clear(t,n){return function clear$1(e,t,n){t.data=[],n.set(0),t.typing=!1,e.dispatch("ClearUndos")}(e,t,n)},reset:function reset(e){return function reset$1(e){e.clear(),e.add()}(e)},hasUndo:function hasUndo(t,n){return function hasUndo$1(e,t,n){return n.get()>0||t.typing&&t.data[0]&&!Bx(Dx(e),t.data[0])}(e,t,n)},hasRedo:function hasRedo(e,t){return function hasRedo$1(e,t){return t.get()<e.data.length-1&&!e.typing}(e,t)},transact:function transact(e,t,n){return function transact$1(e,t,n){return Lx(e,t),e.beforeChange(),e.ignore(n),e.add()}(e,t,n)},ignore:function ignore(e,t){return function ignore$1(e,t){try{e.set(e.get()+1),t()}finally{e.set(e.get()-1)}}(e,t)},extra:function extra(t,n,o,i){return function extra$1(e,t,n,o,i){if(t.transact(o)){var a=t.data[n.get()].bookmark,u=t.data[n.get()-1];Rx(e,u,!0),t.transact(i)&&(t.data[n.get()-1].beforeBookmark=a)}}(e,t,n,o,i)}},formatter:{match:function match(t,n,o,i){return my(e,t,n,o,i)},matchAll:function matchAll(t,n){return function matchAll(e,t,n){var o=[],i={},a=e.selection.getStart();return e.dom.getParent(a,(function(a){for(var u=0;u<t.length;u++){var c=t[u];!i[c]&&dy(e,a,c,n)&&(i[c]=!0,o.push(c))}}),e.dom.getRoot()),o}(e,t,n)},matchNode:function matchNode(t,n,o,i){return dy(e,t,n,o,i)},canApply:function canApply(t){return function canApply(e,t){var n=e.formatter.get(t),o=e.dom;if(n&&e.selection.isEditable())for(var i=e.selection.getStart(),a=mm(o,i),u=n.length-1;u>=0;u--){var c=n[u];if(!vm(c))return!0;for(var s=a.length-1;s>=0;s--)if(o.is(a[s],c.selector))return!0}return!1}(e,t)},closest:function closest(t){return gy(e,t)},apply:function apply(t,n,o){return hC(e,t,n,o)},remove:function remove(t,n,o,i){return sC(e,t,n,o,i)},toggle:function toggle(t,n,o){return function toggle(e,t,n,o){var i=e.formatter.get(t);i&&(!my(e,t,n,o)||"toggle"in i[0]&&!i[0].toggle?hC(e,t,n,o):sC(e,t,n,o))}(e,t,n,o)},formatChanged:function formatChanged(t,n,o,i,a){return xC(e,t,n,o,i,a)}},editor:{getContent:function getContent(t){return function getContentInternal(e,t){return ee.from(e.getBody()).fold(W("tree"===t.format?new Jp("body",11):""),(function(n){return ph(e,t,n)}))}(e,t)},setContent:function setContent(t,n){return oy(e,t,n)},insertContent:function insertContent(t,n){return ty(e,t,n)},addVisual:function addVisual(t){return function addVisualInternal(e,t){var n=e.dom,o=F(t)?t:e.getBody();ce(n.select("table,a",o),(function(t){switch(t.nodeName){case"TABLE":var o=kl(e),i=n.getAttrib(t,"border");i&&"0"!==i||!e.hasVisual?n.removeClass(t,o):n.addClass(t,o);break;case"A":if(!n.getAttrib(t,"href")){var a=n.getAttrib(t,"name")||t.id,u=Tl(e);a&&e.hasVisual?n.addClass(t,u):n.removeClass(t,u)}}})),e.dispatch("VisualAid",{element:t,hasVisual:e.hasVisual})}(e,t)}},selection:{getContent:function getContent(t,n){return Tx(e,t,n)}},autocompleter:{addDecoration:function addDecoration(t){return jp(e,t)},removeDecoration:function removeDecoration(){return function remove$2(e,t){return Gp(t).each((function(t){var n=e.selection.getBookmark();$r(t),e.selection.moveToBookmark(n)}))}(e,In.fromDom(e.getBody()))}},raw:{getModel:function getModel(){return ee.none()}}}},Hx=function isRtc(e){return $e(e.plugins,"rtc")},$x=function setup$t(e){var t=e;return function getRtcSetup(e){return He(e.plugins,"rtc").bind((function(e){return ee.from(e.setup)}))}(e).fold((function(){return t.rtcInstance=Fx(e),ee.none()}),(function(e){return t.rtcInstance=function makeNoopAdaptor(){var e=W(null),t=W("");return{init:{bindEvents:V},undoManager:{beforeChange:V,add:e,undo:e,redo:e,clear:V,reset:V,hasUndo:J,hasRedo:J,transact:e,ignore:V,extra:V},formatter:{match:J,matchAll:W([]),matchNode:W(void 0),canApply:J,closest:t,apply:V,remove:V,toggle:V,formatChanged:W({unbind:V})},editor:{getContent:t,setContent:W({content:"",html:""}),insertContent:W(""),addVisual:V},selection:{getContent:t},autocompleter:{addDecoration:V,removeDecoration:V},raw:{getModel:W(ee.none())}}}(),ee.some((function(){return e().then((function(e){return t.rtcInstance=function makeRtcAdaptor(e){var t=function defaultVars(e){return R(e)?e:{}},n=e.init,o=e.undoManager,i=e.formatter,a=e.editor,u=e.selection,c=e.autocompleter,s=e.raw;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:o.beforeChange,add:o.add,undo:o.undo,redo:o.redo,clear:o.clear,reset:o.reset,hasUndo:o.hasUndo,hasRedo:o.hasRedo,transact:function transact(e,t,n){return o.transact(n)},ignore:function ignore(e,t){return o.ignore(t)},extra:function extra(e,t,n,i){return o.extra(n,i)}},formatter:{match:function match(e,n,o,a){return i.match(e,t(n),a)},matchAll:i.matchAll,matchNode:i.matchNode,canApply:function canApply(e){return i.canApply(e)},closest:function closest(e){return i.closest(e)},apply:function apply(e,n,o){return i.apply(e,t(n))},remove:function remove(e,n,o,a){return i.remove(e,t(n))},toggle:function toggle(e,n,o){return i.toggle(e,t(n))},formatChanged:function formatChanged(e,t,n,o,a){return i.formatChanged(t,n,o,a)}},editor:{getContent:function getContent(e){return a.getContent(e)},setContent:function setContent(e,t){return{content:a.setContent(e,t),html:""}},insertContent:function insertContent(e,t){return a.insertContent(e),""},addVisual:a.addVisual},selection:{getContent:function getContent(e,t){return u.getContent(t)}},autocompleter:{addDecoration:c.addDecoration,removeDecoration:c.removeDecoration},raw:{getModel:function getModel(){return ee.some(s.getRawModel())}}}}(e),e.rtc.isRemote}))}))}))},zx=function getRtcInstanceWithFallback(e){return e.rtcInstance?e.rtcInstance:Fx(e)},Vx=function getRtcInstanceWithError(e){var t=e.rtcInstance;if(t)return t;throw new Error("Failed to get RTC instance not yet initialized.")},Ux=function bindEvents(e){return Vx(e).init.bindEvents()},Zx=function getContent$1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return function getSelectedContent(e,t,n){return Vx(e).selection.getContent(t,n)}(e,t.format?t.format:"html",t)},Wx=function removeEmpty(e){return 0===e.dom.length?(Hr(e),ee.none()):ee.some(e)},jx=function mergeAndNormalizeText(e,t,n,o,i){e.bind((function(e){return(o?Cv:yv)(e.dom,o?e.dom.length:0,i),t.filter(dn).map((function(t){return function merge$1(e,t,n,o,i){var a=e.dom,u=t.dom,c=o?a.length:u.length;o?(wv(a,u,i,!1,!o),n.setStart(u,c)):(wv(u,a,i,!1,!o),n.setEnd(u,c))}(e,t,n,o,i)}))})).orThunk((function(){var e=function walkPastBookmark(e,t){return e.filter((function(e){return Gm.isBookmarkNode(e.dom)})).bind(t?qn:Gn)}(t,o).or(t).filter(dn);return e.map((function(e){return function normalizeTextIfRequired(e,t,n){Zn(e).each((function(o){var i=e.dom;t&&sv(o,Tc(i,0),n)?yv(i,0,n):!t&&lv(o,Tc(i,i.length),n)&&Cv(i,i.length,n)}))}(e,o,i)}))}))},Gx=function setContent$1(e,t){var n=function setupArgs$2(e,t){return l(l({format:"html"},e),{},{set:!0,selection:!0,content:t})}(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t);rx(e,n).each((function(t){var n=function cleanContent(e,t){if("raw"!==t.format){var n=e.selection.getRng(),o=e.dom.getParent(n.commonAncestorContainer,e.dom.isBlock),i=o?{context:o.nodeName.toLowerCase()}:{},a=e.parser.parse(t.content,l(l({forced_root_block:!1},i),t));return bh({validate:!1},e.schema).serialize(a)}return t.content}(e,t),o=e.selection.getRng();!function rngSetContent(e,t,n){var o=ee.from(t.firstChild).map(In.fromDom),i=ee.from(t.lastChild).map(In.fromDom);e.deleteContents(),e.insertNode(t);var a=o.bind(Gn).filter(dn).bind(Wx),u=i.bind(qn).filter(dn).bind(Wx);jx(a,o,e,!0,n),jx(u,i,e,!1,n),e.collapse(!1)}(o,o.createContextualFragment(n),e.schema),e.selection.setRng(o),ap(e,o),ox(e,n,t)}))},qx=function deleteFromCallbackMap(e,t,n){if($e(e,t)){var o=fe(e[t],(function(e){return e!==n}));0===o.length?delete e[t]:e[t]=o}},Kx=function SelectorChanged(e,t){var n,o,i=function findMatchingNode(t,n){return pe(n,(function(n){return e.is(n,t)}))},a=function getParents(t){return e.getParents(t,void 0,e.getRoot())};return{selectorChangedWithUnbind:function selectorChangedWithUnbind(e,u){return n||function setup(){n={},o={},t.on("NodeChange",(function(e){var t=e.element,u=a(t),c={};Re(n,(function(e,t){i(t,u).each((function(n){o[t]||(ce(e,(function(e){e(!0,{node:n,selector:t,parents:u})})),o[t]=e),c[t]=e}))})),Re(o,(function(e,n){c[n]||(delete o[n],ce(e,(function(e){e(!1,{node:t,selector:n,parents:u})})))}))}))}(),n[e]||(n[e]=[]),n[e].push(u),i(e,a(t.selection.getStart())).each((function(){o[e]=n[e]})),{unbind:function unbind(){qx(n,e,u),qx(o,e,u)}}}}},Yx=function isAttachedToDom(e){return!(!e||!e.ownerDocument)&&$n(In.fromDom(e.ownerDocument),In.fromDom(e))},Xx=function EditorSelection(e,t,n,o){var i,a,u=Kx(e,o).selectorChangedWithUnbind,c=function setContent(e,t){return Gx(o,e,t)},s=function collapse(e){var t=d();t.collapse(!!e),m(t)},l=function getSel(){return t.getSelection?t.getSelection():t.document.selection},d=function getRng$1(){var n,u=function tryCompareBoundaryPoints(e,t,n){try{return t.compareBoundaryPoints(e,n)}catch(o){return-1}},c=t.document;if(F(o.bookmark)&&!Np(o)){var s=bp(o);if(s.isSome())return s.map((function(e){return zp(o,[e])[0]})).getOr(c.createRange())}try{var d=l();d&&!uo(d.anchorNode)&&(n=d.rangeCount>0?d.getRangeAt(0):c.createRange(),n=zp(o,[n])[0])}catch(g){}if(n||(n=c.createRange()),ko(n.startContainer)&&n.collapsed){var m=e.getRoot();n.setStart(m,0),n.setEnd(m,0)}return i&&a&&(0===u(n.START_TO_START,n,i)&&0===u(n.END_TO_END,n,i)?n=a:(i=null,a=null)),n},m=function setRng(e,t){if(function isValidRange(e){return!!e&&Yx(e.startContainer)&&Yx(e.endContainer)}(e)){var n=l();if(e=o.dispatch("SetSelectionRange",{range:e,forward:t}).range,n){a=e;try{n.removeAllRanges(),n.addRange(e)}catch(c){}!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),i=n.rangeCount>0?n.getRangeAt(0):null}if(!e.collapsed&&e.startContainer===e.endContainer&&(null===n||void 0===n?void 0:n.setBaseAndExtent)&&e.endOffset-e.startOffset<2&&e.startContainer.hasChildNodes()){var u=e.startContainer.childNodes[e.startOffset];u&&"IMG"===u.nodeName&&(n.setBaseAndExtent(e.startContainer,e.startOffset,e.endContainer,e.endOffset),n.anchorNode===e.startContainer&&n.focusNode===e.endContainer||n.setBaseAndExtent(u,0,u,1))}o.dispatch("AfterSetSelectionRange",{range:e,forward:t})}},g=function isForward(){var t=l(),n=null===t||void 0===t?void 0:t.anchorNode,o=null===t||void 0===t?void 0:t.focusNode;if(!t||!n||!o||uo(n)||uo(o))return!0;var i=e.createRng(),a=e.createRng();try{i.setStart(n,t.anchorOffset),i.collapse(!0),a.setStart(o,t.focusOffset),a.collapse(!0)}catch(u){return!0}return i.compareBoundaryPoints(i.START_TO_START,a)<=0},p={dom:e,win:t,serializer:n,editor:o,expand:function expand(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{type:"word"};return m(Lg(e).expand(d(),t))},collapse:s,setCursorLocation:function setCursorLocation(t,n){var i=e.createRng();F(t)&&F(n)?(i.setStart(t,n),i.setEnd(t,n),m(i),s(!1)):(Kd(e,i,o.getBody(),!0),m(i))},getContent:function getContent(e){return Zx(o,e)},setContent:c,getBookmark:function getBookmark(e,t){return h.getBookmark(e,t)},moveToBookmark:function moveToBookmark(e){return h.moveToBookmark(e)},select:function select$1(t,n){return function select(e,t,n){return ee.from(t).bind((function(t){return ee.from(t.parentNode).map((function(o){var i=e.nodeIndex(t),a=e.createRng();return a.setStart(o,i),a.setEnd(o,i+1),n&&(Kd(e,a,t,!0),Kd(e,a,t,!1)),a}))}))}(e,t,n).each(m),t},isCollapsed:function isCollapsed(){var e=d(),t=l();return!(!e||e.item)&&(e.compareEndPoints?0===e.compareEndPoints("StartToEnd",e):!t||e.collapsed)},isEditable:function isEditable(){var t=d(),n=o.getBody().querySelectorAll('[data-mce-selected="1"]');return n.length>0?ye(n,(function(t){return e.isEditable(t.parentElement)})):Pp(e,t)},isForward:g,setNode:function setNode(t){return c(e.getOuterHTML(t)),t},getNode:function getNode$1(){return function getNode(e,t){if(!t)return e;var n=t.startContainer,o=t.endContainer,i=t.startOffset,a=t.endOffset,u=t.commonAncestorContainer;t.collapsed||(n===o&&a-i<2&&n.hasChildNodes()&&(u=n.childNodes[i]),Co(n)&&Co(o)&&(n=n.length===i?$p(n.nextSibling,!0):n.parentNode,o=0===a?$p(o.previousSibling,!1):o.parentNode,n&&n===o&&(u=n)));var c=Co(u)?u.parentNode:u;return so(c)?c:e}(o.getBody(),d())},getSel:l,setRng:m,getRng:d,getStart:function getStart$1(e){return Fp(o.getBody(),d(),e)},getEnd:function getEnd(e){return Hp(o.getBody(),d(),e)},getSelectedBlocks:function getSelectedBlocks$1(t,n){return function getSelectedBlocks(e,t,n,o){var i=[],a=e.getRoot(),u=e.getParent(n||Fp(a,t,t.collapsed),e.isBlock),c=e.getParent(o||Hp(a,t,t.collapsed),e.isBlock);if(u&&u!==a&&i.push(u),u&&c&&u!==c)for(var s,l=new io(u,a);(s=l.next())&&s!==c;)e.isBlock(s)&&i.push(s);return c&&u!==c&&c!==a&&i.push(c),i}(e,d(),t,n)},normalize:function normalize(){var t=d();if(!function hasMultipleRanges(e){return zd(e).length>1}(l())&&Yd(o)){var n=Bg(e,t);return n.each((function(e){m(e,g())})),n.getOr(t)}return t},selectorChanged:function selectorChanged(e,t){return u(e,t),p},selectorChangedWithUnbind:u,getScrollContainer:function getScrollContainer(){for(var t,n=e.getRoot();n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){t=n;break}n=n.parentNode}return t},scrollIntoView:function scrollIntoView(e,t){F(e)?function scrollElementIntoView(e,t,n){(e.inline?rp:ip)(e,t,n)}(o,e,t):ap(o,d(),t)},placeCaretAt:function placeCaretAt(e,t){return m(Eg(e,t,o.getDoc()))},getBoundingClientRect:function getBoundingClientRect(){var e=d();return e.collapsed?Tc.fromRangeStart(e).getClientRects()[0]:e.getBoundingClientRect()},destroy:function destroy(){t=i=a=null,v.destroy()}},h=Gm(p),v=ag(p,o);return p.bookmarkManager=h,p.controlSelection=v,p},Jx=function process$1(e,t,n){return function shouldFireEvent(e,t){return F(e)&&e.hasEventListeners("PreProcess")&&!t.no_events}(e,n)?function preProcess$1(e,t,n){var o,i=e.dom,a=t.cloneNode(!0),u=document.implementation;if(u.createHTMLDocument){var c=u.createHTMLDocument("");Kt.each("BODY"===a.nodeName?a.childNodes:[a],(function(e){c.body.appendChild(c.importNode(e,!0))})),a="BODY"!==a.nodeName?c.body.firstChild:c.body,o=i.doc,i.doc=c}return function firePreProcess(e,t){e.dispatch("PreProcess",t)}(e,l(l({},n),{},{node:a})),o&&(i.doc=o),a}(e,t,n):t},Qx=function addTempAttr(e,t,n){-1===Kt.inArray(t,n)&&(e.addAttributeFilter(n,(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})),t.push(n))},eS=function toHtml(e,t,n,o,i){var a=function serializeNode(e,t,n){return bh(e,t).serialize(n)}(t,n,o);return function postProcess(e,t,n){if(!t.no_events&&e){var o=function firePostProcess(e,t){return e.dispatch("PostProcess",t)}(e,l(l({},t),{},{content:n}));return o.content}return n}(e,i,a)},tS=function DomSerializerImpl(e,t){var n=["data-mce-selected"],o=l({entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1},e),i=t&&t.dom?t.dom:gu.DOM,a=t&&t.schema?t.schema:La(o),u=Qw(o,a);!function register$3(e,t,n){e.addAttributeFilter("data-mce-tabindex",(function(e,t){for(var n=e.length;n--;){var o=e[n];o.attr("tabindex",o.attr("data-mce-tabindex")),o.attr(t,null)}})),e.addAttributeFilter("src,href,style",(function(e,o){for(var i="data-mce-"+o,a=t.url_converter,u=t.url_converter_scope,c=e.length;c--;){var s=e[c],l=s.attr(i);void 0!==l?(s.attr(o,l.length>0?l:null),s.attr(i,null)):(l=s.attr(o),"style"===o?l=n.serializeStyle(n.parseStyle(l),s.name):a&&(l=a.call(u,l,o,s.name)),s.attr(o,l.length>0?l:null))}})),e.addAttributeFilter("class",(function(e){for(var t=e.length;t--;){var n=e[t],o=n.attr("class");o&&(o=o.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",o.length>0?o:null))}})),e.addAttributeFilter("data-mce-type",(function(e,t,n){for(var o=e.length;o--;){var i=e[o];if("bookmark"===i.attr("data-mce-type")&&!n.cleanup){var a=ee.from(i.firstChild).exists((function(e){var t;return!ei(null!==(t=e.value)&&void 0!==t?t:"")}));a?i.unwrap():i.remove()}}})),e.addNodeFilter("script,style",(function(e,n){for(var o,i=function trim(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")},a=e.length;a--;){var u=e[a],c=u.firstChild,s=null!==(o=null===c||void 0===c?void 0:c.value)&&void 0!==o?o:"";if("script"===n){var l=u.attr("type");l&&u.attr("type","mce-no/type"===l?null:l.replace(/^mce\-/,"")),"xhtml"===t.element_format&&c&&s.length>0&&(c.value="// <![CDATA[\n"+i(s)+"\n// ]]>")}else"xhtml"===t.element_format&&c&&s.length>0&&(c.value="\x3c!--\n"+i(s)+"\n--\x3e")}})),e.addNodeFilter("#comment",(function(e){for(var o=e.length;o--;){var i=e[o],a=i.value;t.preserve_cdata&&0===(null===a||void 0===a?void 0:a.indexOf("[CDATA["))?(i.name="#cdata",i.type=4,i.value=n.decode(a.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null===a||void 0===a?void 0:a.indexOf("mce:protected "))&&(i.name="#text",i.type=3,i.raw=!0,i.value=unescape(a).substr(14))}})),e.addNodeFilter("xml:namespace,input",(function(e,t){for(var n=e.length;n--;){var o=e[n];7===o.type?o.remove():1===o.type&&("input"!==t||o.attr("type")||o.attr("type","text"))}})),e.addAttributeFilter("data-mce-type",(function(t){ce(t,(function(t){"format-caret"===t.attr("data-mce-type")&&(t.isEmpty(e.schema.getNonEmptyElements())?t.remove():t.unwrap())}))})),e.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",(function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)})),t.remove_trailing_brs&&OC(t,e,e.schema)}(u,o,i);return{schema:a,addNodeFilter:u.addNodeFilter,addAttributeFilter:u.addAttributeFilter,serialize:function serialize(e){var n=l({format:"html"},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),c=Jx(t,e,n),s=function getHtmlFromNode(e,t,n){var o=ti(n.getInner?t.innerHTML:e.getOuterHTML(t));return n.selection||Ko(In.fromDom(t))?o:Kt.trim(o)}(i,c,n),d=function parseHtml(e,t,n){var o=n.selection?l({forced_root_block:!1},n):n,i=e.parse(t,o);return function trimTrailingBr(e){var t=function isBr(e){return"br"===(null===e||void 0===e?void 0:e.name)},n=e.lastChild;if(t(n)){var o=n.prev;t(o)&&(n.remove(),o.remove())}}(i),i}(u,s,n);return"tree"===n.format?d:eS(t,o,a,d,n)},addRules:a.addValidElements,setRules:a.setValidElements,addTempAttr:curry(Qx,u,n),getTempAttrs:W(n),getNodeFilters:u.getNodeFilters,getAttributeFilters:u.getAttributeFilters,removeNodeFilter:u.removeNodeFilter,removeAttributeFilter:u.removeAttributeFilter}},nS=function DomSerializer(e,t){var n=tS(e,t);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},rS=function getContent(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=function setupArgs$1(e,t){return l(l({},e),{},{format:t,get:!0,getInner:!0})}(t,t.format?t.format:"html");return tx(e,n).fold(j,(function(t){var n=function getContent$2(e,t){return zx(e).editor.getContent(t)}(e,t);return nx(e,n,t)}))},oS=function setContent(e,t){var n=function setupArgs(e,t){return l(l({format:"html"},e),{},{set:!0,content:t})}(arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},t);return rx(e,n).map((function(t){var n=function setContent$2(e,t,n){return zx(e).editor.setContent(t,n)}(e,t.content,t);return ox(e,n.html,t),n.content})).getOr(t)},iS="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists".split(","),aS="template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),uS="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,textcolor".split(","),cS=[{name:"template",replacedWith:"Advanced Template"},{name:"rtc"}],sS=function getMatchingOptions(e,t){var n=fe(t,(function(t){return $e(e,t)}));return Se(n)},lS=function getRemovedOptions(e){var t=sS(e,iS),n=e.forced_root_block;return!1!==n&&""!==n||t.push("forced_root_block (false only)"),Se(t)},fS=function getDeprecatedOptions(e){return sS(e,aS)},dS=function getMatchingPlugins(e,t){var n=Kt.makeMap(e.plugins," "),o=fe(t,(function hasPlugin(e){return $e(n,e)}));return Se(o)},mS=function getRemovedPlugins(e){return dS(e,uS)},gS=function getDeprecatedPlugins(e){return dS(e,cS.map((function(e){return e.name})))},pS=function getPluginDescription(e){return pe(cS,(function(t){return t.name===e})).fold((function(){return e}),(function(t){return t.replacedWith?"".concat(e,", replaced by ").concat(t.replacedWith):e}))},hS=function logWarnings(e,t){!function logRemovedWarnings(e,t){var n=lS(e),o=mS(t),i=o.length>0,a=n.length>0,u="mobile"===t.theme;if(i||a||u){var c="\n- ",s=u?"\n\nThemes:".concat(c,"mobile"):"",l=i?"\n\nPlugins:".concat(c).concat(o.join(c)):"",d=a?"\n\nOptions:".concat(c).concat(n.join(c)):"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 6.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/6/migration-from-5x/ for more information."+s+l+d)}}(e,t),function logDeprecatedWarnings(e,t){var n=fS(e),o=gS(t),i=o.length>0,a=n.length>0;if(i||a){var u="\n- ",c=i?"\n\nPlugins:".concat(u).concat(o.map(pS).join(u)):"",s=a?"\n\nOptions:".concat(u).concat(n.join(u)):"";console.warn("The following deprecated features are currently enabled but will be removed soon."+c+s)}}(e,t)},vS=gu.DOM,bS=function safeDestroy(e){return ee.from(e).each((function(e){return e.destroy()}))},yS=function remove$1(e){if(!e.removed){var t=e._selectionOverrides,n=e.editorUpload,o=e.getBody(),i=e.getElement();o&&e.save({is_removing:!0}),e.removed=!0,e.unbindAllNativeEvents(),e.hasHiddenInput&&F(null===i||void 0===i?void 0:i.nextSibling)&&vS.remove(i.nextSibling),function fireRemove(e){e.dispatch("remove")}(e),e.editorManager.remove(e),!e.inline&&o&&function restoreOriginalStyles(e){vS.setStyle(e.id,"display",e.orgDisplay)}(e),function fireDetach(e){e.dispatch("detach")}(e),vS.remove(e.getContainer()),bS(t),bS(n),e.destroy()}},CS=function destroy(e,t){var n=e.selection,o=e.dom;e.destroyed||(t||e.removed?(t||(e.editorManager.off("beforeunload",e._beforeUnload),e.theme&&e.theme.destroy&&e.theme.destroy(),bS(n),bS(o)),function restoreForm(e){var t=e.formElement;t&&(t._mceOldSubmit&&(t.submit=t._mceOldSubmit,delete t._mceOldSubmit),vS.unbind(t,"submit reset",e.formEventDelegate))}(e),function clearDomReferences(e){var t=e;t.contentAreaContainer=t.formElement=t.container=t.editorContainer=null,t.bodyElement=t.contentDocument=t.contentWindow=null,t.iframeElement=t.targetElm=null;var n=e.selection;if(n){var o=n.dom;t.selection=n.win=n.dom=o.doc=null}}(e),e.destroyed=!0):e.remove())},wS=function CreateIconManager(){var e={};return{add:function add(t,n){e[t]=n},get:function get(t){return e[t]?e[t]:{icons:{}}},has:function has(t){return $e(e,t)}}}(),xS=xu.ModelManager,SS=function getProp(e,t){return t.dom[e]},kS=function getComputedSizeProp(e,t){return parseInt(Or(t,e),10)},TS=curry(SS,"clientWidth"),ES=curry(SS,"clientHeight"),OS=curry(kS,"margin-top"),AS=curry(kS,"margin-left"),_S=function isXYInContentArea(e,t,n){var o=In.fromDom(e.getBody()),i=e.inline?o:function documentElement(e){return In.fromDom(Vn(e).dom.documentElement)}(o),a=function transpose(e,t,n,o){var i=function getBoundingClientRect(e){return e.dom.getBoundingClientRect()}(t);return{x:n-(e?i.left+t.dom.clientLeft+AS(t):0),y:o-(e?i.top+t.dom.clientTop+OS(t):0)}}(e.inline,i,t,n);return function isInsideElementContentArea(e,t,n){var o=TS(e),i=ES(e);return t>=0&&n>=0&&t<=o&&n<=i}(i,a.x,a.y)},DS=function isEditorAttachedToDom(e){return function fromDomSafe(e){return ee.from(e).map(In.fromDom)}(e.inline?e.getBody():e.getContentAreaContainer()).map(fr).getOr(!1)},RS=function NotificationManager(e){var t=[],n=function getImplementation(){var t=e.theme;return t&&t.getNotificationManagerImpl?t.getNotificationManagerImpl():function NotificationManagerImpl(){var e=function unimplemented(){throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:e,close:e,getArgs:e}}()},o=function getTopNotification(){return ee.from(t[0])},i=function reposition(){ce(t,(function(e){e.reposition()}))},a=function closeNotification(e){he(t,(function(t){return t===e})).each((function(e){t.splice(e,1)}))},u=function open(u){var c=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e.removed||!DS(e)?{}:(c&&e.dispatch("BeforeOpenNotification",{notification:u}),pe(t,(function(e){return function isEqual(e,t){return e.type===t.type&&e.text===t.text&&!e.progressBar&&!e.timeout&&!t.progressBar&&!t.timeout}(n().getArgs(e),u)})).getOrThunk((function(){e.editorManager.setActive(e);var c=n().open(u,(function(){a(c),i(),Mp(e)&&o().fold((function(){return e.focus()}),(function(e){return up(In.fromDom(e.getEl()))}))}));return function addNotification(e){t.push(e)}(c),i(),e.dispatch("OpenNotification",{notification:l({},c)}),c})))},c=W(t);return function registerEvents(e){e.on("SkinLoaded",(function(){var t=Qs(e);t&&u({text:t,type:"warning",timeout:0},!1),i()})),e.on("show ResizeEditor ResizeWindow NodeChange",(function(){requestAnimationFrame(i)})),e.on("remove",(function(){ce(t.slice(),(function(e){n().close(e)}))}))}(e),{open:u,close:function close(){o().each((function(e){n().close(e),a(e),i()}))},getNotifications:c}},NS=xu.PluginManager,MS=xu.ThemeManager,BS=function WindowManager(e){var t=[],n=function getImplementation(){var t=e.theme;return t&&t.getWindowManagerImpl?t.getWindowManagerImpl():function WindowManagerImpl(){var e=function unimplemented(){throw new Error("Theme did not provide a WindowManager implementation.")};return{open:e,openUrl:e,alert:e,confirm:e,close:e}}()},o=function funcBind(e,t){return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t?t.apply(e,o):void 0}},i=function addDialog(n){t.push(n),function fireOpenEvent(t){e.dispatch("OpenWindow",{dialog:t})}(n)},a=function closeDialog(n){!function fireCloseEvent(t){e.dispatch("CloseWindow",{dialog:t})}(n),0===(t=fe(t,(function(e){return e!==n}))).length&&e.focus()},u=function storeSelectionAndOpenDialog(t){e.editorManager.setActive(e),vp(e),e.ui.show();var n=t();return i(n),n};return e.on("remove",(function(){ce(t,(function(e){n().close(e)}))})),{open:function open(e,t){return u((function(){return n().open(e,t,a)}))},openUrl:function openUrl(e){return u((function(){return n().openUrl(e,a)}))},alert:function alert(e,t,i){var a=n();a.alert(e,o(i||a,t))},confirm:function confirm(e,t,i){var a=n();a.confirm(e,o(i||a,t))},close:function close(){(function getTopDialog(){return ee.from(t[t.length-1])})().each((function(e){n().close(e),a(e)}))}}},IS=function displayNotification(e,t){e.notificationManager.open({type:"error",text:t})},PS=function displayError(e,t){e._skinLoaded?IS(e,t):e.on("SkinLoaded",(function(){IS(e,t)}))},LS=function logError(e,t,n){Km(e,t,{message:n}),console.error(n)},FS=function createLoadError(e,t,n){return n?"Failed to load ".concat(e,": ").concat(n," from url ").concat(t):"Failed to load ".concat(e," url: ").concat(t)},HS=function initError(e){var t=window.console;if(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];t.error?t.error.apply(t,[e].concat(o)):t.log.apply(t,[e].concat(o))}},$S=function toContentSkinResourceName(e){return"content/"+e+"/content.css"},zS=function transformToUrls(e,t){var n=e.editorManager.baseURL+"/skins/content",o=e.editorManager.suffix,i="content".concat(o,".css");return ue(t,(function(t){return function isBundledCssSkinName(e){return tinymce.Resource.has($S(e))}(t)?t:function isContentCssSkinName(e){return/^[a-z0-9\-]+$/i.test(e)}(t)&&!e.inline?"".concat(n,"/").concat(t,"/").concat(i):e.documentBaseURI.toAbsolute(t)}))},VS=function appendContentCssFromSettings(e){e.contentCSS=e.contentCSS.concat(function getContentCssUrls(e){return zS(e,Zs(e))}(e),function getFontCssUrls(e){return zS(e,js(e))}(e))},US=function ImageScanner(e,t){var n={};return{findAll:function findAll(o){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q,a=fe(function getAllImages(e){return e?Oe(e.getElementsByTagName("img")):[]}(o),(function(t){var n=t.src;return!t.hasAttribute("data-mce-bogus")&&(!t.hasAttribute("data-mce-placeholder")&&(!(!n||n===Wt.transparentSrc)&&(it(n,"blob:")?!e.isUploaded(n)&&i(t):!!it(n,"data:")&&i(t))))})),u=ue(a,(function(e){var o=e.src;if($e(n,o))return n[o].then((function(t){return D(t)?t:{image:e,blobInfo:t.blobInfo}}));var i=function imageToBlobInfo(e,t){var n=function invalidDataUri(){return Promise.reject("Invalid data URI")};if(it(t,"blob:")){var o=e.getByUri(t);return F(o)?Promise.resolve(o):DC(t).then((function(t){return RC(t).then((function(o){return MC(o,!1,(function(n){return ee.some(BC(e,t,n))})).getOrThunk(n)}))}))}return it(t,"data:")?IC(e,t).fold(n,(function(e){return Promise.resolve(e)})):Promise.reject("Unknown image data format")}(t,o).then((function(t){return delete n[o],{image:e,blobInfo:t}})).catch((function(e){return delete n[o],e}));return n[o]=i,i}));return Promise.all(u)}}},ZS=function UploadStatus(){var e={},t=function createStatus(e,t){return{status:e,resultUri:t}},n=function hasBlobUri(t){return t in e};return{hasBlobUri:n,getResultUri:function getResultUri(t){var n=e[t];return n?n.resultUri:null},isPending:function isPending(t){return!!n(t)&&1===e[t].status},isUploaded:function isUploaded(t){return!!n(t)&&2===e[t].status},markPending:function markPending(n){e[n]=t(1,null)},markUploaded:function markUploaded(n,o){e[n]=t(2,o)},removeFailed:function removeFailed(t){delete e[t]},destroy:function destroy(){e={}}}},WS=0,jS=function uuid(e){return e+WS+++function seed(){var e=function rnd(){return Math.round(4294967295*Math.random()).toString(36)};return"s"+(new Date).getTime().toString(36)+e()+e()+e()}()},GS=function Uploader(e,t){var n={},o=function defaultHandler(e,n){return new Promise((function(o,i){var a=new XMLHttpRequest;a.open("POST",t.url),a.withCredentials=t.credentials,a.upload.onprogress=function(e){n(e.loaded/e.total*100)},a.onerror=function(){i("Image upload failed due to a XHR Transport error. Code: "+a.status)},a.onload=function(){if(a.status<200||a.status>=300)i("HTTP Error: "+a.status);else{var e=JSON.parse(a.responseText);e&&D(e.location)?o(function pathJoin(e,t){return e?e.replace(/\/$/,"")+"/"+t.replace(/^\//,""):t}(t.basePath,e.location)):i("Invalid JSON: "+a.responseText)}};var u=new FormData;u.append("file",e.blob(),e.filename()),a.send(u)}))},i=H(t.handler)?t.handler:o,a=function handlerSuccess(e,t){return{url:t,blobInfo:e,status:!0}},u=function handlerFailure(e,t){return{url:"",blobInfo:e,status:!1,error:t}},c=function resolvePending(e,t){Kt.each(n[e],(function(e){e(t)})),delete n[e]},s=function uploadBlobInfo(t,n,o){return e.markPending(t.blobUri()),new Promise((function(i){var s;try{var l=function closeNotification(){s&&(s.close(),V)};n(t,(function progress(e){e<0||e>100||ee.from(s).orThunk((function(){return ee.from(o).map(Y)})).each((function(t){s=t,t.progressBar.value(e)}))})).then((function success(n){l(),e.markUploaded(t.blobUri(),n),c(t.blobUri(),a(t,n)),i(a(t,n))}),(function(n){!function failure(n){l(),e.removeFailed(t.blobUri()),c(t.blobUri(),u(t,n)),i(u(t,n))}(D(n)?{message:n}:n)}))}catch(d){i(u(t,d))}}))},l=function uploadBlobs(t,o){return t=Kt.grep(t,(function(t){return!e.isUploaded(t.blobUri())})),Promise.all(Kt.map(t,(function(t){return e.isPending(t.blobUri())?function pendingUploadBlobInfo(e){var t=e.blobUri();return new Promise((function(e){n[t]=n[t]||[],n[t].push(e)}))}(t):s(t,i,o)})))};return{upload:function upload(e,n){return!t.url&&function isDefaultHandler(e){return e===o}(i)?function noUpload(){return new Promise((function(e){e([])}))}():l(e,n)}}},qS=function openNotification(e){return function(){return e.notificationManager.open({text:e.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0})}},KS=function createUploader(e,t){return GS(t,{url:Bs(e),basePath:Is(e),credentials:Ps(e),handler:Ls(e)})},YS=function addPaddingToEmpty(e){return function(t){(function isEmptyForPadding(e,t){return e.dom.isEmpty(t.dom)&&F(e.schema.getTextBlockElements()[un(t)])})(e,t)&&Ir(t,In.fromHtml('<br data-mce-bogus="1" />'))}},XS=function EditorUpload(e){var t,n,o=function BlobCache(){var e=[],t=function mimeToExt(e){return{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[e.toLowerCase()]||"dat"},n=function toBlobInfo(e){if(!e.blob||!e.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");var n=e.id||jS("blobid"),o=e.name||n,i=e.blob;return{id:W(n),name:W(o),filename:W(e.filename||o+"."+t(i.type)),blob:W(i),base64:W(e.base64),blobUri:W(e.blobUri||URL.createObjectURL(i)),uri:W(e.uri)}},o=function findFirst(t){return pe(e,t).getOrUndefined()},i=function get(e){return o((function(t){return t.id()===e}))};return{create:function create(e,t,o,i,a){if(D(e))return n({id:e,name:i,filename:a,blob:t,base64:o});if(R(e))return n(e);throw new Error("Unknown input type")},add:function add(t){i(t.id())||e.push(t)},get:i,getByUri:function getByUri(e){return o((function(t){return t.blobUri()===e}))},getByData:function getByData(e,t){return o((function(n){return n.base64()===e&&n.blob().type===t}))},findFirst:o,removeByUri:function removeByUri(t){e=fe(e,(function(e){return e.blobUri()!==t||(URL.revokeObjectURL(e.blobUri()),!1)}))},destroy:function destroy(){ce(e,(function(e){URL.revokeObjectURL(e.blobUri())})),e=[]}}}(),i=ZS(),a=[],u=function aliveGuard(t){return function(n){return e.selection?t(n):[]}},c=function cacheInvalidator(e){return e+(-1===e.indexOf("?")?"?":"&")+(new Date).getTime()},s=function replaceString(e,t,n){var o=0;do{-1!==(o=e.indexOf(t,o))&&(e=e.substring(0,o)+n+e.substr(o+t.length),o+=n.length-t.length+1)}while(-1!==o);return e},l=function replaceImageUrl(e,t,n){var o='src="'.concat(n,'"').concat(n===Wt.transparentSrc?' data-mce-placeholder="1"':"");return e=s(e,'src="'.concat(t,'"'),o),e=s(e,'data-mce-src="'+t+'"','data-mce-src="'+n+'"')},d=function replaceUrlInUndoStack(t,n){ce(e.undoManager.data,(function(e){"fragmented"===e.type?e.fragments=ue(e.fragments,(function(e){return l(e,t,n)})):e.content=l(e.content,t,n)}))},m=function uploadImages(){return t||(t=KS(e,i)),h().then(u((function(n){var i=ue(n,(function(e){return e.blobInfo}));return t.upload(i,qS(e)).then(u((function(t){var i=[],a=!1,u=ue(t,(function(t,u){var s=n[u],l=s.blobInfo,m=s.image,g=!1;return t.status&&Rs(e)?(t.url&&!ot(m.src,t.url)&&(a=!0),o.removeByUri(m.src),Hx(e)||function replaceImageUriInView(t,n){var o=e.convertURL(n,"src");d(t.src,n),bn(In.fromDom(t),{src:Ds(e)?c(n):n,"data-mce-src":o})}(m,t.url)):t.error&&(t.error.remove&&(d(m.src,Wt.transparentSrc),i.push(m),g=!0),function uploadError(e,t){PS(e,wu.translate(["Failed to upload image: {0}",t]))}(e,t.error.message)),{element:m,status:t.status,uploadUri:t.url,blobInfo:l,removed:g}}));return i.length>0&&!Hx(e)?e.undoManager.transact((function(){ce(zr(i),(function(t){var n=Zn(t);Hr(t),n.each(YS(e)),o.removeByUri(t.dom.src)}))})):a&&e.undoManager.dispatchChange(),u})))})))},g=function uploadImagesAuto(){return _s(e)?m():Promise.resolve([])},p=function isValidDataUriImage(e){return ye(a,(function(t){return t(e)}))},h=function scanForImages(){return n||(n=US(i,o)),n.findAll(e.getBody(),p).then(u((function(t){var n=fe(t,(function(t){return D(t)?(PS(e,t),!1):"blob"!==t.uriType}));return Hx(e)||ce(n,(function(e){d(e.image.src,e.blobInfo.blobUri()),e.image.src=e.blobInfo.blobUri(),e.image.removeAttribute("data-mce-src")})),n})))},v=function replaceBlobUris(t){return t.replace(/src="(blob:[^"]+)"/g,(function(t,n){var a=i.getResultUri(n);if(a)return'src="'+a+'"';var u=o.getByUri(n);return u||(u=me(e.editorManager.get(),(function(e,t){return e||t.editorUpload&&t.editorUpload.blobCache.getByUri(n)}),void 0)),u?'src="data:'+u.blob().type+";base64,"+u.base64()+'"':t}))};return e.on("SetContent",(function(){_s(e)?g():h()})),e.on("RawSaveContent",(function(e){e.content=v(e.content)})),e.on("GetContent",(function(e){e.source_view||"raw"===e.format||"tree"===e.format||(e.content=v(e.content))})),e.on("PostRender",(function(){e.parser.addNodeFilter("img",(function(e){ce(e,(function(e){var t=e.attr("src");if(t&&!o.getByUri(t)){var n=i.getResultUri(t);n&&e.attr("src",n)}}))}))})),{blobCache:o,addFilter:function addFilter(e){a.push(e)},uploadImages:m,uploadImagesAuto:g,scanForImages:h,destroy:function destroy(){o.destroy(),i.destroy(),n=t=null}}},JS={remove_similar:!0,inherit:!1},QS=l({selector:"td,th"},JS),ek={tablecellbackgroundcolor:l({styles:{backgroundColor:"%value"}},QS),tablecellverticalalign:l({styles:{"vertical-align":"%value"}},QS),tablecellbordercolor:l({styles:{borderColor:"%value"}},QS),tablecellclass:l({classes:["%value"]},QS),tableclass:l({selector:"table",classes:["%value"]},JS),tablecellborderstyle:l({styles:{borderStyle:"%value"}},QS),tablecellborderwidth:l({styles:{borderWidth:"%value"}},QS)},tk=W(ek),nk=function FormatRegistry(e){var t={},n=function register(e,n){e&&(D(e)?(M(n)||(n=[n]),ce(n,(function(e){P(e.deep)&&(e.deep=!vm(e)),P(e.split)&&(e.split=!vm(e)||bm(e)),P(e.remove)&&vm(e)&&!bm(e)&&(e.remove="none"),vm(e)&&bm(e)&&(e.mixed=!0,e.block_expand=!0),D(e.classes)&&(e.classes=e.classes.split(/\s+/))})),t[e]=n):Re(e,(function(e,t){register(t,e)})))};return n(function get$1(e){var t=e.dom,n=e.schema.type,o={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:function onformat(e){t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:function onformat(e){t.setStyle(e,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:function(){var e={inline:"span",styles:{textDecoration:"line-through"},exact:!0},t={inline:"strike",remove:"all",preserve_attributes:["class","style"]},o={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==n?[o,e,t]:[e,o,t]}(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function onmatch(e,t,n){return co(e)&&e.hasAttribute("href")},onformat:function onformat(e,n,o){Kt.each(o,(function(n,o){t.setAttrib(e,o,n)}))}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":function dataMceLang(e){var t;return null!==(t=null===e||void 0===e?void 0:e.customValue)&&void 0!==t?t:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Kt.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),(function(e){o[e]={block:e,remove:"all"}})),o}(e)),n(tk()),n(il(e)),{get:function get$2(e){return F(e)?t[e]:t},has:function has(e){return $e(t,e)},register:n,unregister:function unregister(e){return e&&t[e]&&delete t[e],t}}},rk=Kt.each,ok=gu.DOM,ik=function isPreviewItem(e){return F(e)&&R(e)},ak=function parsedSelectorToHtml(e,t){var n=t&&t.schema||La({}),o=function createElement(e){var t=D(e)?{name:e,classes:[],attrs:{}}:e,n=ok.create(t.name);return function decorate(e,t){t.classes.length>0&&ok.addClass(e,t.classes.join(" ")),ok.setAttribs(e,t.attrs)}(n,t),n},i=ok.create("div");if(e.length>0){var a=e[0],u=o(a),c=ik(a)?a.siblings:void 0;i.appendChild(function wrapInHtml(e,t,i){var a,u=t[0],c=ik(u)?u.name:void 0,s=function getRequiredParent(e,t){var o=n.getElementRule(e.nodeName.toLowerCase()),i=null===o||void 0===o?void 0:o.parentsRequired;return!(!i||!i.length)&&(t&&ie(i,t)?t:i[0])}(e,c);if(s)c===s?(a=u,t=t.slice(1)):a=s;else if(u)a=u,t=t.slice(1);else if(!i)return e;var l=a?o(a):ok.create("div");l.appendChild(e),i&&Kt.each(i,(function(t){var n=o(t);l.insertBefore(n,e)}));var d=ik(a)?a.siblings:void 0;return wrapInHtml(l,t,d)}(u,e.slice(1),c))}return i},uk=function parseSelectorItem(e){var t="div",n={name:t,classes:[],attrs:{},selector:e=Kt.trim(e)};return"*"!==e&&(t=e.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,(function(e,t,o,i,a){switch(t){case"#":n.attrs.id=o;break;case".":n.classes.push(o);break;case":":-1!==Kt.inArray("checked disabled enabled read-only required".split(" "),o)&&(n.attrs[o]=o)}if("["===i){var u=a.match(/([\w\-]+)(?:\=\"([^\"]+))?/);u&&(n.attrs[u[1]]=u[2])}return""}))),n.name=t||"div",n},ck=function getCssText(e,t){var n="",o=al(e);if(""===o)return"";var i=function removeVars(e){return D(e)?e.replace(/%(\w+)/g,""):""},a=function getComputedStyle(t,n){return ok.getStyle(null!==n&&void 0!==n?n:e.getBody(),t,!0)};if(D(t)){var u=e.formatter.get(t);if(!u)return"";t=u[0]}if("preview"in t){var c=t.preview;if(!1===c)return"";o=c||o}var s,l=t.block||t.inline||"span",d=function parseSelector(e){return D(e)?(e=(e=e.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Kt.map(e.split(/(?:>|\s+(?![^\[\]]+\]))/),(function(e){var t=Kt.map(e.split(/(?:~\+|~|\+)/),uk),n=t.pop();return t.length&&(n.siblings=t),n})).reverse()):[]}(t.selector);d.length>0?(d[0].name||(d[0].name=l),l=t.selector,s=ak(d,e)):s=ak([l],e);var m=ok.select(l,s)[0]||s.firstChild;rk(t.styles,(function(e,t){var n=i(e);n&&ok.setStyle(m,t,n)})),rk(t.attributes,(function(e,t){var n=i(e);n&&ok.setAttrib(m,t,n)})),rk(t.classes,(function(e){var t=i(e);ok.hasClass(m,t)||ok.addClass(m,t)})),e.dispatch("PreviewFormats"),ok.setStyles(s,{position:"absolute",left:-65535}),e.getBody().appendChild(s);var g=a("fontSize"),p=/px$/.test(g)?parseInt(g,10):0;return rk(o.split(" "),(function(e){var t=a(e,m);if(("background-color"!==e||!/transparent|rgba\s*\([^)]+,\s*0\)/.test(t)||(t=a(e),"#ffffff"!==ja(t).toLowerCase()))&&("color"!==e||"#000000"!==ja(t).toLowerCase())){if("font-size"===e&&/em|%$/.test(t)){if(0===p)return;t=parseFloat(t)/(/%$/.test(t)?100:1)*p+"px"}"border"===e&&t&&(n+="padding:0 2px;"),n+=e+":"+t+";"}})),e.dispatch("AfterPreviewFormats"),ok.remove(s),n},sk=function Formatter(e){var t=nk(e),n=vu({});return function setup$s(e){e.addShortcut("meta+b","","Bold"),e.addShortcut("meta+i","","Italic"),e.addShortcut("meta+u","","Underline");for(var t=1;t<=6;t++)e.addShortcut("access+"+t,"",["FormatBlock",!1,"h"+t]);e.addShortcut("access+7","",["FormatBlock",!1,"p"]),e.addShortcut("access+8","",["FormatBlock",!1,"div"]),e.addShortcut("access+9","",["FormatBlock",!1,"address"])}(e),Ty(e),Hx(e)||function setup$u(e,t){e.set({}),t.on("NodeChange",(function(n){wC(t,n.element,e.get())})),t.on("FormatApply FormatRemove",(function(n){var o=ee.from(n.node).map((function(e){return Qd(e)?e:e.startContainer})).bind((function(e){return co(e)?ee.some(e):ee.from(e.parentElement)})).getOrThunk((function(){return bC(t)}));wC(t,o,e.get())}))}(n,e),{get:t.get,has:t.has,register:t.register,unregister:t.unregister,apply:function apply(t,n,o){!function applyFormat(e,t,n,o){Vx(e).formatter.apply(t,n,o)}(e,t,n,o)},remove:function remove(t,n,o,i){!function removeFormat(e,t,n,o,i){Vx(e).formatter.remove(t,n,o,i)}(e,t,n,o,i)},toggle:function toggle(t,n,o){!function toggleFormat(e,t,n,o){Vx(e).formatter.toggle(t,n,o)}(e,t,n,o)},match:function match(t,n,o,i){return function matchFormat(e,t,n,o,i){return Vx(e).formatter.match(t,n,o,i)}(e,t,n,o,i)},closest:function closest(t){return function closestFormat(e,t){return Vx(e).formatter.closest(t)}(e,t)},matchAll:function matchAll(t,n){return function matchAllFormats(e,t,n){return Vx(e).formatter.matchAll(t,n)}(e,t,n)},matchNode:function matchNode(t,n,o,i){return function matchNodeFormat(e,t,n,o,i){return Vx(e).formatter.matchNode(t,n,o,i)}(e,t,n,o,i)},canApply:function canApply(t){return function canApplyFormat(e,t){return Vx(e).formatter.canApply(t)}(e,t)},formatChanged:function formatChanged(t,o,i,a){return function formatChanged(e,t,n,o,i,a){return Vx(e).formatter.formatChanged(t,n,o,i,a)}(e,n,t,o,i,a)},getCssText:curry(ck,e)}},lk=function shouldIgnoreCommand(e){switch(e.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},fk=function UndoManager(e){var t=ku(),n=vu(0),o=vu(0),i={data:[],typing:!1,beforeChange:function beforeChange(){!function beforeChange(e,t,n){Vx(e).undoManager.beforeChange(t,n)}(e,n,t)},add:function add(a,u){return function addUndoLevel(e,t,n,o,i,a,u){return Vx(e).undoManager.add(t,n,o,i,a,u)}(e,i,o,n,t,a,u)},dispatchChange:function dispatchChange(){e.setDirty(!0);var t=Dx(e);t.bookmark=qc(e.selection),e.dispatch("change",{level:t,lastLevel:ke(i.data,o.get()).getOrUndefined()})},undo:function undo(){return function undo(e,t,n,o){return Vx(e).undoManager.undo(t,n,o)}(e,i,n,o)},redo:function redo(){return function redo(e,t,n){return Vx(e).undoManager.redo(t,n)}(e,o,i.data)},clear:function clear(){!function clear(e,t,n){Vx(e).undoManager.clear(t,n)}(e,i,o)},reset:function reset(){!function reset(e,t){Vx(e).undoManager.reset(t)}(e,i)},hasUndo:function hasUndo(){return function hasUndo(e,t,n){return Vx(e).undoManager.hasUndo(t,n)}(e,i,o)},hasRedo:function hasRedo(){return function hasRedo(e,t,n){return Vx(e).undoManager.hasRedo(t,n)}(e,i,o)},transact:function transact(t){return function transact(e,t,n,o){return Vx(e).undoManager.transact(t,n,o)}(e,i,n,t)},ignore:function ignore(t){!function ignore(e,t,n){Vx(e).undoManager.ignore(t,n)}(e,n,t)},extra:function extra(t,n){!function extra(e,t,n,o,i){Vx(e).undoManager.extra(t,n,o,i)}(e,i,o,t,n)}};return Hx(e)||function registerEvents(e,t,n){var o=vu(!1),i=function addNonTypingUndoLevel(e){Px(t,!1,n),t.add({},e)};e.on("init",(function(){t.add()})),e.on("BeforeExecCommand",(function(e){var o=e.command;lk(o)||(Lx(t,n),t.beforeChange())})),e.on("ExecCommand",(function(e){var t=e.command;lk(t)||i(e)})),e.on("ObjectResizeStart cut",(function(){t.beforeChange()})),e.on("SaveContent ObjectResized blur",i),e.on("dragend",i),e.on("keyup",(function(n){var a=n.keyCode;if(!n.isDefaultPrevented()){var u=Wt.os.isMacOS()&&"Meta"===n.key;(a>=33&&a<=36||a>=37&&a<=40||45===a||n.ctrlKey||u)&&(i(),e.nodeChanged()),46!==a&&8!==a||e.nodeChanged(),o.get()&&t.typing&&!Bx(Dx(e),t.data[0])&&(e.isDirty()||e.setDirty(!0),e.dispatch("TypingUndo"),o.set(!1),e.nodeChanged())}})),e.on("keydown",(function(e){var a=e.keyCode;if(!e.isDefaultPrevented())if(a>=33&&a<=36||a>=37&&a<=40||45===a)t.typing&&i(e);else{var u=e.ctrlKey&&!e.altKey||e.metaKey;if((a<16||a>20)&&224!==a&&91!==a&&!t.typing&&!u)return t.beforeChange(),Px(t,!0,n),t.add({},e),void o.set(!0);(Wt.os.isMacOS()?e.metaKey:e.ctrlKey&&!e.altKey)&&t.beforeChange()}})),e.on("mousedown",(function(e){t.typing&&i(e)})),e.on("input",(function(e){e.inputType&&(function isInsertReplacementText(e){return"insertReplacementText"===e.inputType}(e)||function isInsertTextDataNull(e){return"insertText"===e.inputType&&null===e.data}(e)||function isInsertFromPasteOrDrop(e){return"insertFromPaste"===e.inputType||"insertFromDrop"===e.inputType}(e))&&i(e)})),e.on("AddUndo Undo Redo ClearUndos",(function(t){t.isDefaultPrevented()||e.nodeChanged()}))}(e,i,n),function addKeyboardShortcuts(e){e.addShortcut("meta+z","","Undo"),e.addShortcut("meta+y,meta+shift+z","","Redo")}(e),i},dk=[9,27,tg.HOME,tg.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,tg.DOWN,tg.UP,tg.LEFT,tg.RIGHT].concat(Wt.browser.isFirefox()?[224]:[]),mk="data-mce-placeholder",gk=function isKeyboardEvent(e){return"keydown"===e.type||"keyup"===e.type},pk=function isDeleteEvent(e){var t=e.keyCode;return t===tg.BACKSPACE||t===tg.DELETE},hk=function setup$r(e){var t,n=e.dom,o=xs(e),i=null!==(t=Xs(e))&&void 0!==t?t:"",a=function updatePlaceholder(t,a){if(!function isNonTypingKeyboardEvent(e){if(gk(e)){var t=e.keyCode;return!pk(e)&&(tg.metaKeyPressed(e)||e.altKey||t>=112&&t<=123||ie(dk,t))}return!1}(t)){var u=e.getBody(),c=!function isTypingKeyboardEvent(e){return gk(e)&&!(pk(e)||"keyup"===e.type&&229===e.keyCode)}(t)&&function isVisuallyEmpty(e,t,n){if(Li(In.fromDom(t),!1)){var o=t.firstElementChild;return!o||!e.getStyle(t.firstElementChild,"padding-left")&&!e.getStyle(t.firstElementChild,"padding-right")&&n===o.nodeName.toLowerCase()}return!1}(n,u,o);(""!==n.getAttrib(u,mk)!==c||a)&&(n.setAttrib(u,mk,c?i:null),n.setAttrib(u,"aria-placeholder",c?i:null),function firePlaceholderToggle(e,t){e.dispatch("PlaceholderToggle",{state:t})}(e,c),e.on(c?"keydown":"keyup",updatePlaceholder),e.off(c?"keyup":"keydown",updatePlaceholder))}};ft(i)&&e.on("init",(function(t){a(t,!0),e.on("change SetContent ExecCommand",a),e.on("paste",(function(t){return Cp.setEditorTimeout(e,(function(){return a(t)}))}))}))},vk=function blockBoundary(e,t){return{from:e,to:t}},bk=function getBlockPosition(e,t){var n=In.fromDom(e),o=In.fromDom(t.container());return Vv(n,o).map((function(e){return function blockPosition(e,t){return{block:e,position:t}}(e,t)}))},yk=function getClosestHost(e,t){return gr(t,(function isHost(e){return qo(e)||Ao(e.dom)}),(function isRoot(t){return Hn(t,e)})).filter(fn).getOr(e)},Ck=function readFromRange(e,t,n){var o=bk(e,Tc.fromRangeStart(n)),i=o.bind((function(n){return gd(t,e,n.position).bind((function(n){return bk(e,n).map((function(n){return function skipLastBr(e,t,n){return Eo(n.position.getNode())&&!Li(n.block)?vd(!1,n.block.dom).bind((function(o){return o.isEqual(n.position)?gd(t,e,o).bind((function(t){return bk(e,t)})):ee.some(n)})).getOr(n):n}(e,t,n)}))}))}));return Jt(o,i,vk).filter((function(t){return function isDifferentBlocks(e){return!Hn(e.from.block,e.to.block)}(t)&&function hasSameHost(e,t){var n=In.fromDom(e);return Hn(yk(n,t.from.block),yk(n,t.to.block))}(e,t)&&function isEditable$1(e){return!1===_o(e.from.block.dom)&&!1===_o(e.to.block.dom)}(t)&&function hasValidBlocks(e){var t=function isValidBlock(e){return Zo(e)||Yi(e.dom)};return t(e.from.block)&&t(e.to.block)}(t)}))},wk=function extractChildren(e,t){var n=function getChildrenUntilBlockBoundary(e,t){var n=Xn(e);return he(n,(function(e){return t.isBlock(un(e))})).fold(W(n),(function(e){return n.slice(0,e)}))}(e,t);return ce(n,Hr),n},xk=function removeEmptyRoot(e,t){var n=$h(t,e);return pe(n.reverse(),(function(e){return Li(e)})).each(Hr)},Sk=function nestedBlockMerge(e,t,n,o,i){if(Li(n))return Jo(n),Cd(n.dom);(function isEmptyBefore(e){return 0===fe(Kn(e),(function(e){return!Li(e)})).length})(i)&&Li(t)&&Nr(i,In.fromTag("br"));var a=yd(n.dom,Tc.before(i.dom));return ce(wk(t,o),(function(e){Nr(i,e)})),xk(e,t),a},kk=function sidelongBlockMerge(e,t,n,o){if(Li(n)){if(Li(t)){var i=de(function getInlineToBlockDescendants(e){return function helper(e,t){return Qn(e).fold((function(){return t}),(function(e){return function isInline(e,t){return e.isInline(un(t))}(o,e)?helper(e,t.concat(Uu(e))):t}))}(e,[])}(n),(function(e,t){return Pr(e,t),t}),Xo());Fr(t),Ir(t,i)}return Hr(n),Cd(t.dom)}var a=wd(n.dom);return ce(wk(t,o),(function(e){Ir(n,e)})),xk(e,t),a},Tk=function getInsertionPoint(e,t){return $n(t,e)?function findInsertionPoint(e,t){var n=$h(t,e);return ee.from(n[n.length-1])}(t,e):ee.none()},Ek=function trimBr(e,t){vd(e,t.dom).bind((function(e){return ee.from(e.getNode())})).map(In.fromDom).filter(Uo).each(Hr)},Ok=function mergeBlockInto(e,t,n,o){return Ek(!0,t),Ek(!1,n),Tk(t,n).fold(curry(kk,e,t,n,o),curry(Sk,e,t,n,o))},Ak=function mergeBlocks(e,t,n,o,i){return t?Ok(e,o,n,i):Ok(e,n,o,i)},_k=function backspaceDelete$9(e,t){var n=In.fromDom(e.getBody()),o=function read$1(e,t,n){return n.collapsed?Ck(e,t,n):ee.none()}(n.dom,t,e.selection.getRng()).map((function(o){return function(){Ak(n,t,o.from.block,o.to.block,e.schema).each((function(t){e.selection.setRng(t.toRange())}))}}));return o},Dk=function isRawNodeInTable(e,t){var n=In.fromDom(t),o=curry(Hn,e);return mr(n,qo,o).isSome()},Rk=function isEverythingSelected(e,t){var n=yd(e.dom,Tc.fromRangeStart(t)).isNone(),o=bd(e.dom,Tc.fromRangeEnd(t)).isNone();return!function isSelectionInTable(e,t){return Dk(e,t.startContainer)||Dk(e,t.endContainer)}(e,t)&&n&&o},Nk=function deleteRange$2(e){var t=In.fromDom(e.getBody()),n=e.selection.getRng();return Rk(t,n)?function emptyEditor(e){return ee.some((function(){e.setContent(""),e.selection.setCursorLocation()}))}(e):function deleteRangeMergeBlocks(e,t,n){var o=t.getRng();return Jt(Vv(e,In.fromDom(o.startContainer)),Vv(e,In.fromDom(o.endContainer)),(function(i,a){return Hn(i,a)?ee.none():ee.some((function(){o.deleteContents(),Ak(e,!0,i,a,n).each((function(e){t.setRng(e.toRange())}))}))})).getOr(ee.none())}(t,e.selection,e.schema)},Mk=function backspaceDelete$8(e,t){return e.selection.isCollapsed()?ee.none():Nk(e)},Bk=function showCaret(e,t,n,o,i){return ee.from(t._selectionOverrides.showCaret(e,n,o,i))},Ik=function selectNode(e,t){return e.dispatch("BeforeObjectSelected",{target:t}).isDefaultPrevented()?ee.none():ee.some(function getNodeRange(e){var t=e.ownerDocument.createRange();return t.selectNode(e),t}(t))},Pk=function renderRangeCaret(e,t,n){return t.collapsed?function renderCaretAtRange(e,t,n){var o=jf(1,e.getBody(),t),i=Tc.fromRangeStart(o),a=i.getNode();if(Sf(a))return Bk(1,e,a,!i.isAtEnd(),!1);var u=i.getNode(!0);if(Sf(u))return Bk(1,e,u,!1,!1);var c=Eb(e.dom.getRoot(),i.getNode());return Sf(c)?Bk(1,e,c,!1,n):ee.none()}(e,t,n).getOr(t):t},Lk=function isBeforeBoundary(e){return Lh(e)||Mh(e)},Fk=function isAfterBoundary(e){return Fh(e)||Bh(e)},Hk=function deleteContentAndShowCaret(e,t,n,o,i,a){Bk(o,e,a.getNode(!i),i,!0).each((function(n){if(t.collapsed){var o=t.cloneRange();i?o.setEnd(n.startContainer,n.startOffset):o.setStart(n.endContainer,n.endOffset),o.deleteContents()}else t.deleteContents();e.selection.setRng(n)})),function trimEmptyTextNode(e,t){Co(t)&&0===t.data.length&&e.remove(t)}(e.dom,n)},$k=function backspaceDelete$7(e,t){return function deleteBoundaryText(e,t){var n=e.selection.getRng();if(!Co(n.commonAncestorContainer))return ee.none();var o=t?Qc.Forwards:Qc.Backwards,i=sd(e.getBody()),a=curry(Yf,t?i.next:i.prev),u=t?Lk:Fk,c=qf(o,e.getBody(),n),s=a(c),l=s?Pv(t,s):s;if(!l||!Xf(c,l))return ee.none();if(u(l))return ee.some((function(){return Hk(e,n,c.getNode(),o,t,l)}));var d=a(l);return d&&u(d)&&Xf(l,d)?ee.some((function(){return Hk(e,n,c.getNode(),o,t,d)})):ee.none()}(e,t)},zk=function getEdgeCefPosition(e,t){var n=e.getBody();return t?Cd(n).filter(Lh):wd(n).filter(Fh)},Vk=function isCefAtEdgeSelected(e){var t=e.selection.getRng();return!t.collapsed&&(zk(e,!0).exists((function(e){return e.isEqual(Tc.fromRangeStart(t))}))||zk(e,!1).exists((function(e){return e.isEqual(Tc.fromRangeEnd(t))})))},Uk=Jc([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),Zk=function deleteEmptyBlockOrMoveToCef(e,t,n,o){var i=o.getNode(!t);return Vv(In.fromDom(e),In.fromDom(n.getNode())).map((function(e){return Li(e)?Uk.remove(e.dom):Uk.moveToElement(i)})).orThunk((function(){return ee.some(Uk.moveToElement(i))}))},Wk=function findCefPosition(e,t,n,o){return gd(t,e,n).bind((function(i){return function isCompoundElement(e){return F(e)&&(qo(In.fromDom(e))||jo(In.fromDom(e)))}(i.getNode())||function isDeleteFromCefDifferentBlocks(e,t,n,o,i){var a=function inSameBlock(t){return i.isInline(t.nodeName.toLowerCase())&&!Hf(n,o,e)};return Gf(!t,n).fold((function(){return Gf(t,o).fold(J,a)}),a)}(e,t,n,i,o)?ee.none():t&&_o(i.getNode())||!t&&_o(i.getNode(!0))?Zk(e,t,n,i):t&&Fh(n)||!t&&Lh(n)?ee.some(Uk.moveToPosition(i)):ee.none()}))},jk=function getContentEditableAction(e,t,n,o){return function isAtContentEditableBlockCaret(e,t){var n=t.getNode(!e),o=e?"after":"before";return co(n)&&n.getAttribute("data-mce-caret")===o}(t,n)?function getContentEditableBlockAction(e,t){return L(t)?ee.none():e&&_o(t.nextSibling)?ee.some(Uk.moveToElement(t.nextSibling)):!e&&_o(t.previousSibling)?ee.some(Uk.moveToElement(t.previousSibling)):ee.none()}(t,n.getNode(!t)).orThunk((function(){return Wk(e,t,n,o)})):Wk(e,t,n,o).bind((function(t){return function skipMoveToActionFromInlineCefToContent(e,t,n){return n.fold((function(e){return ee.some(Uk.remove(e))}),(function(e){return ee.some(Uk.moveToElement(e))}),(function(n){return Hf(t,n,e)?ee.none():ee.some(Uk.moveToPosition(n))}))}(e,n,t)}))},Gk=function getAncestorCe(e,t){return ee.from(Eb(e.getBody(),t))},qk=function backspaceDeleteCaret(e,t){var n=e.selection.getNode();return Gk(e,n).filter(_o).fold((function(){return function read(e,t,n,o){var i=jf(t?1:-1,e,n),a=Tc.fromRangeStart(i),u=In.fromDom(e);return!t&&Fh(a)?ee.some(Uk.remove(a.getNode(!0))):t&&Lh(a)?ee.some(Uk.remove(a.getNode())):!t&&Lh(a)&&Jh(u,a,o)?Qh(u,a,o).map((function(e){return Uk.remove(e.getNode())})):t&&Fh(a)&&Xh(u,a,o)?ev(u,a,o).map((function(e){return Uk.remove(e.getNode())})):jk(e,t,a,o)}(e.getBody(),t,e.selection.getRng(),e.schema).map((function(n){return function(){return n.fold(function deleteElement$1(e,t){return function(n){return e._selectionOverrides.hideFakeCaret(),Rv(e,t,In.fromDom(n)),!0}}(e,t),function moveToElement(e,t){return function(n){var o=t?Tc.before(n):Tc.after(n);return e.selection.setRng(o.toRange()),!0}}(e,t),function moveToPosition(e){return function(t){return e.selection.setRng(t.toRange()),!0}}(e))}}))}),(function(){return ee.some(V)}))},Kk=function backspaceDeleteRange(e,t){var n=e.selection.getNode();return _o(n)&&!Do(n)?Gk(e,n.parentNode).filter(_o).fold((function(){return ee.some((function(){!function deleteOffscreenSelection(e){ce(ro(e,".mce-offscreen-selection"),Hr)}(In.fromDom(e.getBody())),Rv(e,t,In.fromDom(e.selection.getNode())),Uv(e)}))}),(function(){return ee.some(V)})):Vk(e)?ee.some((function(){jv(e,e.selection.getRng(),In.fromDom(e.getBody()))})):ee.none()},Yk=function paddEmptyElement(e){var t=e.dom,n=e.selection,o=Eb(e.getBody(),n.getNode());if(Ao(o)&&t.isBlock(o)&&t.isEmpty(o)){var i=t.create("br",{"data-mce-bogus":"1"});t.setHTML(o,""),o.appendChild(i),n.setRng(Tc.before(i).toRange())}return!0},Xk=function backspaceDelete$6(e,t){return e.selection.isCollapsed()?qk(e,t):Kk(e,t)},Jk=function backspaceDelete$5(e,t){return e.selection.isCollapsed()?function deleteCaret$2(e,t){var n=Tc.fromRangeStart(e.selection.getRng());return gd(t,e.getBody(),n).filter((function(e){return t?Rh(e):Nh(e)})).bind((function(e){return $f(t?0:-1,e)})).map((function(t){return function(){return e.selection.select(t)}}))}(e,t):ee.none()},Qk=Co,eT=function startsWithCaretContainer(e){return Qk(e)&&e.data[0]===Qo},tT=function endsWithCaretContainer(e){return Qk(e)&&e.data[e.data.length-1]===Qo},nT=function createZwsp(e){var t;return(null!==(t=e.ownerDocument)&&void 0!==t?t:document).createTextNode(Qo)},rT=function insertInline(e,t){return e?function insertBefore$1(e){var t;if(Qk(e.previousSibling))return tT(e.previousSibling)||e.previousSibling.appendData(Qo),e.previousSibling;if(Qk(e))return eT(e)||e.insertData(0,Qo),e;var n=nT(e);return null===(t=e.parentNode)||void 0===t||t.insertBefore(n,e),n}(t):function insertAfter$1(e){var t,n;if(Qk(e.nextSibling))return eT(e.nextSibling)||e.nextSibling.insertData(0,Qo),e.nextSibling;if(Qk(e))return tT(e)||e.appendData(Qo),e;var o=nT(e);return e.nextSibling?null===(t=e.parentNode)||void 0===t||t.insertBefore(o,e.nextSibling):null===(n=e.parentNode)||void 0===n||n.appendChild(o),o}(t)},oT=curry(rT,!0),iT=curry(rT,!1),aT=function insertInlinePos(e,t){return Co(e.container())?rT(t,e.container()):rT(t,e.getNode())},uT=function isPosCaretContainer(e,t){var n=t.get();return n&&e.container()===n&&ii(n)},cT=function renderCaret(e,t){return t.fold((function(t){hf(e.get());var n=oT(t);return e.set(n),ee.some(Tc(n,n.length-1))}),(function(t){return Cd(t).map((function(t){if(uT(t,e)){var n=e.get();return Tc(n,1)}hf(e.get());var o=aT(t,!0);return e.set(o),Tc(o,1)}))}),(function(t){return wd(t).map((function(t){if(uT(t,e)){var n=e.get();return Tc(n,n.length-1)}hf(e.get());var o=aT(t,!1);return e.set(o),Tc(o,o.length-1)}))}),(function(t){hf(e.get());var n=iT(t);return e.set(n),ee.some(Tc(n,1))}))},sT=function evaluateUntil(e,t){for(var n=0;n<e.length;n++){var o=e[n].apply(null,t);if(o.isSome())return o}return ee.none()},lT=Jc([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),fT=function rescope$1(e,t){var n=Ff(t,e);return n||e},dT=function before(e,t,n){var o=Lv(n),i=fT(t,o.container());return Iv(e,i,o).fold((function(){return bd(i,o).bind(curry(Iv,e,i)).map((function(e){return lT.before(e)}))}),ee.none)},mT=function isNotInsideFormatCaretContainer(e,t){return null===kd(e,t)},gT=function findInsideRootInline(e,t,n){return Iv(e,t,n).filter(curry(mT,t))},pT=function start$1(e,t,n){var o=Fv(n);return gT(e,t,o).bind((function(e){return yd(e,o).isNone()?ee.some(lT.start(e)):ee.none()}))},hT=function end(e,t,n){var o=Lv(n);return gT(e,t,o).bind((function(e){return bd(e,o).isNone()?ee.some(lT.end(e)):ee.none()}))},vT=function after(e,t,n){var o=Fv(n),i=fT(t,o.container());return Iv(e,i,o).fold((function(){return yd(i,o).bind(curry(Iv,e,i)).map((function(e){return lT.after(e)}))}),ee.none)},bT=function isValidLocation(e){return!Bv(CT(e))},yT=function readLocation(e,t,n){return sT([dT,pT,hT,vT],[e,t,n]).filter(bT)},CT=function getElement(e){return e.fold(j,j,j,j)},wT=function getName(e){return e.fold(W("before"),W("start"),W("end"),W("after"))},xT=function outside(e){return e.fold(lT.before,lT.before,lT.after,lT.after)},ST=function inside(e){return e.fold(lT.start,lT.start,lT.end,lT.end)},kT=function betweenInlines(e,t,n,o,i,a){return Jt(Iv(t,n,o),Iv(t,n,i),(function(t,o){return t!==o&&function hasSameParentBlock(e,t,n){var o=Ff(t,e),i=Ff(n,e);return F(o)&&o===i}(n,t,o)?lT.after(e?t:o):a})).getOr(a)},TT=function skipNoMovement(e,t){return e.fold(Q,(function(e){return!function isEq(e,t){return wT(e)===wT(t)&&CT(e)===CT(t)}(e,t)}))},ET=function findLocationSimple(e,t){return e?t.fold(U(ee.some,lT.start),ee.none,U(ee.some,lT.after),ee.none):t.fold(ee.none,U(ee.some,lT.before),ee.none,U(ee.some,lT.end))},OT=function findLocation$1(e,t,n,o){var i=Pv(e,o),a=yT(t,n,i);return yT(t,n,i).bind(curry(ET,e)).orThunk((function(){return function findLocationTraverse(e,t,n,o,i){var a=Pv(e,i);return gd(e,n,a).map(curry(Pv,e)).fold((function(){return o.map(xT)}),(function(i){return yT(t,n,i).map(curry(kT,e,t,n,a,i)).filter(curry(TT,o))})).filter(bT)}(e,t,n,a,o)}))},AT=function moveRel(e,t,n){var o=e?1:-1;return t.setRng(Tc(n.container(),n.offset()+o).toRange()),t.getSel().modify("move",e?"forward":"backward","word"),!0},_T=function moveByWord(e,t){var n=t.selection.getRng(),o=e?Tc.fromRangeEnd(n):Tc.fromRangeStart(n);return!!function hasSelectionModifyApi(e){return H(e.selection.getSel().modify)}(t)&&(e&&ci(o)?AT(!0,t.selection,o):!(e||!si(o))&&AT(!1,t.selection,o))};!function(e){e[e.Br=0]="Br",e[e.Block=1]="Block",e[e.Wrap=2]="Wrap",e[e.Eol=3]="Eol"}(_w||(_w={}));var DT,RT=function flip(e,t){return e===Qc.Backwards?Ce(t):t},NT=function walk$1(e,t,n){return e===Qc.Forwards?t.next(n):t.prev(n)},MT=function getBreakType(e,t,n,o){return Eo(o.getNode(t===Qc.Forwards))?_w.Br:!1===Hf(n,o)?_w.Block:_w.Wrap},BT=function getPositionsUntil(e,t,n,o){for(var i=sd(n),a=o,u=[];a;){var c=NT(t,i,a);if(!c)break;if(Eo(c.getNode(!1)))return t===Qc.Forwards?{positions:RT(t,u).concat([c]),breakType:_w.Br,breakAt:ee.some(c)}:{positions:RT(t,u),breakType:_w.Br,breakAt:ee.some(c)};if(c.isVisible()){if(e(a,c)){var s=MT(0,t,a,c);return{positions:RT(t,u),breakType:s,breakAt:ee.some(c)}}u.push(c),a=c}else a=c}return{positions:RT(t,u),breakType:_w.Eol,breakAt:ee.none()}},IT=function getAdjacentLinePositions(e,t,n,o){return t(n,o).breakAt.map((function(o){var i=t(n,o).positions;return e===Qc.Backwards?i.concat(o):[o].concat(i)})).getOr([])},PT=function findClosestHorizontalPositionFromPoint(e,t){return me(e,(function(e,n){return e.fold((function(){return ee.some(n)}),(function(o){return Jt(Te(o.getClientRects()),Te(n.getClientRects()),(function(e,i){var a=Math.abs(t-e.left);return Math.abs(t-i.left)<=a?n:o})).or(e)}))}),ee.none())},LT=function findClosestHorizontalPosition(e,t){return Te(t.getClientRects()).bind((function(t){return PT(e,t.left)}))},FT=curry(BT,Tc.isAbove,-1),HT=curry(BT,Tc.isBelow,1),$T=curry(IT,-1,FT),zT=curry(IT,1,HT),VT=function isAtFirstLine(e,t){return FT(e,t).breakAt.isNone()},UT=function isAtLastLine(e,t){return HT(e,t).breakAt.isNone()},ZT=function getClosestPositionAbove(e,t){return LT($T(e,t),t)},WT=function getClosestPositionBelow(e,t){return LT(zT(e,t),t)},jT=_o,GT=function distanceToRectLeft$1(e,t){return Math.abs(e.left-t)},qT=function distanceToRectRight$1(e,t){return Math.abs(e.right-t)},KT=function findClosestClientRect(e,t){return qe(e,(function(e,n){var o=Math.min(GT(e,t),qT(e,t)),i=Math.min(GT(n,t),qT(n,t));return i===o&&function isNodeClientRect(e){return ze(e,"node")}(n)&&jT(n.node)||i<o?n:e}))},YT=function getNodeClientRects(e){var t=function toArrayWithNode(t){return ue(t,(function(t){var n=Ku(t);return n.node=e,n}))};if(co(e))return t(e.getClientRects());if(Co(e)){var n=e.ownerDocument.createRange();return n.setStart(e,0),n.setEnd(e,e.data.length),t(n.getClientRects())}return[]},XT=function getClientRects(e){return be(e,YT)};!function(e){e[e.Up=-1]="Up",e[e.Down=1]="Down"}(DT||(DT={}));var JT,QT=function walkUntil(e,t,n,o,i,a){var u=0,c=[],s=function add(o){var a=XT([o]);-1===e&&(a=a.reverse());for(var s=0;s<a.length;s++){var d=a[s];if(!n(d,l)){if(c.length>0&&t(d,Ye(c))&&u++,d.line=u,i(d))return!0;c.push(d)}}return!1},l=Ye(a.getClientRects());if(!l)return c;var d=a.getNode();return d&&(s(d),function findUntil(e,t,n,o){for(var i=o;i=Lf(i,e,Ti,t);)if(n(i))return}(e,o,s,d)),c},eE=curry(QT,DT.Up,Ju,Qu),tE=curry(QT,DT.Down,Qu,Ju),nE=function getLastClientRect(e){return Ye(e.getClientRects())},rE=function isAboveLine(e){return function(t){return function aboveLineNumber(e,t){return t.line>e}(e,t)}},oE=function isLine(e){return function(t){return function isLineNumber(e,t){return t.line===e}(e,t)}},iE=function moveToRange(e,t){e.selection.setRng(t),ap(e,e.selection.getRng())},aE=function renderRangeCaretOpt(e,t,n){return ee.some(Pk(e,t,n))},uE=function moveHorizontally(e,t,n,o,i,a){var u=t===Qc.Forwards,c=sd(e.getBody()),s=curry(Yf,u?c.next:c.prev),l=u?o:i;if(!n.collapsed){var d=tc(n);if(a(d))return Bk(t,e,d,t===Qc.Backwards,!1);if(Vk(e)){var m=n.cloneRange();return m.collapse(t===Qc.Backwards),ee.from(m)}}var g=qf(t,e.getBody(),n);if(l(g))return Ik(e,g.getNode(!u));var p=s(g),h=mi(n);if(!p)return h?ee.some(n):ee.none();if(l(p=Pv(u,p)))return Bk(t,e,p.getNode(!u),u,!1);var v=s(p);return v&&l(v)&&Xf(p,v)?Bk(t,e,v.getNode(!u),u,!1):h?aE(e,p.toRange(),!1):ee.none()},cE=function moveVertically(e,t,n,o,i,a){var u=qf(t,e.getBody(),n),c=Ye(u.getClientRects()),s=t===DT.Down,l=e.getBody();if(!c)return ee.none();if(Vk(e)){var d=s?Tc.fromRangeEnd(n):Tc.fromRangeStart(n);return(s?WT:ZT)(l,d).orThunk((function(){return ee.from(d)})).map((function(e){return e.toRange()}))}var m,g=(s?tE:eE)(l,rE(1),u),p=fe(g,oE(1)),h=c.left,v=KT(p,h);if(v&&a(v.node)){var b=Math.abs(h-v.left),y=Math.abs(h-v.right);return Bk(t,e,v.node,b<y,!1)}if(m=o(u)?u.getNode():i(u)?u.getNode(!0):tc(n)){var C=function positionsUntil(e,t,n,o){var i,a,u,c,s=sd(t),l=[],d=0;1===e?(i=s.next,a=Qu,u=Ju,c=Tc.after(o)):(i=s.prev,a=Ju,u=Qu,c=Tc.before(o));var m=nE(c);do{if(c.isVisible()){var g=nE(c);if(!u(g,m)){l.length>0&&a(g,Ye(l))&&d++;var p=Ku(g);if(p.position=c,p.line=d,n(p))return l;l.push(p)}}}while(c=i(c));return l}(t,l,rE(1),m),w=KT(fe(C,oE(1)),h);if(w)return aE(e,w.position.toRange(),!1);if(w=Ye(fe(C,oE(0))))return aE(e,w.position.toRange(),!1)}return 0===p.length?sE(e,s).filter(s?i:o).map((function(t){return Pk(e,t.toRange(),!1)})):ee.none()},sE=function getLineEndPoint(e,t){var n=e.selection.getRng(),o=t?Tc.fromRangeEnd(n):Tc.fromRangeStart(n),i=function getEditingHost(e,t){return mr(In.fromDom(e),(function isCETrue(e){return Tf(e.dom)}),(function isRoot(e){return e.dom===t})).map((function(e){return e.dom})).getOr(t)}(o.container(),e.getBody());if(t){var a=HT(i,o);return Ee(a.positions)}var u=FT(i,o);return Te(u.positions)},lE=function moveToLineEndPoint$3(e,t,n){return sE(e,t).filter(n).exists((function(t){return e.selection.setRng(t.toRange()),!0}))},fE=function setCaretPosition(e,t){var n=e.dom.createRng();n.setStart(t.container(),t.offset()),n.setEnd(t.container(),t.offset()),e.selection.setRng(n)},dE=function setSelected(e,t){e?t.setAttribute("data-mce-selected","inline-boundary"):t.removeAttribute("data-mce-selected")},mE=function renderCaretLocation(e,t,n){return cT(t,n).map((function(t){return fE(e,t),n}))},gE=function findLocation(e,t,n){var o=e.getBody(),i=function getPositionFromRange(e,t,n){var o=Tc.fromRangeStart(e);if(e.collapsed)return o;var i=Tc.fromRangeEnd(e);return n?yd(t,i).getOr(i):bd(t,o).getOr(o)}(e.selection.getRng(),o,n),a=curry(Mv,e);return OT(n,a,o,i).bind((function(n){return mE(e,t,n)}))},pE=function safeRemoveCaretContainer(e,t){var n=t.get();if(e.selection.isCollapsed()&&!e.composing&&n){var o=Tc.fromRangeStart(e.selection.getRng());Tc.isTextPosition(o)&&!function isAtZwsp(e){return ci(e)||si(e)}(o)&&(fE(e,pf(n,o)),t.set(null))}},hE=function move$3(e,t,n){return!!ol(e)&&gE(e,t,n).isSome()},vE=function moveWord(e,t,n){return!!ol(t)&&_T(e,t)},bE=function setupSelectedState(e){var t=vu(null),n=curry(Mv,e);return e.on("NodeChange",(function(o){ol(e)&&(function toggleInlines(e,t,n){var o=ue(ro(In.fromDom(t.getRoot()),'*[data-mce-selected="inline-boundary"]'),(function(e){return e.dom})),i=fe(o,e),a=fe(n,e);ce(we(i,a),curry(dE,!1)),ce(we(a,i),curry(dE,!0))}(n,e.dom,o.parents),pE(e,t),function renderInsideInlineCaret(e,t,n,o){if(t.selection.isCollapsed()){var i=fe(o,e);ce(i,(function(o){var i=Tc.fromRangeStart(t.selection.getRng());yT(e,t.getBody(),i).bind((function(e){return mE(t,n,e)}))}))}}(n,e,t,o.parents))})),t},yE=curry(vE,!0),CE=curry(vE,!1),wE=function moveToLineEndPoint$2(e,t,n){if(ol(e)){var o=sE(e,t).getOrThunk((function(){var n=e.selection.getRng();return t?Tc.fromRangeEnd(n):Tc.fromRangeStart(n)}));return yT(curry(Mv,e),e.getBody(),o).exists((function(t){var o=xT(t);return cT(n,o).exists((function(t){return fE(e,t),!0}))}))}return!1},xE=function setCaretLocation(e,t){return function(n){return cT(t,n).map((function(t){return function(){return fE(e,t)}}))}},SE=function deleteFromTo(e,t,n,o){var i=e.getBody(),a=curry(Mv,e);e.undoManager.ignore((function(){e.selection.setRng(function rangeFromPositions(e,t){var n=document.createRange();return n.setStart(e.container(),e.offset()),n.setEnd(t.container(),t.offset()),n}(n,o)),$v(e),yT(a,i,Tc.fromRangeStart(e.selection.getRng())).map(ST).bind(xE(e,t)).each(X)})),e.nodeChanged()},kE=function backspaceDeleteCollapsed(e,t,n,o){var i=function rescope(e,t){var n=Ff(t,e);return n||e}(e.getBody(),o.container()),a=curry(Mv,e),u=yT(a,i,o);return u.bind((function(e){return n?e.fold(W(ee.some(ST(e))),ee.none,W(ee.some(xT(e))),ee.none):e.fold(ee.none,W(ee.some(xT(e))),ee.none,W(ee.some(ST(e))))})).map(xE(e,t)).getOrThunk((function(){var c=pd(n,i,o),s=c.bind((function(e){return yT(a,i,e)}));return Jt(u,s,(function(){return Iv(a,i,o).bind((function(t){return function hasOnlyTwoOrLessPositionsLeft(e){return Jt(Cd(e),wd(e),(function(t,n){var o=Pv(!0,t),i=Pv(!1,n);return bd(e,o).forall((function(e){return e.isEqual(i)}))})).getOr(!0)}(t)?ee.some((function(){Rv(e,n,In.fromDom(t))})):ee.none()}))})).getOrThunk((function(){return s.bind((function(){return c.map((function(i){return function(){n?SE(e,t,o,i):SE(e,t,i,o)}}))}))}))}))},TE=function backspaceDelete$4(e,t,n){if(e.selection.isCollapsed()&&ol(e)){var o=Tc.fromRangeStart(e.selection.getRng());return kE(e,t,n,o)}return ee.none()},EE=function getParentsUntil(e,t){var n=In.fromDom(e.getBody()),o=In.fromDom(e.selection.getStart()),i=$h(o,n);return he(i,t).fold(W(i),(function(e){return i.slice(0,e)}))},OE=function hasOnlyOneChild(e){return 1===tr(e)},AE=function getParentInlinesUntilMultichildInline(e){return EE(e,(function(t){return e.schema.isBlock(un(t))||function hasMultipleChildren(e){return tr(e)>1}(t)}))},_E=function getFormatNodes(e,t){var n=curry(Ay,e);return be(t,(function(e){return n(e)?[e.dom]:[]}))},DE=function getFormatNodesAtStart(e){var t=function getParentInlines(e){return EE(e,(function(t){return e.schema.isBlock(un(t))}))}(e);return _E(e,t)},RE=function deleteCaret$1(e,t){var n=fe(AE(e),OE);return Ee(n).bind((function(o){var i=Tc.fromRangeStart(e.selection.getRng());return Zv(t,i,o.dom)&&!wm(o)?ee.some((function(){return function deleteLastPosition(e,t,n,o){var i=_E(t,o);if(0===i.length)Rv(t,e,n);else{var a=Oy(n.dom,i);t.selection.setRng(a.toRange())}}(t,e,o,n)})):ee.none()}))},NE=function createCaretFormatAtStart(e,t){var n=e.selection.getStart(),o=function isBrInEmptyElement(e,t){var n=t.parentElement;return Eo(t)&&!B(n)&&e.dom.isEmpty(n)}(e,n)||function isEmptyCaret(e){return wm(In.fromDom(e))}(n)?Oy(n,t):function createCaretFormatAtStart$1(e,t){var n=Ey(t),o=n.caretContainer,i=n.caretPosition;return e.insertNode(o.dom),i}(e.selection.getRng(),t);e.selection.setRng(o.toRange())},ME=function rangeStartsAtTextContainer(e){return Co(e.startContainer)},BE=function rangeEndsAtEndOfStartContainer(e){return function rangeStartAndEndHaveSameParent(e){var t=e.startContainer.parentNode,n=e.endContainer.parentNode;return!B(t)&&!B(n)&&t.isEqualNode(n)}(e)&&function rangeEndsAtEndOfEndContainer(e){var t=e.endContainer;return e.endOffset===(Co(t)?t.length:t.childNodes.length)}(e)},IE=function requiresDeleteRangeOverride(e){var t=e.selection.getRng();return function rangeStartsAtStartOfTextContainer(e){return 0===e.startOffset&&ME(e)}(t)&&function rangeStartParentIsFormatElement(e,t){var n=t.startContainer.parentElement;return!B(n)&&Ay(e,In.fromDom(n))}(e,t)&&function rangeEndsAtOrAfterEndOfStartContainer(e){return BE(e)||function rangeEndsAfterEndOfStartContainer(e){return!e.endContainer.isEqualNode(e.commonAncestorContainer)}(e)}(t)},PE=function deleteRange$1(e){if(IE(e)){var t=DE(e);return ee.some((function(){$v(e),function updateCaretFormat(e,t){var n=we(t,DE(e));n.length>0&&NE(e,n)}(e,t)}))}return ee.none()},LE=function backspaceDelete$3(e,t){return e.selection.isCollapsed()?RE(e,t):PE(e)},FE=function hasAncestorInlineCaret(e,t){return function ancestor$1(e,t,n){return mr(e,t,n).isSome()}(e,(function(e){return Sd(e.dom)}),(function(e){return t.isBlock(un(e))}))},HE=function requiresRefreshCaretOverride(e){var t=e.selection.getRng();return t.collapsed&&(ME(t)||e.dom.isEmpty(t.startContainer))&&!function hasAncestorInlineCaretAtStart(e){return FE(In.fromDom(e.selection.getStart()),e.schema)}(e)},$E=function refreshCaret(e){return HE(e)&&NE(e,[]),!0},zE=function deleteElement(e,t,n){return F(n)?ee.some((function(){e._selectionOverrides.hideFakeCaret(),Rv(e,t,In.fromDom(n))})):ee.none()},VE=function backspaceDelete$2(e,t){return e.selection.isCollapsed()?function deleteCaret(e,t){var n=t?Mh:Bh,o=t?Qc.Forwards:Qc.Backwards,i=qf(o,e.getBody(),e.selection.getRng());return n(i)?zE(e,t,i.getNode(!t)):ee.from(Pv(t,i)).filter((function(e){return n(e)&&Xf(i,e)})).bind((function(n){return zE(e,t,n.getNode(!t))}))}(e,t):function deleteRange(e,t){var n=e.selection.getNode();return No(n)?zE(e,t,n):ee.none()}(e,t)},UE=function parseIndentValue(e){return mt(null!==e&&void 0!==e?e:"").getOr(0)},ZE=function getIndentStyleName(e,t){return(e||function isTable$1(e){return"table"===un(e)}(t)?"margin":"padding")+("rtl"===Or(t,"direction")?"-right":"-left")},WE=function canOutdent(e){var t=GE(e);return!e.mode.isReadOnly()&&(t.length>1||function validateBlocks(e,t){return ye(t,(function(t){var n=ZE(Vs(e),t),o=_r(t,n).map(UE).getOr(0);return"false"!==e.dom.getContentEditable(t.dom)&&o>0}))}(e,t))},jE=function isListComponent(e){return Wo(e)||jo(e)},GE=function getBlocksToIndent(e){return fe(zr(e.selection.getSelectedBlocks()),(function(e){return!jE(e)&&!function parentIsListComponent(e){return Zn(e).exists(jE)}(e)&&function isEditable(e){return gr(e,(function(e){return Ao(e.dom)||_o(e.dom)})).exists((function(e){return Ao(e.dom)}))}(e)}))},qE=function handle(e,t){var n,o,i=e.dom,a=Us(e),u=null!==(o=null===(n=/[a-z%]+$/i.exec(a))||void 0===n?void 0:n[0])&&void 0!==o?o:"px",c=UE(a),s=Vs(e);ce(GE(e),(function(e){!function indentElement(e,t,n,o,i,a){var u=ZE(n,In.fromDom(a)),c=UE(e.getStyle(a,u));if("outdent"===t){var s=Math.max(0,c-o);e.setStyle(a,u,s?s+i:"")}else{var l=c+o+i;e.setStyle(a,u,l)}}(i,t,s,c,u,e.dom)}))},KE=function outdent(e){return qE(e,"outdent")},YE=function backspaceDelete$1(e){if(e.selection.isCollapsed()&&WE(e)){var t=e.dom,n=e.selection.getRng(),o=Tc.fromRangeStart(n),i=t.getParent(n.startContainer,t.isBlock);if(null!==i&&Wh(In.fromDom(i),o,e.schema))return ee.some((function(){return KE(e)}))}return ee.none()},XE=function findAction(e,t,n){return Ae([YE,Xk,$k,function(e,n){return TE(e,t,n)},_k,Tb,Jk,VE,Mk,LE],(function(t){return t(e,n)})).filter((function(t){return e.selection.isEditable()}))},JE=function forwardDeleteCommand(e,t){XE(e,t,!0).fold((function(){e.selection.isEditable()&&function execNativeForwardDeleteCommand(e){Hv(e,"ForwardDelete")}(e)}),X)},QE=function setup$q(e,t){e.addCommand("delete",(function(){!function deleteCommand(e,t){XE(e,t,!1).fold((function(){e.selection.isEditable()&&($v(e),Uv(e))}),X)}(e,t)})),e.addCommand("forwardDelete",(function(){JE(e,t)}))},eO=function getTouch(e){return void 0===e.touches||1!==e.touches.length?ee.none():ee.some(e.touches[0])},tO=function setup$p(e){var t=ku(),n=vu(!1),o=Eu((function(t){e.dispatch("longpress",l(l({},t),{},{type:"longpress"})),n.set(!0)}),400);e.on("touchstart",(function(e){eO(e).each((function(i){o.cancel();var a={x:i.clientX,y:i.clientY,target:e.target};o.throttle(e),n.set(!1),t.set(a)}))}),!0),e.on("touchmove",(function(i){o.cancel(),eO(i).each((function(o){t.on((function(i){(function isFarEnough(e,t){var n=Math.abs(e.clientX-t.x),o=Math.abs(e.clientY-t.y);return n>5||o>5})(o,i)&&(t.clear(),n.set(!1),e.dispatch("longpresscancel"))}))}))}),!0),e.on("touchend touchcancel",(function(i){o.cancel(),"touchcancel"!==i.type&&t.get().filter((function(e){return e.target.isEqualNode(i.target)})).each((function(){n.get()?i.preventDefault():e.dispatch("tap",l(l({},i),{},{type:"tap"}))}))}),!0)},nO=function isBlockElement(e,t){return $e(e,t.nodeName)},rO=function isValidTarget(e,t){return!!Co(t)||!!co(t)&&(!nO(e.getBlockElements(),t)&&!Ld(t)&&!Qi(e,t)&&!Hi(t))},oO=function shouldRemoveTextNode(e,t){if(Co(t)){if(0===t.data.length)return!0;if(/^\s+$/.test(t.data))return!t.nextSibling||nO(e,t.nextSibling)||Hi(t.nextSibling)}return!1},iO=function createRootBlock(e){return e.dom.create(xs(e),Ss(e))},aO=function addRootBlocks(e){var t,n,o=e.dom,i=e.selection,a=e.schema,u=a.getBlockElements(),c=i.getStart(),s=e.getBody(),l=!1,d=xs(e);if(c&&co(c)){var m=s.nodeName.toLowerCase();if(a.isValidChild(m,d.toLowerCase())&&!function hasBlockParent(e,t,n){return ae(Hh(In.fromDom(n),In.fromDom(t)),(function(t){return nO(e,t.dom)}))}(u,s,c)){for(var g=i.getRng(),p=g.startContainer,h=g.startOffset,v=g.endContainer,b=g.endOffset,y=Np(e),C=s.firstChild;C;)if(co(C)&&Ki(a,C),rO(a,C)){if(oO(u,C)){n=C,C=C.nextSibling,o.remove(n);continue}t||(t=iO(e),s.insertBefore(t,C),l=!0),n=C,C=C.nextSibling,t.appendChild(n)}else t=null,C=C.nextSibling;l&&y&&(g.setStart(p,h),g.setEnd(v,b),i.setRng(g),e.nodeChanged())}}},uO=function insertEmptyLine(e,t,n){var o=In.fromDom(iO(e)),i=Xo();Ir(o,i),n(t,o);var a=document.createRange();return a.setStartBefore(i.dom),a.setEndBefore(i.dom),a},cO=function hasClass(e){return function(t){return-1!==(" "+t.attr("class")+" ").indexOf(e)}},sO=function replaceMatchWithSpan(e,t,n){return function(o){var i=arguments,a=i[i.length-2],u=a>0?t.charAt(a-1):"";if('"'===u)return o;if(">"===u){var c=t.lastIndexOf("<",a);if(-1!==c)if(-1!==t.substring(c,a).indexOf('contenteditable="false"'))return o}return'<span class="'+n+'" data-mce-content="'+e.dom.encode(i[0])+'">'+e.dom.encode("string"===typeof i[1]?i[1]:i[0])+"</span>"}},lO=function isValidContent(e,t){return ye(e,(function(e){var n=t.match(e);return null!==n&&n[0].length===t.length}))},fO=function setup$n(e){var t="contenteditable",n=" "+Kt.trim(ql(e))+" ",o=" "+Kt.trim(Gl(e))+" ",i=cO(n),a=cO(o),u=Kl(e);u.length>0&&e.on("BeforeSetContent",(function(t){!function convertRegExpsToNonEditable(e,t,n){var o=t.length,i=n.content;if("raw"!==n.format){for(;o--;)i=i.replace(t[o],sO(e,i,Gl(e)));n.content=i}}(e,u,t)})),e.parser.addAttributeFilter("class",(function(e){for(var n=e.length;n--;){var o=e[n];i(o)?o.attr(t,"true"):a(o)&&o.attr(t,"false")}})),e.serializer.addAttributeFilter(t,(function(e){for(var n=e.length;n--;){var o=e[n];if(i(o)||a(o)){var c=o.attr("data-mce-content");u.length>0&&c?lO(u,c)?(o.name="#text",o.type=3,o.raw=!0,o.value=c):o.remove():o.attr(t,null)}}}))},dO=function showBlockCaretContainer(e,t){t.hasAttribute("data-mce-caret")&&(di(t),e.selection.setRng(e.selection.getRng()),e.selection.scrollIntoView(t))},mO=function handleBlockContainer(e,t){var n=function findBlockCaretContainer(e){return yr(In.fromDom(e.getBody()),"*[data-mce-caret]").map((function(e){return e.dom})).getOrNull()}(e);if(n)return"compositionstart"===t.type?(t.preventDefault(),t.stopPropagation(),void dO(e,n)):void(ui(n)&&(dO(e,n),e.undoManager.add()))},gO=_o,pO=function exitPreBlock(e,t,n){var o=sd(e.getBody()),i=curry(Yf,1===t?o.next:o.prev);if(n.collapsed){var a=e.dom.getParent(n.startContainer,"PRE");if(!a)return;if(!i(Tc.fromRangeStart(n))){var u=In.fromDom(function createTextBlock(e){var t=e.dom.create(xs(e));return t.innerHTML='<br data-mce-bogus="1">',t}(e));1===t?Mr(In.fromDom(a),u):Nr(In.fromDom(a),u),e.selection.select(u.dom,!0),e.selection.collapse()}}},hO=function getHorizontalRange(e,t){var n=t?Qc.Forwards:Qc.Backwards,o=e.selection.getRng();return function moveToCeFalseHorizontally(e,t,n){return uE(t,e,n,Lh,Fh,gO)}(n,e,o).orThunk((function(){return pO(e,n,o),ee.none()}))},vO=function getVerticalRange(e,t){var n=t?1:-1,o=e.selection.getRng();return function moveToCeFalseVertically(e,t,n){return cE(t,e,n,(function isBefore(e){return Lh(e)||Ih(e)}),(function isAfter(e){return Fh(e)||Ph(e)}),gO)}(n,e,o).orThunk((function(){return pO(e,n,o),ee.none()}))},bO=function moveH$2(e,t){return hO(e,function flipDirection(e,t){var n=t?e.getEnd(!0):e.getStart(!0);return Bv(n)?!t:t}(e.selection,t)).exists((function(t){return iE(e,t),!0}))},yO=function moveV$4(e,t){return vO(e,t).exists((function(t){return iE(e,t),!0}))},CO=function moveToLineEndPoint$1(e,t){return lE(e,t,t?Fh:Lh)},wO=function selectToEndPoint(e,t){return zk(e,!t).map((function(n){var o=n.toRange(),i=e.selection.getRng();return t?o.setStart(i.startContainer,i.startOffset):o.setEnd(i.endContainer,i.endOffset),o})).exists((function(t){return iE(e,t),!0}))},xO=function isTarget(e){return ie(["figcaption"],un(e))},SO=function moveCaretToNewEmptyLine(e,t){var n=In.fromDom(e.getBody()),o=Tc.fromRangeStart(e.selection.getRng());return function getClosestTargetBlock(e,t,n){var o=curry(Hn,t);return gr(In.fromDom(e.container()),(function(e){return n.isBlock(un(e))}),o).filter(xO)}(o,n,e.schema).exists((function(){if(function isAtFirstOrLastLine(e,t,n){return t?UT(e.dom,n):VT(e.dom,n)}(n,t,o)){var i=uO(e,n,t?Ir:Br);return e.selection.setRng(i),!0}return!1}))},kO=function moveV$3(e,t){return!!e.selection.isCollapsed()&&SO(e,t)},TO=function move$2(e,t){return t?ee.from(e.dom.getParent(e.selection.getNode(),"details")).map((function(t){return function moveDown(e,t){var n=e.selection.getRng(),o=Tc.fromRangeStart(n);return!(e.getBody().lastChild!==t||!UT(t,o))&&(e.execCommand("InsertNewBlockAfter"),!0)}(e,t)})).getOr(!1):ee.from(e.dom.getParent(e.selection.getNode(),"summary")).bind((function(t){return ee.from(e.dom.getParent(t,"details")).map((function(n){return function moveUp(e,t,n){var o=e.selection.getRng(),i=Tc.fromRangeStart(o);return!(e.getBody().firstChild!==t||!VT(n,i))&&(e.execCommand("InsertNewBlockBefore"),!0)}(e,n,t)}))})).getOr(!1)},EO=function moveV$2(e,t){return TO(e,t)},OO={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},AO=function matchesEvent(e,t){return t.keyCode===e.keyCode&&t.shiftKey===e.shiftKey&&t.altKey===e.altKey&&t.ctrlKey===e.ctrlKey&&t.metaKey===e.metaKey},_O=function match$1(e,t){return be(function defaultPatterns(e){return ue(e,(function(e){return l(l({},OO),e)}))}(e),(function(e){return AO(e,t)?[e]:[]}))},DO=function matchDelayed(e,t){return be(function defaultDelayedPatterns(e){return ue(e,(function(e){return l(l({},OO),e)}))}(e),(function(e){return AO(e,t)?[e]:[]}))},RO=function action(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){return e.apply(null,n)}},NO=function execute(e,t){return pe(_O(e,t),(function(e){return e.action()}))},MO=function executeWithDelayedAction(e,t){return Ae(DO(e,t),(function(e){return e.action()}))},BO=function moveH$1(e,t){var n=t?Qc.Forwards:Qc.Backwards,o=e.selection.getRng();return uE(e,n,o,Mh,Bh,No).exists((function(t){return iE(e,t),!0}))},IO=function moveV$1(e,t){var n=t?1:-1,o=e.selection.getRng();return cE(e,n,o,Mh,Bh,No).exists((function(t){return iE(e,t),!0}))},PO=function moveToLineEndPoint(e,t){return lE(e,t,t?Bh:Mh)},LO=Jc([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),FO=l(l({},LO),{},{none:function none(e){return LO.none(e)}}),HO=function filterFirstLayer(e,t,n){return be(Xn(e),(function(e){return Ln(e,t)?n(e)?[e]:[]:filterFirstLayer(e,t,n)}))},$O=function cell(e,t){return function lookup$1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:J;return n(t)?ee.none():ie(e,un(t))?ee.some(t):vr(t,e.join(","),(function isRootOrUpperTable(e){return Ln(e,"table")||n(e)}))}(["td","th"],e,t)},zO=function cells(e){return function firstLayer(e,t){return HO(e,t,Q)}(e,"th,td")},VO=function table(e,t){return Cr(e,"table",t)},UO=function walk(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:Q,a=1===o;if(!a&&n<=0)return FO.first(e[0]);if(a&&n>=e.length-1)return FO.last(e[e.length-1]);var u=n+o,c=e[u];return i(c)?FO.middle(t,c):walk(e,t,u,o,i)},ZO=function detect(e,t){return VO(e,t).bind((function(t){var n=zO(t);return he(n,(function(t){return Hn(e,t)})).map((function(e){return{index:e,all:n}}))}))},WO=function getClosestCell(e,t,n,o,i){var a=ro(In.fromDom(n),"td,th,caption").map((function(e){return e.dom})),u=fe(function getCorners(e,t){return be(t,(function(t){var n=function deflate(e,t){return{left:e.left-t,top:e.top-t,right:e.right+2*t,bottom:e.bottom+2*t,width:e.width+t,height:e.height+t}}(Ku(t.getBoundingClientRect()),-1);return[{x:n.left,y:e(n),cell:t},{x:n.right,y:e(n),cell:t}]}))}(e,a),(function(e){return t(e,i)}));return function findClosestCorner(e,t,n){return me(e,(function(e,o){return e.fold((function(){return ee.some(o)}),(function(e){var i=Math.sqrt(Math.abs(e.x-t)+Math.abs(e.y-n)),a=Math.sqrt(Math.abs(o.x-t)+Math.abs(o.y-n));return ee.some(a<i?o:e)}))}),ee.none())}(u,o,i).map((function(e){return e.cell}))},jO=curry(WO,(function getBottomValue(e){return e.bottom}),(function isAbove(e,t){return e.y<t})),GO=curry(WO,(function getTopValue(e){return e.top}),(function isBelow(e,t){return e.y>t})),qO=function findClosestPositionInAboveCell(e,t){return Te(t.getClientRects()).bind((function(t){return jO(e,t.left,t.top)})).bind((function(e){return LT(function getLastLinePositions(e){return wd(e).map((function(t){return FT(e,t).positions.concat(t)})).getOr([])}(e),t)}))},KO=function findClosestPositionInBelowCell(e,t){return Ee(t.getClientRects()).bind((function(t){return GO(e,t.left,t.top)})).bind((function(e){return LT(function getFirstLinePositions(e){return Cd(e).map((function(t){return[t].concat(HT(e,t).positions)})).getOr([])}(e),t)}))},YO=function isAtTableCellLine(e,t,n){var o=e(t,n);return function startsWithWrapBreak(e){return e.breakType===_w.Wrap&&0===e.positions.length}(o)||!Eo(n.getNode())&&function startsWithBrBreak(e){return e.breakType===_w.Br&&1===e.positions.length}(o)?!function hasNextBreak(e,t,n){return n.breakAt.exists((function(n){return e(t,n).breakAt.isSome()}))}(e,t,o):o.breakAt.isNone()},XO=curry(YO,FT),JO=curry(YO,HT),QO=function navigateHorizontally(e,t,n,o){var i=e.selection.getRng(),a=t?1:-1;return!(!xf()||!function isCaretAtStartOrEndOfTable(e,t,n){var o=Tc.fromRangeStart(t);return vd(!e,n).exists((function(e){return e.isEqual(o)}))}(t,i,n))&&(Bk(a,e,n,!t,!1).each((function(t){iE(e,t)})),!0)},eA=function getTable(e,t){var n=t.getNode(e);return vo(n)?ee.some(n):ee.none()},tA=function moveCaret(e,t,n){var o=eA(!!t,n),i=!1===t;o.fold((function(){return iE(e,n.toRange())}),(function(o){return vd(i,e.getBody()).filter((function(e){return e.isEqual(n)})).fold((function(){return iE(e,n.toRange())}),(function(n){return function renderBlock(e,t,n){t.undoManager.transact((function(){var o=e?Mr:Nr,i=uO(t,In.fromDom(n),o);iE(t,i)}))}(t,e,o)}))}))},nA=function navigateVertically(e,t,n,o){var i=e.selection.getRng(),a=Tc.fromRangeStart(i),u=e.getBody();if(!t&&XO(o,a)){var c=function getClosestAbovePosition(e,t,n){return qO(t,n).orThunk((function(){return Te(n.getClientRects()).bind((function(n){return PT($T(e,Tc.before(t)),n.left)}))})).getOr(Tc.before(t))}(u,n,a);return tA(e,t,c),!0}if(t&&JO(o,a)){var s=function getClosestBelowPosition(e,t,n){return KO(t,n).orThunk((function(){return Te(n.getClientRects()).bind((function(n){return PT(zT(e,Tc.after(t)),n.left)}))})).getOr(Tc.after(t))}(u,n,a);return tA(e,t,s),!0}return!1},rA=function move$1(e,t,n){return ee.from(e.dom.getParent(e.selection.getNode(),"td,th")).bind((function(o){return ee.from(e.dom.getParent(o,"table")).map((function(i){return n(e,t,i,o)}))})).getOr(!1)},oA=function moveH(e,t){return rA(e,t,QO)},iA=function moveV(e,t){return rA(e,t,nA)},aA=function tabGo(e,t,n){return n.fold(ee.none,ee.none,(function(e,t){return function first(e){return hr(e,Up)}(t).map((function(e){return function getCellFirstCursorPosition(e){var t=yg.exact(e,0,e,0);return kg(t)}(e)}))}),(function(n){return e.execCommand("mceTableInsertRowAfter"),uA(e,t,n)}))},uA=function tabForward(e,t,n){return aA(e,t,function next(e,t,n){return ZO(e,n).fold((function(){return FO.none(e)}),(function(n){return UO(n.all,e,n.index,1,t)}))}(n,wr))},cA=function tabBackward(e,t,n){return aA(e,t,function prev(e,t,n){return ZO(e,n).fold((function(){return FO.none()}),(function(n){return UO(n.all,e,n.index,-1,t)}))}(n,wr))},sA=function handleTab(e,t){var n=["table","li","dl"],o=In.fromDom(e.getBody()),i=function isRoot(e){var t=un(e);return Hn(e,o)||ie(n,t)},a=e.selection.getRng(),u=In.fromDom(t?a.endContainer:a.startContainer);return $O(u,i).map((function(n){return VO(n,i).each((function(t){e.model.table.clearSelectedCells(t.dom)})),e.selection.collapse(!t),(t?uA:cA)(e,i,n).each((function(t){e.selection.setRng(t)})),!0})).getOr(!1)},lA=function setup$l(e,t){e.on("keydown",(function(n){n.isDefaultPrevented()||function executeKeydownOverride$4(e,t,n){var o=Wt.os.isMacOS()||Wt.os.isiOS();NO([{keyCode:tg.RIGHT,action:RO(bO,e,!0)},{keyCode:tg.LEFT,action:RO(bO,e,!1)},{keyCode:tg.UP,action:RO(yO,e,!1)},{keyCode:tg.DOWN,action:RO(yO,e,!0)}].concat(m(o?[{keyCode:tg.UP,action:RO(wO,e,!1),metaKey:!0,shiftKey:!0},{keyCode:tg.DOWN,action:RO(wO,e,!0),metaKey:!0,shiftKey:!0}]:[]),[{keyCode:tg.RIGHT,action:RO(oA,e,!0)},{keyCode:tg.LEFT,action:RO(oA,e,!1)},{keyCode:tg.UP,action:RO(iA,e,!1)},{keyCode:tg.DOWN,action:RO(iA,e,!0)},{keyCode:tg.UP,action:RO(iA,e,!1)},{keyCode:tg.UP,action:RO(EO,e,!1)},{keyCode:tg.DOWN,action:RO(EO,e,!0)},{keyCode:tg.RIGHT,action:RO(BO,e,!0)},{keyCode:tg.LEFT,action:RO(BO,e,!1)},{keyCode:tg.UP,action:RO(IO,e,!1)},{keyCode:tg.DOWN,action:RO(IO,e,!0)},{keyCode:tg.RIGHT,action:RO(hE,e,t,!0)},{keyCode:tg.LEFT,action:RO(hE,e,t,!1)},{keyCode:tg.RIGHT,ctrlKey:!o,altKey:o,action:RO(yE,e,t)},{keyCode:tg.LEFT,ctrlKey:!o,altKey:o,action:RO(CE,e,t)},{keyCode:tg.UP,action:RO(kO,e,!1)},{keyCode:tg.DOWN,action:RO(kO,e,!0)}]),n).each((function(e){n.preventDefault()}))}(e,t,n)}))},fA=function point(e,t){return{container:e,offset:t}},dA=gu.DOM,mA=function alwaysNext(e){return function(t){return e===t?-1:0}},gA=function textBefore(e,t,n){if(Co(e)&&t>=0)return ee.some(fA(e,t));var o=Gu(dA);return ee.from(o.backwards(e,t,mA(e),n)).map((function(e){return fA(e.container,e.container.data.length)}))},pA=function scanLeft(e,t,n){if(!Co(e))return ee.none();var o=e.data;if(t>=0&&t<=o.length)return ee.some(fA(e,t));var i=Gu(dA);return ee.from(i.backwards(e,t,mA(e),n)).bind((function(e){var o=e.container.data;return scanLeft(e.container,t+o.length,n)}))},hA=function scanRight(e,t,n){if(!Co(e))return ee.none();var o=e.data;if(t<=o.length)return ee.some(fA(e,t));var i=Gu(dA);return ee.from(i.forwards(e,t,mA(e),n)).bind((function(e){return scanRight(e.container,t-o.length,n)}))},vA=function repeatLeft(e,t,n,o,i){var a=Gu(e,function isBoundary(e){return function(t){return e.isBlock(t)||ie(["BR","IMG","HR","INPUT"],t.nodeName)||"false"===e.getContentEditable(t)}}(e));return ee.from(a.backwards(t,n,o,i))},bA=function getText(e){return ti(e.toString().replace(/\u00A0/g," "))},yA=function isWhitespace(e){return""!==e&&-1!==" \xa0\f\n\r\t\v".indexOf(e)},CA=function stripTrigger(e,t){return e.substring(t.length)},wA=function findStart(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(!function isValidTextRange(e){return e.collapsed&&Co(e.startContainer)}(t))return ee.none();var i={text:"",offset:0},a=e.getParent(t.startContainer,e.isBlock)||e.getRoot();return vA(e,t.startContainer,t.startOffset,(function findTriggerIndex(e,t,o){return i.text=o+i.text,i.offset+=t,function findTrigger(e,t,n){var o,i=n.charAt(0);for(o=t-1;o>=0;o--){var a=e.charAt(o);if(yA(a))return ee.none();if(i===a&&ot(e,n,o,t))break}return ee.some(o)}(i.text,i.offset,n).getOr(t)}),a).bind((function(e){var i=t.cloneRange();if(i.setStart(e.container,e.offset),i.setEnd(t.endContainer,t.endOffset),i.collapsed)return ee.none();var a=bA(i);return 0!==a.lastIndexOf(n)||CA(a,n).length<o?ee.none():ee.some({text:CA(a,n),range:i,trigger:n})}))},xA=function getContext(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return function detect$1(e){return Cr(e,Wp)}(In.fromDom(t.startContainer)).fold((function(){return wA(e,t,n,o)}),(function(t){var o=e.createRng();o.selectNode(t.dom);var i=bA(o);return ee.some({range:o,text:CA(i,n),trigger:n})}))},SA=function toLast(e){if(function isText$1(e){return 3===e.nodeType}(e))return fA(e,e.data.length);var t=e.childNodes;return t.length>0?toLast(t[t.length-1]):fA(e,t.length)},kA=function toLeaf(e,t){var n=e.childNodes;return n.length>0&&t<n.length?toLeaf(n[t],0):n.length>0&&function isElement(e){return 1===e.nodeType}(e)&&n.length===t?SA(n[n.length-1]):fA(e,t)},TA=function isStartOfWord(e){return function(t){var n=kA(t.startContainer,t.startOffset);return!function isPreviousCharContent(e,t){var n,o=null!==(n=e.getParent(t.container,e.isBlock))&&void 0!==n?n:e.getRoot();return vA(e,t.container,t.offset,(function(e,t){return 0===t?-1:t}),o).filter((function(e){var t=e.container.data.charAt(e.offset-1);return!yA(t)})).isSome()}(e,n)}},EA=function lookup(e,t){var n=t(),o=e.selection.getRng();return function getTriggerContext(e,t,n){return Ae(n.triggers,(function(n){return xA(e,t,n)}))}(e.dom,o,n).bind((function(n){return OA(e,t,n)}))},OA=function lookupWithContext(e,t,n){var o,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=t(),u=null!==(o=e.selection.getRng().startContainer.nodeValue)&&void 0!==o?o:"",c=fe(a.lookupByTrigger(n.trigger),(function(t){return n.text.length>=t.minChars&&t.matches.getOrThunk((function(){return TA(e.dom)}))(n.range,u,n.text)}));if(0===c.length)return ee.none();var s=Promise.all(ue(c,(function(e){return e.fetch(n.text,e.maxResults,i).then((function(t){return{matchText:n.text,items:t,columns:e.columns,onAction:e.onAction,highlightOn:e.highlightOn}}))})));return ee.some({lookupData:s,context:n})};!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(JT||(JT={}));var AA=function fold$1(e,t,n){return e.stype===JT.Error?t(e.serror):n(e.svalue)},_A=function svalue(e){return{stype:JT.Value,svalue:e}},DA=function serror(e){return{stype:JT.Error,serror:e}},RA=function toResult(e){return AA(e,Xc.error,Xc.value)},NA=_A,MA=function partition(e){var t=[],n=[];return ce(e,(function(e){AA(e,(function(e){return n.push(e)}),(function(e){return t.push(e)}))})),{values:t,errors:n}},BA=DA,IA=function bindError(e,t){return e.stype===JT.Error?t(e.serror):e},PA=function map(e,t){return e.stype===JT.Value?{stype:JT.Value,svalue:t(e.svalue)}:e},LA=function mapError(e,t){return e.stype===JT.Error?{stype:JT.Error,serror:t(e.serror)}:e},FA=AA,HA=function formatObj(e){return R(e)&&_e(e).length>100?" removed due to size":JSON.stringify(e,null,2)},$A=function nu(e,t){return BA([{path:e,getErrorInfo:t}])},zA=function chooseFrom(e,t,n,o){return He(n,o).fold((function(){return function missingBranch(e,t,n){return $A(e,(function(){return'The chosen schema: "'+n+'" did not exist in branches: '+HA(t)}))}(e,n,o)}),(function(n){return n.extract(e.concat(["branch: "+o]),t)}))},VA=function choose$1(e,t){return{extract:function extract(n,o){return He(o,e).fold((function(){return function missingKey(e,t){return $A(e,(function(){return'Choice schema did not contain choice key: "'+t+'"'}))}(n,e)}),(function(e){return zA(n,o,t,e)}))},toString:function toString(){return"chooseOn("+e+"). Possible values: "+_e(t)}}},UA=function baseMerge(e){return function(){if(0===arguments.length)throw new Error("Can't merge zero objects");for(var t={},n=0;n<arguments.length;n++){var o=n<0||arguments.length<=n?void 0:arguments[n];for(var i in o)$e(o,i)&&(t[i]=e(t[i],o[i]))}return t}},ZA=UA((function deep(e,t){return N(e)&&N(t)?ZA(e,t):t})),WA=(UA((function shallow(e,t){return t})),function defaulted$1(e){return function defaultedThunk(e){return{tag:"defaultedThunk",process:e}}(W(e))}),jA=function mergeErrors(e){return U(BA,ve)(e)},GA=function consolidateArr(e){var t=MA(e);return t.errors.length>0?jA(t.errors):NA(t.values)},qA=function fold(e,t,n){switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},KA=function value(e){return{extract:function extract(t,n){return IA(e(n),(function(e){return function custom(e,t){return $A(e,W(t))}(t,e)}))},toString:W("val")}},YA=KA(NA),XA=function requiredAccess(e,t,n,o){return He(t,n).fold((function(){return function missingRequired(e,t,n){return $A(e,(function(){return'Could not find valid *required* value for "'+t+'" in '+HA(n)}))}(e,n,t)}),o)},JA=function fallbackAccess(e,t,n,o){return o(He(e,t).getOrThunk((function(){return n(e)})))},QA=function extractField(e,t,n,o,i){var a=function bundle(e){return i.extract(t.concat([o]),e)},u=function bundleAsOption(e){return e.fold((function(){return NA(ee.none())}),(function(e){var n=i.extract(t.concat([o]),e);return PA(n,ee.some)}))};switch(e.tag){case"required":return XA(t,n,o,a);case"defaultedThunk":return JA(n,o,e.process,a);case"option":return function optionAccess(e,t,n){return n(He(e,t))}(n,o,u);case"defaultedOptionThunk":return function optionDefaultedAccess(e,t,n,o){return o(He(e,t).map((function(t){return!0===t?n(e):t})))}(n,o,e.process,u);case"mergeWithThunk":return JA(n,o,W({}),(function(t){var o=ZA(e.process(n),t);return a(o)}))}},e_=function objOf(e){return{extract:function extract(t,n){return function extractFields(e,t,n){var o,i={},a=[],u=g(n);try{for(u.s();!(o=u.n()).done;){var c=o.value;qA(c,(function(n,o,u,c){var s=QA(u,e,t,n,c);FA(s,(function(e){a.push.apply(a,m(e))}),(function(e){i[o]=e}))}),(function(e,n){i[e]=n(t)}))}}catch(s){u.e(s)}finally{u.f()}return a.length>0?BA(a):NA(i)}(t,n,e)},toString:function toString(){var t=ue(e,(function(e){return qA(e,(function(e,t,n,o){return e+" -> "+o.toString()}),(function(e,t){return"state("+e+")"}))}));return"obj{\n"+t.join("\n")+"}"}}},t_=function arrOf(e){return{extract:function extract(t,n){var o=ue(n,(function(n,o){return e.extract(t.concat(["["+o+"]"]),n)}));return GA(o)},toString:function toString(){return"array("+e.toString()+")"}}},n_=function asRaw(e,t,n){return RA(function extractValue(e,t,n){var o=t.extract([e],n);return LA(o,(function(e){return{input:n,errors:e}}))}(e,t,n))},r_=function formatError(e){return"Errors: \n"+function formatErrors(e){var t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:W("... (only showing first ten failures)")}]):e;return ue(t,(function(e){return"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()}))}(e.errors).join("\n")+"\n\nInput object: "+HA(e.input)},o_=function choose(e,t){return VA(e,Ne(t,e_))},i_=W(YA),a_=function typedValue(e,t){return KA((function(n){var o=typeof n;return e(n)?NA(n):BA("Expected type: ".concat(t," but got: ").concat(o))}))},u_=a_($,"number"),c_=a_(D,"string"),s_=a_(I,"boolean"),l_=a_(H,"function"),f_=function field$1(e,t,n,o){return{tag:"field",key:e,newKey:t,presence:n,prop:o}},d_=function customField$1(e,t){return{tag:"custom",newKey:e,instantiator:t}},m_=function validateEnum(e){return function valueOf(e){return KA((function(t){return e(t).fold(BA,NA)}))}((function(t){return ie(e,t)?Xc.value(t):Xc.error('Unsupported value: "'.concat(t,'", choose one of "').concat(e.join(", "),'".'))}))},g_=function requiredOf(e,t){return f_(e,e,{tag:"required",process:{}},t)},p_=function requiredString(e){return g_(e,c_)},h_=function requiredFunction(e){return g_(e,l_)},v_=function optionOf(e,t){return f_(e,e,{tag:"option",process:{}},t)},b_=function optionString(e){return v_(e,c_)},y_=function defaultedOf(e,t,n){return f_(e,e,WA(t),n)},C_=function defaultedNumber(e,t){return y_(e,t,u_)},w_=function defaultedStringEnum(e,t,n){return y_(e,t,m_(n))},x_=function defaultedBoolean(e,t){return y_(e,t,s_)},S_=function defaultedFunction(e,t){return y_(e,t,l_)},k_=p_("type"),T_=h_("fetch"),E_=h_("onAction"),O_=S_("onSetup",(function(){return V})),A_=b_("text"),__=b_("icon"),D_=b_("tooltip"),R_=b_("label"),N_=x_("active",!1),M_=x_("enabled",!0),B_=x_("primary",!1),I_=function defaultedType(e){return function defaultedString(e,t){return y_(e,t,c_)}("type",e)},P_=e_([k_,p_("trigger"),C_("minChars",1),function defaultedColumns(e){return function defaulted(e,t){return f_(e,e,WA(t),i_())}("columns",e)}(1),C_("maxResults",10),function optionFunction(e){return v_(e,l_)}("matches"),T_,E_,function defaultedArrayOf(e,t,n){return y_(e,t,t_(n))}("highlightOn",[],c_)]),L_=[M_,D_,__,A_,O_],F_=[N_].concat(L_),H_=[S_("predicate",J),w_("scope","node",["node","editor"]),w_("position","selection",["node","selection","line"])],$_=L_.concat([I_("contextformbutton"),B_,E_,d_("original",j)]),z_=F_.concat([I_("contextformbutton"),B_,E_,d_("original",j)]),V_=L_.concat([I_("contextformbutton")]),U_=F_.concat([I_("contextformtogglebutton")]),Z_=o_("type",{contextformbutton:$_,contextformtogglebutton:z_});e_([I_("contextform"),S_("initValue",W("")),R_,function requiredArrayOf(e,t){return f_(e,e,{tag:"required",process:{}},t_(t))}("commands",Z_),v_("launch",o_("type",{contextformbutton:V_,contextformtogglebutton:U_}))].concat(H_));var W_,j_=function register$2(e){var t=e.ui.registry.getAll().popups,n=Ne(t,(function(e){return function createAutocompleter(e){return n_("Autocompleter",P_,l({trigger:e.ch},e))}(e).fold((function(e){throw new Error(r_(e))}),j)})),o=Ve(Le(n,(function(e){return e.trigger}))),i=Fe(n);return{dataset:n,triggers:o,lookupByTrigger:function lookupByTrigger(e){return fe(i,(function(t){return t.trigger===e}))}}},G_=function setup$k(e){var t=ku(),n=vu(!1),o=t.isSet,i=function cancelIfNecessary(){o()&&(!function removeAutocompleterDecoration(e){Vx(e).autocompleter.removeDecoration()}(e),function fireAutocompleterEnd(e){e.dispatch("AutocompleterEnd")}(e),n.set(!1),t.clear())},a=function commenceIfNecessary(n){o()||(!function addAutocompleterDecoration(e,t){Vx(e).autocompleter.addDecoration(t)}(e,n.range),t.set({trigger:n.trigger,matchLength:n.text.length}))},u=Xe((function(){return j_(e)})),c=function load(o){(function doLookup(n){return t.get().map((function(t){return xA(e.dom,e.selection.getRng(),t.trigger).bind((function(t){return OA(e,u,t,n)}))})).getOrThunk((function(){return EA(e,u)}))})(o).fold(i,(function(o){a(o.context),o.lookupData.then((function(a){t.get().map((function(u){var c=o.context;u.trigger===c.trigger&&(c.text.length-u.matchLength>=10?i():(t.set(l(l({},u),{},{matchLength:c.text.length})),n.get()?function fireAutocompleterUpdate(e,t){e.dispatch("AutocompleterUpdate",t)}(e,{lookupData:a}):(n.set(!0),function fireAutocompleterStart(e,t){e.dispatch("AutocompleterStart",t)}(e,{lookupData:a}))))}))}))}))};e.addCommand("mceAutocompleterReload",(function(e,t){var n=R(t)?t.fetchOptions:{};c(n)})),e.addCommand("mceAutocompleterClose",i),function setupEditorInput(e,t){var n=Eu(t.load,50);e.on("keypress compositionend",(function(e){27!==e.which&&n.throttle()})),e.on("keydown",(function(e){var o=e.which;8===o?n.throttle():27===o&&t.cancelIfNecessary()})),e.on("remove",n.cancel)}(e,{cancelIfNecessary:i,load:c})},q_=Ft().browser,K_=q_.isSafari(),Y_=function emptyNodeContents(e){return Jo(In.fromDom(e))},X_=function isEntireNodeSelected(e,t){var n;return 0===e.startOffset&&e.endOffset===(null===(n=t.textContent)||void 0===n?void 0:n.length)},J_=function getParentDetailsElementAtPos(e,t){return ee.from(e.getParent(t.container(),"details"))},Q_=function isInDetailsElement(e,t){return J_(e,t).isSome()},eD=function isCaretAtStartOfSummary(e,t){return t.startSummary.exists((function(t){return function isCaretInTheBeginningOf(e,t){return Cd(t).exists((function(t){return t.isEqual(e)}))}(e,t)}))},tD=function isCaretAtEndOfSummary(e,t){return t.startSummary.exists((function(t){return function isCaretInTheEndOf(e,t){return wd(t).exists((function(n){return Eo(n.getNode())&&yd(t,n).exists((function(t){return t.isEqual(e)}))||n.isEqual(e)}))}(e,t)}))},nD=function setCaretToPosition(e,t){var n=t.getNode();P(n)||e.selection.setCursorLocation(n,t.offset())},rD=function moveCaretToDetailsPos(e,t,n){var o=e.dom.getParent(t.container(),"details");if(o&&!o.open){var i=e.dom.select("summary",o)[0];if(i)(n?Cd(i):wd(i)).each((function(t){return nD(e,t)}))}else nD(e,t)},oD=function shouldPreventDeleteIntoDetails(e,t,n){var o=e.dom,i=e.selection,a=e.getBody();if("character"===n){var u=Tc.fromRangeStart(i.getRng()),c=o.getParent(u.container(),o.isBlock),s=J_(o,u),l=c&&o.isEmpty(c),d=B(null===c||void 0===c?void 0:c.previousSibling),m=B(null===c||void 0===c?void 0:c.nextSibling);if(l)if(t?m:d)if(pd(!t,a,u).exists((function(e){return Q_(o,e)&&!Xt(s,J_(o,e))})))return!0;return pd(t,a,u).fold(J,(function(n){var i=J_(o,n);if(Q_(o,n)&&!Xt(s,i)){if(t||rD(e,n,!1),c&&l){if(t&&d)return!0;if(!t&&m)return!0;rD(e,n,t),e.dom.remove(c)}return!0}return!1}))}return!1},iD=function shouldPreventDeleteSummaryAction(e,t,n,o){var i=e.selection.getRng(),a=Tc.fromRangeStart(i),u=e.getBody();return"selection"===o?function isPartialDelete(e,t){var n=t.startSummary.exists((function containsStart(t){return t.contains(e.startContainer)})),o=t.startSummary.exists((function containsEnd(t){return t.contains(e.endContainer)})),i=t.startDetails.forall((function(e){return t.endDetails.forall((function(t){return e!==t}))}));return(n||o)&&!(n&&o)||i}(i,t):n?tD(a,t)||function isCaretInLastPositionInBody(e,t,n){return n.startDetails.exists((function(n){return bd(e,t).forall((function(e){return!n.contains(e.container())}))}))}(u,a,t):eD(a,t)||function isCaretInFirstPositionInBody(e,t){return t.startDetails.exists((function(n){return yd(n,e).forall((function(n){return t.startSummary.exists((function(t){return!t.contains(e.container())&&t.contains(n.container())}))}))}))}(a,t)},aD=function shouldPreventDeleteAction(e,t,n){return function getDetailsElements(e,t){var n=ee.from(e.getParent(t.startContainer,"details")),o=ee.from(e.getParent(t.endContainer,"details"));if(n.isSome()||o.isSome()){var i=n.bind((function(t){return ee.from(e.select("summary",t)[0])}));return ee.some({startSummary:i,startDetails:n,endDetails:o})}return ee.none()}(e.dom,e.selection.getRng()).fold((function(){return oD(e,t,n)}),(function(o){return iD(e,o,t,n)||oD(e,t,n)}))},uD=function backspaceDelete(e,t,n){return aD(e,t,n)||K_&&function handleDeleteActionSafari(e,t,n){var o=e.selection,i=o.getNode(),a=o.getRng(),u=Tc.fromRangeStart(a);return!!Io(i)&&("selection"===n&&X_(a,i)||Zv(t,u,i)?Y_(i):e.undoManager.transact((function(){var a=o.getSel(),u=null!==a&&void 0!==a?a:{},c=u.anchorNode,s=u.anchorOffset,l=u.focusNode,d=u.focusOffset,m=function applySelection(){F(c)&&F(s)&&F(l)&&F(d)&&(null===a||void 0===a||a.setBaseAndExtent(c,s,l,d))},g=function appendAllChildNodes(e,t){ce(e.childNodes,(function(e){Qd(e)&&t.appendChild(e)}))},p=e.dom.create("span",{"data-mce-bogus":"1"});g(i,p),i.appendChild(p),m(),"word"!==n&&"line"!==n||null===a||void 0===a||a.modify("extend",t?"right":"left",n),!o.isCollapsed()&&X_(o.getRng(),p)?Y_(i):(e.execCommand(t?"ForwardDelete":"Delete"),function updateSelection(){c=null===a||void 0===a?void 0:a.anchorNode,s=null===a||void 0===a?void 0:a.anchorOffset,l=null===a||void 0===a?void 0:a.focusNode,d=null===a||void 0===a?void 0:a.focusOffset}(),g(p,i),m()),e.dom.remove(p)})),!0)}(e,t,n)?ee.some(V):ee.none()},cD=function createAndFireInputEvent(e){return function(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=t.getBody(),a={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:i,currentTarget:i,eventPhase:Event.AT_TARGET,originalTarget:i,explicitOriginalTarget:i,isTrusted:!1,srcElement:i,cancelable:!1,preventDefault:V,inputType:n},u=Ya(new InputEvent(e));return t.dispatch(e,l(l(l({},u),a),o))}},sD=cD("input"),lD=cD("beforeinput"),fD=Ft(),dD=fD.os,mD=dD.isMacOS()||dD.isiOS(),gD=fD.browser,pD=gD.isFirefox(),hD=function setup$j(e,t){var n=!1;e.on("keydown",(function(o){n=o.keyCode===tg.BACKSPACE,o.isDefaultPrevented()||function executeKeydownOverride$3(e,t,n){var o=n.keyCode===tg.BACKSPACE?"deleteContentBackward":"deleteContentForward",i=e.selection.isCollapsed(),a=i?"character":"selection",u=function getModifiedGranularity(e){return i?e?"word":"line":"selection"};MO([{keyCode:tg.BACKSPACE,action:RO(YE,e)},{keyCode:tg.BACKSPACE,action:RO(Xk,e,!1)},{keyCode:tg.DELETE,action:RO(Xk,e,!0)},{keyCode:tg.BACKSPACE,action:RO($k,e,!1)},{keyCode:tg.DELETE,action:RO($k,e,!0)},{keyCode:tg.BACKSPACE,action:RO(TE,e,t,!1)},{keyCode:tg.DELETE,action:RO(TE,e,t,!0)},{keyCode:tg.BACKSPACE,action:RO(Tb,e,!1)},{keyCode:tg.DELETE,action:RO(Tb,e,!0)},{keyCode:tg.BACKSPACE,action:RO(uD,e,!1,a)},{keyCode:tg.DELETE,action:RO(uD,e,!0,a)}].concat(m(mD?[{keyCode:tg.BACKSPACE,altKey:!0,action:RO(uD,e,!1,u(!0))},{keyCode:tg.DELETE,altKey:!0,action:RO(uD,e,!0,u(!0))},{keyCode:tg.BACKSPACE,metaKey:!0,action:RO(uD,e,!1,u(!1))}]:[{keyCode:tg.BACKSPACE,ctrlKey:!0,action:RO(uD,e,!1,u(!0))},{keyCode:tg.DELETE,ctrlKey:!0,action:RO(uD,e,!0,u(!0))}]),[{keyCode:tg.BACKSPACE,action:RO(Jk,e,!1)},{keyCode:tg.DELETE,action:RO(Jk,e,!0)},{keyCode:tg.BACKSPACE,action:RO(VE,e,!1)},{keyCode:tg.DELETE,action:RO(VE,e,!0)},{keyCode:tg.BACKSPACE,action:RO(Mk,e,!1)},{keyCode:tg.DELETE,action:RO(Mk,e,!0)},{keyCode:tg.BACKSPACE,action:RO(_k,e,!1)},{keyCode:tg.DELETE,action:RO(_k,e,!0)},{keyCode:tg.BACKSPACE,action:RO(LE,e,!1)},{keyCode:tg.DELETE,action:RO(LE,e,!0)}]),n).filter((function(t){return e.selection.isEditable()})).each((function(t){n.preventDefault(),lD(e,o).isDefaultPrevented()||(t(),sD(e,o))}))}(e,t,o)})),e.on("keyup",(function(t){t.isDefaultPrevented()||function executeKeyupOverride(e,t,n){NO([{keyCode:tg.BACKSPACE,action:RO(Yk,e)},{keyCode:tg.DELETE,action:RO(Yk,e)}].concat(m(mD?[{keyCode:tg.BACKSPACE,altKey:!0,action:RO($E,e)},{keyCode:tg.DELETE,altKey:!0,action:RO($E,e)}].concat(m(n?[{keyCode:pD?224:91,action:RO($E,e)}]:[])):[{keyCode:tg.BACKSPACE,ctrlKey:!0,action:RO($E,e)},{keyCode:tg.DELETE,ctrlKey:!0,action:RO($E,e)}])),t)}(e,t,n),n=!1}))},vD=function moveToCaretPosition(e,t){var n=e.dom,o=e.schema.getMoveCaretBeforeOnEnterElements();if(t){if(/^(LI|DT|DD)$/.test(t.nodeName)){var i=function firstNonWhiteSpaceNodeSibling(e){for(;e;){if(co(e)||Co(e)&&e.data&&/[\r\n\s]/.test(e.data))return e;e=e.nextSibling}return null}(t.firstChild);i&&/^(UL|OL|DL)$/.test(i.nodeName)&&t.insertBefore(n.doc.createTextNode(Lo),t.firstChild)}var a=n.createRng();if(t.normalize(),t.hasChildNodes()){for(var u,c=new io(t,t),s=t;u=c.current();){if(Co(u)){a.setStart(u,0),a.setEnd(u,0);break}if(o[u.nodeName.toLowerCase()]){a.setStartBefore(u),a.setEndBefore(u);break}s=u,u=c.next()}u||(a.setStart(s,0),a.setEnd(s,0))}else Eo(t)?t.nextSibling&&n.isBlock(t.nextSibling)?(a.setStartBefore(t),a.setEndBefore(t)):(a.setStartAfter(t),a.setEndAfter(t)):(a.setStart(t,0),a.setEnd(t,0));e.selection.setRng(a),ap(e,a)}},bD=function getEditableRoot(e,t){for(var n,o=e.getRoot(),i=t;i!==o&&i&&"false"!==e.getContentEditable(i);){if("true"===e.getContentEditable(i)){n=i;break}i=i.parentNode}return i!==o?n:o},yD=function getParentBlock$1(e){return ee.from(e.dom.getParent(e.selection.getStart(!0),e.dom.isBlock))},CD=function emptyBlock(e){e.innerHTML='<br data-mce-bogus="1">'},wD=function setForcedBlockAttrs(e,t){xs(e).toLowerCase()===t.tagName.toLowerCase()&&function applyAttributes(e,t,n){var o=e.dom;ee.from(n.style).map(o.parseStyle).each((function(e){var n=Dr(In.fromDom(t)),i=l(l({},n),e);o.setStyles(t,i)}));var i=ee.from(n.class).map((function(e){return e.split(/\s+/)})),a=ee.from(t.className).map((function(e){return fe(e.split(/\s+/),(function(e){return""!==e}))}));Jt(i,a,(function(e,n){var i=fe(n,(function(t){return!ie(e,t)})),a=[].concat(m(e),m(i));o.setAttrib(t,"class",a.join(" "))}));var u=["style","class"],c=Pe(n,(function(e,t){return!ie(u,t)}));o.setAttribs(t,c)}(e,t,Ss(e))},xD=function createNewBlock(e,t,n,o){var i,a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],u=arguments.length>5?arguments[5]:void 0,c=arguments.length>6?arguments[6]:void 0,s=e.dom,l=e.schema,d=xs(e),m=n?n.nodeName.toUpperCase():"",g=t,p=l.getTextInlineElements(),h=i=u||"TABLE"===m||"HR"===m?s.create(u||d,c||{}):n.cloneNode(!1);if(a){do{if(p[g.nodeName]){if(Sd(g)||Ld(g))continue;var v=g.cloneNode(!1);s.setAttrib(v,"id",""),i.hasChildNodes()?(v.appendChild(i.firstChild),i.appendChild(v)):(h=v,i.appendChild(v))}}while((g=g.parentNode)&&g!==o)}else s.setAttrib(i,"style",null),s.setAttrib(i,"class",null);return wD(e,i),CD(h),i},SD=function isLastEmptyBlockInDetails(e,t,n){return!t&&n.nodeName.toLowerCase()===xs(e)&&e.dom.isEmpty(n)&&function isAtDetailsEdge(e,t,n){for(var o=t;o&&o!==e&&B(o.nextSibling);){var i=o.parentElement;if(!i||!n(i))return Bo(i);o=i}return!1}(e.getBody(),n,(function(t){return $e(e.schema.getTextBlockElements(),t.nodeName.toLowerCase())}))},kD=function insertNewLine(e,t,n){var o,i,a,u=t(xs(e)),c=function getDetailsRoot(e,t){return e.dom.getParent(t,Bo)}(e,n);c&&(e.dom.insertAfter(u,c),vD(e,u),(null!==(a=null===(i=null===(o=n.parentElement)||void 0===o?void 0:o.childNodes)||void 0===i?void 0:i.length)&&void 0!==a?a:0)>1&&e.dom.remove(n))},TD=function hasParent(e,t){var n=null===e||void 0===e?void 0:e.parentNode;return F(n)&&n.nodeName===t},ED=function isListBlock(e){return F(e)&&/^(OL|UL|LI)$/.test(e.nodeName)},OD=function isListItem(e){return F(e)&&/^(LI|DT|DD)$/.test(e.nodeName)},AD=function getContainerBlock(e){var t=e.parentNode;return OD(t)?t:e},_D=function isFirstOrLastLi(e,t,n){for(var o=e[n?"firstChild":"lastChild"];o&&!co(o);)o=o[n?"nextSibling":"previousSibling"];return o===t},DD=function getStyles(e){return me(Le(Dr(In.fromDom(e)),(function(e,t){return"".concat(t,": ").concat(e,";")})),(function(e,t){return e+t}),"")},RD=function insert$4(e,t,n,o,i){var a=e.dom,u=e.selection.getRng(),c=n.parentNode;if(n!==e.getBody()&&c){(function isNestedList(e){return ED(e)&&ED(e.parentNode)})(n)&&(i="LI");var s=OD(o)?DD(o):void 0,l=OD(o)&&s?t(i,{style:DD(o)}):t(i);if(_D(n,o,!0)&&_D(n,o,!1))if(TD(n,"LI")){var d=AD(n);a.insertAfter(l,d),!function isFirstChild(e){var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e}(n)?a.remove(n):a.remove(d)}else a.replace(l,n);else if(_D(n,o,!0))TD(n,"LI")?(a.insertAfter(l,AD(n)),l.appendChild(a.doc.createTextNode(" ")),l.appendChild(n)):c.insertBefore(l,n),a.remove(o);else if(_D(n,o,!1))a.insertAfter(l,AD(n)),a.remove(o);else{n=AD(n);var m=u.cloneRange();m.setStartAfter(o),m.setEndAfter(n);var g=m.extractContents();if("LI"===i&&function hasFirstChild(e,t){return e.firstChild&&e.firstChild.nodeName===t}(g,"LI")){var p=fe(ue(l.children,In.fromDom),q(pn("br")));l=g.firstChild,a.insertAfter(g,n),ce(p,(function(e){return Br(In.fromDom(l),e)})),s&&l.setAttribute("style",s)}else a.insertAfter(g,n),a.insertAfter(l,n);a.remove(o)}vD(e,l)}},ND=function trimZwsp(e){ce(no(In.fromDom(e),dn),(function(e){var t=e.dom;t.nodeValue=ti(t.data)}))},MD=function isEmptyAnchor(e,t){return t&&"A"===t.nodeName&&e.isEmpty(t)},BD=function containerAndSiblingName(e,t){return e.nodeName===t||e.previousSibling&&e.previousSibling.nodeName===t},ID=function canSplitBlock(e,t){return F(t)&&e.isBlock(t)&&!/^(TD|TH|CAPTION|FORM)$/.test(t.nodeName)&&!/^(fixed|absolute)/i.test(t.style.position)&&e.isEditable(t.parentNode)&&"false"!==e.getContentEditable(t)},PD=function normalizeZwspOffset(e,t,n){return Co(t)?e?1===n&&t.data.charAt(n-1)===Qo?0:n:n===t.data.length-1&&t.data.charAt(n)===Qo?t.data.length:n:n},LD={insert:function insert$3(e,t){var n,o,i,a,u=!1,c=e.dom,s=e.schema.getNonEmptyElements(),l=e.selection.getRng(),d=xs(e),m=In.fromDom(l.startContainer),g=Jn(m,l.startOffset),p=g.exists((function(e){return ln(e)&&!wr(e)})),h=l.collapsed&&p,v=function createNewBlock$1(t,o){return xD(e,n,S,x,Os(e),t,o)},b=function isCaretAtStartOrEndOfBlock(e){var t=PD(e,n,o);if(Co(n)&&(e?t>0:t<n.data.length))return!1;if(n.parentNode===S&&u&&!e)return!0;if(e&&co(n)&&n===S.firstChild)return!0;if(BD(n,"TABLE")||BD(n,"HR"))return u&&!e||!u&&e;var i,a=new io(n,S);for(Co(n)&&(e&&0===t?a.prev():e||t!==n.data.length||a.next());i=a.current();){if(co(i)){if(!i.getAttribute("data-mce-bogus")){var c=i.nodeName.toLowerCase();if(s[c]&&"br"!==c)return!1}}else if(Co(i)&&!Oi(i.data))return!1;e?a.prev():a.next()}return!0},y=function insertNewBlockAfter(){var t;return t=/^(H[1-6]|PRE|FIGURE)$/.test(i)&&"HGROUP"!==k?v(d):v(),function shouldEndContainer(e,t){var n=As(e);return!L(t)&&(D(n)?ie(Kt.explode(n),t.nodeName.toLowerCase()):n)}(e,a)&&ID(c,a)&&c.isEmpty(S,void 0,{includeZwsp:!0})?t=c.split(a,S):c.insertAfter(t,S),vD(e,t),t};Bg(c,l).each((function(e){l.setStart(e.startContainer,e.startOffset),l.setEnd(e.endContainer,e.endOffset)})),n=l.startContainer,o=l.startOffset;var C=!(!t||!t.shiftKey),w=!(!t||!t.ctrlKey);co(n)&&n.hasChildNodes()&&!h&&(u=o>n.childNodes.length-1,n=n.childNodes[Math.min(o,n.childNodes.length-1)]||n,o=u&&Co(n)?n.data.length:0);var x=bD(c,n);if(x&&!function isWithinNonEditableList(e,t){var n=e.dom.getParent(t,"ol,ul,dl");return null!==n&&"false"===e.dom.getContentEditableParent(n)}(e,n)){C||(n=function wrapSelfAndSiblingsInDefaultBlock(e,t,n,o,i){var a,u,c=e.dom,s=null!==(a=bD(c,o))&&void 0!==a?a:c.getRoot(),l=c.getParent(o,c.isBlock);if(!l||!ID(c,l)){if(!(l=l||s).hasChildNodes()){var d=c.create(t);return wD(e,d),l.appendChild(d),n.setStart(d,0),n.setEnd(d,0),d}for(var m,g=o;g&&g.parentNode!==l;)g=g.parentNode;for(;g&&!c.isBlock(g);)m=g,g=g.previousSibling;var p=null===(u=null===m||void 0===m?void 0:m.parentElement)||void 0===u?void 0:u.nodeName;if(m&&p&&e.schema.isValidChild(p,t.toLowerCase())){var h=m.parentNode,v=c.create(t);for(wD(e,v),h.insertBefore(v,m),g=m;g&&!c.isBlock(g);){var b=g.nextSibling;v.appendChild(g),g=b}n.setStart(o,i),n.setEnd(o,i)}}return o}(e,d,l,n,o));var S=c.getParent(n,c.isBlock)||c.getRoot();a=F(null===S||void 0===S?void 0:S.parentNode)?c.getParent(S.parentNode,c.isBlock):null,i=S?S.nodeName.toUpperCase():"";var k=a?a.nodeName.toUpperCase():"";if("LI"===k&&!w){S=a,a=a.parentNode,i=k}if(co(a)&&SD(e,C,S))return kD(e,v,S);if(/^(LI|DT|DD)$/.test(i)&&co(a)&&c.isEmpty(S))RD(e,v,a,S,d);else if(h||S!==e.getBody()&&ID(c,S)){var T,E=S.parentNode;if(h)T=v(d),g.fold((function(){Ir(m,In.fromDom(T))}),(function(e){Nr(e,In.fromDom(T))})),e.selection.setCursorLocation(T,0);else if(oi(S))T=di(S),c.isEmpty(S)&&CD(S),wD(e,T),vD(e,T);else if(b(!1))T=y();else if(b(!0)&&E){T=E.insertBefore(v(),S);var O=function hasChildNodes(e){return e.dom.hasChildNodes()}(In.fromDom(l.startContainer))&&l.collapsed;vD(e,BD(S,"HR")||O?T:S)}else{var A=function includeZwspInRange(e){var t=e.cloneRange();return t.setStart(e.startContainer,PD(!0,e.startContainer,e.startOffset)),t.setEnd(e.endContainer,PD(!1,e.endContainer,e.endOffset)),t}(l).cloneRange();A.setEndAfter(S);var R=A.extractContents();ND(R),function trimLeadingLineBreaks(e){var t=e;do{Co(t)&&(t.data=t.data.replace(/^[\r\n]+/,"")),t=t.firstChild}while(t)}(R),T=R.firstChild,c.insertAfter(R,S),function trimInlineElementsOnLeftSideOfBlock(e,t,n){var o,i=[];if(n){for(var a=n;a=a.firstChild;){if(e.isBlock(a))return;co(a)&&!t[a.nodeName.toLowerCase()]&&i.push(a)}for(var u=i.length;u--;)(!(a=i[u]).hasChildNodes()||a.firstChild===a.lastChild&&""===(null===(o=a.firstChild)||void 0===o?void 0:o.nodeValue)||MD(e,a))&&e.remove(a)}}(c,s,T),function addBrToBlockIfNeeded(e,t){t.normalize();var n=t.lastChild;(!n||co(n)&&/^(left|right)$/gi.test(e.getStyle(n,"float",!0)))&&e.add(t,"br")}(c,S),c.isEmpty(S)&&CD(S),T.normalize(),c.isEmpty(T)?(c.remove(T),y()):(wD(e,T),vD(e,T))}c.setAttrib(T,"id",""),e.dispatch("NewBlock",{newBlock:T})}}},fakeEventName:"insertParagraph"},FD=function moveSelectionToBr(e,t,n){var o=e.dom.createRng();n?(o.setStartBefore(t),o.setEndBefore(t)):(o.setStartAfter(t),o.setEndAfter(t)),e.selection.setRng(o),ap(e,o)},HD=function insertBrAtCaret(e,t){var n,o=e.selection,i=e.dom,a=o.getRng(),u=!1;Bg(i,a).each((function(e){a.setStart(e.startContainer,e.startOffset),a.setEnd(e.endContainer,e.endOffset)}));var c=a.startOffset,s=a.startContainer;if(co(s)&&s.hasChildNodes()){var l=c>s.childNodes.length-1;s=s.childNodes[Math.min(c,s.childNodes.length-1)]||s,c=l&&Co(s)?s.data.length:0}var d=i.getParent(s,i.isBlock),m=d&&d.parentNode?i.getParent(d.parentNode,i.isBlock):null,g=m?m.nodeName.toUpperCase():"",p=!(!t||!t.ctrlKey);"LI"!==g||p||(d=m),Co(s)&&c>=s.data.length&&(function hasRightSideContent(e,t,n){for(var o,i=new io(t,n),a=e.getNonEmptyElements();o=i.next();)if(a[o.nodeName.toLowerCase()]||Co(o)&&o.length>0)return!0;return!1}(e.schema,s,d||i.getRoot())||(n=i.create("br"),a.insertNode(n),a.setStartAfter(n),a.setEndAfter(n),u=!0)),n=i.create("br"),Oc(i,a,n),FD(e,n,u),e.undoManager.add()},$D=function insertBrBefore(e,t){var n=In.fromTag("br");Nr(In.fromDom(t),n),e.undoManager.add()},zD=function insertBrAfter(e,t){VD(e.getBody(),t)||Mr(In.fromDom(t),In.fromTag("br"));var n=In.fromTag("br");Mr(In.fromDom(t),n),FD(e,n.dom,!1),e.undoManager.add()},VD=function hasBrAfter(e,t){return!!function isBeforeBr(e){return Eo(e.getNode())}(Tc.after(t))||bd(e,Tc.after(t)).map((function(e){return Eo(e.getNode())})).getOr(!1)},UD=function isAnchorLink(e){return e&&"A"===e.nodeName&&"href"in e},ZD=function isInsideAnchor(e){return e.fold(J,UD,UD,J)},WD=function insertBrOutsideAnchor(e,t){t.fold(V,curry($D,e),curry(zD,e),V)},jD={insert:function insert$2(e,t){var n=function readInlineAnchorLocation(e){var t=curry(Mv,e),n=Tc.fromRangeStart(e.selection.getRng());return yT(t,e.getBody(),n).filter(ZD)}(e);n.isSome()?n.each(curry(WD,e)):HD(e,t)},fakeEventName:"insertLineBreak"},GD=function matchesSelector(e,t){return yD(e).filter((function(e){return t.length>0&&Ln(In.fromDom(e),t)})).isSome()},qD=Jc([{br:[]},{block:[]},{none:[]}]),KD=function shouldBlockNewLine(e,t){return function shouldBlockNewLine$1(e){return GD(e,Es(e))}(e)},YD=function inListBlock(e){return function(t,n){return function isListItemParentBlock(e){return yD(e).filter((function(e){return jo(In.fromDom(e))})).isSome()}(t)===e}},XD=function inBlock(e,t){return function(n,o){var i=function getParentBlockName(e){return yD(e).fold(W(""),(function(e){return e.nodeName.toUpperCase()}))}(n)===e.toUpperCase();return i===t}},JD=function inCefBlock(e){var t=bD(e.dom,e.selection.getStart());return L(t)},QD=function inPreBlock(e){return XD("pre",e)},eR=function inSummaryBlock(){return XD("summary",!0)},tR=function shouldPutBrInPre(e){return function(t,n){return ws(t)===e}},nR=function inBrContext(e,t){return function shouldInsertBr(e){return GD(e,Ts(e))}(e)},rR=function hasShiftKey(e,t){return t},oR=function canInsertIntoEditableRoot(e){var t=xs(e),n=bD(e.dom,e.selection.getStart());return F(n)&&e.schema.isValidChild(n.nodeName,t)},iR=function isInRootWithEmptyOrCEF(e){var t=e.selection.getRng(),n=In.fromDom(t.startContainer),o=Jn(n,t.startOffset).map((function(e){return ln(e)&&!wr(e)}));return t.collapsed&&o.getOr(!0)},aR=function match(e,t){return function(n,o){return me(e,(function(e,t){return e&&t(n,o)}),!0)?ee.some(t):ee.none()}},uR=function insertBreak(e,t,n){if((t.selection.isCollapsed()||function execEditorDeleteCommand(e){e.execCommand("delete")}(t),F(n))&&lD(t,e.fakeEventName).isDefaultPrevented())return;e.insert(t,n),F(n)&&sD(t,e.fakeEventName)},cR=function insert$1(e,t){var n=function br(){return uR(jD,e,t)},o=function block(){return uR(LD,e,t)},i=function getAction(e,t){return sT([aR([KD],qD.none()),aR([QD(!0),JD],qD.none()),aR([eR()],qD.br()),aR([QD(!0),tR(!1),rR],qD.br()),aR([QD(!0),tR(!1)],qD.block()),aR([QD(!0),tR(!0),rR],qD.block()),aR([QD(!0),tR(!0)],qD.br()),aR([YD(!0),rR],qD.br()),aR([YD(!0)],qD.block()),aR([nR],qD.br()),aR([rR],qD.br()),aR([oR],qD.block()),aR([iR],qD.block())],[e,!(!t||!t.shiftKey)]).getOr(qD.none())}(e,t);switch(ks(e)){case"linebreak":i.fold(n,n,V);break;case"block":i.fold(o,o,V);break;case"invert":i.fold(o,n,V);break;default:i.fold(n,o,V)}},sR=Ft(),lR=sR.os.isiOS()&&sR.browser.isSafari(),fR=function handleEnterKeyEvent(e,t){t.isDefaultPrevented()||(t.preventDefault(),function endTypingLevelIgnoreLocks(e){e.typing&&(e.typing=!1,e.add())}(e.undoManager),e.undoManager.transact((function(){cR(e,t)})))},dR=function setup$i(e){var t=ee.none();e.on("keydown",(function(n){n.keyCode===tg.ENTER&&(lR&&function isCaretAfterKoreanCharacter(e){if(!e.collapsed)return!1;var t=e.startContainer;if(Co(t)){var n=t.data.charAt(e.startOffset-1);return/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/.test(n)}return!1}(e.selection.getRng())?function iOSSafariKeydownOverride(e){t=ee.some(e.selection.getBookmark()),e.undoManager.add()}(e):fR(e,n))})),e.on("keyup",(function(n){n.keyCode===tg.ENTER&&t.each((function(){return function iOSSafariKeyupOverride(e,n){e.undoManager.undo(),t.fold(V,(function(t){return e.selection.moveToBookmark(t)})),fR(e,n),t=ee.none()}(e,n)}))}))},mR=function setup$h(e,t){e.on("keydown",(function(n){n.isDefaultPrevented()||function executeKeydownOverride$2(e,t,n){var o=Wt.os.isMacOS()||Wt.os.isiOS();NO([{keyCode:tg.END,action:RO(CO,e,!0)},{keyCode:tg.HOME,action:RO(CO,e,!1)}].concat(m(o?[]:[{keyCode:tg.HOME,action:RO(wO,e,!1),ctrlKey:!0,shiftKey:!0},{keyCode:tg.END,action:RO(wO,e,!0),ctrlKey:!0,shiftKey:!0}]),[{keyCode:tg.END,action:RO(PO,e,!0)},{keyCode:tg.HOME,action:RO(PO,e,!1)},{keyCode:tg.END,action:RO(wE,e,!0,t)},{keyCode:tg.HOME,action:RO(wE,e,!1,t)}]),n).each((function(e){n.preventDefault()}))}(e,t,n)}))},gR=function setup$g(e){e.on("input",(function(t){t.isComposing||function normalizeNbspsInEditor(e){var t=In.fromDom(e.getBody());e.selection.isCollapsed()&&vv(t,Tc.fromRangeStart(e.selection.getRng()),e.schema).each((function(t){e.selection.setRng(t.toRange())}))}(e)}))},pR=Ft(),hR=function stopImmediatePropagation(e){return e.stopImmediatePropagation()},vR=function isPageUpDown(e){return e.keyCode===tg.PAGE_UP||e.keyCode===tg.PAGE_DOWN},bR=function setNodeChangeBlocker(e,t,n){n&&!e.get()?t.on("NodeChange",hR,!0):!n&&e.get()&&t.off("NodeChange",hR),e.set(n)},yR=function setup$f(e,t){if(!pR.os.isMacOS()){var n=vu(!1);e.on("keydown",(function(t){vR(t)&&bR(n,e,!0)})),e.on("keyup",(function(o){o.isDefaultPrevented()||function executeKeyupAction(e,t,n){NO([{keyCode:tg.PAGE_UP,action:RO(wE,e,!1,t)},{keyCode:tg.PAGE_DOWN,action:RO(wE,e,!0,t)}],n)}(e,t,o),vR(o)&&n.get()&&(bR(n,e,!1),e.nodeChanged())}))}},CR=function insertTextAtPosition(e,t){var n=t.container(),o=t.offset();return Co(n)?(n.insertData(o,e),ee.some(Tc(n,o+e.length))):Kf(t).map((function(n){var o=In.fromText(e);return t.isAtEnd()?Mr(n,o):Nr(n,o),Tc(o.dom,e.length)}))},wR=curry(CR,Lo),xR=curry(CR," "),SR=function setSelection(e){return function(t){e.selection.setRng(t.toRange()),e.nodeChanged()}},kR=function insertSpaceOrNbspAtSelection(e){var t=Tc.fromRangeStart(e.selection.getRng()),n=In.fromDom(e.getBody());if(e.selection.isCollapsed()){var o=curry(Mv,e),i=Tc.fromRangeStart(e.selection.getRng());return yT(o,e.getBody(),i).bind(function locationToCaretPosition(e){return function(t){return t.fold((function(t){return yd(e.dom,Tc.before(t))}),(function(e){return Cd(e)}),(function(e){return wd(e)}),(function(t){return bd(e.dom,Tc.after(t))}))}}(n)).map((function(o){return function(){return function insertInlineBoundarySpaceOrNbsp(e,t,n){return function(o){return cv(e,o,n)?wR(t):xR(t)}}(n,t,e.schema)(o).each(SR(e))}}))}return ee.none()},TR=function insertSpaceInSummaryAtSelectionOnFirefox(e){return Qt(Wt.browser.isFirefox()&&e.selection.isEditable()&&function isInsideSummary(e,t){return e.isEditable(e.getParent(t,"summary"))}(e.dom,e.selection.getRng().startContainer),(function insertSpaceThunk(){var t=In.fromDom(e.getBody());e.selection.isCollapsed()||e.getDoc().execCommand("Delete"),function insertSpaceOrNbspAtPosition(e,t,n){return cv(e,t,n)?wR(t):xR(t)}(t,Tc.fromRangeStart(e.selection.getRng()),e.schema).each(SR(e))}))},ER=function setup$d(e){e.on("keydown",(function(t){t.isDefaultPrevented()||function executeKeydownOverride$1(e,t){MO([{keyCode:tg.SPACEBAR,action:RO(kR,e)},{keyCode:tg.SPACEBAR,action:RO(TR,e)}],t).each((function(n){t.preventDefault(),lD(e,"insertText",{data:" "}).isDefaultPrevented()||(n(),sD(e,"insertText",{data:" "}))}))}(e,t)}))},OR=function executeKeydownOverride(e,t){NO(m(function tableTabNavigation(e){return tf(e)?[{keyCode:tg.TAB,action:RO(sA,e,!0)},{keyCode:tg.TAB,shiftKey:!0,action:RO(sA,e,!1)}]:[]}(e)),t).each((function(e){t.preventDefault()}))},AR=function setup$b(e){if(e.addShortcut("Meta+P","","mcePrint"),G_(e),Hx(e))return vu(null);var t=bE(e);return function setup$e(e){e.on("beforeinput",(function(t){e.selection.isEditable()&&!ae(t.getTargetRanges(),(function(t){return!Pp(e.dom,t)}))||t.preventDefault()}))}(e),function setup$m(e){e.on("keyup compositionstart",curry(mO,e))}(e),lA(e,t),hD(e,t),dR(e),ER(e),gR(e),function setup$c(e){e.on("keydown",(function(t){t.isDefaultPrevented()||OR(e,t)}))}(e),mR(e,t),yR(e,t),t},_R=function(){function NodeChange(e){var t;p(this,NodeChange),this.lastPath=[],this.editor=e;var n=this;"onselectionchange"in e.getDoc()||e.on("NodeChange click mouseup keyup focus",(function(n){var o=e.selection.getRng(),i={startContainer:o.startContainer,startOffset:o.startOffset,endContainer:o.endContainer,endOffset:o.endOffset};"nodechange"!==n.type&&Og(i,t)||e.dispatch("SelectionChange"),t=i})),e.on("contextmenu",(function(){e.dispatch("SelectionChange")})),e.on("SelectionChange",(function(){var t=e.selection.getStart(!0);t&&Yd(e)&&!n.isSameElementPath(t)&&e.dom.isChildOf(t,e.getBody())&&e.nodeChanged({selectionChange:!0})})),e.on("mouseup",(function(t){!t.isDefaultPrevented()&&Yd(e)&&("IMG"===e.selection.getNode().nodeName?Cp.setEditorTimeout(e,(function(){e.nodeChanged()})):e.nodeChanged())}))}return h(NodeChange,[{key:"nodeChanged",value:function nodeChanged(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this.editor.selection;if(this.editor.initialized&&n&&!hl(this.editor)&&!this.editor.mode.isReadOnly()){var o=this.editor.getBody();(e=n.getStart(!0)||o).ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(e,o)||(e=o);var i=[];this.editor.dom.getParent(e,(function(e){return e===o||(i.push(e),!1)})),this.editor.dispatch("NodeChange",l(l({},t),{},{element:e,parents:i}))}}},{key:"isSameElementPath",value:function isSameElementPath(e){var t,n=this.editor,o=Ce(n.dom.getParents(e,Q,n.getBody()));if(o.length===this.lastPath.length){for(t=o.length;t>=0&&o[t]===this.lastPath[t];t--);if(-1===t)return this.lastPath=o,!0}return this.lastPath=o,!1}}]),NodeChange}(),DR=zu("image"),RR=zu("event"),NR=function mkSetEventFn(e){return function(t){t[RR]=e}},MR=NR(0),BR=NR(2),IR=NR(1),PR=function checkEvent(e){return function(t){var n=t;return ee.from(n[RR]).exists((function(t){return t===e}))}}(0),LR=zu("mode"),FR=function mkSetModeFn(e){return function(t){t[LR]=e}},HR=function setMode$1(e,t){return FR(t)(e)},$R=FR(0),zR=FR(2),VR=FR(1),UR=function checkMode(e){return function(t){var n=t;return ee.from(n[LR]).exists((function(t){return t===e}))}},ZR=UR(0),WR=UR(1),jR=["none","copy","link","move"],GR=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],qR=function createDataTransfer(){var e=new window.DataTransfer,t="move",n="all",o={get dropEffect(){return t},set dropEffect(e){ie(jR,e)&&(t=e)},get effectAllowed(){return n},set effectAllowed(e){PR(o)&&ie(GR,e)&&(n=e)},get items(){return function normalizeItems(e,t){return l(l({},t),{},{get length(){return t.length},add:function add(n,o){if(ZR(e)){if(!D(n))return t.add(n);if(!P(o))return t.add(n,o)}return null},remove:function remove(n){ZR(e)&&t.remove(n)},clear:function clear(){ZR(e)&&t.clear()}})}(o,e.items)},get files(){return WR(o)?function createEmptyFileList(){return Object.freeze({length:0,item:function item(e){return null}})}():e.files},get types(){return e.types},setDragImage:function setDragImage(t,n,i){ZR(o)&&(!function setDragImage(e,t){e[DR]=t}(o,{image:t,x:n,y:i}),e.setDragImage(t,n,i))},getData:function getData(t){return WR(o)?"":e.getData(t)},setData:function setData(t,n){ZR(o)&&e.setData(t,n)},clearData:function clearData(t){ZR(o)&&e.clearData(t)}};return $R(o),o},KR=function cloneDataTransfer(e){var t=qR(),n=function getMode(e){var t=e;return ee.from(t[LR])}(e);return zR(e),MR(t),t.dropEffect=e.dropEffect,t.effectAllowed=e.effectAllowed,function getDragImage(e){var t=e;return ee.from(t[DR])}(e).each((function(e){return t.setDragImage(e.image,e.x,e.y)})),ce(e.types,(function(n){"Files"!==n&&t.setData(n,e.getData(n))})),ce(e.files,(function(e){return t.items.add(e)})),function getEvent(e){var t=e;return ee.from(t[RR])}(e).each((function(e){!function setEvent(e,t){NR(t)(e)}(t,e)})),n.each((function(n){HR(e,n),HR(t,n)})),t},YR=function setHtmlData(e,t){return e.setData("text/html",t)},XR="x-tinymce/html",JR=W(XR),QR="\x3c!-- "+XR+" --\x3e",eN=function mark(e){return QR+e},tN=function isMarked(e){return-1!==e.indexOf(QR)},nN=function toBlockElements(e,t,n){var o=e.split(/\n\n/),i=function openContainer(e,t){var n="<"+e,o=Le(t,(function(e,t){return t+'="'+Ta.encodeAllRaw(e)+'"'}));return o.length&&(n+=" "+o.join(" ")),n+">"}(t,n),a="</"+t+">",u=ue(o,(function(e){return e.split(/\n/).join("<br />")}));return 1===u.length?u[0]:ue(u,(function stitch(e){return i+e+a})).join("")},rN="%MCEPASTEBIN%",oN=function getEl(e){return e.dom.get("mcepastebin")},iN=function isPasteBin(e){return F(e)&&"mcepastebin"===e.id},aN=function isDefaultPasteBinContent(e){return e===rN},uN=function PasteBin(e){var t=vu(null);return{create:function create(){return function create$6(e,t){var n=e.dom,o=e.selection,i=e.getBody();t.set(o.getRng());var a=n.add(e.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},rN);Wt.browser.isFirefox()&&n.setStyle(a,"left","rtl"===n.getStyle(i,"direction",!0)?65535:-65535),n.bind(a,"beforedeactivate focusin focusout",(function(e){e.stopPropagation()})),a.focus(),o.select(a,!0)}(e,t)},remove:function remove(){return function remove(e,t){var n=e.dom;if(oN(e)){for(var o,i=t.get();o=oN(e);)n.remove(o),n.unbind(o);i&&e.selection.setRng(i)}t.set(null)}(e,t)},getEl:function getEl(){return oN(e)},getHtml:function getHtml(){return function getHtml(e){var t=e.dom,n=function copyAndRemove(e,n){e.appendChild(n),t.remove(n,!0)},o=fe(e.getBody().childNodes,iN),i=c(o),a=i[0],u=i.slice(1);ce(u,(function(e){n(a,e)}));for(var s=t.select("div[id=mcepastebin]",a),l=s.length-1;l>=0;l--){var d=t.create("div");a.insertBefore(d,s[l]),n(d,s[l])}return a?a.innerHTML:""}(e)},getLastRng:t.get}},cN=function filter$1(e,t){return Kt.each(t,(function(t){e=A(t,RegExp)?e.replace(t,""):e.replace(t[0],t[1])})),e},sN=function trimHtml(e){return e=cN(e,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,function trimSpaces(e,t,n){return t||n?Lo:" "}],/<br class="Apple-interchange-newline">/g,/<br>$/i])},lN=function processResult(e,t){return{content:e,cancelled:t}},fN=function filterContent(e,t,n){var o=function firePastePreProcess(e,t,n){return e.dispatch("PastePreProcess",{content:t,internal:n})}(e,t,n),i=function preProcess(e,t){var n=Qw({sanitize:Jl(e),sandbox_iframes:af(e)},e.schema);n.addNodeFilter("meta",(function(e){Kt.each(e,(function(e){e.remove()}))}));var o=n.parse(t,{forced_root_block:!1,isRootContent:!0});return bh({validate:!0},e.schema).serialize(o)}(e,o.content);return e.hasEventListeners("PastePostProcess")&&!o.isDefaultPrevented()?function postProcessFilter(e,t,n){var o=e.dom.create("div",{style:"display:none"},t),i=function firePastePostProcess(e,t,n){return e.dispatch("PastePostProcess",{node:t,internal:n})}(e,o,n);return lN(i.node.innerHTML,i.isDefaultPrevented())}(e,i,n):lN(i,o.isDefaultPrevented())},dN=function pasteHtml$1(e,t){return e.insertContent(t,{merge:$l(e),paste:!0}),!0},mN=function isAbsoluteUrl(e){return/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(e)},gN=function linkSelection(e,t,n){return!(e.selection.isCollapsed()||!mN(t))&&function createLink(e,t,n){return e.undoManager.extra((function(){n(e,t)}),(function(){e.execCommand("mceInsertLink",!1,t)})),!0}(e,t,n)},pN=function insertImage(e,t,n){return!!function isImageUrl(e,t){return mN(t)&&ae(ef(e),(function(e){return at(t.toLowerCase(),".".concat(e.toLowerCase()))}))}(e,t)&&function createImage(e,t,n){return e.undoManager.extra((function(){n(e,t)}),(function(){e.insertContent('<img src="'+t+'">')})),!0}(e,t,n)},hN=function insertContent(e,t,n){n||!zl(e)?dN(e,t):function smartInsertContent(e,t){Kt.each([gN,pN,dN],(function(n){return!n(e,t,dN)}))}(e,t)},vN=function createIdGenerator(e){var t=0;return function(){return e+t++}}("mceclip"),bN=function createPasteDataTransfer(e){var t=qR();return YR(t,e),zR(t),t},yN=function doPaste(e,t,n,o,i){var a=function process(e,t,n){return fN(e,t,n)}(e,t,n);if(!a.cancelled){var u=a.content,c=function doPasteAction(){return hN(e,u,o)};if(i)lD(e,"insertFromPaste",{dataTransfer:bN(u)}).isDefaultPrevented()||(c(),sD(e,"insertFromPaste"));else c()}},CN=function pasteHtml(e,t,n,o){var i=n||tN(t);yN(e,function unmark(e){return e.replace(QR,"")}(t),i,!1,o)},wN=function pasteText(e,t,n){var o=e.dom.encode(t).replace(/\r\n/g,"\n"),i=Di(o,Ul(e)),a=nN(i,xs(e),Ss(e));yN(e,a,!1,!0,n)},xN=function getDataTransferItems(e){var t={};if(e&&e.types)for(var n=0;n<e.types.length;n++){var o=e.types[n];try{t[o]=e.getData(o)}catch(i){t[o]=""}}return t},SN=function hasContentType(e,t){return t in e&&e[t].length>0},kN=function hasHtmlOrText(e){return SN(e,"text/html")||SN(e,"text/plain")},TN=function createBlobInfo(e,t,n,o){var i=vN(),a=Ds(e)&&F(n.name),u=a?function extractFilename(e,t){var n=t.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return F(n)?e.dom.encode(n[1]):void 0}(e,n.name):i,c=a?n.name:void 0,s=t.create(i,n,o,u,c);return t.add(s),s},EN=function isImage(e){var t=ef(e);return function(e){return it(e.type,"image/")&&ae(t,(function(t){return function getImageMimeType(e){var t=e.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Kt.hasOwn(n,t)?"image/"+n[t]:"image/"+t}(t)===e.type}))}},ON=function pasteImageData(e,t,n){var o=function isClipboardEvent(e){return"paste"===e.type}(t)?t.clipboardData:t.dataTransfer;if(Bl(e)&&o){var i=function getImagesFromDataTransfer(e,t){var n=t.items?be(Oe(t.items),(function(e){return"file"===e.kind?[e.getAsFile()]:[]})):[],o=t.files?Oe(t.files):[];return fe(n.length>0?n:o,EN(e))}(e,o);if(i.length>0)return t.preventDefault(),function readFilesAsDataUris(e){return Promise.all(ue(e,(function(e){return RC(e).then((function(t){return{file:e,uri:t}}))})))}(i).then((function(t){n&&e.selection.setRng(n),ce(t,(function(t){!function pasteImage(e,t){AC(t.uri).each((function(n){var o=n.data,i=n.type,a=n.base64Encoded?o:btoa(o),u=t.file,c=e.editorUpload.blobCache,s=c.getByData(a,i),l=null!==s&&void 0!==s?s:TN(e,c,u,a);CN(e,'<img src="'.concat(l.blobUri(),'">'),!1,!0)}))}(e,t)}))})),!0}return!1},AN=function insertClipboardContent(e,t,n,o,i){var a=sN(n),u=SN(t,JR())||tN(n),c=!u&&function isPlainText(e){return!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(e)}(a),s=mN(a);(aN(a)||!a.length||c&&!s)&&(o=!0),(o||s)&&(a=SN(t,"text/plain")&&c?t["text/plain"]:function innerText(e){var t=La(),n=Qw({},t),o="",i=t.getVoidElements(),a=Kt.makeMap("script noscript style textarea video audio iframe object"," "),u=t.getBlockElements();return e=cN(e,[/<!\[[^\]]+\]>/g]),function walk(e){var n=e.name,c=e;if("br"!==n){if("wbr"!==n)if(i[n]&&(o+=" "),a[n])o+=" ";else{if(3===e.type&&(o+=e.value),!(e.name in t.getVoidElements())){var s=e.firstChild;if(s)do{walk(s)}while(s=s.next)}u[n]&&c.next&&(o+="\n","p"===n&&(o+="\n"))}}else o+="\n"}(n.parse(e)),o}(a)),aN(a)||(o?wN(e,a,i):CN(e,a,u,i))},_N=function registerEventHandlers(e,t,n){var o;e.on("keydown",(function(e){(function isKeyboardPasteEvent(e){return tg.metaKeyPressed(e)&&86===e.keyCode||e.shiftKey&&45===e.keyCode})(e)&&!e.isDefaultPrevented()&&(o=e.shiftKey&&86===e.keyCode)})),e.on("paste",(function(i){if(!i.isDefaultPrevented()&&!function isBrokenAndroidClipboardEvent(e){var t,n;return Wt.os.isAndroid()&&0===(null===(n=null===(t=e.clipboardData)||void 0===t?void 0:t.items)||void 0===n?void 0:n.length)}(i)){var a="text"===n.get()||o;o=!1;var u=xN(i.clipboardData);!kN(u)&&ON(e,i,function getLastRng(){return t.getLastRng()||e.selection.getRng()}())||(SN(u,"text/html")?(i.preventDefault(),AN(e,u,u["text/html"],a,!0)):SN(u,"text/plain")&&SN(u,"text/uri-list")?(i.preventDefault(),AN(e,u,u["text/plain"],a,!0)):(t.create(),Cp.setEditorTimeout(e,(function(){var n=t.getHtml();t.remove(),AN(e,u,n,a,!1)}),0)))}}))},DN=function registerEventsAndFilters(e,t,n){_N(e,t,n),function registerDataImageFilter(e){var t=function isWebKitFakeUrl(e){return it(e,"webkit-fake-url")},n=function isDataUri(e){return it(e,"data:")};e.parser.addNodeFilter("img",(function(o,i,a){if(!Bl(e)&&function isPasteInsert(e){var t;return!0===(null===(t=e.data)||void 0===t?void 0:t.paste)}(a)){var u,c=g(o);try{for(c.s();!(u=c.n()).done;){var s=u.value,l=s.attr("src");D(l)&&!s.attr("data-mce-object")&&l!==Wt.transparentSrc&&(t(l)||!Zl(e)&&n(l))&&s.remove()}}catch(d){c.e(d)}finally{c.f()}}}))}(e)},RN=function register$1(e,t){e.addCommand("mceTogglePlainTextPaste",(function(){!function togglePlainTextPaste(e,t){"text"===t.get()?(t.set("html"),eg(e,!1)):(t.set("text"),eg(e,!0)),e.focus()}(e,t)})),e.addCommand("mceInsertClipboardContent",(function(t,n){n.html&&CN(e,n.html,n.internal,!1),n.text&&wN(e,n.text,!1)}))},NN=function setClipboardData(e,t,n,o){!function setHtml5Clipboard(e,t,n){if(!e)return!1;try{return e.clearData(),e.setData("text/html",t),e.setData("text/plain",n),e.setData(JR(),t),!0}catch(o){return!1}}(e.clipboardData,t.html,t.text)?n(t.html,o):(e.preventDefault(),o())},MN=function fallback(e){return function(t,n){var o=e.dom,i=e.selection,a=o.create("div",{contenteditable:"false","data-mce-bogus":"all"}),u=o.create("div",{contenteditable:"true"},t);o.setStyles(a,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),a.appendChild(u),o.add(e.getBody(),a);var c=i.getRng();u.focus();var s=o.createRng();s.selectNodeContents(u),i.setRng(s),Cp.setEditorTimeout(e,(function(){i.setRng(c),o.remove(a),n()}),0)}},BN=function getData(e){return{html:eN(e.selection.getContent({contextual:!0})),text:e.selection.getContent({format:"text"})}},IN=function hasSelectedContent(e){return!e.selection.isCollapsed()||function isTableSelection(e){return!!e.dom.getParent(e.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",e.getBody())}(e)},PN=function register(e){e.on("cut",function cut(e){return function(t){!t.isDefaultPrevented()&&IN(e)&&e.selection.isEditable()&&NN(t,BN(e),MN(e),(function(){if(Wt.browser.isChromium()||Wt.browser.isFirefox()){var t=e.selection.getRng();Cp.setEditorTimeout(e,(function(){e.selection.setRng(t),e.execCommand("Delete")}),0)}else e.execCommand("Delete")}))}}(e)),e.on("copy",function copy(e){return function(t){!t.isDefaultPrevented()&&IN(e)&&NN(t,BN(e),MN(e),V)}}(e))},LN=function getCaretRangeFromEvent(e,t){var n,o;return Lg.getCaretRangeFromPoint(null!==(n=t.clientX)&&void 0!==n?n:0,null!==(o=t.clientY)&&void 0!==o?o:0,e.getDoc())},FN=function setFocusedRange(e,t){e.focus(),t&&e.selection.setRng(t)},HN=function setup$a(e,t){Ml(e)&&e.on("dragend dragover draggesture dragdrop drop drag",(function(e){e.preventDefault(),e.stopPropagation()})),Bl(e)||e.on("drop",(function(e){var t=e.dataTransfer;t&&function hasImage(e){return ae(e.files,(function(e){return/^image\//.test(e.type)}))}(t)&&e.preventDefault()})),e.on("drop",(function(n){if(!n.isDefaultPrevented()){var o=LN(e,n);if(!L(o)){var i=xN(n.dataTransfer),a=SN(i,JR());if(kN(i)&&!function isPlainTextFileUrl(e){var t=e["text/plain"];return!!t&&0===t.indexOf("file://")}(i)||!ON(e,n,o)){var u=i[JR()],c=u||i["text/html"]||i["text/plain"],s=function needsCustomInternalDrop(e,t,n,o){var i=e.getParent(n,(function(e){return Qi(t,e)}));if(!B(e.getParent(n,"summary")))return!0;if(i&&$e(o,"text/html")){var a=(new DOMParser).parseFromString(o["text/html"],"text/html").body;return!B(a.querySelector(i.nodeName.toLowerCase()))}return!1}(e.dom,e.schema,o.startContainer,i),l=t.get();l&&!s||c&&(n.preventDefault(),Cp.setEditorTimeout(e,(function(){e.undoManager.transact((function(){(u||l&&s)&&e.execCommand("Delete"),FN(e,o);var t=sN(c);i["text/html"]?CN(e,t,a,!0):wN(e,t,!0)}))})))}}}})),e.on("dragstart",(function(e){t.set(!0)})),e.on("dragover dragend",(function(n){Bl(e)&&!t.get()&&(n.preventDefault(),FN(e,LN(e,n))),"dragend"===n.type&&t.set(!1)})),function setupSummaryDeleteByDragFix(e){e.on("input",(function(t){if("deleteByDrag"===t.inputType){var n=fe(e.dom.select("details"),(function hasNoSummary(e){return B(e.querySelector("summary"))}));ce(n,(function(t){Eo(t.firstChild)&&t.firstChild.remove();var n=e.dom.create("summary");n.appendChild(Xo().dom),t.prepend(n)}))}}))}(e)},$N=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,zN=function rgbToHex(e){return Kt.trim(e).replace($N,ja).toLowerCase()},VN=function removeWebKitStyles(e,t,n){var o=Fl(e);if(n||"all"===o||!Hl(e))return t;var i=o?o.split(/[, ]/):[];if(i&&"none"!==o){var a=e.dom,u=e.selection.getNode();t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,(function(e,t,n,o){for(var c=a.parseStyle(a.decode(n)),s={},l=0;l<i.length;l++){var d=c[i[l]],m=d,g=a.getStyle(u,i[l],!0);/color/.test(i[l])&&(m=zN(m),g=zN(g)),g!==m&&(s[i[l]]=d)}var p=a.serializeStyle(s,"span");return p?t+' style="'+p+'"'+o:t+o}))}else t=t.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return t=t.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,(function(e,t,n,o){return t+' style="'+n+'"'+o})),t},UN=function setup$7(e){var t=vu(!1),n=vu(Vl(e)?"text":"html"),o=uN(e);!function setup$8(e){(Wt.browser.isChromium()||Wt.browser.isSafari())&&function addPreProcessFilter(e,t){e.on("PastePreProcess",(function(n){n.content=t(e,n.content,n.internal)}))}(e,VN)}(e),RN(e,n),function setup$9(e){var t=function processEvent(t){return function(n){t(e,n)}},n=Il(e);H(n)&&e.on("PastePreProcess",t(n));var o=Pl(e);H(o)&&e.on("PastePostProcess",t(o))}(e),e.on("PreInit",(function(){PN(e),HN(e,t),DN(e,o,n)}))},ZN=function setup$6(e){!function preventSummaryToggle(e){e.on("click",(function(t){e.dom.getParent(t.target,"details")&&t.preventDefault()}))}(e),function filterDetails(e){e.parser.addNodeFilter("details",(function(t){var n=nf(e);ce(t,(function(e){"expanded"===n?e.attr("open","open"):"collapsed"===n&&e.attr("open",null)}))})),e.serializer.addNodeFilter("details",(function(t){var n=rf(e);ce(t,(function(e){"expanded"===n?e.attr("open","open"):"collapsed"===n&&e.attr("open",null)}))}))}(e)},WN=Eo,jN=Co,GN=function isContentEditableFalse$2(e){return _o(e.dom)},qN=function isRoot(e){return function(t){return Hn(In.fromDom(e),t)}},KN=function getClosestScope(e,t,n){return gr(In.fromDom(e),(function(e){return function isContentEditableTrue(e){return Ao(e.dom)}(e)||n.isBlock(un(e))}),qN(t)).getOr(In.fromDom(t)).dom},YN=function getClosestCef(e,t){return gr(In.fromDom(e),GN,qN(t))},XN=function findEdgeCaretCandidate(e,t,n){for(var o=new io(e,t),i=n?o.next.bind(o):o.prev.bind(o),a=e,u=n?e:i();u&&!WN(u);u=i())Si(u)&&(a=u);return a},JN=function onTripleClickSelect(e){var t=function findClosestBlockRange(e,t,n){var o=Tc.fromRangeStart(e).getNode(),i=KN(o,t,n),a=XN(o,i,!1),u=XN(o,i,!0),c=document.createRange();return YN(a,i).fold((function(){jN(a)?c.setStart(a,0):c.setStartBefore(a)}),(function(e){return c.setStartBefore(e.dom)})),YN(u,i).fold((function(){jN(u)?c.setEnd(u,u.data.length):c.setEndAfter(u)}),(function(e){return c.setEndAfter(e.dom)})),c}(e.selection.getRng(),e.getBody(),e.schema);e.selection.setRng(Vb(t))};!function(e){e.Before="before",e.After="after"}(W_||(W_={}));var QN,eM,tM=function distanceToRectLeft(e,t){return Math.abs(e.left-t)},nM=function distanceToRectRight(e,t){return Math.abs(e.right-t)},rM=function isOverlapping(e,t){var n=function overlapY(e,t){return Math.max(0,Math.min(e.bottom,t.bottom)-Math.max(e.top,t.top))}(e,t)/Math.min(e.height,t.height);return function collidesY(e,t){return e.top<t.bottom&&e.bottom>t.top}(e,t)&&n>.5},oM=function splitRectsPerAxis(e,t){return function boundingClientRectFromRects(e){return me(e,(function(e,t){return e.fold((function(){return ee.some(t)}),(function(e){var n=Math.min(t.left,e.left),o=Math.min(t.top,e.top),i=Math.max(t.right,e.right),a=Math.max(t.bottom,e.bottom);return ee.some({top:o,right:i,bottom:a,left:n,width:i-n,height:a-o})}))}),ee.none())}(fe(e,(function(e){return function isInsideY(e,t){return e>=t.top&&e<=t.bottom}(t,e)}))).fold((function(){return[[],e]}),(function(t){var n=le(e,(function(e){return rM(e,t)}));return[n.pass,n.fail]}))},iM=function horizontalDistance(e,t,n){return t>e.left&&t<e.right?0:Math.min(Math.abs(e.left-t),Math.abs(e.right-t))},aM=function closestChildCaretCandidateNodeRect(e,t,n,o){var i=function caretCandidateRect(e){return Si(e.node)?ee.some(e):co(e.node)?closestChildCaretCandidateNodeRect(Oe(e.node.childNodes),t,n,!1):ee.none()},a=function findClosestCaretCandidateNodeRect(e,a){var u=Se(e,(function(e,o){return a(e,t,n)-a(o,t,n)}));return Ae(u,i).map((function(e){return o&&!Co(e.node)&&u.length>1?function tryFindSecondBestTextNode(e,o,a){return i(o).filter((function(o){return Math.abs(a(e,t,n)-a(o,t,n))<2&&Co(o.node)}))}(e,u[1],a).getOr(e):e}))},u=oM(XT(e),n),c=d(u,2),s=c[0],l=c[1],m=le(l,(function(e){return e.top<n})),g=m.pass,p=m.fail;return a(s,iM).orThunk((function(){return a(p,ec)})).orThunk((function(){return a(g,ec)}))},uM=function closestCaretCandidateNodeRect(e,t,n){var o=In.fromDom(e),i=Vn(o),a=In.fromPoint(i,t,n).filter((function(e){return $n(o,e)})).getOr(o);return function traverseUp(e,t,n,o){return function helper(t,i){var a=fe(t.dom.childNodes,q((function isDragGhostContainer(e){return co(e)&&e.classList.contains("mce-drag-container")})));return i.fold((function(){return aM(a,n,o,!0)}),(function(e){var t=fe(a,(function(t){return t!==e.dom}));return aM(t,n,o,!0)})).orThunk((function(){return(Hn(t,e)?ee.none():Wn(t)).bind((function(e){return helper(e,ee.some(t))}))}))}(t,ee.none())}(o,a,t,n)},cM=function closestFakeCaretCandidate(e,t,n){return uM(e,t,n).filter((function(e){return kf(e.node)})).map((function(e){return function clientInfo(e,t){return{node:e.node,position:tM(e,t)<nM(e,t)?W_.Before:W_.After}}(e,t)}))},sM=function getAbsolutePosition(e){var t,n,o=e.getBoundingClientRect(),i=e.ownerDocument,a=i.documentElement,u=i.defaultView;return{top:o.top+(null!==(t=null===u||void 0===u?void 0:u.scrollY)&&void 0!==t?t:0)-a.clientTop,left:o.left+(null!==(n=null===u||void 0===u?void 0:u.scrollX)&&void 0!==n?n:0)-a.clientLeft}},lM=function calc(e,t){return function calculatePosition(e,t,n){return{pageX:n.left-e.left+t.left,pageY:n.top-e.top+t.top}}(function getBodyPosition(e){return e.inline?sM(e.getBody()):{left:0,top:0}}(e),function getScrollPosition(e){var t=e.getBody();return e.inline?{left:t.scrollLeft,top:t.scrollTop}:{left:0,top:0}}(e),function getMousePosition(e,t){if(t.target.ownerDocument!==e.getDoc()){var n=sM(e.getContentAreaContainer()),o=function getBodyScroll(e){var t=e.getBody(),n=e.getDoc().documentElement,o={left:t.scrollLeft,top:t.scrollTop},i={left:t.scrollLeft||n.scrollLeft,top:t.scrollTop||n.scrollTop};return e.inline?o:i}(e);return{left:t.pageX-n.left+o.left,top:t.pageY-n.top+o.top}}return{left:t.pageX,top:t.pageY}}(e,t))},fM=function getTargetProps(e){return{target:e,srcElement:e}},dM=function makeDragEvent(e,t,n,o){var i=function makeDataTransferCopyForDragEvent(e,t){var n=KR(e);return"dragstart"===t?(MR(n),$R(n)):"drop"===t?(BR(n),zR(n)):(IR(n),VR(n)),n}(n,e);return P(o)?function makeDndEvent(e,t,n){var o=K("Function not supported on simulated event.");return l({bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:e,composedPath:o,initEvent:o,preventDefault:V,stopImmediatePropagation:V,stopPropagation:V,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:o,initMouseEvent:o,getModifierState:o,dataTransfer:n},fM(t))}(e,t,i):function makeDndEventFromMouseEvent(e,t,n,o){return l(l({},t),{},{dataTransfer:o,type:e},fM(n))}(e,o,t,i)},mM=_o,gM=function or(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){for(var n=0;n<t.length;n++)if(t[n](e))return!0;return!1}}(mM,Ao),pM=function createGhost(e,t,n,o){var i=e.dom,a=t.cloneNode(!0);i.setStyles(a,{width:n,height:o}),i.setAttrib(a,"data-mce-selected",null);var u=i.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return i.setStyles(u,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:o}),i.setStyles(a,{margin:0,boxSizing:"border-box"}),u.appendChild(a),u},hM=function scrollEditor(e,t){return function(n){return function(){var o,i="left"===e?n.scrollX:n.scrollY;n.scroll((a(o={},e,i+t),a(o,"behavior","smooth"),o))}}},vM=hM("left",-32),bM=hM("left",32),yM=hM("top",-32),CM=hM("top",32),wM=function removeElement(e){e&&e.parentNode&&e.parentNode.removeChild(e)},xM=function start(e,t){return function(n){if(function isLeftMouseButtonPressed(e){return 0===e.button}(n)){var o=pe(t.dom.getParents(n.target),gM).getOr(null);if(F(o)&&function isDraggable(e,t,n){return mM(n)&&n!==t&&e.isEditable(n.parentElement)}(t.dom,t.getBody(),o)){var i=t.dom.getPos(o),a=t.getBody(),u=t.getDoc().documentElement;e.set({element:o,dataTransfer:qR(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(t.inline?a.scrollWidth:u.offsetWidth)-2,maxY:(t.inline?a.scrollHeight:u.offsetHeight)-2,relX:n.pageX-i.x,relY:n.pageY-i.y,width:o.offsetWidth,height:o.offsetHeight,ghost:pM(t,o,o.offsetWidth,o.offsetHeight),intervalId:Su(100)})}}}},SM=function dispatchDragEvent(e,t,n,o,i){"dragstart"===t&&YR(o,e.dom.getOuterHTML(n));var a=dM(t,n,o,i);return e.dispatch(t,a)},kM=function move(e,t){var n=Tu((function(e,n){return function placeCaretAt(e,t,n){e._selectionOverrides.hideFakeCaret(),cM(e.getBody(),t,n).fold((function(){return e.selection.placeCaretAt(t,n)}),(function(o){var i=e._selectionOverrides.showCaret(1,o.node,o.position===W_.Before,!1);i?e.selection.setRng(i):e.selection.placeCaretAt(t,n)}))}(t,e,n)}),0);t.on("remove",n.cancel);var o=e;return function(i){return e.on((function(e){var a=Math.max(Math.abs(i.screenX-e.screenX),Math.abs(i.screenY-e.screenY));if(!e.dragging&&a>10){var u=SM(t,"dragstart",e.element,e.dataTransfer,i);if(F(u.dataTransfer)&&(e.dataTransfer=u.dataTransfer),u.isDefaultPrevented())return;e.dragging=!0,t.focus()}if(e.dragging){var c=i.currentTarget===t.getDoc().documentElement,s=function applyRelPos(e,t){return{pageX:t.pageX-e.relX,pageY:t.pageY+5}}(e,lM(t,i));!function appendGhostToBody(e,t){e.parentNode!==t&&t.appendChild(e)}(e.ghost,t.getBody()),function moveGhost(e,t,n,o,i,a,u,c,s,l,d,m){var g=0,p=0;e.style.left=t.pageX+"px",e.style.top=t.pageY+"px",t.pageX+n>i&&(g=t.pageX+n-i),t.pageY+o>a&&(p=t.pageY+o-a),e.style.width=n-g+"px",e.style.height=o-p+"px";var h=s.clientHeight,v=s.clientWidth,b=u+s.getBoundingClientRect().top,y=c+s.getBoundingClientRect().left;d.on((function(e){e.intervalId.clear(),e.dragging&&m&&(u+8>=h?e.intervalId.set(CM(l)):u-8<=0?e.intervalId.set(yM(l)):c+8>=v?e.intervalId.set(bM(l)):c-8<=0?e.intervalId.set(vM(l)):b+16>=window.innerHeight?e.intervalId.set(CM(window)):b-16<=0?e.intervalId.set(yM(window)):y+16>=window.innerWidth?e.intervalId.set(bM(window)):y-16<=0&&e.intervalId.set(vM(window)))}))}(e.ghost,s,e.width,e.height,e.maxX,e.maxY,i.clientY,i.clientX,t.getContentAreaContainer(),t.getWin(),o,c),n.throttle(i.clientX,i.clientY)}}))}},TM=function drop(e,t){return function(n){e.on((function(e){var o;if(e.intervalId.clear(),e.dragging){if(function isValidDropTarget(e,t,n){return!L(t)&&t!==n&&!e.dom.isChildOf(t,n)&&e.dom.isEditable(t)}(t,function getRawTarget(e){var t=e.getSel();if(F(t)){var n=t.getRangeAt(0).startContainer;return Co(n)?n.parentNode:n}return null}(t.selection),e.element)){var i=null!==(o=t.getDoc().elementFromPoint(n.clientX,n.clientY))&&void 0!==o?o:t.getBody();SM(t,"drop",i,e.dataTransfer,n).isDefaultPrevented()||t.undoManager.transact((function(){!function removeElementWithPadding(e,t){var n=e.getParent(t.parentNode,e.isBlock);wM(t),n&&n!==e.getRoot()&&e.isEmpty(n)&&Jo(In.fromDom(n))}(t.dom,e.element),function getHtmlData(e){var t=e.getData("text/html");return""===t?ee.none():ee.some(t)}(e.dataTransfer).each((function(e){return t.insertContent(e)})),t._selectionOverrides.hideFakeCaret()}))}SM(t,"dragend",t.getBody(),e.dataTransfer,n)}})),OM(e)}},EM=function stopDragging(e,t,n){e.on((function(e){e.intervalId.clear(),e.dragging&&n.fold((function(){return SM(t,"dragend",e.element,e.dataTransfer)}),(function(n){return SM(t,"dragend",e.element,e.dataTransfer,n)}))})),OM(e)},OM=function removeDragState(e){e.on((function(e){e.intervalId.clear(),wM(e.ghost)})),e.clear()},AM=function bindFakeDragEvents(e){var t=ku(),n=gu.DOM,o=document,i=xM(t,e),a=kM(t,e),u=TM(t,e),c=function stop(e,t){return function(n){return EM(e,t,ee.some(n))}}(t,e);e.on("mousedown",i),e.on("mousemove",a),e.on("mouseup",u),n.bind(o,"mousemove",a),n.bind(o,"mouseup",c),e.on("remove",(function(){n.unbind(o,"mousemove",a),n.unbind(o,"mouseup",c)})),e.on("keydown",(function(n){n.keyCode===tg.ESC&&EM(t,e,ee.none())}))},_M=function init$2(e){AM(e),xl(e)&&function blockUnsupportedFileDrop(e){var t=function preventFileDrop(t){if(!t.isDefaultPrevented()){var n=t.dataTransfer;n&&(ie(n.types,"Files")||n.files.length>0)&&(t.preventDefault(),"drop"===t.type&&PS(e,"Dropped file type is not supported"))}},n=function preventFileDropIfUIElement(n){kp(e,n.target)&&t(n)},o=function setup(){var o=gu.DOM,i=e.dom,a=document,u=e.inline?e.getBody():e.getDoc(),c=["drop","dragover"];ce(c,(function(e){o.bind(a,e,n),i.bind(u,e,t)})),e.on("remove",(function(){ce(c,(function(e){o.unbind(a,e,n),i.unbind(u,e,t)}))}))};e.on("init",(function(){Cp.setEditorTimeout(e,o,0)}))}(e)},DM=_o,RM=function getContentEditableRoot(e,t){return Eb(e.getBody(),t)},NM=function SelectionOverrides(e){var t,n=e.selection,o=e.dom,i=e.getBody(),a=wf(e,i,o.isBlock,(function(){return Np(e)})),u="sel-"+o.uniqueId(),c="data-mce-selected",s=function isFakeSelectionTargetElement(e){return e!==i&&(DM(e)||No(e))&&o.isChildOf(e,i)&&o.isEditable(e.parentNode)},l=function showCaret(t,o,i){var u=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return e.dispatch("ShowCaret",{target:o,direction:t,before:i}).isDefaultPrevented()?null:(u&&n.scrollIntoView(o,-1===t),a.show(i,o))},d=function isWithinCaretContainer(e){return ai(e)||li(e)||fi(e)},m=function isRangeInCaretContainer(e){return d(e.startContainer)||d(e.endContainer)},g=function normalizeVoidElementSelection(t){var n=e.schema.getVoidElements(),i=o.createRng(),a=t.startContainer,u=t.startOffset,c=t.endContainer,s=t.endOffset;return $e(n,a.nodeName.toLowerCase())?0===u?i.setStartBefore(a):i.setStartAfter(a):i.setStart(a,u),$e(n,c.nodeName.toLowerCase())?0===s?i.setEndBefore(c):i.setEndAfter(c):i.setEnd(c,s),i},p=function selectElement(i){var a=i.cloneNode(!0),s=e.dispatch("ObjectSelected",{target:i,targetClone:a});if(s.isDefaultPrevented())return null;var l=function setupOffscreenSelection(t,i){var a=In.fromDom(e.getBody()),c=e.getDoc(),s=yr(a,"#"+u).getOrThunk((function(){var e=In.fromHtml('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',c);return vn(e,"id",u),Ir(a,e),e})),l=o.createRng();Fr(s),Lr(s,[In.fromText(Lo,c),In.fromDom(i),In.fromText(Lo,c)]),l.setStart(s.dom.firstChild,1),l.setEnd(s.dom.lastChild,0),Er(s,{top:o.getPos(t,e.getBody()).y+"px"}),up(s);var d=n.getSel();return d&&(d.removeAllRanges(),d.addRange(l)),l}(i,s.targetClone),d=In.fromDom(i);return ce(ro(In.fromDom(e.getBody()),"*[".concat(c,"]")),(function(e){Hn(d,e)||xn(e,c)})),o.getAttrib(i,c)||i.setAttribute(c,"1"),t=i,b(),l},h=function setElementSelection(e,t){if(!e)return null;if(e.collapsed){if(!m(e)){var n=t?1:-1,a=qf(n,i,e),u=a.getNode(!t);if(F(u)){if(kf(u))return l(n,u,!!t&&!a.isAtEnd(),!1);if(ii(u)&&_o(u.nextSibling)){var c=o.createRng();return c.setStart(u,0),c.setEnd(u,0),c}}var d=a.getNode(t);if(F(d)){if(kf(d))return l(n,d,!t&&!a.isAtEnd(),!1);if(ii(d)&&_o(d.previousSibling)){var g=o.createRng();return g.setStart(d,1),g.setEnd(d,1),g}}}return null}var h=e.startContainer,v=e.startOffset,b=e.endOffset;if(Co(h)&&0===v&&DM(h.parentNode)&&(h=h.parentNode,v=o.nodeIndex(h),h=h.parentNode),!co(h))return null;if(b===v+1&&h===e.endContainer){var y=h.childNodes[v];if(s(y))return p(y)}return null},v=function removeElementSelection(){t&&t.removeAttribute(c),yr(In.fromDom(e.getBody()),"#"+u).each(Hr),t=null},b=function hideFakeCaret(){a.hide()};return Hx(e)||function registerEvents(){e.on("click",(function(t){o.isEditable(t.target)||(t.preventDefault(),e.focus())})),e.on("blur NewBlock",v),e.on("ResizeWindow FullscreenStateChanged",a.reposition),e.on("tap",(function(t){var n=t.target,o=RM(e,n);DM(o)?(t.preventDefault(),Ik(e,o).each(h)):s(n)&&Ik(e,n).each(h)}),!0),e.on("mousedown",(function(t){var a=t.target;if((a===i||"HTML"===a.nodeName||o.isChildOf(a,i))&&_S(e,t.clientX,t.clientY)){v(),b();var u=RM(e,a);DM(u)?(t.preventDefault(),Ik(e,u).each(h)):cM(i,t.clientX,t.clientY).each((function(o){t.preventDefault(),function setRange(e){e&&n.setRng(e)}(l(1,o.node,o.position===W_.Before,!1)),so(u)?u.focus():e.getBody().focus()}))}})),e.on("keypress",(function(e){tg.modifierPressed(e)||DM(n.getNode())&&e.preventDefault()})),e.on("GetSelectionRange",(function(e){var n=e.range;if(t){if(!t.parentNode)return void(t=null);(n=n.cloneRange()).selectNode(t),e.range=n}})),e.on("SetSelectionRange",(function(e){e.range=g(e.range);var t=h(e.range,e.forward);t&&(e.range=t)})),e.on("AfterSetSelectionRange",(function(e){var t=e.range,n=t.startContainer.parentElement;m(t)||function isPasteBin(e){return co(e)&&"mcepastebin"===e.id}(n)||b(),function isFakeSelectionElement(e){return F(e)&&o.hasClass(e,"mce-offscreen-selection")}(n)||v()})),_M(e),function setup$4(e){var t=Tu((function(){if(!e.removed&&e.getBody().contains(document.activeElement)){var t=e.selection.getRng();if(t.collapsed){var n=Pk(e,t,!1);e.selection.setRng(n)}}}),0);e.on("focus",(function(){t.throttle()})),e.on("blur",(function(){t.cancel()}))}(e),function setup$3(e){e.on("init",(function(){e.on("focusin",(function(t){var n=t.target;if(No(n)){var o=Eb(e.getBody(),n),i=_o(o)?o:n;e.selection.getNode()!==i&&Ik(e,i).each((function(t){return e.selection.setRng(t)}))}}))}))}(e)}(),{showCaret:l,showBlockCaretContainer:function showBlockCaretContainer(e){e.hasAttribute("data-mce-caret")&&(di(e),n.scrollIntoView(e))},hideFakeCaret:b,destroy:function destroy(){a.destroy(),t=null}}},MM=function getNormalizedTextOffset(e,t){for(var n=t,o=e.previousSibling;Co(o);o=o.previousSibling)n+=o.data.length;return n},BM=function generatePath(e,t,n,o,i){if(Co(n)&&(o<0||o>n.data.length))return[];for(var a=i&&Co(n)?[MM(n,o)]:[o],u=n;u!==t&&u.parentNode;)a.push(e.nodeIndex(u,i)),u=u.parentNode;return u===t?a.reverse():[]},IM=function generatePathRange(e,t,n,o,i,a){var u=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return{start:BM(e,t,n,o,u),end:BM(e,t,i,a,u)}},PM=function resolvePath(e,t){var n=t.slice(),o=n.pop();return $(o)?me(n,(function(e,t){return e.bind((function(e){return ee.from(e.childNodes[t])}))}),ee.some(e)).bind((function(e){return Co(e)&&(o<0||o>e.data.length)?ee.none():ee.some({node:e,offset:o})})):ee.none()},LM=function resolvePathRange(e,t){return PM(e,t.start).bind((function(n){var o=n.node,i=n.offset;return PM(e,t.end).map((function(e){var t=e.node,n=e.offset,a=document.createRange();return a.setStart(o,i),a.setEnd(t,n),a}))}))},FM=function cleanEmptyNodes(e,t,n){if(t&&e.isEmpty(t)&&!n(t)){var o=t.parentNode;e.remove(t,Co(t.firstChild)&&Oi(t.firstChild.data)),cleanEmptyNodes(e,o,n)}},HM=function deleteRng(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=t.startContainer.parentNode,a=t.endContainer.parentNode;t.deleteContents(),o&&!n(t.startContainer)&&(Co(t.startContainer)&&0===t.startContainer.data.length&&e.remove(t.startContainer),Co(t.endContainer)&&0===t.endContainer.data.length&&e.remove(t.endContainer),FM(e,i,n),i!==a&&FM(e,a,n))},$M=function getParentBlock(e,t){return ee.from(e.dom.getParent(t.startContainer,e.dom.isBlock))},zM=function resolveFromDynamicPatterns(e,t,n){var o=e.dynamicPatternsLookup({text:n,block:t});return l(l({},e),{},{blockPatterns:rs(o).concat(e.blockPatterns),inlinePatterns:os(o).concat(e.inlinePatterns)})},VM=function getBeforeText(e,t,n,o){var i=e.createRng();return i.setStart(t,0),i.setEnd(n,o),i.toString()},UM=function stripPattern(e,t,n){var o=function textAfter(e,t,n){if(Co(e)&&t>=e.length)return ee.some(fA(e,t));var o=Gu(dA);return ee.from(o.forwards(e,t,mA(e),n)).map((function(e){return fA(e.container,0)}))}(t,0,t);o.each((function(o){var i=o.container;hA(i,n.start.length,t).each((function(n){var o=e.createRng();o.setStart(i,0),o.setEnd(n.container,n.offset),HM(e,o,(function(e){return e===t}))}));var a=In.fromDom(i),u=$o(a);(function startsWithSingleSpace(e){return/^\s[^\s]/.test(e)})(u)&&function set(e,t){Ho.set(e,t)}(a,u.slice(1))}))},ZM=function applyPattern$1(e,t){var n=e.dom,o=t.pattern,i=LM(n.getRoot(),t.range).getOrDie("Unable to resolve path range");return $M(e,i).each((function(t){"block-format"===o.type?function isBlockFormatName(e,t){var n=t.get(e);return M(n)&&Te(n).exists((function(e){return $e(e,"block")}))}(o.format,e.formatter)&&e.undoManager.transact((function(){UM(e.dom,t,o),e.formatter.apply(o.format)})):"block-command"===o.type&&e.undoManager.transact((function(){UM(e.dom,t,o),e.execCommand(o.cmd,!1,o.value)}))})),!0},WM=function findPattern$1(e,t){var n=function sortPatterns$1(e){return Se(e,(function(e,t){return t.start.length-e.start.length}))}(e),o=t.replace(Lo," ");return pe(n,(function(e){return 0===t.indexOf(e.start)||0===o.indexOf(e.start)}))},jM=function newMarker(e,t){return e.create("span",{"data-mce-type":"bookmark",id:t})},GM=function rangeFromMarker(e,t){var n=e.createRng();return n.setStartAfter(t.start),n.setEndBefore(t.end),n},qM=function createMarker(e,t,n){var o=LM(e.getRoot(),n).getOrDie("Unable to resolve path range"),i=o.startContainer,a=o.endContainer,u=0===o.endOffset?a:a.splitText(o.endOffset),c=0===o.startOffset?i:i.splitText(o.startOffset),s=c.parentNode;return{prefix:t,end:u.parentNode.insertBefore(jM(e,t+"-end"),u),start:s.insertBefore(jM(e,t+"-start"),c)}},KM=function removeMarker(e,t,n){FM(e,e.get(t.prefix+"-end"),n),FM(e,e.get(t.prefix+"-start"),n)},YM=function isReplacementPattern(e){return 0===e.start.length},XM=function findPatternStartFromSpot(e,t,n,o){var i=t.start;return vA(e,o.container,o.offset,function matchesPattern(e){return function(t,n){var o=t.data.substring(0,n),i=o.lastIndexOf(e.charAt(e.length-1)),a=o.lastIndexOf(e);return-1!==a?a+e.length:-1!==i?i+1:-1}}(i),n).bind((function(o){var a,u,c=null!==(u=null===(a=n.textContent)||void 0===a?void 0:a.indexOf(i))&&void 0!==u?u:-1;if(-1!==c&&o.offset>=c+i.length){var s=e.createRng();return s.setStart(o.container,o.offset-i.length),s.setEnd(o.container,o.offset),ee.some(s)}var l=o.offset-i.length;return pA(o.container,l,n).map((function(t){var n=e.createRng();return n.setStart(t.container,t.offset),n.setEnd(o.container,o.offset),n})).filter((function(e){return e.toString()===i})).orThunk((function(){return findPatternStartFromSpot(e,t,n,fA(o.container,0))}))}))},JM=function findPatternStart(e,t,n,o,i){var a=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(0===t.start.length&&!a){var u=e.createRng();return u.setStart(n,o),u.setEnd(n,o),ee.some(u)}return gA(n,o,i).bind((function(n){return XM(e,t,i,n).bind((function(e){var t;if(a){if(e.endContainer===n.container&&e.endOffset===n.offset)return ee.none();if(0===n.offset&&(null===(t=e.endContainer.textContent)||void 0===t?void 0:t.length)===e.endOffset)return ee.none()}return ee.some(e)}))}))},QM=function findPattern(e,t,n,o){var i=e.dom,a=i.getRoot(),u=n.pattern,c=n.position.container,s=n.position.offset;return pA(c,s-n.pattern.end.length,t).bind((function(l){var d=IM(i,a,l.container,l.offset,c,s,o);if(YM(u))return ee.some({matches:[{pattern:u,startRng:d,endRng:d}],position:l});var m=eB(e,n.remainingPatterns,l.container,l.offset,t,o),g=m.getOr({matches:[],position:l}),p=g.position;return JM(i,u,p.container,p.offset,t,m.isNone()).map((function(e){var t=function generatePathRangeFromRange(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return IM(e,t,n.startContainer,n.startOffset,n.endContainer,n.endOffset,o)}(i,a,e,o);return{matches:g.matches.concat([{pattern:u,startRng:t,endRng:d}]),position:fA(e.startContainer,e.startOffset)}}))}))},eB=function findPatternsRec(e,t,n,o,i,a){var u=e.dom;return gA(n,o,u.getRoot()).bind((function(c){for(var s=VM(u,i,n,o),l=0;l<t.length;l++){var d=t[l];if(at(s,d.end)){var m=t.slice();m.splice(l,1);var g=QM(e,i,{pattern:d,remainingPatterns:m,position:c},a);if(g.isNone()&&o>0)return findPatternsRec(e,t,n,o-1,i,a);if(g.isSome())return g}}return ee.none()}))},tB=function applyPattern(e,t,n){e.selection.setRng(n),"inline-format"===t.type?ce(t.format,(function(t){e.formatter.apply(t)})):e.execCommand(t.cmd,!1,t.value)},nB=function findPatterns(e,t,n,o,i,a){return function getBestMatches(e,t){var n=ye(e,(function(e){return ae(t,(function(t){return e.pattern.start===t.pattern.start&&e.pattern.end===t.pattern.end}))}));return e.length===t.length?n?e:t:e.length>t.length?e:t}(eB(e,i.inlinePatterns,n,o,t,a).fold((function(){return[]}),(function(e){return e.matches})),eB(e,function sortPatterns(e){return Se(e,(function(e,t){return t.end.length-e.end.length}))}(i.inlinePatterns),n,o,t,a).fold((function(){return[]}),(function(e){return e.matches})))},rB=function applyMatches(e,t){if(0!==t.length){var n=e.dom,o=e.selection.getBookmark(),i=function addMarkers(e,t){var n=zu("mce_textpattern"),o=de(t,(function(t,o){var i=qM(e,n+"_end".concat(t.length),o.endRng);return t.concat([l(l({},o),{},{endMarker:i})])}),[]);return de(o,(function(t,i){var a=o.length-t.length-1,u=YM(i.pattern)?i.endMarker:qM(e,n+"_start".concat(a),i.startRng);return t.concat([l(l({},i),{},{startMarker:u})])}),[])}(n,t);ce(i,(function(t){var o=n.getParent(t.startMarker.start,n.isBlock),i=function isRoot(e){return e===o};YM(t.pattern)?function applyReplacementPattern(e,t,n,o){var i=GM(e.dom,n);HM(e.dom,i,o),tB(e,t,i)}(e,t.pattern,t.endMarker,i):function applyPatternWithContent(e,t,n,o,i){var a=e.dom,u=GM(a,o),c=GM(a,n);HM(a,c,i),HM(a,u,i);var s={prefix:n.prefix,start:n.end,end:o.start},l=GM(a,s);tB(e,t,l)}(e,t.pattern,t.startMarker,t.endMarker,i),KM(n,t.endMarker,i),KM(n,t.startMarker,i)})),e.selection.moveToBookmark(o)}},oB=function handleEnter(e,t){var n=e.selection.getRng();return $M(e,n).map((function(o){var i,a=Math.max(0,n.startOffset),u=zM(t,o,null!==(i=o.textContent)&&void 0!==i?i:""),c=nB(e,o,n.startContainer,a,u,!0),s=function findPatterns$1(e,t,n,o){var i,a=e.dom,u=xs(e);if(!a.is(t,u))return[];var c=null!==(i=t.textContent)&&void 0!==i?i:"";return WM(n.blockPatterns,c).map((function(e){return Kt.trim(c).length===e.start.length?[]:[{pattern:e,range:IM(a,a.getRoot(),t,0,t,0,o)}]})).getOr([])}(e,o,u,!0);return(s.length>0||c.length>0)&&(e.undoManager.add(),e.undoManager.extra((function(){e.execCommand("mceInsertNewLine")}),(function(){!function insert$5(e){e.insertContent(Qo,{preserve_zwsp:!0})}(e),rB(e,c),function applyMatches$1(e,t){if(0!==t.length){var n=e.selection.getBookmark();ce(t,(function(t){return ZM(e,t)})),e.selection.moveToBookmark(n)}}(e,s);var t=e.selection.getRng(),n=gA(t.startContainer,t.startOffset,e.dom.getRoot());e.execCommand("mceInsertNewLine"),n.each((function(t){var n=t.container;n.data.charAt(t.offset-1)===Po&&(n.deleteData(t.offset-1,1),FM(e.dom,n.parentNode,(function(t){return t===e.dom.getRoot()})))}))})),!0)})).getOr(!1)},iB=function checkKeyEvent(e,t,n){for(var o=0;o<e.length;o++)if(n(e[o],t))return!0;return!1},aB=function setup$2(e){var t=[",",".",";",":","!","?"],n=[32],o=function getPatternSet(){return function createPatternSet(e,t){return{inlinePatterns:os(e),blockPatterns:rs(e),dynamicPatternsLookup:t}}(Wl(e),jl(e))},i=function hasDynamicPatterns(){return function hasTextPatternsLookup(e){return e.options.isSet("text_patterns_lookup")}(e)};e.on("keydown",(function(t){if(13===t.keyCode&&!tg.modifierPressed(t)&&e.selection.isCollapsed()){var n=o();(n.inlinePatterns.length>0||n.blockPatterns.length>0||i())&&oB(e,n)&&t.preventDefault()}}),!0);var a=function handleInlineTrigger(){if(e.selection.isCollapsed()){var t=o();(t.inlinePatterns.length>0||i())&&function handleInlineKey(e,t){var n=e.selection.getRng();$M(e,n).map((function(o){var i=Math.max(0,n.startOffset-1),a=VM(e.dom,o,n.startContainer,i),u=zM(t,o,a),c=nB(e,o,n.startContainer,i,u,!1);c.length>0&&e.undoManager.transact((function(){rB(e,c)}))}))}(e,t)}};e.on("keyup",(function(e){(function checkKeyCode(e,t){return iB(e,t,(function(e,t){return e===t.keyCode&&!tg.modifierPressed(t)}))})(n,e)&&a()})),e.on("keypress",(function(n){(function checkCharCode(e,t){return iB(e,t,(function(e,t){return e.charCodeAt(0)===t.charCode}))})(t,n)&&Cp.setEditorTimeout(e,a)}))},uB=function Quirks(e){var t=Kt.each,n=tg.BACKSPACE,o=tg.DELETE,i=e.dom,a=e.selection,u=e.parser,c=Wt.browser,s=c.isFirefox(),l=c.isChromium()||c.isSafari(),d=Wt.deviceType.isiPhone()||Wt.deviceType.isiPad(),m=Wt.os.isMacOS()||Wt.os.isiOS(),g=function setEditorCommandState(t,n){try{e.getDoc().execCommand(t,!1,String(n))}catch(o){}},p=function isDefaultPrevented(e){return e.isDefaultPrevented()},h=function emptyEditorWhenDeleting(){var t=function serializeRng(e){var t=i.create("body"),n=e.cloneContents();return t.appendChild(n),a.serializer.serialize(t,{format:"html"})};e.on("keydown",(function(a){var u=a.keyCode;if(!p(a)&&(u===o||u===n)&&e.selection.isEditable()){var c=e.selection.isCollapsed(),s=e.getBody();if(c&&!Li(In.fromDom(s)))return;if(!c&&!function allContentsSelected(n){var o=t(n),a=i.createRng();return a.selectNode(e.getBody()),o===t(a)}(e.selection.getRng()))return;a.preventDefault(),e.setContent(""),s.firstChild&&i.isBlock(s.firstChild)?e.selection.setCursorLocation(s.firstChild,0):e.selection.setCursorLocation(s,0),e.nodeChanged()}}))},v=function selectAll(){e.shortcuts.add("meta+a",null,"SelectAll")},b=function documentElementEditingFocus(){e.inline||i.bind(e.getDoc(),"mousedown mouseup",(function(t){var n;if(t.target===e.getDoc().documentElement)if(n=a.getRng(),e.getBody().focus(),"mousedown"===t.type){if(ai(n.startContainer))return;a.placeCaretAt(t.clientX,t.clientY)}else a.setRng(n)}))},y=function focusBody(){Range.prototype.getClientRects||e.on("mousedown",(function(t){if(!p(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),Cp.setEditorTimeout(e,(function(){n.focus()}))}}))},C=function selectControlElements(){var t=Tl(e);e.on("click",(function(n){var o=n.target;/^(IMG|HR)$/.test(o.nodeName)&&i.isEditable(o)&&(n.preventDefault(),e.selection.select(o),e.nodeChanged()),"A"===o.nodeName&&i.hasClass(o,t)&&0===o.childNodes.length&&i.isEditable(o.parentNode)&&(n.preventDefault(),a.select(o))}))},w=function disableBackspaceIntoATable(){e.on("keydown",(function(e){if(!p(e)&&e.keyCode===n&&a.isCollapsed()&&0===a.getRng().startOffset){var t=a.getNode().previousSibling;if(t&&t.nodeName&&"table"===t.nodeName.toLowerCase())return e.preventDefault(),!1}return!0}))},x=function setGeckoEditingOptions(){vl(e)||e.on("BeforeExecCommand mousedown",(function setOpts(){g("StyleWithCSS",!1),g("enableInlineTableEditing",!1),Ks(e)||g("enableObjectResizing",!1)}))},S=function addBrAfterLastLinks(){e.on("SetContent ExecCommand",(function(e){"setcontent"!==e.type&&"mceInsertLink"!==e.command||function fixLinks(){t(i.select("a:not([data-mce-block])"),(function(e){var t,n=e.parentNode,o=i.getRoot();if((null===n||void 0===n?void 0:n.lastChild)===e){for(;n&&!i.isBlock(n);){if((null===(t=n.parentNode)||void 0===t?void 0:t.lastChild)!==n||n===o)return;n=n.parentNode}i.add(n,"br",{"data-mce-bogus":1})}}))}()}))},k=function showBrokenImageIcon(){e.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},T=function restoreFocusOnKeyDown(){e.inline||e.on("keydown",(function(){document.activeElement===document.body&&e.getWin().focus()}))},E=function bodyHeight(){e.inline||(e.contentStyles.push("body {min-height: 150px}"),e.on("click",(function(t){var n;"HTML"===t.target.nodeName&&(n=e.selection.getRng(),e.getBody().focus(),e.selection.setRng(n),e.selection.normalize(),e.nodeChanged())})))},O=function blockCmdArrowNavigation(){m&&e.on("keydown",(function(t){!tg.metaKeyPressed(t)||t.shiftKey||37!==t.keyCode&&39!==t.keyCode||(t.preventDefault(),e.selection.getSel().modify("move",37===t.keyCode?"backward":"forward","lineboundary"))}))},A=function tapLinksAndImages(){e.on("click",(function(e){var t=e.target;do{if("A"===t.tagName)return void e.preventDefault()}while(t=t.parentNode)})),e.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},R=function blockFormSubmitInsideEditor(){e.on("init",(function(){e.dom.bind(e.getBody(),"submit",(function(e){e.preventDefault()}))}))},N=V;return Hx(e)?function setupRtc(){l&&(b(),C(),R(),v(),d&&(T(),E(),A())),s&&(y(),x(),k(),O())}():function setup(){!function removeBlockQuoteOnBackSpace(){e.on("keydown",(function(t){if(!p(t)&&t.keyCode===tg.BACKSPACE){var n=a.getRng(),o=n.startContainer,u=n.startOffset,c=i.getRoot(),s=o;if(n.collapsed&&0===u){for(;s.parentNode&&s.parentNode.firstChild===s&&s.parentNode!==c;)s=s.parentNode;"BLOCKQUOTE"===s.nodeName&&(e.formatter.toggle("blockquote",void 0,s),(n=i.createRng()).setStart(o,0),n.setEnd(o,0),a.setRng(n))}}}))}(),h(),Wt.windowsPhone||function normalizeSelection(){e.on("keyup focusin mouseup",(function(t){tg.modifierPressed(t)||function isAllContentSelected(e){var t=e.getBody(),n=e.selection.getRng();return n.startContainer===n.endContainer&&n.startContainer===t&&0===n.startOffset&&n.endOffset===t.childNodes.length}(e)||a.normalize()}),!0)}(),l&&(b(),C(),function setDefaultBlockType(){e.on("init",(function(){g("DefaultParagraphSeparator",xs(e))}))}(),R(),w(),function removeAppleInterchangeBrs(){u.addNodeFilter("br",(function(e){for(var t=e.length;t--;)"Apple-interchange-newline"===e[t].attr("class")&&e[t].remove()}))}(),d?(T(),E(),A()):v()),s&&(function removeHrOnBackspace(){e.on("keydown",(function(t){if(!p(t)&&t.keyCode===n){if(!e.getBody().getElementsByTagName("hr").length)return;if(a.isCollapsed()&&0===a.getRng().startOffset){var o=a.getNode(),u=o.previousSibling;if("HR"===o.nodeName)return i.remove(o),void t.preventDefault();u&&u.nodeName&&"hr"===u.nodeName.toLowerCase()&&(i.remove(u),t.preventDefault())}}}))}(),y(),function removeStylesWhenDeletingAcrossBlockElements(){var n=function getAttributeApplyFunction(){var n=i.getAttribs(a.getStart().cloneNode(!1));return function(){var o=a.getStart();o!==e.getBody()&&(i.setAttrib(o,"style",null),t(n,(function(e){o.setAttributeNode(e.cloneNode(!0))})))}},o=function isSelectionAcrossElements(){return!a.isCollapsed()&&i.getParent(a.getStart(),i.isBlock)!==i.getParent(a.getEnd(),i.isBlock)};e.on("keypress",(function(t){var i;return!(!(p(t)||8!==t.keyCode&&46!==t.keyCode)&&o())||(i=n(),e.getDoc().execCommand("delete",!1),i(),t.preventDefault(),!1)})),i.bind(e.getDoc(),"cut",(function(t){if(!p(t)&&o()){var i=n();Cp.setEditorTimeout(e,(function(){i()}))}}))}(),x(),S(),k(),O(),w(),function dropDragEndEvent(){e.on("drop",(function(t){var n,o=null===(n=t.dataTransfer)||void 0===n?void 0:n.getData("text/html");D(o)&&/^<img[^>]*>$/.test(o)&&e.dispatch("dragend",new window.DragEvent("dragend",t))}))}())}(),{refreshContentEditable:N,isHidden:function isHidden(){if(!s||e.removed)return!1;var t=e.selection.getSel();return!t||!t.rangeCount||0===t.rangeCount}}},cB=gu.DOM,sB=function getRootName(e){return e.inline?e.getElement().nodeName.toLowerCase():void 0},lB=function removeUndefined(e){return Pe(e,(function(e){return!1===P(e)}))},fB=function mkParserSettings(e){var t=e.options.get,n=e.editorUpload.blobCache;return lB({allow_conditional_comments:t("allow_conditional_comments"),allow_html_data_urls:t("allow_html_data_urls"),allow_svg_data_urls:t("allow_svg_data_urls"),allow_html_in_named_anchor:t("allow_html_in_named_anchor"),allow_script_urls:t("allow_script_urls"),allow_unsafe_link_target:t("allow_unsafe_link_target"),convert_unsafe_embeds:t("convert_unsafe_embeds"),convert_fonts_to_spans:t("convert_fonts_to_spans"),fix_list_elements:t("fix_list_elements"),font_size_legacy_values:t("font_size_legacy_values"),forced_root_block:t("forced_root_block"),forced_root_block_attrs:t("forced_root_block_attrs"),preserve_cdata:t("preserve_cdata"),inline_styles:t("inline_styles"),root_name:sB(e),sandbox_iframes:t("sandbox_iframes"),sanitize:t("xss_sanitization"),validate:!0,blob_cache:n,document:e.getDoc()})},dB=function mkSchemaSettings(e){var t=e.options.get;return lB({custom_elements:t("custom_elements"),extended_valid_elements:t("extended_valid_elements"),invalid_elements:t("invalid_elements"),invalid_styles:t("invalid_styles"),schema:t("schema"),valid_children:t("valid_children"),valid_classes:t("valid_classes"),valid_elements:t("valid_elements"),valid_styles:t("valid_styles"),verify_html:t("verify_html"),padd_empty_block_inline_children:t("format_empty_lines")})},mB=function initEditor(e){e.bindPendingEventDelegates(),e.initialized=!0,function fireInit(e){e.dispatch("Init")}(e),e.focus(!0),function moveSelectionToFirstCaretPosition(e){var t=e.dom.getRoot();e.inline||Yd(e)&&e.selection.getStart(!0)!==t||Cd(t).each((function(t){var n=t.getNode(),o=vo(n)?Cd(n).getOr(t):t;e.selection.setRng(o.toRange())}))}(e),e.nodeChanged({initial:!0});var t=Al(e);H(t)&&t.call(e,e),function autoFocus(e){var autoFocus=Dl(e);autoFocus&&Cp.setEditorTimeout(e,(function(){var t;(t=!0===autoFocus?e:e.editorManager.get(autoFocus))&&!t.destroyed&&(t.focus(),t.selection.scrollIntoView())}),100)}(e)},gB=function getStyleSheetLoader$1(e){return e.inline?e.ui.styleSheetLoader:e.dom.styleSheetLoader},pB=function loadContentCss(e){var t=gB(e),n=js(e),o=e.contentCSS,i=function removeCss(){t.unloadAll(o),e.inline||e.ui.styleSheetLoader.unloadAll(n)},a=function loaded(){e.removed?i():e.on("remove",i)};if(e.contentStyles.length>0){var u="";Kt.each(e.contentStyles,(function(e){u+=e+"\r\n"})),e.dom.addStyle(u)}var c=Promise.all(function makeStylesheetLoadingPromises(e,t,n){var o=le(t,(function(e){return tinymce.Resource.has($S(e))})),i=o.pass,a=o.fail,u=i.map((function(t){var n=tinymce.Resource.get($S(t));return D(n)?Promise.resolve(gB(e).loadRawCss(t,n)):Promise.resolve()})),c=[].concat(m(u),[gB(e).loadAll(a)]);return e.inline?c:c.concat([e.ui.styleSheetLoader.loadAll(n)])}(e,o,n)).then(a).catch(a),s=Ws(e);return s&&function appendStyle(e,t){var n=In.fromDom(e.getBody()),o=ur(ar(n)),i=In.fromTag("style");vn(i,"type","text/css"),Ir(i,In.fromText(t)),Ir(o,i),e.on("remove",(function(){Hr(i)}))}(e,s),c},hB=function initEditorWithInitialContent(e){!0!==e.removed&&(!function loadInitialContent(e){Hx(e)||e.load({initial:!0,format:"html"}),e.startContent=e.getContent({format:"raw"})}(e),mB(e))},vB=function contentBodyLoaded(e){var t=e.getElement(),n=e.getDoc();e.inline&&(cB.addClass(t,"mce-content-body"),e.contentDocument=n=document,e.contentWindow=window,e.bodyElement=t,e.contentAreaContainer=t);var o=e.getBody();o.disabled=!0,e.readonly=vl(e),e._editableRoot=bl(e),!e.readonly&&e.hasEditableRoot()&&(e.inline&&"static"===cB.getStyle(o,"position",!0)&&(o.style.position="relative"),o.contentEditable="true"),o.disabled=!1,e.editorUpload=XS(e),e.schema=La(dB(e)),e.dom=gu(n,{keep_values:!0,url_converter:e.convertURL,url_converter_scope:e,update_styles:!0,root_element:e.inline?e.getBody():null,collect:e.inline,schema:e.schema,contentCssCors:Fs(e),referrerPolicy:Hs(e),onSetAttrib:function onSetAttrib(t){e.dispatch("SetAttrib",t)},force_hex_color:of(e)}),e.parser=function createParser(e){var t=Qw(fB(e),e.schema);return t.addAttributeFilter("src,href,style,tabindex",(function(t,n){for(var o=e.dom,i="data-mce-"+n,a=t.length;a--;){var u=t[a],c=u.attr(n);if(c&&!u.attr(i)){if(0===c.indexOf("data:")||0===c.indexOf("blob:"))continue;"style"===n?((c=o.serializeStyle(o.parseStyle(c),u.name)).length||(c=null),u.attr(i,c),u.attr(n,c)):"tabindex"===n?(u.attr(i,c),u.attr(n,null)):u.attr(i,e.convertURL(c,n,u.name))}}})),t.addNodeFilter("script",(function(e){for(var t=e.length;t--;){var n=e[t],o=n.attr("type")||"no/type";0!==o.indexOf("mce-")&&n.attr("type","mce-"+o)}})),Yl(e)&&t.addNodeFilter("#cdata",(function(t){for(var n,o=t.length;o--;){var i=t[o];i.type=8,i.name="#comment",i.value="[CDATA["+e.dom.encode(null!==(n=i.value)&&void 0!==n?n:"")+"]]"}})),t.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(function(t){for(var n=t.length,o=e.schema.getNonEmptyElements();n--;){var i=t[n];i.isEmpty(o)&&0===i.getAll("br").length&&i.append(new Jp("br",1))}})),t}(e),e.serializer=nS(function mkSerializerSettings(e){var t=e.options.get;return l(l(l({},fB(e)),dB(e)),lB({remove_trailing_brs:t("remove_trailing_brs"),pad_empty_with_br:t("pad_empty_with_br"),url_converter:t("url_converter"),url_converter_scope:t("url_converter_scope"),element_format:t("element_format"),entities:t("entities"),entity_encoding:t("entity_encoding"),indent:t("indent"),indent_after:t("indent_after"),indent_before:t("indent_before")}))}(e),e),e.selection=Xx(e.dom,e.getWin(),e.serializer,e),e.annotator=jm(e),e.formatter=sk(e),e.undoManager=fk(e),e._nodeChangeDispatcher=new _R(e),e._selectionOverrides=NM(e),tO(e),ZN(e),fO(e),Hx(e)||(function setup$5(e){e.on("mousedown",(function(t){t.detail>=3&&(t.preventDefault(),JN(e))}))}(e),function setup$1(e){aB(e)}(e));var i=AR(e);QE(e,i),function setup$o(e){e.on("NodeChange",curry(aO,e))}(e),hk(e),UN(e);var a=$x(e);!function preInit(e){var t=e.getDoc(),n=e.getBody();!function firePreInit(e){e.dispatch("PreInit")}(e),Rl(e)||(t.body.spellcheck=!1,cB.setAttrib(n,"spellcheck","false")),e.quirks=uB(e),function firePostRender(e){e.dispatch("PostRender")}(e);var o=Gs(e);void 0!==o&&(n.dir=o);var i=Nl(e);i&&e.on("BeforeSetContent",(function(e){Kt.each(i,(function(t){e.content=e.content.replace(t,(function(e){return"\x3c!--mce:protected "+escape(e)+"--\x3e"}))}))})),e.on("SetContent",(function(){e.addVisual(e.getBody())})),e.on("compositionstart compositionend",(function(t){e.composing="compositionstart"===t.type}))}(e),a.fold((function(){var t=function startProgress(e){var t=!1,n=setTimeout((function(){t||e.setProgressState(!0)}),500);return function(){clearTimeout(n),t=!0,e.setProgressState(!1)}}(e);pB(e).then((function(){hB(e),t()}))}),(function(t){e.setProgressState(!0),pB(e).then((function(){t().then((function(t){e.setProgressState(!1),hB(e),Ux(e)}),(function(t){e.notificationManager.open({type:"error",text:String(t)}),hB(e),Ux(e)}))}))}))},bB=Q,yB=gu.DOM,CB=function createIframe(e,t){var n=e.translate("Rich Text Area"),o=Cn(In.fromDom(e.getElement()),"tabindex").bind(mt),i=function createIframeElement(e,t,n,o){var i=In.fromTag("iframe");return o.each((function(e){return vn(i,"tabindex",e)})),bn(i,n),bn(i,{id:e+"_ifr",frameBorder:"0",allowTransparency:"true",title:t}),_n(i,"tox-edit-area__iframe"),i}(e.id,n,ps(e),o).dom;i.onload=function(){i.onload=null,e.dispatch("load")},e.contentAreaContainer=t.iframeContainer,e.iframeElement=i,e.iframeHTML=function getIframeHtml(e){var t=hs(e)+"<html><head>";vs(e)!==e.documentBaseUrl&&(t+='<base href="'+e.documentBaseURI.getURI()+'" />'),t+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';var n=bs(e),o=ys(e),i=e.translate(El(e));return Cs(e)&&(t+='<meta http-equiv="Content-Security-Policy" content="'+Cs(e)+'" />'),t+"</head>"+'<body id="'.concat(n,'" class="mce-content-body ').concat(o,'" data-id="').concat(e.id,'" aria-label="').concat(i,'">')+"<br></body></html>"}(e),yB.add(t.iframeContainer,i)},wB=function setupIframeBody(e){var t=e.iframeElement,n=function ready(){e.contentDocument=t.contentDocument,vB(e)};if(Ql(e)||Wt.browser.isFirefox()){var o=e.getDoc();o.open(),o.write(e.iframeHTML),o.close(),n()}else{var i=function bind(e,t,n){return Wr(e,t,bB,n)}(In.fromDom(t),"load",(function(){i.unbind(),n()}));t.srcdoc=e.iframeHTML}},xB=function init$1(e,t){CB(e,t),t.editorContainer&&(t.editorContainer.style.display=e.orgDisplay,e.hidden=yB.isHidden(t.editorContainer)),e.getElement().style.display="none",yB.setAttrib(e.id,"aria-hidden","true"),e.getElement().style.visibility=e.orgVisibility,wB(e)},SB=gu.DOM,kB=function initPlugin(e,t,n){var o=NS.get(n),i=NS.urls[n]||e.documentBaseUrl.replace(/\/$/,"");if(n=Kt.trim(n),o&&-1===Kt.inArray(t,n)){if(e.plugins[n])return;try{var a=o(e,i)||{};e.plugins[n]=a,H(a.init)&&(a.init(e,i),t.push(n))}catch(u){!function pluginInitError(e,t,n){var o=wu.translate(["Failed to initialize plugin: {0}",t]);Km(e,"PluginLoadError",{message:o}),HS(o,n),PS(e,o)}(e,n,u)}}},TB=function initPlugins(e){var t=[];ce(Cl(e),(function(n){kB(e,t,function trimLegacyPrefix(e){return e.replace(/^\-/,"")}(n))}))},EB=function initIcons(e){var t=Kt.trim(Ns(e)),n=e.ui.registry.getAll().icons,o=l(l({},wS.get("default").icons),wS.get(t).icons);Re(o,(function(t,o){$e(n,o)||e.ui.registry.addIcon(o,t)}))},OB=function initTheme(e){var t=el(e);if(D(t)){var n=MS.get(t);e.theme=n(e,MS.urls[t])||{},H(e.theme.init)&&e.theme.init(e,MS.urls[t]||e.documentBaseUrl.replace(/\/$/,""))}else e.theme={}},AB=function initModel(e){var t=nl(e),n=xS.get(t);e.model=n(e,xS.urls[t])},_B=function createThemeFalseResult(e,t){return{editorContainer:e,iframeContainer:t,api:{}}},DB=function renderThemeFalse(e){var t=e.getElement();return e.inline?_B(null):function renderThemeFalseIframe(e){var t=SB.create("div");return SB.insertAfter(t,e),_B(t,t)}(t)},RB=function renderThemeUi(e){var t=e.getElement();return e.orgDisplay=t.style.display,D(el(e))?function renderFromLoadedTheme(e){var t=e.theme.renderUI;return t?t():DB(e)}(e):H(el(e))?function renderFromThemeFunc(e){var t=e.getElement(),n=el(e)(e,t);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||e.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||e.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:t.offsetHeight,n}(e):DB(e)},NB=function augmentEditorUiApi(e,t){var n={show:ee.from(t.show).getOr(V),hide:ee.from(t.hide).getOr(V),isEnabled:ee.from(t.isEnabled).getOr(Q),setEnabled:function setEnabled(n){e.mode.isReadOnly()||ee.from(t.setEnabled).each((function(e){return e(n)}))}};e.ui=l(l({},e.ui),n)},MB=function(){var e=i(o().mark((function _callee(e){var t;return o().wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return e.dispatch("ScriptsLoaded"),EB(e),OB(e),AB(e),TB(e),n.next=7,RB(e);case 7:t=n.sent,NB(e,ee.from(t.api).getOr({})),e.editorContainer=t.editorContainer,VS(e),e.inline?vB(e):xB(e,{editorContainer:t.editorContainer,iframeContainer:t.iframeContainer});case 12:case"end":return n.stop()}}),_callee)})));return function init(t){return e.apply(this,arguments)}}(),BB=gu.DOM,IB=function hasSkipLoadPrefix(e){return"-"===e.charAt(0)},PB=function loadLanguage(e,t){var n=$s(t),o=zs(t);if(!wu.hasCode(n)&&"en"!==n){var i=ft(o)?o:"".concat(t.editorManager.baseURL,"/langs/").concat(n,".js");e.add(i).catch((function(){!function languageLoadError(e,t,n){LS(e,"LanguageLoadError",FS("language",t,n))}(t,i,n)}))}},LB=function loadTheme(e,t){var n=el(e);if(D(n)&&!IB(n)&&!$e(MS.urls,n)){var o=tl(e),i=o?e.documentBaseURI.toAbsolute(o):"themes/".concat(n,"/theme").concat(t,".js");MS.load(n,i).catch((function(){!function themeLoadError(e,t,n){LS(e,"ThemeLoadError",FS("theme",t,n))}(e,i,n)}))}},FB=function loadModel(e,t){var n=nl(e);if("plugin"!==n&&!$e(xS.urls,n)){var o=rl(e),i=D(o)?e.documentBaseURI.toAbsolute(o):"models/".concat(n,"/model").concat(t,".js");xS.load(n,i).catch((function(){!function modelLoadError(e,t,n){LS(e,"ModelLoadError",FS("model",t,n))}(e,i,n)}))}},HB=function getIconsUrlMetaFromName(e,t,n){return ee.from(t).filter((function(e){return ft(e)&&!wS.has(e)})).map((function(t){return{url:"".concat(e.editorManager.baseURL,"/icons/").concat(t,"/icons").concat(n,".js"),name:ee.some(t)}}))},$B=function loadIcons(e,t,n){var o=HB(t,"default",n),i=function getIconsUrlMetaFromUrl(e){return ee.from(Ms(e)).filter(ft).map((function(e){return{url:e,name:ee.none()}}))}(t).orThunk((function(){return HB(t,Ns(t),"")}));ce(function cat(e){for(var t=[],n=function push(e){t.push(e)},o=0;o<e.length;o++)e[o].each(n);return t}([o,i]),(function(n){e.add(n.url).catch((function(){!function iconsLoadError(e,t,n){LS(e,"IconsLoadError",FS("icons",t,n))}(t,n.url,n.name.getOrUndefined())}))}))},zB=function loadPlugins(e,t){var n=function loadPlugin(t,n){NS.load(t,n).catch((function(){!function pluginLoadError(e,t,n){LS(e,"PluginLoadError",FS("plugin",t,n))}(e,n,t)}))};Re(wl(e),(function(t,o){n(o,t),e.options.set("plugins",Cl(e).concat(o))})),ce(Cl(e),(function(e){!(e=Kt.trim(e))||NS.urls[e]||IB(e)||n(e,"plugins/".concat(e,"/plugin").concat(t,".js"))}))},VB=function loadScripts(e,t){var n=hu.ScriptLoader,o=function initEditor(){!e.removed&&function isThemeLoaded(e){var t=el(e);return!D(t)||F(MS.get(t))}(e)&&function isModelLoaded(e){var t=nl(e);return F(xS.get(t))}(e)&&MB(e)};LB(e,t),FB(e,t),PB(n,e),$B(n,e,t),zB(e,t),n.loadQueue().then(o,o)},UB=function render(e){var t=e.id;wu.setCode($s(e));if(ou.Event.domLoaded){if(e.getElement()){var n=In.fromDom(e.getElement()),o=Sn(n);e.on("remove",(function(){se(n.dom.attributes,(function(e){return xn(n,e.name)})),bn(n,o)})),e.ui.styleSheetLoader=function getStyleSheetLoader(e,t){return ua.forElement(e,{contentCssCors:yl(t),referrerPolicy:Hs(t)})}(n,e),ll(e)?e.inline=!0:(e.orgVisibility=e.getElement().style.visibility,e.getElement().style.visibility="hidden");var i=e.getElement().form||BB.getParent(t,"form");i&&(e.formElement=i,fl(e)&&!yo(e.getElement())&&(BB.insertAfter(BB.create("input",{type:"hidden",name:t}),t),e.hasHiddenInput=!0),e.formEventDelegate=function(t){e.dispatch(t.type,t)},BB.bind(i,"submit reset",e.formEventDelegate),e.on("reset",(function(){e.resetContent()})),!dl(e)||i.submit.nodeType||i.submit.length||i._mceOldSubmit||(i._mceOldSubmit=i.submit,i.submit=function(){return e.editorManager.triggerSave(),e.setDirty(!1),i._mceOldSubmit(i)})),e.windowManager=BS(e),e.notificationManager=RS(e),function isEncodingXml(e){return"xml"===e.options.get("encoding")}(e)&&e.on("GetContent",(function(e){e.save&&(e.content=BB.encode(e.content))})),ml(e)&&e.on("submit",(function(){e.initialized&&e.save()})),gl(e)&&(e._beforeUnload=function(){!e.initialized||e.destroyed||e.isHidden()||e.save({format:"raw",no_events:!0,set_dirty:!1})},e.editorManager.on("BeforeUnload",e._beforeUnload)),e.editorManager.add(e),VB(e,e.suffix)}}else BB.bind(window,"ready",(function readyHandler(){BB.unbind(window,"ready",readyHandler),e.render()}))},ZB=Ft().deviceType,WB=ZB.isPhone(),jB=ZB.isTablet(),GB=function normalizePlugins(e){if(L(e))return[];var t=M(e)?e:e.split(/[ ,]/),n=ue(t,ct);return fe(n,ft)},qB=function extractSections(e,t){var n=function bifilter(e,t){var n={},o={};return Ie(e,t,Be(n),Be(o)),{t:n,f:o}}(t,(function(t,n){return ie(e,n)}));return function sectionResult(e,t){return{sections:W(e),options:W(t)}}(n.t,n.f)},KB=function hasSection(e,t){return $e(e.sections(),t)},YB=function getMobileOverrideOptions(e,t){var n={table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:He(e,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1};return l(l({},n),t?{menubar:!1}:{})},XB=function getExternalPlugins(e,t){var n,o=null!==(n=t.external_plugins)&&void 0!==n?n:{};return e&&e.external_plugins?Kt.extend({},e.external_plugins,o):o},JB=function processPlugins(e,t,n,o){var i=GB(n.forced_plugins),a=GB(o.plugins),u=function getSectionConfig(e,t){return KB(e,t)?e.sections()[t]:{}}(t,"mobile"),c=function getPlatformPlugins(e,t,n,o){return e&&KB(t,"mobile")?o:n}(e,t,a,u.plugins?GB(u.plugins):a),s=function combinePlugins(e,t){return[].concat(m(GB(e)),m(GB(t)))}(i,c);return Kt.extend(o,{forced_plugins:i,plugins:s})},QB=function combineOptions(e,t,n,o,i){var a,u=e?{mobile:YB(null!==(a=i.mobile)&&void 0!==a?a:{},t)}:{},c=qB(["mobile"],ZA(u,i)),s=Kt.extend(n,o,c.options(),function isOnMobile(e,t){return e&&KB(t,"mobile")}(e,c)?function getSection(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e.sections(),i=He(o,t).getOr({});return Kt.extend({},n,i)}(c,"mobile"):{},{external_plugins:XB(o,c.options())});return JB(e,c,o,s)},eI=function addVisual(e,t){return function addVisual$1(e,t){return Vx(e).editor.addVisual(t)}(e,t)},tI=function registerExecCommands$3(e){var t=function toggleAlign(t){return function(){ce("left,center,right,justify".split(","),(function(n){t!==n&&e.formatter.remove("align"+n)})),"none"!==t&&function toggleFormat(t,n){e.formatter.toggle(t,n),e.nodeChanged()}("align"+t)}};e.editorCommands.addCommands({JustifyLeft:t("left"),JustifyCenter:t("center"),JustifyRight:t("right"),JustifyFull:t("justify"),JustifyNone:t("none")})},nI=function registerCommands$b(e){tI(e),function registerQueryStateCommands$1(e){var t=function alignStates(t){return function(){var n=e.selection,o=n.isCollapsed()?[e.dom.getParent(n.getNode(),e.dom.isBlock)]:n.getSelectedBlocks();return ae(o,(function(n){return F(e.formatter.matchNode(n,t))}))}};e.editorCommands.addCommands({JustifyLeft:t("alignleft"),JustifyCenter:t("aligncenter"),JustifyRight:t("alignright"),JustifyFull:t("alignjustify")},"state")}(e)},rI=function trimOrPad(e,t){var n=e.selection,o=e.dom;return/^ | $/.test(t)?function trimOrPadLeftRight(e,t,n,o){var i=In.fromDom(e.getRoot());return n=sv(i,Tc.fromRangeStart(t),o)?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),lv(i,Tc.fromRangeEnd(t),o)?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")}(o,n.getRng(),t,e.schema):t},oI=function insertAtCaret(e,t){if(e.selection.isEditable()){var n=function processValue$1(e){if("string"!==typeof e){var t=Kt.extend({paste:e.paste,data:{paste:e.paste}},e);return{content:e.content,details:t}}return{content:e,details:{}}}(t),o=n.content,i=n.details;rx(e,l(l({},i),{},{content:rI(e,o),format:"html",set:!1,selection:!0})).each((function(t){var n=function insertContent$1(e,t,n){return zx(e).editor.insertContent(t,n)}(e,t.content,i);ox(e,n,t),e.addVisual()}))}},iI={"font-size":"size","font-family":"face"},aI=pn("font"),uI=function getSpecifiedFontProp(e,t,n){return ay(In.fromDom(n),(function(t){return function getProperty(t){return _r(t,e).orThunk((function(){return aI(t)?He(iI,e).bind((function(e){return Cn(t,e)})):ee.none()}))}(t)}),(function isRoot(e){return Hn(In.fromDom(t),e)}))},cI=function getFontProp(e){return function(t,n){return ee.from(n).map(In.fromDom).filter(fn).bind((function(n){return uI(e,t,n.dom).or(function getComputedFontProp(e,t){return ee.from(gu.DOM.getStyle(t,e,!0))}(e,n.dom))})).getOr("")}},sI=cI("font-size"),lI=U((function normalizeFontFamily(e){return e.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")}),cI("font-family")),fI=function findFirstCaretElement(e){return Cd(e.getBody()).bind((function(e){var t=e.container();return ee.from(Co(t)?t.parentNode:t)}))},dI=function bindRange(e,t){return function getCaretElement(e){return ee.from(e.selection.getRng()).bind((function(t){var n=e.getBody();return t.startContainer===n&&0===t.startOffset?ee.none():ee.from(e.selection.getStart(!0))}))}(e).orThunk(curry(fI,e)).map(In.fromDom).filter(fn).bind(t)},mI=function mapRange(e,t){return dI(e,Z(ee.some,t))},gI=function fromFontSizeNumber(e,t){if(/^[0-9.]+$/.test(t)){var n=parseInt(t,10);if(n>=1&&n<=7){var o=function getFontStyleValues(e){return Kt.explode(e.options.get("font_size_style_values"))}(e),i=function getFontSizeClasses(e){return Kt.explode(e.options.get("font_size_classes"))}(e);return i.length>0?i[n-1]||t:o[n-1]||t}return t}return t},pI=function normalizeFontNames(e){var t=e.split(/\s*,\s*/);return ue(t,(function(e){return-1===e.indexOf(" ")||it(e,'"')||it(e,"'")?e:"'".concat(e,"'")})).join(",")},hI=function registerExecCommands$2(e){var t=function toggleFormat(t,n){e.formatter.toggle(t,n),e.nodeChanged()};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function BoldItalicUnderlineStrikethroughSuperscriptSubscript(e){t(e)},"ForeColor,HiliteColor":function ForeColorHiliteColor(e,n,o){t(e,{value:o})},BackColor:function BackColor(e,n,o){t("hilitecolor",{value:o})},FontName:function FontName(t,n,o){!function fontNameAction(e,t){var n=gI(e,t);e.formatter.toggle("fontname",{value:pI(n)}),e.nodeChanged()}(e,o)},FontSize:function FontSize(t,n,o){!function fontSizeAction(e,t){e.formatter.toggle("fontsize",{value:gI(e,t)}),e.nodeChanged()}(e,o)},LineHeight:function LineHeight(t,n,o){!function lineHeightAction(e,t){e.formatter.toggle("lineheight",{value:String(t)}),e.nodeChanged()}(e,o)},Lang:function Lang(e,n,o){var i;t(e,{value:o.code,customValue:null!==(i=o.customCode)&&void 0!==i?i:null})},RemoveFormat:function RemoveFormat(t){e.formatter.remove(t)},mceBlockQuote:function mceBlockQuote(){t("blockquote")},FormatBlock:function FormatBlock(e,n,o){t(D(o)?o:"p")},mceToggleFormat:function mceToggleFormat(e,n,o){t(o)}})},vI=function registerQueryValueCommands(e){var t=function isFormatMatch(t){return e.formatter.match(t)};e.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function BoldItalicUnderlineStrikethroughSuperscriptSubscript(e){return t(e)},mceBlockQuote:function mceBlockQuote(){return t("blockquote")}},"state"),e.editorCommands.addQueryValueHandler("FontName",(function(){return function fontNameQuery(e){return mI(e,(function(t){return lI(e.getBody(),t.dom)})).getOr("")}(e)})),e.editorCommands.addQueryValueHandler("FontSize",(function(){return function fontSizeQuery(e){return mI(e,(function(t){return sI(e.getBody(),t.dom)})).getOr("")}(e)})),e.editorCommands.addQueryValueHandler("LineHeight",(function(){return function lineHeightQuery(e){return mI(e,(function(t){var n=In.fromDom(e.getBody()),o=ay(t,(function(e){return _r(e,"line-height")}),curry(Hn,n));return o.getOrThunk((function computedStyle(){var e=parseFloat(Or(t,"line-height")),n=parseFloat(Or(t,"font-size"));return String(e/n)}))})).getOr("")}(e)}))},bI=function registerCommands$6(e){e.editorCommands.addCommands({Indent:function Indent(){!function indent(e){qE(e,"indent")}(e)},Outdent:function Outdent(){KE(e)}}),e.editorCommands.addCommands({Outdent:function Outdent(){return WE(e)}},"state")},yI=function insert(e,t){var n=e.dom,o=e.selection.getRng(),i=t?e.selection.getStart():e.selection.getEnd(),a=t?o.startContainer:o.endContainer,u=bD(n,a);if(u&&u.isContentEditable){var c=t?Nr:Mr,s=xs(e);(function getTopParentBlock(e,t,n,o){var i=e.dom,a=function selector(e){return i.isBlock(e)&&e.parentElement===n},u=a(t)?t:i.getParent(o,a,n);return ee.from(u).map(In.fromDom)})(e,i,u,a).each((function(t){var n=xD(e,a,t.dom,u,!1,s);c(t,In.fromDom(n)),e.selection.setCursorLocation(n,0),e.dispatch("NewBlock",{newBlock:n}),sD(e,"insertParagraph")}))}},CI=function registerCommands$3(e){e.editorCommands.addCommands({InsertNewBlockBefore:function InsertNewBlockBefore(){!function insertBefore(e){yI(e,!0)}(e)},InsertNewBlockAfter:function InsertNewBlockAfter(){!function insertAfter(e){yI(e,!1)}(e)}})},wI=function registerCommands(e){nI(e),function registerCommands$a(e){e.editorCommands.addCommands({"Cut,Copy,Paste":function CutCopyPaste(t){var n,o=e.getDoc();try{o.execCommand(t)}catch(a){n=!0}if("paste"!==t||o.queryCommandEnabled(t)||(n=!0),n||!o.queryCommandSupported(t)){var i=e.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Wt.os.isMacOS()||Wt.os.isiOS())&&(i=i.replace(/Ctrl\+/g,"\u2318+")),e.notificationManager.open({text:i,type:"error"})}}})}(e),function registerCommands$7(e){e.editorCommands.addCommands({mceAddUndoLevel:function mceAddUndoLevel(){e.undoManager.add()},mceEndUndoLevel:function mceEndUndoLevel(){e.undoManager.add()},Undo:function Undo(){e.undoManager.undo()},Redo:function Redo(){e.undoManager.redo()}})}(e),function registerCommands$1(e){e.editorCommands.addCommands({mceSelectNodeDepth:function mceSelectNodeDepth(t,n,o){var i=0;e.dom.getParent(e.selection.getNode(),(function(t){return!co(t)||i++!==o||(e.selection.select(t),!1)}),e.getBody())},mceSelectNode:function mceSelectNode(t,n,o){e.selection.select(o)},selectAll:function selectAll(){var t=e.dom.getParent(e.selection.getStart(),Ao);if(t){var n=e.dom.createRng();n.selectNodeContents(t),e.selection.setRng(n)}}})}(e),function registerCommands$9(e){e.editorCommands.addCommands({mceCleanup:function mceCleanup(){var t=e.selection.getBookmark();e.setContent(e.getContent()),e.selection.moveToBookmark(t)},insertImage:function insertImage(t,n,o){oI(e,e.dom.createHTML("img",{src:o}))},insertHorizontalRule:function insertHorizontalRule(){e.execCommand("mceInsertContent",!1,"<hr>")},insertText:function insertText(t,n,o){oI(e,e.dom.encode(o))},insertHTML:function insertHTML(t,n,o){oI(e,o)},mceInsertContent:function mceInsertContent(t,n,o){oI(e,o)},mceSetContent:function mceSetContent(t,n,o){e.setContent(o)},mceReplaceContent:function mceReplaceContent(t,n,o){e.execCommand("mceInsertContent",!1,o.replace(/\{\$selection\}/g,e.selection.getContent({format:"text"})))},mceNewDocument:function mceNewDocument(){e.setContent(Ll(e))}})}(e),function registerCommands$5(e){var t=function applyLinkToSelection(t,n,o){var i=D(o)?{href:o}:o,a=e.dom.getParent(e.selection.getNode(),"a");R(i)&&D(i.href)&&(i.href=i.href.replace(/ /g,"%20"),a&&i.href||e.formatter.remove("link"),i.href&&e.formatter.apply("link",i,a))};e.editorCommands.addCommands({unlink:function unlink(){if(e.selection.isEditable()){if(e.selection.isCollapsed()){var t=e.dom.getParent(e.selection.getStart(),"a");return void(t&&e.dom.remove(t,!0))}e.formatter.remove("link")}},mceInsertLink:t,createLink:t})}(e),bI(e),CI(e),function registerCommands$2(e){e.editorCommands.addCommands({insertParagraph:function insertParagraph(){uR(LD,e)},mceInsertNewLine:function mceInsertNewLine(t,n,o){cR(e,o)},InsertLineBreak:function InsertLineBreak(t,n,o){uR(jD,e)}})}(e),function registerCommands$4(e){!function registerExecCommands$1(e){e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":function InsertUnorderedListInsertOrderedList(t){e.getDoc().execCommand(t);var n=e.dom.getParent(e.selection.getNode(),"ol,ul");if(n){var o=n.parentNode;if(o&&/^(H[1-6]|P|ADDRESS|PRE)$/.test(o.nodeName)){var i=e.selection.getBookmark();e.dom.split(o,n),e.selection.moveToBookmark(i)}}}})}(e),function registerQueryStateCommands(e){e.editorCommands.addCommands({"InsertUnorderedList,InsertOrderedList":function InsertUnorderedListInsertOrderedList(t){var n=e.dom.getParent(e.selection.getNode(),"ul,ol");return n&&("insertunorderedlist"===t&&"UL"===n.tagName||"insertorderedlist"===t&&"OL"===n.tagName)}},"state")}(e)}(e),function registerCommands$8(e){hI(e),vI(e)}(e),function registerExecCommands(e){e.editorCommands.addCommands({mceRemoveNode:function mceRemoveNode(t,n,o){var i=null!==o&&void 0!==o?o:e.selection.getNode();if(i!==e.getBody()){var a=e.selection.getBookmark();e.dom.remove(i,!0),e.selection.moveToBookmark(a)}},mcePrint:function mcePrint(){e.getWin().print()},mceFocus:function mceFocus(t,n,o){Ip(e,!0===o)},mceToggleVisualAid:function mceToggleVisualAid(){e.hasVisual=!e.hasVisual,e.addVisual()}})}(e)},xI=["toggleview"],SI=function isSelectionSafeCommand(e){return ie(xI,e.toLowerCase())},kI=function(){function EditorCommands(e){p(this,EditorCommands),this.commands={state:{},exec:{},value:{}},this.editor=e}return h(EditorCommands,[{key:"execCommand",value:function execCommand(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0,o=arguments.length>3?arguments[3]:void 0,i=this.editor,a=e.toLowerCase(),u=null===o||void 0===o?void 0:o.skip_focus;if(i.removed)return!1;if("mcefocus"!==a&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(a)||u?function restore(e){bp(e).each((function(t){return e.selection.setRng(t)}))}(i):i.focus()),i.dispatch("BeforeExecCommand",{command:e,ui:t,value:n}).isDefaultPrevented())return!1;var c=this.commands.exec[a];return!!H(c)&&(c(a,t,n),i.dispatch("ExecCommand",{command:e,ui:t,value:n}),!0)}},{key:"queryCommandState",value:function queryCommandState(e){if(!SI(e)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;var t=e.toLowerCase(),n=this.commands.state[t];return!!H(n)&&n(t)}},{key:"queryCommandValue",value:function queryCommandValue(e){if(!SI(e)&&this.editor.quirks.isHidden()||this.editor.removed)return"";var t=e.toLowerCase(),n=this.commands.value[t];return H(n)?n(t):""}},{key:"addCommands",value:function addCommands(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"exec",n=this.commands;Re(e,(function(e,o){ce(o.toLowerCase().split(","),(function(o){n[t][o]=e}))}))}},{key:"addCommand",value:function addCommand(e,t,n){var o=this,i=e.toLowerCase();this.commands.exec[i]=function(e,i,a){return t.call(null!==n&&void 0!==n?n:o.editor,i,a)}}},{key:"queryCommandSupported",value:function queryCommandSupported(e){var t=e.toLowerCase();return!!this.commands.exec[t]}},{key:"addQueryStateHandler",value:function addQueryStateHandler(e,t,n){var o=this;this.commands.state[e.toLowerCase()]=function(){return t.call(null!==n&&void 0!==n?n:o.editor)}}},{key:"addQueryValueHandler",value:function addQueryValueHandler(e,t,n){var o=this;this.commands.value[e.toLowerCase()]=function(){return t.call(null!==n&&void 0!==n?n:o.editor)}}}]),EditorCommands}(),TI="data-mce-contenteditable",EI=function setEditorCommandState(e,t,n){try{e.getDoc().execCommand(t,!1,String(n))}catch(o){}},OI=function setContentEditable(e,t){e.dom.contentEditable=t?"true":"false"},AI=function toggleReadOnly(e,t){var n=In.fromDom(e.getBody());!function toggleClass(e,t,n){Mn(e,t)&&!n?Rn(e,t):n&&_n(e,t)}(n,"mce-content-readonly",t),t?(e.selection.controlSelection.hideResizeRect(),e._selectionOverrides.hideFakeCaret(),function removeFakeSelection(e){ee.from(e.selection.getNode()).each((function(e){e.removeAttribute("data-mce-selected")}))}(e),e.readonly=!0,OI(n,!1),function switchOffContentEditableTrue(e){ce(ro(e,'*[contenteditable="true"]'),(function(e){vn(e,TI,"true"),OI(e,!1)}))}(n)):(e.readonly=!1,e.hasEditableRoot()&&OI(n,!0),function switchOnContentEditableTrue(e){ce(ro(e,"*[".concat(TI,'="true"]')),(function(e){xn(e,TI),OI(e,!0)}))}(n),EI(e,"StyleWithCSS",!1),EI(e,"enableInlineTableEditing",!1),EI(e,"enableObjectResizing",!1),Mp(e)&&e.focus(),function restoreFakeSelection(e){e.selection.setRng(e.selection.getRng())}(e),e.nodeChanged())},_I=function isReadOnly(e){return e.readonly},DI=function registerFilters(e){e.parser.addAttributeFilter("contenteditable",(function(t){_I(e)&&ce(t,(function(e){e.attr(TI,e.attr("contenteditable")),e.attr("contenteditable","false")}))})),e.serializer.addAttributeFilter(TI,(function(t){_I(e)&&ce(t,(function(e){e.attr("contenteditable",e.attr(TI))}))})),e.serializer.addTempAttr(TI)},RI=["copy"],NI=function processReadonlyEvents(e,t){if(function isClickEvent(e){return"click"===e.type}(t)&&!tg.metaKeyPressed(t)){var n=In.fromDom(t.target);(function getAnchorHrefOpt(e,t){return Cr(t,"a",(function isRoot(t){return Hn(t,In.fromDom(e.getBody()))})).bind((function(e){return Cn(e,"href")}))})(e,n).each((function(n){if(t.preventDefault(),/^#/.test(n)){var o=e.dom.select("".concat(n,',[name="').concat(rt(n,"#"),'"]'));o.length&&e.selection.scrollIntoView(o[0],!0)}else window.open(n,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))}else(function isReadOnlyAllowedEvent(e){return ie(RI,e.type)})(t)&&e.dispatch(t.type,t)},MI=Kt.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," "),BI=function(){function EventDispatcher(e){p(this,EventDispatcher),this.bindings={},this.settings=e||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||J}return h(EventDispatcher,[{key:"fire",value:function fire(e,t){return this.dispatch(e,t)}},{key:"dispatch",value:function dispatch(e,t){var n=e.toLowerCase(),o=Xa(n,null!==t&&void 0!==t?t:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(o);var i=this.bindings[n];if(i)for(var a=0,u=i.length;a<u;a++){var c=i[a];if(!c.removed){if(c.once&&this.off(n,c.func),o.isImmediatePropagationStopped())return o;if(!1===c.func.call(this.scope,o))return o.preventDefault(),o}}return o}},{key:"on",value:function on(e,t,n,o){if(!1===t&&(t=J),t){var i={func:t,removed:!1};o&&Kt.extend(i,o);for(var a=e.toLowerCase().split(" "),u=a.length;u--;){var c=a[u],s=this.bindings[c];s||(s=[],this.toggleEvent(c,!0)),s=n?[i].concat(m(s)):[].concat(m(s),[i]),this.bindings[c]=s}}return this}},{key:"off",value:function off(e,t){var n=this;if(e)for(var o=e.toLowerCase().split(" "),i=o.length;i--;){var a=o[i],u=this.bindings[a];if(!a)return Re(this.bindings,(function(e,t){n.toggleEvent(t,!1),delete n.bindings[t]})),this;if(u){if(t){var c=le(u,(function(e){return e.func===t}));u=c.fail,this.bindings[a]=u,ce(c.pass,(function(e){e.removed=!0}))}else u.length=0;u.length||(this.toggleEvent(e,!1),delete this.bindings[a])}}else Re(this.bindings,(function(e,t){n.toggleEvent(t,!1)})),this.bindings={};return this}},{key:"once",value:function once(e,t,n){return this.on(e,t,n,{once:!0})}},{key:"has",value:function has(e){e=e.toLowerCase();var t=this.bindings[e];return!(!t||0===t.length)}}],[{key:"isNative",value:function isNative(e){return!!MI[e.toLowerCase()]}}]),EventDispatcher}(),II=function getEventDispatcher(e){return e._eventDispatcher||(e._eventDispatcher=new BI({scope:e,toggleEvent:function toggleEvent(t,n){BI.isNative(t)&&e.toggleNativeEvent&&e.toggleNativeEvent(t,n)}})),e._eventDispatcher},PI={fire:function fire(e,t,n){return this.dispatch(e,t,n)},dispatch:function dispatch(e,t,n){var o=this;if(o.removed&&"remove"!==e&&"detach"!==e)return Xa(e.toLowerCase(),null!==t&&void 0!==t?t:{},o);var i=II(o).dispatch(e,t);if(!1!==n&&o.parent)for(var a=o.parent();a&&!i.isPropagationStopped();)a.dispatch(e,i,!1),a=a.parent?a.parent():void 0;return i},on:function on(e,t,n){return II(this).on(e,t,n)},off:function off(e,t){return II(this).off(e,t)},once:function once(e,t){return II(this).once(e,t)},hasEventListeners:function hasEventListeners(e){return II(this).has(e)}},LI=gu.DOM,FI=function getEventTarget(e,t){if("selectionchange"===t)return e.getDoc();if(!e.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(t))return e.getDoc().documentElement;var n=Js(e);return n?(e.eventRoot||(e.eventRoot=LI.select(n)[0]),e.eventRoot):e.getBody()},HI=function fireEvent(e,t,n){!function isListening(e){return!e.hidden&&!_I(e)}(e)?_I(e)&&NI(e,n):e.dispatch(t,n)},$I=function bindEventDelegate(e,t){if(e.delegates||(e.delegates={}),!e.delegates[t]&&!e.removed){var n=FI(e,t);if(Js(e)){if(QN||(QN={},e.editorManager.on("removeEditor",(function(){e.editorManager.activeEditor||QN&&(Re(QN,(function(t,n){e.dom.unbind(FI(e,n))})),QN=null)}))),QN[t])return;var o=function delegate(n){for(var o=n.target,i=e.editorManager.get(),a=i.length;a--;){var u=i[a].getBody();(u===o||LI.isChildOf(o,u))&&HI(i[a],t,n)}};QN[t]=o,LI.bind(n,t,o)}else{var i=function _delegate(n){HI(e,t,n)};LI.bind(n,t,i),e.delegates[t]=i}}},zI=l(l({},PI),{},{bindPendingEventDelegates:function bindPendingEventDelegates(){var e=this;Kt.each(e._pendingNativeEvents,(function(t){$I(e,t)}))},toggleNativeEvent:function toggleNativeEvent(e,t){var n=this;"focus"!==e&&"blur"!==e&&(n.removed||(t?n.initialized?$I(n,e):n._pendingNativeEvents?n._pendingNativeEvents.push(e):n._pendingNativeEvents=[e]:n.initialized&&n.delegates&&(n.dom.unbind(FI(n,e),e,n.delegates[e]),delete n.delegates[e])))},unbindAllNativeEvents:function unbindAllNativeEvents(){var e=this,t=e.getBody(),n=e.dom;e.delegates&&(Re(e.delegates,(function(t,n){e.dom.unbind(FI(e,n),n,t)})),delete e.delegates),!e.inline&&t&&n&&(t.onload=null,n.unbind(e.getWin()),n.unbind(e.getDoc())),n&&(n.unbind(t),n.unbind(e.getContainer()))}}),VI=function stringListProcessor(e){return D(e)?{value:e.split(/[ ,]/),valid:!0}:z(e,D)?{value:e,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."}},UI=function getErrorMessage(e,t){return e+(dt(t.message)?"":". ".concat(t.message))},ZI=function isValidResult(e){return e.valid},WI=function processValue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",o=t(e);return I(o)?o?{value:e,valid:!0}:{valid:!1,message:n}:o},jI=function create$5(e,t){var n={},o={},i=function setValue(e,t,n){var i=WI(t,n);return ZI(i)?(o[e]=i.value,!0):(console.warn(UI("Invalid value passed for the ".concat(e," option"),i)),!1)},a=function isRegistered(e){return $e(n,e)};return{register:function register(e,a){var u=function isBuiltInSpec(e){return D(e.processor)}(a)?function getBuiltInProcessor(e){var t=function(){switch(e){case"array":return M;case"boolean":return I;case"function":return H;case"number":return $;case"object":return R;case"string":return D;case"string[]":return VI;case"object[]":return function(e){return z(e,R)};case"regexp":return function(e){return A(e,RegExp)};default:return Q}}();return function(n){return WI(n,t,"The value must be a ".concat(e,"."))}}(a.processor):a.processor,c=function processDefaultValue(e,t,n){if(!P(t)){var o=WI(t,n);if(ZI(o))return o.value;console.error(UI('Invalid default value passed for the "'.concat(e,'" option'),o))}}(e,a.default,u);n[e]=l(l({},a),{},{default:c,processor:u}),He(o,e).orThunk((function(){return He(t,e)})).each((function(t){return i(e,t,u)}))},isRegistered:a,get:function get(e){return He(o,e).orThunk((function(){return He(n,e).map((function(e){return e.default}))})).getOrUndefined()},set:function set(e,t){if(a(e)){var o=n[e];return o.immutable?(console.error('"'.concat(e,'" is an immutable option and cannot be updated')),!1):i(e,t,o.processor)}return console.warn('"'.concat(e,'" is not a registered option. Ensure the option has been registered before setting a value.')),!1},unset:function unset(e){var t=a(e);return t&&delete o[e],t},isSet:function isSet(e){return $e(o,e)}}},GI=["design","readonly"],qI=function switchToMode(e,t,n,o){var i=n[t.get()],a=n[o];try{a.activate()}catch(u){return void console.error("problem while activating editor mode ".concat(o,":"),u)}i.deactivate(),i.editorReadOnly!==a.editorReadOnly&&AI(e,a.editorReadOnly),t.set(o),function fireSwitchMode(e,t){e.dispatch("SwitchMode",{mode:t})}(e,o)},KI=function create$4(e){var t=vu("design"),n=vu({design:{activate:V,deactivate:V,editorReadOnly:!1},readonly:{activate:V,deactivate:V,editorReadOnly:!0}});return function registerReadOnlyContentFilters(e){e.serializer?DI(e):e.on("PreInit",(function(){DI(e)}))}(e),function registerReadOnlySelectionBlockers(e){e.on("ShowCaret",(function(t){_I(e)&&t.preventDefault()})),e.on("ObjectSelected",(function(t){_I(e)&&t.preventDefault()}))}(e),{isReadOnly:function isReadOnly(){return _I(e)},set:function set(o){return function setMode(e,t,n,o){if(o!==n.get()){if(!$e(t,o))throw new Error("Editor mode '".concat(o,"' is invalid"));e.initialized?qI(e,n,t,o):e.on("init",(function(){return qI(e,n,t,o)}))}}(e,n.get(),t,o)},get:function get(){return t.get()},register:function register(e,t){n.set(function registerMode(e,t,n){if(ie(GI,t))throw new Error("Cannot override default mode ".concat(t));return l(l({},e),{},a({},t,l(l({},n),{},{deactivate:function deactivate(){try{n.deactivate()}catch(e){console.error("problem while deactivating editor mode ".concat(t,":"),e)}}})))}(n.get(),e,t))}}},YI=Kt.each,XI=Kt.explode,JI={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},QI=Kt.makeMap("alt,ctrl,shift,meta,access"),eP=function parseShortcut(e){var t={},n=Wt.os.isMacOS()||Wt.os.isiOS();YI(XI(e.toLowerCase(),"+"),(function(e){!function isModifier(e){return e in QI}(e)?/^[0-9]{2,}$/.test(e)?t.keyCode=parseInt(e,10):(t.charCode=e.charCodeAt(0),t.keyCode=JI[e]||e.toUpperCase().charCodeAt(0)):t[e]=!0}));var o,i=[t.keyCode];for(o in QI)t[o]?i.push(o):t[o]=!1;return t.id=i.join(","),t.access&&(t.alt=!0,n?t.ctrl=!0:t.shift=!0),t.meta&&(n?t.meta=!0:(t.ctrl=!0,t.meta=!1)),t},tP=function(){function Shortcuts(e){p(this,Shortcuts),this.shortcuts={},this.pendingPatterns=[],this.editor=e;var t=this;e.on("keyup keypress keydown",(function(e){!t.hasModifier(e)&&!t.isFunctionKey(e)||e.isDefaultPrevented()||(YI(t.shortcuts,(function(n){t.matchShortcut(e,n)&&(t.pendingPatterns=n.subpatterns.slice(0),"keydown"===e.type&&t.executeShortcutAction(n))})),t.matchShortcut(e,t.pendingPatterns[0])&&(1===t.pendingPatterns.length&&"keydown"===e.type&&t.executeShortcutAction(t.pendingPatterns[0]),t.pendingPatterns.shift()))}))}return h(Shortcuts,[{key:"add",value:function add(e,t,n,o){var i=this,a=i.normalizeCommandFunc(n);return YI(XI(Kt.trim(e)),(function(e){var n=i.createShortcut(e,t,a,o);i.shortcuts[n.id]=n})),!0}},{key:"remove",value:function remove(e){var t=this.createShortcut(e);return!!this.shortcuts[t.id]&&(delete this.shortcuts[t.id],!0)}},{key:"normalizeCommandFunc",value:function normalizeCommandFunc(e){var t=this,n=e;return"string"===typeof n?function(){t.editor.execCommand(n,!1,null)}:Kt.isArray(n)?function(){t.editor.execCommand(n[0],n[1],n[2])}:n}},{key:"createShortcut",value:function createShortcut(e,t,n,o){var i=Kt.map(XI(e,">"),eP);return i[i.length-1]=Kt.extend(i[i.length-1],{func:n,scope:o||this.editor}),Kt.extend(i[0],{desc:this.editor.translate(t),subpatterns:i.slice(1)})}},{key:"hasModifier",value:function hasModifier(e){return e.altKey||e.ctrlKey||e.metaKey}},{key:"isFunctionKey",value:function isFunctionKey(e){return"keydown"===e.type&&e.keyCode>=112&&e.keyCode<=123}},{key:"matchShortcut",value:function matchShortcut(e,t){return!!t&&(t.ctrl===e.ctrlKey&&t.meta===e.metaKey&&(t.alt===e.altKey&&t.shift===e.shiftKey&&(!!(e.keyCode===t.keyCode||e.charCode&&e.charCode===t.charCode)&&(e.preventDefault(),!0))))}},{key:"executeShortcutAction",value:function executeShortcutAction(e){return e.func?e.func.call(e.scope):null}}]),Shortcuts}(),nP=function registry(){var e=function create$3(){var e={},t={},n={},o={},i={},a={},u={},c={},s=function add(e,t){return function(n,o){e[n.toLowerCase()]=l(l({},o),{},{type:t})}};return{addButton:s(e,"button"),addGroupToolbarButton:s(e,"grouptoolbarbutton"),addToggleButton:s(e,"togglebutton"),addMenuButton:s(e,"menubutton"),addSplitButton:s(e,"splitbutton"),addMenuItem:s(t,"menuitem"),addNestedMenuItem:s(t,"nestedmenuitem"),addToggleMenuItem:s(t,"togglemenuitem"),addAutocompleter:s(n,"autocompleter"),addContextMenu:s(i,"contextmenu"),addContextToolbar:s(a,"contexttoolbar"),addContextForm:s(a,"contextform"),addSidebar:s(u,"sidebar"),addView:s(c,"views"),addIcon:function addIcon(e,t){return o[e.toLowerCase()]=t},getAll:function getAll(){return{buttons:e,menuItems:t,icons:o,popups:n,contextMenus:i,contextToolbars:a,sidebars:u,views:c}}}}();return{addAutocompleter:e.addAutocompleter,addButton:e.addButton,addContextForm:e.addContextForm,addContextMenu:e.addContextMenu,addContextToolbar:e.addContextToolbar,addIcon:e.addIcon,addMenuButton:e.addMenuButton,addMenuItem:e.addMenuItem,addNestedMenuItem:e.addNestedMenuItem,addSidebar:e.addSidebar,addSplitButton:e.addSplitButton,addToggleButton:e.addToggleButton,addGroupToolbarButton:e.addGroupToolbarButton,addToggleMenuItem:e.addToggleMenuItem,addView:e.addView,getAll:e.getAll}},rP=gu.DOM,oP=Kt.extend,iP=Kt.each,aP=function(){function Editor(e,t,n){p(this,Editor),this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,oP(this,zI);var o=this;this.id=e,this.hidden=!1;var i=function normalizeOptions(e,t){return QB(WB||jB,WB,t,e,t)}(n.defaultOptions,t);this.options=jI(0,i),function register$7(e){var t=e.options.register;t("id",{processor:"string",default:e.id}),t("selector",{processor:"string"}),t("target",{processor:"object"}),t("suffix",{processor:"string"}),t("cache_suffix",{processor:"string"}),t("base_url",{processor:"string"}),t("referrer_policy",{processor:"string",default:""}),t("language_load",{processor:"boolean",default:!0}),t("inline",{processor:"boolean",default:!1}),t("iframe_attrs",{processor:"object",default:{}}),t("doctype",{processor:"string",default:"<!DOCTYPE html>"}),t("document_base_url",{processor:"string",default:e.documentBaseUrl}),t("body_id",{processor:gs(e,"tinymce"),default:"tinymce"}),t("body_class",{processor:gs(e),default:""}),t("content_security_policy",{processor:"string",default:""}),t("br_in_pre",{processor:"boolean",default:!0}),t("forced_root_block",{processor:function processor(e){var t=D(e)&&ft(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),t("forced_root_block_attrs",{processor:"object",default:{}}),t("newline_behavior",{processor:function processor(e){var t=ie(["block","linebreak","invert","default"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),t("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),t("no_newline_selector",{processor:"string",default:""}),t("keep_styles",{processor:"boolean",default:!0}),t("end_container_on_empty_block",{processor:function processor(e){return I(e)||D(e)?{valid:!0,value:e}:{valid:!1,message:"Must be boolean or a string"}},default:"blockquote"}),t("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),t("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),t("font_size_classes",{processor:"string",default:""}),t("automatic_uploads",{processor:"boolean",default:!0}),t("images_reuse_filename",{processor:"boolean",default:!1}),t("images_replace_blob_uris",{processor:"boolean",default:!0}),t("icons",{processor:"string",default:""}),t("icons_url",{processor:"string",default:""}),t("images_upload_url",{processor:"string",default:""}),t("images_upload_base_path",{processor:"string",default:""}),t("images_upload_credentials",{processor:"boolean",default:!1}),t("images_upload_handler",{processor:"function"}),t("language",{processor:"string",default:"en"}),t("language_url",{processor:"string",default:""}),t("entity_encoding",{processor:"string",default:"named"}),t("indent",{processor:"boolean",default:!0}),t("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),t("indent_use_margin",{processor:"boolean",default:!1}),t("indentation",{processor:"string",default:"40px"}),t("content_css",{processor:function processor(e){var t=!1===e||D(e)||z(e,D);return t?D(e)?{value:ue(e.split(","),ct),valid:t}:M(e)?{value:e,valid:t}:!1===e?{value:[],valid:t}:{value:e,valid:t}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:ll(e)?[]:["default"]}),t("content_style",{processor:"string"}),t("content_css_cors",{processor:"boolean",default:!1}),t("font_css",{processor:function processor(e){var t=D(e)||z(e,D);return t?{value:M(e)?e:ue(e.split(","),ct),valid:t}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),t("inline_boundaries",{processor:"boolean",default:!0}),t("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),t("object_resizing",{processor:function processor(e){var t=I(e)||D(e);return t?!1===e||cs.isiPhone()||cs.isiPad()?{value:"",valid:t}:{value:!0===e?"table,img,figure.image,div,video,iframe":e,valid:t}:{valid:!1,message:"Must be boolean or a string"}},default:!ss}),t("resize_img_proportional",{processor:"boolean",default:!0}),t("event_root",{processor:"object"}),t("service_message",{processor:"string"}),t("theme",{processor:function processor(e){return!1===e||D(e)||H(e)},default:"silver"}),t("theme_url",{processor:"string"}),t("formats",{processor:"object"}),t("format_empty_lines",{processor:"boolean",default:!1}),t("format_noneditable_selector",{processor:"string",default:""}),t("preview_styles",{processor:function processor(e){var t=!1===e||D(e);return t?{value:!1===e?"":e,valid:t}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),t("custom_ui_selector",{processor:"string",default:""}),t("hidden_input",{processor:"boolean",default:!0}),t("submit_patch",{processor:"boolean",default:!0}),t("encoding",{processor:"string"}),t("add_form_submit_trigger",{processor:"boolean",default:!0}),t("add_unload_trigger",{processor:"boolean",default:!0}),t("custom_undo_redo_levels",{processor:"number",default:0}),t("disable_nodechange",{processor:"boolean",default:!1}),t("readonly",{processor:"boolean",default:!1}),t("editable_root",{processor:"boolean",default:!0}),t("plugins",{processor:"string[]",default:[]}),t("external_plugins",{processor:"object"}),t("forced_plugins",{processor:"string[]"}),t("model",{processor:"string",default:e.hasPlugin("rtc")?"plugin":"dom"}),t("model_url",{processor:"string"}),t("block_unsupported_drop",{processor:"boolean",default:!0}),t("visual",{processor:"boolean",default:!0}),t("visual_table_class",{processor:"string",default:"mce-item-table"}),t("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),t("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),t("setup",{processor:"function"}),t("init_instance_callback",{processor:"function"}),t("url_converter",{processor:"function",default:e.convertURL}),t("url_converter_scope",{processor:"object",default:e}),t("urlconverter_callback",{processor:"function"}),t("allow_conditional_comments",{processor:"boolean",default:!1}),t("allow_html_data_urls",{processor:"boolean",default:!1}),t("allow_svg_data_urls",{processor:"boolean"}),t("allow_html_in_named_anchor",{processor:"boolean",default:!1}),t("allow_script_urls",{processor:"boolean",default:!1}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),t("fix_list_elements",{processor:"boolean",default:!1}),t("preserve_cdata",{processor:"boolean",default:!1}),t("remove_trailing_brs",{processor:"boolean",default:!0}),t("pad_empty_with_br",{processor:"boolean",default:!1}),t("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),t("element_format",{processor:"string",default:"html"}),t("entities",{processor:"string"}),t("schema",{processor:"string",default:"html5"}),t("convert_urls",{processor:"boolean",default:!0}),t("relative_urls",{processor:"boolean",default:!0}),t("remove_script_host",{processor:"boolean",default:!0}),t("custom_elements",{processor:"string"}),t("extended_valid_elements",{processor:"string"}),t("invalid_elements",{processor:"string"}),t("invalid_styles",{processor:ms}),t("valid_children",{processor:"string"}),t("valid_classes",{processor:ms}),t("valid_elements",{processor:"string"}),t("valid_styles",{processor:ms}),t("verify_html",{processor:"boolean",default:!0}),t("auto_focus",{processor:function processor(e){return D(e)||!0===e}}),t("browser_spellcheck",{processor:"boolean",default:!1}),t("protect",{processor:"array"}),t("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),t("deprecation_warnings",{processor:"boolean",default:!0}),t("a11y_advanced_options",{processor:"boolean",default:!1}),t("api_key",{processor:"string"}),t("paste_block_drop",{processor:"boolean",default:!1}),t("paste_data_images",{processor:"boolean",default:!0}),t("paste_preprocess",{processor:"function"}),t("paste_postprocess",{processor:"function"}),t("paste_webkit_styles",{processor:"string",default:"none"}),t("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),t("paste_merge_formats",{processor:"boolean",default:!0}),t("smart_paste",{processor:"boolean",default:!0}),t("paste_as_text",{processor:"boolean",default:!1}),t("paste_tab_spaces",{processor:"number",default:4}),t("text_patterns",{processor:function processor(e){return z(e,R)||!1===e?{value:as(!1===e?[]:e),valid:!0}:{valid:!1,message:"Must be an array of objects or false."}},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1"},{start:"##",format:"h2"},{start:"###",format:"h3"},{start:"####",format:"h4"},{start:"#####",format:"h5"},{start:"######",format:"h6"},{start:"1. ",cmd:"InsertOrderedList"},{start:"* ",cmd:"InsertUnorderedList"},{start:"- ",cmd:"InsertUnorderedList"}]}),t("text_patterns_lookup",{processor:function processor(e){return H(e)?{value:us(e),valid:!0}:{valid:!1,message:"Must be a single function"}},default:function _default(e){return[]}}),t("noneditable_class",{processor:"string",default:"mceNonEditable"}),t("editable_class",{processor:"string",default:"mceEditable"}),t("noneditable_regexp",{processor:function processor(e){return z(e,fs)?{value:e,valid:!0}:fs(e)?{value:[e],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."}},default:[]}),t("table_tab_navigation",{processor:"boolean",default:!0}),t("highlight_on_focus",{processor:"boolean",default:!1}),t("xss_sanitization",{processor:"boolean",default:!0}),t("details_initial_state",{processor:function processor(e){var t=ie(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("details_serialized_state",{processor:function processor(e){var t=ie(["inherited","collapsed","expanded"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),t("init_content_sync",{processor:"boolean",default:!1}),t("newdocument_content",{processor:"string",default:""}),t("force_hex_color",{processor:function processor(e){var t=["always","rgb_only","off"],n=ie(t,e);return n?{value:e,valid:n}:{valid:!1,message:"Must be one of: ".concat(t.join(", "),".")}},default:"off"}),t("sandbox_iframes",{processor:"boolean",default:!1}),t("convert_unsafe_embeds",{processor:"boolean",default:!1}),e.on("ScriptsLoaded",(function(){t("directionality",{processor:"string",default:wu.isRtl()?"rtl":void 0}),t("placeholder",{processor:"string",default:ls.getAttrib(e.getElement(),"placeholder")})}))}(o);var a=this.options.get;a("deprecation_warnings")&&hS(t,i);var u=a("suffix");u&&(n.suffix=u),this.suffix=n.suffix;var c=a("base_url");c&&n._setBaseUrl(c),this.baseUri=n.baseURI;var s=Hs(o);s&&(hu.ScriptLoader._setReferrerPolicy(s),gu.DOM.styleSheetLoader._setReferrerPolicy(s));var l=yl(o);F(l)&&gu.DOM.styleSheetLoader._setContentCssCors(l),xu.languageLoad=a("language_load"),xu.baseURL=n.baseURL,this.setDirty(!1),this.documentBaseURI=new Lw(vs(o),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=ll(o),this.hasVisual=Sl(o),this.shortcuts=new tP(this),this.editorCommands=new kI(this),wI(this);var d=a("cache_suffix");d&&(Wt.cacheSuffix=d.replace(/^[\?\&]+/,"")),this.ui={registry:nP(),styleSheetLoader:void 0,show:V,hide:V,setEnabled:V,isEnabled:Q},this.mode=KI(o),n.dispatch("SetupEditor",{editor:this});var m=Ol(o);H(m)&&m.call(o,o)}return h(Editor,[{key:"render",value:function render(){UB(this)}},{key:"focus",value:function focus(e){this.execCommand("mceFocus",!1,e)}},{key:"hasFocus",value:function hasFocus(){return Np(this)}},{key:"translate",value:function translate(e){return wu.translate(e)}},{key:"getParam",value:function getParam(e,t,n){var o=this.options;return o.isRegistered(e)||(F(n)?o.register(e,{processor:n,default:t}):o.register(e,{processor:Q,default:t})),o.isSet(e)||P(t)?o.get(e):t}},{key:"hasPlugin",value:function hasPlugin(e,t){var hasPlugin=ie(Cl(this),e);return!!hasPlugin&&(!t||void 0!==NS.get(e))}},{key:"nodeChanged",value:function nodeChanged(e){this._nodeChangeDispatcher.nodeChanged(e)}},{key:"addCommand",value:function addCommand(e,t,n){this.editorCommands.addCommand(e,t,n)}},{key:"addQueryStateHandler",value:function addQueryStateHandler(e,t,n){this.editorCommands.addQueryStateHandler(e,t,n)}},{key:"addQueryValueHandler",value:function addQueryValueHandler(e,t,n){this.editorCommands.addQueryValueHandler(e,t,n)}},{key:"addShortcut",value:function addShortcut(e,t,n,o){this.shortcuts.add(e,t,n,o)}},{key:"execCommand",value:function execCommand(e,t,n,o){return this.editorCommands.execCommand(e,t,n,o)}},{key:"queryCommandState",value:function queryCommandState(e){return this.editorCommands.queryCommandState(e)}},{key:"queryCommandValue",value:function queryCommandValue(e){return this.editorCommands.queryCommandValue(e)}},{key:"queryCommandSupported",value:function queryCommandSupported(e){return this.editorCommands.queryCommandSupported(e)}},{key:"show",value:function show(){var e=this;e.hidden&&(e.hidden=!1,e.inline?e.getBody().contentEditable="true":(rP.show(e.getContainer()),rP.hide(e.id)),e.load(),e.dispatch("show"))}},{key:"hide",value:function hide(){var e=this;e.hidden||(e.save(),e.inline?(e.getBody().contentEditable="false",e===e.editorManager.focusedEditor&&(e.editorManager.focusedEditor=null)):(rP.hide(e.getContainer()),rP.setStyle(e.id,"display",e.orgDisplay)),e.hidden=!0,e.dispatch("hide"))}},{key:"isHidden",value:function isHidden(){return this.hidden}},{key:"setProgressState",value:function setProgressState(e,t){this.dispatch("ProgressState",{state:e,time:t})}},{key:"load",value:function load(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=t.getElement();if(t.removed)return"";if(n){var o=l(l({},e),{},{load:!0}),i=yo(n)?n.value:n.innerHTML,a=t.setContent(i,o);return o.no_events||t.dispatch("LoadContent",l(l({},o),{},{element:n})),a}return""}},{key:"save",value:function save(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=this,n=t.getElement();if(!n||!t.initialized||t.removed)return"";var o=l(l({},e),{},{save:!0,element:n}),i=t.getContent(o),a=l(l({},o),{},{content:i});if(a.no_events||t.dispatch("SaveContent",a),"raw"===a.format&&t.dispatch("RawSaveContent",a),i=a.content,yo(n))n.value=i;else{!e.is_removing&&t.inline||(n.innerHTML=i);var u=rP.getParent(t.id,"form");u&&iP(u.elements,(function(e){return e.name!==t.id||(e.value=i,!1)}))}return a.element=o.element=n=null,!1!==a.set_dirty&&t.setDirty(!1),i}},{key:"setContent",value:function setContent(e,t){return oS(this,e,t)}},{key:"getContent",value:function getContent(e){return rS(this,e)}},{key:"insertContent",value:function insertContent(e,t){t&&(e=oP({content:e},t)),this.execCommand("mceInsertContent",!1,e)}},{key:"resetContent",value:function resetContent(e){void 0===e?oS(this,this.startContent,{format:"raw"}):oS(this,e),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}},{key:"isDirty",value:function isDirty(){return!this.isNotDirty}},{key:"setDirty",value:function setDirty(e){var t=!this.isNotDirty;this.isNotDirty=!e,e&&e!==t&&this.dispatch("dirty")}},{key:"getContainer",value:function getContainer(){var e=this;return e.container||(e.container=e.editorContainer||rP.get(e.id+"_parent")),e.container}},{key:"getContentAreaContainer",value:function getContentAreaContainer(){return this.contentAreaContainer}},{key:"getElement",value:function getElement(){return this.targetElm||(this.targetElm=rP.get(this.id)),this.targetElm}},{key:"getWin",value:function getWin(){var e=this;if(!e.contentWindow){var t=e.iframeElement;t&&(e.contentWindow=t.contentWindow)}return e.contentWindow}},{key:"getDoc",value:function getDoc(){var e=this;if(!e.contentDocument){var t=e.getWin();t&&(e.contentDocument=t.document)}return e.contentDocument}},{key:"getBody",value:function getBody(){var e,t,n=this.getDoc();return null!==(t=null!==(e=this.bodyElement)&&void 0!==e?e:null===n||void 0===n?void 0:n.body)&&void 0!==t?t:null}},{key:"convertURL",value:function convertURL(e,t,n){var o=this,i=o.options.get,a=_l(o);if(H(a))return a.call(o,e,n,!0,t);if(!i("convert_urls")||"link"===n||R(n)&&"LINK"===n.nodeName||0===e.indexOf("file:")||0===e.length)return e;var u=new Lw(e);return"http"!==u.protocol&&"https"!==u.protocol&&""!==u.protocol?e:i("relative_urls")?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,i("remove_script_host"))}},{key:"addVisual",value:function addVisual(e){eI(this,e)}},{key:"setEditableRoot",value:function setEditableRoot(e){!function setEditableRoot(e,t){e._editableRoot!==t&&(e._editableRoot=t,e.readonly||(e.getBody().contentEditable=String(e.hasEditableRoot()),e.nodeChanged()),function fireEditableRootStateChange(e,t){e.dispatch("EditableRootStateChange",{state:t})}(e,t))}(this,e)}},{key:"hasEditableRoot",value:function hasEditableRoot(){return function hasEditableRoot(e){return e._editableRoot}(this)}},{key:"remove",value:function remove(){yS(this)}},{key:"destroy",value:function destroy(e){CS(this,e)}},{key:"uploadImages",value:function uploadImages(){return this.editorUpload.uploadImages()}},{key:"_scanForImages",value:function _scanForImages(){return this.editorUpload.scanForImages()}}]),Editor}(),uP=gu.DOM,cP=Kt.each,sP=!1,lP=[],fP=function globalEventDelegate(e){var t=e.type;cP(pP.get(),(function(n){switch(t){case"scroll":n.dispatch("ScrollWindow",e);break;case"resize":n.dispatch("ResizeWindow",e)}}))},dP=function toggleGlobalEvents(e){if(e!==sP){var t=gu.DOM;e?(t.bind(window,"resize",fP),t.bind(window,"scroll",fP)):(t.unbind(window,"resize",fP),t.unbind(window,"scroll",fP)),sP=e}},mP=function removeEditorFromList(e){var t=lP;return lP=fe(lP,(function(t){return e!==t})),pP.activeEditor===e&&(pP.activeEditor=lP.length>0?lP[0]:null),pP.focusedEditor===e&&(pP.focusedEditor=null),t.length!==lP.length},gP="CSS1Compat"!==document.compatMode,pP=l(l({},PI),{},{baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"6",minorVersion:"8.4",releaseDate:"2024-06-19",i18n:wu,activeEditor:null,focusedEditor:null,setup:function setup(){var e=this,t="",n="",o=Lw.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(o)&&(o=o.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(o)||(o+="/"));var i=window.tinymce||window.tinyMCEPreInit;if(i)t=i.base||i.baseURL,n=i.suffix;else{for(var a=document.getElementsByTagName("script"),u=0;u<a.length;u++){var c=a[u].src||"";if(""!==c){var s=c.substring(c.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(c)){-1!==s.indexOf(".min")&&(n=".min"),t=c.substring(0,c.lastIndexOf("/"));break}}}if(!t&&document.currentScript){var l=document.currentScript.src;-1!==l.indexOf(".min")&&(n=".min"),t=l.substring(0,l.lastIndexOf("/"))}}e.baseURL=new Lw(o).toAbsolute(t),e.documentBaseURL=o,e.baseURI=new Lw(e.baseURL),e.suffix=n,function setup$w(e){e.on("AddEditor",curry(Ep,e)),e.on("RemoveEditor",curry(Op,e))}(e)},overrideDefaults:function overrideDefaults(e){var t=e.base_url;t&&this._setBaseUrl(t);var n=e.suffix;n&&(this.suffix=n),this.defaultOptions=e;var o=e.plugin_base_urls;void 0!==o&&Re(o,(function(e,t){xu.PluginManager.urls[t]=e}))},init:function init(e){var t,n=this,o=Kt.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," "),i=function provideResults(e){t=e};return uP.bind(window,"ready",(function initEditors(){var t,a=0,u=[];uP.unbind(window,"ready",initEditors),function execCallback(t){var o=e[t];if(o)o.apply(n,[])}("onpageload"),t=function unique$1(e,t){for(var n=[],o=H(t)?function(e){return ae(n,(function(n){return t(n,e)}))}:function(e){return ie(n,e)},i=0,a=e.length;i<a;i++){var u=e[i];o(u)||n.push(u)}return n}(function findTargets(e){return Wt.browser.isIE()||Wt.browser.isEdge()?(HS("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):gP?(HS("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):D(e.selector)?uP.select(e.selector):F(e.target)?[e.target]:[]}(e)),Kt.each(t,(function(e){!function purgeDestroyedEditor(e){e&&e.initialized&&!(e.getContainer()||e.getBody()).parentNode&&(mP(e),e.unbindAllNativeEvents(),e.destroy(!0),e.removed=!0)}(n.get(e.id))})),0===(t=Kt.grep(t,(function(e){return!n.get(e.id)}))).length?i([]):cP(t,(function(c){!function isInvalidInlineTarget(e,t){return e.inline&&t.tagName.toLowerCase()in o}(e,c)?function createEditor(e,o,c){var s=new aP(e,o,n);u.push(s),s.on("init",(function(){++a===t.length&&i(u)})),s.targetElm=s.targetElm||c,s.render()}(function createId(e){var t=e.id;return t||(t=He(e,"name").filter((function(e){return!uP.get(e)})).getOrThunk(uP.uniqueId),e.setAttribute("id",t)),t}(c),e,c):HS("Could not initialize inline editor on invalid inline target element",c)}))})),new Promise((function(e){t?e(t):i=function provideResults(t){e(t)}}))},get:function get(e){return 0===arguments.length?lP.slice(0):D(e)?pe(lP,(function(t){return t.id===e})).getOr(null):$(e)&&lP[e]?lP[e]:null},add:function add(e){var t=this,n=t.get(e.id);return n===e||(null===n&&lP.push(e),dP(!0),t.activeEditor=e,t.dispatch("AddEditor",{editor:e}),eM||(eM=function beforeUnloadDelegate(e){var n=t.dispatch("BeforeUnload");if(n.returnValue)return e.preventDefault(),e.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",eM))),e},createEditor:function createEditor(e,t){return this.add(new aP(e,t,this))},remove:function remove(e){var t,n=this;if(e){if(!D(e))return t=e,B(n.get(t.id))?null:(mP(t)&&n.dispatch("RemoveEditor",{editor:t}),0===lP.length&&window.removeEventListener("beforeunload",eM),t.remove(),dP(lP.length>0),t);cP(uP.select(e),(function(e){(t=n.get(e.id))&&n.remove(t)}))}else for(var o=lP.length-1;o>=0;o--)n.remove(lP[o])},execCommand:function execCommand(e,t,n){var o,i=this,a=R(n)?null!==(o=n.id)&&void 0!==o?o:n.index:n;switch(e){case"mceAddEditor":if(!i.get(a)){var u=n.options;new aP(a,u,i).render()}return!0;case"mceRemoveEditor":var c=i.get(a);return c&&c.remove(),!0;case"mceToggleEditor":var s=i.get(a);return s?(s.isHidden()?s.show():s.hide(),!0):(i.execCommand("mceAddEditor",!1,n),!0)}return!!i.activeEditor&&i.activeEditor.execCommand(e,t,n)},triggerSave:function triggerSave(){cP(lP,(function(e){e.save()}))},addI18n:function addI18n(e,t){wu.add(e,t)},translate:function translate(e){return wu.translate(e)},setActive:function setActive(e){var t=this.activeEditor;this.activeEditor!==e&&(t&&t.dispatch("deactivate",{relatedTarget:e}),e.dispatch("activate",{relatedTarget:t})),this.activeEditor=e},_setBaseUrl:function _setBaseUrl(e){this.baseURL=new Lw(this.documentBaseURL).toAbsolute(e.replace(/\/+$/,"")),this.baseURI=new Lw(this.baseURL)}});pP.setup();var hP,vP=function setup(){var e=ku();return{FakeClipboardItem:function FakeClipboardItem(e){return{items:e,types:_e(e),getType:function getType(t){return He(e,t).getOrUndefined()}}},write:function write(t){e.set(t)},read:function read(){return e.get().getOrUndefined()},clear:e.clear}}(),bP=Math.min,yP=Math.max,CP=Math.round,wP=function relativePosition(e,t,n){var o=t.x,i=t.y,a=e.w,u=e.h,c=t.w,s=t.h,l=(n||"").split("");return"b"===l[0]&&(i+=s),"r"===l[1]&&(o+=c),"c"===l[0]&&(i+=CP(s/2)),"c"===l[1]&&(o+=CP(c/2)),"b"===l[3]&&(i-=u),"r"===l[4]&&(o-=a),"c"===l[3]&&(i-=CP(u/2)),"c"===l[4]&&(o-=CP(a/2)),xP(o,i,a,u)},xP=function create$2(e,t,n,o){return{x:e,y:t,w:n,h:o}},SP={inflate:function inflate(e,t,n){return xP(e.x-t,e.y-n,e.w+2*t,e.h+2*n)},relativePosition:wP,findBestRelativePosition:function findBestRelativePosition(e,t,n,o){for(var i=0;i<o.length;i++){var a=wP(e,t,o[i]);if(a.x>=n.x&&a.x+a.w<=n.w+n.x&&a.y>=n.y&&a.y+a.h<=n.h+n.y)return o[i]}return null},intersect:function intersect(e,t){var n=yP(e.x,t.x),o=yP(e.y,t.y),i=bP(e.x+e.w,t.x+t.w),a=bP(e.y+e.h,t.y+t.h);return i-n<0||a-o<0?null:xP(n,o,i-n,a-o)},clamp:function clamp(e,t,n){var o=e.x,i=e.y,a=e.x+e.w,u=e.y+e.h,c=t.x+t.w,s=t.y+t.h,l=yP(0,t.x-o),d=yP(0,t.y-i),m=yP(0,a-c),g=yP(0,u-s);return o+=l,i+=d,n&&(a+=l,u+=d,o-=m,i-=g),xP(o,i,(a-=m)-o,(u-=g)-i)},create:xP,fromClientRect:function fromClientRect(e){return xP(e.left,e.top,e.width,e.height)}},kP=function create$1(){var e={},t={},n={};return{load:function load(n,o){var i='Script at URL "'.concat(o,'" failed to load'),a='Script at URL "'.concat(o,"\" did not call `tinymce.Resource.add('").concat(n,"', data)` within 1 second");if(void 0!==e[n])return e[n];var u=new Promise((function(e,u){var c=function awaiter(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,o=!1,i=null,a=function complete(e){return function(){if(!o){o=!0,null!==i&&(clearTimeout(i),i=null);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];e.apply(null,n)}}},u=a(e),c=a(t);return{start:function start(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];o||null!==i||(i=setTimeout((function(){return c.apply(null,t)}),n))},resolve:u,reject:c}}(e,u);t[n]=c.resolve,hu.ScriptLoader.loadScript(o).then((function(){return c.start(a)}),(function(){return c.reject(i)}))}));return e[n]=u,u},add:function add(o,i){void 0!==t[o]&&(t[o](i),delete t[o]),e[o]=Promise.resolve(i),n[o]=i},has:function has(e){return e in n},get:function get(e){return n[e]},unload:function unload(t){delete e[t]}}}();try{var TP="__storage_test__";(hP=window.localStorage).setItem(TP,TP),hP.removeItem(TP)}catch(AP){hP=function create(){return function(){var e={},t=[],n={getItem:function getItem(t){return e[t]||null},setItem:function setItem(n,o){t.push(n),e[n]=String(o)},key:function key(e){return t[e]},removeItem:function removeItem(n){t=t.filter((function(e){return e===n})),delete e[n]},clear:function clear(){t=[],e={}},length:0};return Object.defineProperty(n,"length",{get:function get(){return t.length},configurable:!1,enumerable:!1}),n}()}()}var EP={geom:{Rect:SP},util:{Delay:Cp,Tools:Kt,VK:tg,URI:Lw,EventDispatcher:BI,Observable:PI,I18n:wu,LocalStorage:hP,ImageUploader:function ImageUploader(e){var t=ZS(),n=KS(e,t);return{upload:function upload(t){var o=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return n.upload(t,o?qS(e):void 0)}}}},dom:{EventUtils:ou,TreeWalker:io,TextSeeker:Gu,DOMUtils:gu,ScriptLoader:hu,RangeUtils:Lg,Serializer:nS,StyleSheetLoader:aa,ControlSelection:ag,BookmarkManager:Gm,Selection:Xx,Event:ou.Event},html:{Styles:Ga,Entities:Ta,Node:Jp,Schema:La,DomParser:Qw,Writer:vh,Serializer:bh},Env:Wt,AddOnManager:xu,Annotator:jm,Formatter:sk,UndoManager:fk,EditorCommands:kI,WindowManager:BS,NotificationManager:RS,EditorObservable:zI,Shortcuts:tP,Editor:aP,FocusManager:yp,EditorManager:pP,DOM:gu.DOM,ScriptLoader:hu.ScriptLoader,PluginManager:NS,ThemeManager:MS,ModelManager:xS,IconManager:wS,Resource:kP,FakeClipboard:vP,trim:Kt.trim,isArray:Kt.isArray,is:Kt.is,toArray:Kt.toArray,makeMap:Kt.makeMap,each:Kt.each,map:Kt.map,grep:Kt.grep,inArray:Kt.inArray,extend:Kt.extend,walk:Kt.walk,resolve:Kt.resolve,explode:Kt.explode,_addCacheSuffix:Kt._addCacheSuffix},OP=Kt.extend(pP,EP);!function exportToWindowGlobal(e){window.tinymce=e,window.tinyMCE=e}(OP),function exportToModuleLoaders(t){try{e.exports=t}catch(n){}}(OP)}()},2933:function(e,t,n){n(2934)},2934:function(e,t){tinymce.IconManager.add("default",{icons:{"accessibility-check":'<svg width="24" height="24"><path d="M12 2a2 2 0 0 1 2 2 2 2 0 0 1-2 2 2 2 0 0 1-2-2c0-1.1.9-2 2-2Zm8 7h-5v12c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5c0-.6-.4-1-1-1a1 1 0 0 0-1 1v5c0 .6-.4 1-1 1a1 1 0 0 1-1-1V9H4a1 1 0 1 1 0-2h16c.6 0 1 .4 1 1s-.4 1-1 1Z" fill-rule="nonzero"/></svg>',"accordion-toggle":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M12 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 15c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1h-6a1 1 0 0 1-1-1Z"/><path opacity=".2" fill-rule="evenodd" clip-rule="evenodd" d="M4 19c0-.6.4-1 1-1h6c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1-1-1Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M12.3 7.3a1 1 0 0 1 1.4 0L16 9.6l2.3-2.3a1 1 0 1 1 1.4 1.4L16 12.4l-3.7-3.7a1 1 0 0 1 0-1.4ZM4.3 11.7a1 1 0 0 1 0-1.4L6.6 8 4.3 5.7a1 1 0 0 1 1.4-1.4L9.4 8l-3.7 3.7a1 1 0 0 1-1.4 0Z"/></svg>',accordion:'<svg width="24" height="24"><rect x="12" y="7" width="10" height="2" rx="1"/><rect x="12" y="11" width="10" height="2" rx="1"/><rect x="12" y="15" width="6" height="2" rx="1"/><path fill-rule="evenodd" clip-rule="evenodd" d="M2.3 7.3a1 1 0 0 1 1.4 0L6 9.6l2.3-2.3a1 1 0 0 1 1.4 1.4L6 12.4 2.3 8.7a1 1 0 0 1 0-1.4Z"/></svg>',"action-next":'<svg width="24" height="24"><path fill-rule="nonzero" d="M5.7 7.3a1 1 0 0 0-1.4 1.4l7.7 7.7 7.7-7.7a1 1 0 1 0-1.4-1.4L12 13.6 5.7 7.3Z"/></svg>',"action-prev":'<svg width="24" height="24"><path fill-rule="nonzero" d="M18.3 15.7a1 1 0 0 0 1.4-1.4L12 6.6l-7.7 7.7a1 1 0 0 0 1.4 1.4L12 9.4l6.3 6.3Z"/></svg>',addtag:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 5a2 2 0 0 1 1.6.8L21 12l-4.4 6.2a2 2 0 0 1-1.6.8h-3v-2h3l3.5-5L15 7H5v3H3V7c0-1.1.9-2 2-2h10Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M6 12a1 1 0 0 0-1 1v2H3a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2H7v-2c0-.6-.4-1-1-1Z"/></svg>',"ai-prompt":'<svg width="24" height="24"><g clip-path="url(#a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M15 6.7a1 1 0 0 0-1.4 0l-9.9 10a1 1 0 0 0 0 1.3l2.1 2.1c.4.4 1 .4 1.4 0l10-9.9c.3-.3.3-1 0-1.4l-2.2-2Zm1.4 2.8-2-2-3 2.7 2.2 2.2 2.8-2.9Z"/><path d="m18.5 7.3-.7-1.5-1.5-.8 1.5-.7.7-1.5.7 1.5 1.5.7-1.5.8-.7 1.5ZM18.5 16.5l-.7-1.6-1.5-.7 1.5-.7.7-1.6.7 1.6 1.5.7-1.5.7-.7 1.6ZM9.7 7.3 9 5.8 7.5 5 9 4.3l.7-1.5.7 1.5L12 5l-1.5.8-.7 1.5Z"/></g><defs><clipPath id="a"><path d="M0 0h24v24H0z"/></clipPath></defs></svg>',ai:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M5 3a3 3 0 0 0-3 3v12a3 3 0 0 0 3 3h14a3 3 0 0 0 3-3V6a3 3 0 0 0-3-3H5Zm6.8 11.5.5 1.2a68.3 68.3 0 0 0 .7 1.1l.4.1c.3 0 .5 0 .7-.3.2-.1.3-.3.3-.6l-.3-1-2.6-6.2a20.4 20.4 0 0 0-.5-1.3l-.5-.4-.7-.2c-.2 0-.5 0-.6.2-.2 0-.4.2-.5.4l-.3.6-.3.7L5.7 15l-.2.6-.1.4c0 .3 0 .5.3.7l.6.2c.3 0 .5 0 .7-.2l.4-1 .5-1.2h3.9ZM9.8 9l1.5 4h-3l1.5-4Zm5.6-.9v7.6c0 .4 0 .7.2 1l.7.2c.3 0 .6 0 .8-.3l.2-.9V8.1c0-.4 0-.7-.2-.9a1 1 0 0 0-.8-.3c-.2 0-.5.1-.7.3l-.2 1Z"/></svg>',"align-center":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm3 4h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm-3-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-justify":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0 4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-left":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 4h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Zm0-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"align-none":'<svg width="24" height="24"><path d="M14.2 5 13 7H5a1 1 0 1 1 0-2h9.2Zm4 0h.8a1 1 0 0 1 0 2h-2l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h6.8Zm4 0H19a1 1 0 0 1 0 2h-4.4l1.2-2Zm-6.4 4-1.2 2H5a1 1 0 0 1 0-2h4.4Zm4 0H19a1 1 0 0 1 0 2h-6.8l1.2-2ZM7 17l-1.2 2H5a1 1 0 0 1 0-2h2Zm4 0h8a1 1 0 0 1 0 2H9.8l1.2-2Zm5.2-13.5 1.3.7-9.7 16.3-1.3-.7 9.7-16.3Z" fill-rule="evenodd"/></svg>',"align-right":'<svg width="24" height="24"><path d="M5 5h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2Zm6 4h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 8h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-6-4h14c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',"arrow-left":'<svg width="24" height="24"><path d="m5.6 13 12 6a1 1 0 0 0 1.4-1V6a1 1 0 0 0-1.4-.9l-12 6a1 1 0 0 0 0 1.8Z" fill-rule="evenodd"/></svg>',"arrow-right":'<svg width="24" height="24"><path d="m18.5 13-12 6A1 1 0 0 1 5 18V6a1 1 0 0 1 1.4-.9l12 6a1 1 0 0 1 0 1.8Z" fill-rule="evenodd"/></svg>',bold:'<svg width="24" height="24"><path d="M7.8 19c-.3 0-.5 0-.6-.2l-.2-.5V5.7c0-.2 0-.4.2-.5l.6-.2h5c1.5 0 2.7.3 3.5 1 .7.6 1.1 1.4 1.1 2.5a3 3 0 0 1-.6 1.9c-.4.6-1 1-1.6 1.2.4.1.9.3 1.3.6s.8.7 1 1.2c.4.4.5 1 .5 1.6 0 1.3-.4 2.3-1.3 3-.8.7-2.1 1-3.8 1H7.8Zm5-8.3c.6 0 1.2-.1 1.6-.5.4-.3.6-.7.6-1.3 0-1.1-.8-1.7-2.3-1.7H9.3v3.5h3.4Zm.5 6c.7 0 1.3-.1 1.7-.4.4-.4.6-.9.6-1.5s-.2-1-.7-1.4c-.4-.3-1-.4-2-.4H9.4v3.8h4Z" fill-rule="evenodd"/></svg>',bookmark:'<svg width="24" height="24"><path d="M6 4v17l6-4 6 4V4c0-.6-.4-1-1-1H7a1 1 0 0 0-1 1Z" fill-rule="nonzero"/></svg>',"border-style":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="2" x="3" y="6" rx="1"/><rect width="2.8" height="2" x="3" y="16" rx="1"/><rect width="2.8" height="2" x="6.8" y="16" rx="1"/><rect width="2.8" height="2" x="10.6" y="16" rx="1"/><rect width="2.8" height="2" x="14.4" y="16" rx="1"/><rect width="2.8" height="2" x="18.2" y="16" rx="1"/><rect width="8" height="2" x="3" y="11" rx="1"/><rect width="8" height="2" x="13" y="11" rx="1"/></g></svg>',"border-width":'<svg width="24" height="24"><g fill-rule="evenodd"><rect width="18" height="5" x="3" y="5" rx="1"/><rect width="18" height="3.5" x="3" y="11.5" rx="1"/><rect width="18" height="2" x="3" y="17" rx="1"/></g></svg>',brightness:'<svg width="24" height="24"><path d="M12 17c.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7v-1c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3Zm0-10a1 1 0 0 1-.7-.3A1 1 0 0 1 11 6V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v1c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3Zm7 4c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-1a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1ZM7 12c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H5a1 1 0 0 1-.7-.3A1 1 0 0 1 4 12c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h1c.3 0 .5.1.7.3.2.2.3.4.3.7Zm10 3.5.7.8c.2.1.3.4.3.6 0 .3-.1.6-.3.8a1 1 0 0 1-.8.3 1 1 0 0 1-.6-.3l-.8-.7a1 1 0 0 1-.3-.8c0-.2.1-.5.3-.7a1 1 0 0 1 1.4 0Zm-10-7-.7-.8a1 1 0 0 1-.3-.6c0-.3.1-.6.3-.8.2-.2.5-.3.8-.3.2 0 .5.1.7.3l.7.7c.2.2.3.5.3.8 0 .2-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.8-.3Zm10 0a1 1 0 0 1-.8.3 1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.6.3-.8l.8-.7c.1-.2.4-.3.6-.3.3 0 .6.1.8.3.2.2.3.5.3.8 0 .2-.1.5-.3.7l-.7.7Zm-10 7c.2-.2.5-.3.8-.3.2 0 .5.1.7.3a1 1 0 0 1 0 1.4l-.8.8a1 1 0 0 1-.6.3 1 1 0 0 1-.8-.3 1 1 0 0 1-.3-.8c0-.2.1-.5.3-.6l.7-.8ZM12 8a4 4 0 0 1 3.7 2.4 4 4 0 0 1 0 3.2A4 4 0 0 1 12 16a4 4 0 0 1-3.7-2.4 4 4 0 0 1 0-3.2A4 4 0 0 1 12 8Zm0 6.5c.7 0 1.3-.2 1.8-.7.5-.5.7-1.1.7-1.8s-.2-1.3-.7-1.8c-.5-.5-1.1-.7-1.8-.7s-1.3.2-1.8.7c-.5.5-.7 1.1-.7 1.8s.2 1.3.7 1.8c.5.5 1.1.7 1.8.7Z" fill-rule="evenodd"/></svg>',browse:'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2h-4v-2h4V8H5v10h4v2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9.4-2.3 2.3a1 1 0 1 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 0 1-1.4 1.4L13 13.4V20a1 1 0 0 1-2 0v-6.6Z" fill-rule="nonzero"/></svg>',cancel:'<svg width="24" height="24"><path d="M12 4.6a7.4 7.4 0 1 1 0 14.8 7.4 7.4 0 0 1 0-14.8ZM12 3a9 9 0 1 0 0 18 9 9 0 0 0 0-18Zm0 8L14.8 8l1 1.1-2.7 2.8 2.7 2.7-1.1 1.1-2.7-2.7-2.7 2.7-1-1.1 2.6-2.7-2.7-2.7 1-1.1 2.8 2.7Z" fill-rule="nonzero"/></svg>',"cell-background-color":'<svg width="24" height="24"><path d="m15.7 2 1.6 1.6-2.7 2.6 5.9 5.8c.7.7.7 1.7 0 2.4l-6.3 6.1a1.7 1.7 0 0 1-2.4 0l-6.3-6.1c-.7-.7-.7-1.7 0-2.4L15.7 2ZM18 12l-4.5-4L9 12h9ZM4 16s2 2.4 2 3.8C6 21 5.1 22 4 22s-2-1-2-2.2C2 18.4 4 16 4 16Z"/></svg>',"cell-border-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M5 13v5h2v2H5a2 2 0 0 1-2-2v-5h2zm8-7V4h6a2 2 0 0 1 2 2h-8z" opacity=".2"/><path fill-rule="nonzero" d="M13 4v2H5v7H3V6c0-1.1.9-2 2-2h8zm-2.6 14.1.1-.1.1.1.2.3.2.2.2.2c.4.6.8 1.2.8 1.7 0 .8-.7 1.5-1.5 1.5S9 21.3 9 20.5c0-.5.4-1.1.8-1.7l.2-.2.2-.2.2-.3z"/><path d="m13 11-2 2H5v-2h6V6h2z"/><path fill-rule="nonzero" d="m18.4 8 1 1-1.8 1.9 4 4c.5.4.5 1.1 0 1.6l-4.3 4.2a1.2 1.2 0 0 1-1.6 0l-4.4-4.2c-.4-.5-.4-1.2 0-1.7l7-6.8Zm1.6 7-3-3-3 3h6Z"/></g></svg>',"change-case":'<svg width="24" height="24"><path d="M18.4 18.2v-.6c-.5.8-1.3 1.2-2.4 1.2-2.2 0-3.3-1.6-3.3-4.8 0-3.1 1-4.7 3.3-4.7 1.1 0 1.8.3 2.4 1.1v-.6c0-.5.4-.8.8-.8s.8.3.8.8v8.4c0 .5-.4.8-.8.8a.8.8 0 0 1-.8-.8zm-2-7.4c-1.3 0-1.8.9-1.8 3.2 0 2.4.5 3.3 1.7 3.3 1.3 0 1.8-.9 1.8-3.2 0-2.4-.5-3.3-1.7-3.3zM10 15.7H5.5l-.8 2.6a1 1 0 0 1-1 .7h-.2a.7.7 0 0 1-.7-1l4-12a1 1 0 0 1 2 0l4 12a.7.7 0 0 1-.8 1h-.2a1 1 0 0 1-1-.7l-.8-2.6zm-.3-1.5-2-6.5-1.9 6.5h3.9z" fill-rule="evenodd"/></svg>',"character-count":'<svg width="24" height="24"><path d="M4 11.5h16v1H4v-1Zm4.8-6.8V10H7.7V5.8h-1v-1h2ZM11 8.3V9h2v1h-3V7.7l2-1v-.9h-2v-1h3v2.4l-2 1Zm6.3-3.4V10h-3.1V9h2.1V8h-2.1V6.8h2.1v-1h-2.1v-1h3.1ZM5.8 16.4c0-.5.2-.8.5-1 .2-.2.6-.3 1.2-.3l.8.1c.2 0 .4.2.5.3l.4.4v2.8l.2.3H8.2V18.7l-.6.3H7c-.4 0-.7 0-1-.2a1 1 0 0 1-.3-.9c0-.3 0-.6.3-.8.3-.2.7-.4 1.2-.4l.6-.2h.3v-.2l-.1-.2a.8.8 0 0 0-.5-.1 1 1 0 0 0-.4 0l-.3.4h-1Zm2.3.8h-.2l-.2.1-.4.1a1 1 0 0 0-.4.2l-.2.2.1.3.5.1h.4l.4-.4v-.6Zm2-3.4h1.2v1.7l.5-.3h.5c.5 0 .9.1 1.2.5.3.4.5.8.5 1.4 0 .6-.2 1.1-.5 1.5-.3.4-.7.6-1.3.6l-.6-.1-.4-.4v.4h-1.1v-5.4Zm1.1 3.3c0 .3 0 .6.2.8a.7.7 0 0 0 1.2 0l.2-.8c0-.4 0-.6-.2-.8a.7.7 0 0 0-.6-.3l-.6.3-.2.8Zm6.1-.5c0-.2 0-.3-.2-.4a.8.8 0 0 0-.5-.2c-.3 0-.5.1-.6.3l-.2.9c0 .3 0 .6.2.8.1.2.3.3.6.3.2 0 .4 0 .5-.2l.2-.4h1.1c0 .5-.3.8-.6 1.1a2 2 0 0 1-1.3.4c-.5 0-1-.2-1.3-.6a2 2 0 0 1-.5-1.4c0-.6.1-1.1.5-1.5.3-.4.8-.5 1.4-.5.5 0 1 0 1.2.3.4.3.5.7.5 1.2h-1v-.1Z" fill-rule="evenodd"/></svg>',"checklist-rtl":'<svg width="24" height="24"><path d="M5 17h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2zm14.2 11c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L18 8c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8z" fill-rule="evenodd"/></svg>',checklist:'<svg width="24" height="24"><path d="M11 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2h-8a1 1 0 0 1 0-2ZM7.2 16c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 20c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 14c-.2.3-.7.4-1 0l-1.3-1.3a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Zm0-6c.2-.4.6-.5.9-.3.3.2.4.6.2 1L6 8c-.2.3-.7.4-1 0L3.8 6.9a.7.7 0 0 1 0-1c.3-.2.7-.2 1 0l.7.9 1.7-2.8Z" fill-rule="evenodd"/></svg>',checkmark:'<svg width="24" height="24"><path d="M18.2 5.4a1 1 0 0 1 1.6 1.2l-8 12a1 1 0 0 1-1.5.1l-5-5a1 1 0 1 1 1.4-1.4l4.1 4.1 7.4-11Z" fill-rule="nonzero"/></svg>',"chevron-down":'<svg width="10" height="10"><path d="M8.7 2.2c.3-.3.8-.3 1 0 .4.4.4.9 0 1.2L5.7 7.8c-.3.3-.9.3-1.2 0L.2 3.4a.8.8 0 0 1 0-1.2c.3-.3.8-.3 1.1 0L5 6l3.7-3.8Z" fill-rule="nonzero"/></svg>',"chevron-left":'<svg width="10" height="10"><path d="M7.8 1.3 4 5l3.8 3.7c.3.3.3.8 0 1-.4.4-.9.4-1.2 0L2.2 5.7a.8.8 0 0 1 0-1.2L6.6.2C7 0 7.4 0 7.8.2c.3.3.3.8 0 1.1Z" fill-rule="nonzero"/></svg>',"chevron-right":'<svg width="10" height="10"><path d="M2.2 1.3a.8.8 0 0 1 0-1c.4-.4.9-.4 1.2 0l4.4 4.1c.3.4.3.9 0 1.2L3.4 9.8c-.3.3-.8.3-1.2 0a.8.8 0 0 1 0-1.1L6 5 2.2 1.3Z" fill-rule="nonzero"/></svg>',"chevron-up":'<svg width="10" height="10"><path d="M8.7 7.8 5 4 1.3 7.8c-.3.3-.8.3-1 0a.8.8 0 0 1 0-1.2l4.1-4.4c.3-.3.9-.3 1.2 0l4.2 4.4c.3.3.3.9 0 1.2-.3.3-.8.3-1.1 0Z" fill-rule="nonzero"/></svg>',close:'<svg width="24" height="24"><path d="M17.3 8.2 13.4 12l3.9 3.8a1 1 0 0 1-1.5 1.5L12 13.4l-3.8 3.9a1 1 0 0 1-1.5-1.5l3.9-3.8-3.9-3.8a1 1 0 0 1 1.5-1.5l3.8 3.9 3.8-3.9a1 1 0 0 1 1.5 1.5Z" fill-rule="evenodd"/></svg>',"code-sample":'<svg width="24" height="26"><path d="M7.1 11a2.8 2.8 0 0 1-.8 2 2.8 2.8 0 0 1 .8 2v1.7c0 .3.1.6.4.8.2.3.5.4.8.4.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.7 0-1.4-.3-2-.8-.5-.6-.8-1.3-.8-2V15c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4v-.8c0-.2.2-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V9.3c0-.7.3-1.4.8-2 .6-.5 1.3-.8 2-.8.3 0 .4.2.4.4v.8c0 .2-.1.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8V11Zm9.8 0V9.3c0-.3-.1-.6-.4-.8-.2-.3-.5-.4-.8-.4a.4.4 0 0 1-.4-.4V7c0-.2.1-.4.4-.4.7 0 1.4.3 2 .8.5.6.8 1.3.8 2V11c0 .3.1.6.4.8.2.3.5.4.8.4.2 0 .4.2.4.4v.8c0 .2-.2.4-.4.4-.3 0-.6.1-.8.4-.3.2-.4.5-.4.8v1.7c0 .7-.3 1.4-.8 2-.6.5-1.3.8-2 .8a.4.4 0 0 1-.4-.4v-.8c0-.2.1-.4.4-.4.3 0 .6-.1.8-.4.3-.2.4-.5.4-.8V15a2.8 2.8 0 0 1 .8-2 2.8 2.8 0 0 1-.8-2Zm-3.3-.4c0 .4-.1.8-.5 1.1-.3.3-.7.5-1.1.5-.4 0-.8-.2-1.1-.5-.4-.3-.5-.7-.5-1.1 0-.5.1-.9.5-1.2.3-.3.7-.4 1.1-.4.4 0 .8.1 1.1.4.4.3.5.7.5 1.2ZM12 13c.4 0 .8.1 1.1.5.4.3.5.7.5 1.1 0 1-.1 1.6-.5 2a3 3 0 0 1-1.1 1c-.4.3-.8.4-1.1.4a.5.5 0 0 1-.5-.5V17a3 3 0 0 0 1-.2l.6-.6c-.6 0-1-.2-1.3-.5-.2-.3-.3-.7-.3-1 0-.5.1-1 .5-1.2.3-.4.7-.5 1.1-.5Z" fill-rule="evenodd"/></svg>',"color-levels":'<svg width="24" height="24"><path d="M17.5 11.4A9 9 0 0 1 18 14c0 .5 0 1-.2 1.4 0 .4-.3.9-.5 1.3a6.2 6.2 0 0 1-3.7 3 5.7 5.7 0 0 1-3.2 0A5.9 5.9 0 0 1 7.6 18a6.2 6.2 0 0 1-1.4-2.6 6.7 6.7 0 0 1 0-2.8c0-.4.1-.9.3-1.3a13.6 13.6 0 0 1 2.3-4A20 20 0 0 1 12 4a26.4 26.4 0 0 1 3.2 3.4 18.2 18.2 0 0 1 2.3 4Zm-2 4.5c.4-.7.5-1.4.5-2a7.3 7.3 0 0 0-1-3.2c.2.6.2 1.2.2 1.9a4.5 4.5 0 0 1-1.3 3 5.3 5.3 0 0 1-2.3 1.5 4.9 4.9 0 0 1-2 .1 4.3 4.3 0 0 0 2.4.8 4 4 0 0 0 2-.6 4 4 0 0 0 1.5-1.5Z" fill-rule="evenodd"/></svg>',"color-picker":'<svg width="24" height="24"><path d="M12 3a9 9 0 0 0 0 18 1.5 1.5 0 0 0 1.1-2.5c-.2-.3-.4-.6-.4-1 0-.8.7-1.5 1.5-1.5H16a5 5 0 0 0 5-5c0-4.4-4-8-9-8Zm-5.5 9a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3-4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm5 0a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Zm3 4a1.5 1.5 0 1 1 0-3 1.5 1.5 0 0 1 0 3Z" fill-rule="nonzero"/></svg>',"color-swatch-remove-color":'<svg width="24" height="24"><path stroke="#000" stroke-width="2" d="M21 3 3 21" fill-rule="evenodd"/></svg>',"color-swatch":'<svg width="24" height="24"><rect x="3" y="3" width="18" height="18" rx="1" fill-rule="evenodd"/></svg>',"comment-add":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/><path d="M13 10h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 0v-2H9a1 1 0 0 1 0-2h2V8a1 1 0 0 1 2 0v2Z"/></g></svg>',comment:'<svg width="24" height="24"><path fill-rule="nonzero" d="m9 19 3-2h7c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H5a1 1 0 0 0-1 1v10c0 .6.4 1 1 1h4v2Zm-2 4v-4H5a3 3 0 0 1-3-3V6a3 3 0 0 1 3-3h14a3 3 0 0 1 3 3v10a3 3 0 0 1-3 3h-6.4L7 23Z"/></svg>',contrast:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-6 8a6 6 0 0 0 6 6V6a6 6 0 0 0-6 6Z" fill-rule="evenodd"/></svg>',copy:'<svg width="24" height="24"><path d="M16 3H6a2 2 0 0 0-2 2v11h2V5h10V3Zm1 4a2 2 0 0 1 2 2v10a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7Zm0 12V9h-7v10h7Z" fill-rule="nonzero"/></svg>',crop:'<svg width="24" height="24"><path d="M17 8v7h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v2c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-2H7V9H5a1 1 0 1 1 0-2h2V5c0-.6.4-1 1-1s1 .4 1 1v2h7l3-3 1 1-3 3ZM9 9v5l5-5H9Zm1 6h5v-5l-5 5Z" fill-rule="evenodd"/></svg>',"cut-column":'<svg width="24" height="24"><path fill-rule="evenodd" d="M7.2 4.5c.9 0 1.6.4 2.2 1A3.7 3.7 0 0 1 10.5 8v.5l1 1 4-4 1-.5a3.3 3.3 0 0 1 2 0c.4 0 .7.3 1 .5L17 8h4v13h-6V10l-1.5 1.5.5.5v4l-2.5-2.5-1 1v.5c0 .4 0 .8-.3 1.2-.2.5-.4.9-.8 1.2-.6.7-1.3 1-2.2 1-.8.2-1.5 0-2-.6l-.5-.8-.2-1c0-.4 0-.8.3-1.2A3.9 3.9 0 0 1 7 12.7c.5-.2 1-.3 1.5-.2l1-1-1-1c-.5 0-1 0-1.5-.2-.5-.1-1-.4-1.4-.9-.4-.3-.6-.7-.8-1.2L4.5 7c0-.4 0-.7.2-1 0-.3.3-.6.5-.8.5-.5 1.2-.8 2-.7Zm12.3 5h-3v10h3v-10ZM8 13.8h-.3l-.4.2a2.8 2.8 0 0 0-.7.4v.1a2.8 2.8 0 0 0-.6.8l-.1.4v.7l.2.5.5.2h.7a2.6 2.6 0 0 0 .8-.3 2.4 2.4 0 0 0 .7-.7 2.5 2.5 0 0 0 .3-.8 1.5 1.5 0 0 0 0-.8 1 1 0 0 0-.2-.4 1 1 0 0 0-.5-.2H8Zm3.5-3.7c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4ZM7 5.8h-.4a1 1 0 0 0-.5.3 1 1 0 0 0-.2.5v.7a2.5 2.5 0 0 0 .3.8l.2.3h.1l.4.4.4.2.4.1h.7L9 9l.2-.4a1.6 1.6 0 0 0 0-.8 2.6 2.6 0 0 0-.3-.8A2.5 2.5 0 0 0 7.7 6l-.4-.1H7Z"/></svg>',"cut-row":'<svg width="24" height="24"><path fill-rule="evenodd" d="M22 3v5H9l3 3 2-2h4l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8.7.6 1 1.3 1 2.2.2.8 0 1.5-.6 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l2 2V3h14ZM8.5 15.3h-.3a2.6 2.6 0 0 0-.8.4 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3L9 18V18l.4-.4.2-.4.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2h-.5Zm7 0H15a1 1 0 0 0-.4.3 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4a2.8 2.8 0 0 0 .5.7h.1a2.8 2.8 0 0 0 .8.6l.4.1h.7l.5-.2.2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3h-.3ZM12 11.6c-.4 0-.7.1-1 .4-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4s.7-.1 1-.4c.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4Zm8.5-7.1h-11v2h11v-2Z"/></svg>',cut:'<svg width="24" height="24"><path d="M18 15c.6.7 1 1.4 1 2.3 0 .8-.2 1.5-.7 2l-.8.5-1 .2c-.4 0-.8 0-1.2-.3a3.9 3.9 0 0 1-2.1-2.2c-.2-.5-.3-1-.2-1.5l-1-1-1 1c0 .5 0 1-.2 1.5-.1.5-.4 1-.9 1.4-.3.4-.7.6-1.2.8l-1.2.3c-.4 0-.7 0-1-.2-.3 0-.6-.3-.8-.5-.5-.5-.8-1.2-.7-2 0-.9.4-1.6 1-2.2A3.7 3.7 0 0 1 8.6 14H9l1-1-4-4-.5-1a3.3 3.3 0 0 1 0-2c0-.4.3-.7.5-1l6 6 6-6 .5 1a3.3 3.3 0 0 1 0 2c0 .4-.3.7-.5 1l-4 4 1 1h.5c.4 0 .8 0 1.2.3.5.2.9.4 1.2.8Zm-8.5 2.2.1-.4v-.7a1 1 0 0 0-.2-.5 1 1 0 0 0-.4-.2 1.6 1.6 0 0 0-.8 0 2.6 2.6 0 0 0-.8.3 2.5 2.5 0 0 0-.9 1.1l-.1.4v.7l.2.5.5.2h.7a2.5 2.5 0 0 0 .8-.3 2.8 2.8 0 0 0 1-1Zm2.5-2.8c.4 0 .7-.1 1-.4.3-.3.4-.6.4-1s-.1-.7-.4-1c-.3-.3-.6-.4-1-.4s-.7.1-1 .4c-.3.3-.4.6-.4 1s.1.7.4 1c.3.3.6.4 1 .4Zm5.4 4 .2-.5v-.7a2.6 2.6 0 0 0-.3-.8 2.4 2.4 0 0 0-.7-.7 2.5 2.5 0 0 0-.8-.3 1.5 1.5 0 0 0-.8 0 1 1 0 0 0-.4.2 1 1 0 0 0-.2.5 1.5 1.5 0 0 0 0 .7v.4l.3.4.3.4a2.8 2.8 0 0 0 .8.5l.4.1h.7l.5-.2Z" fill-rule="evenodd"/></svg>',"document-properties":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',drag:'<svg width="24" height="24"><path d="M13 5h2v2h-2V5Zm0 4h2v2h-2V9ZM9 9h2v2H9V9Zm4 4h2v2h-2v-2Zm-4 0h2v2H9v-2Zm0 4h2v2H9v-2Zm4 0h2v2h-2v-2ZM9 5h2v2H9V5Z" fill-rule="evenodd"/></svg>',"duplicate-column":'<svg width="24" height="24"><path d="M17 6v16h-7V6h7Zm-2 2h-3v12h3V8Zm-2-6v2H8v15H6V2h7Z"/></svg>',"duplicate-row":'<svg width="24" height="24"><path d="M22 11v7H6v-7h16Zm-2 2H8v3h12v-3Zm-1-6v2H4v5H2V7h17Z"/></svg>',duplicate:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M16 3v2H6v11H4V5c0-1.1.9-2 2-2h10Zm3 8h-2V9h-7v10h9a2 2 0 0 1-2 2h-7a2 2 0 0 1-2-2V9c0-1.2.9-2 2-2h7a2 2 0 0 1 2 2v2Z"/><path d="M17 14h1a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1h-1a1 1 0 0 1 0-2h1v-1a1 1 0 0 1 2 0v1Z"/></g></svg>',"edit-block":'<svg width="24" height="24"><path fill-rule="nonzero" d="m19.8 8.8-9.4 9.4c-.2.2-.5.4-.9.4l-5.4 1.2 1.2-5.4.5-.8 9.4-9.4c.7-.7 1.8-.7 2.5 0l2.1 2.1c.7.7.7 1.8 0 2.5Zm-2-.2 1-.9v-.3l-2.2-2.2a.3.3 0 0 0-.3 0l-1 1L18 8.5Zm-1 1-2.5-2.4-6 6 2.5 2.5 6-6Zm-7 7.1-2.6-2.4-.3.3-.1.2-.7 3 3.1-.6h.1l.4-.5Z"/></svg>',"edit-image":'<svg width="24" height="24"><path d="M18 16h2V7a2 2 0 0 0-2-2H7v2h11v9ZM6 17h15a1 1 0 0 1 0 2h-1v1a1 1 0 0 1-2 0v-1H6a2 2 0 0 1-2-2V7H3a1 1 0 1 1 0-2h1V4a1 1 0 1 1 2 0v13Zm3-5.3 1.3 2 3-4.7 3.7 6H7l2-3.3Z" fill-rule="nonzero"/></svg>',"embed-page":'<svg width="24" height="24"><path d="M19 6V5H5v14h2A13 13 0 0 1 19 6Zm0 1.4c-.8.8-1.6 2.4-2.2 4.6H19V7.4Zm0 5.6h-2.4c-.4 1.8-.6 3.8-.6 6h3v-6Zm-4 6c0-2.2.2-4.2.6-6H13c-.7 1.8-1.1 3.8-1.1 6h3Zm-4 0c0-2.2.4-4.2 1-6H9.6A12 12 0 0 0 8 19h3ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm11.8 9c.4-1.9 1-3.4 1.8-4.5a9.2 9.2 0 0 0-4 4.5h2.2Zm-3.4 0a12 12 0 0 1 2.8-4 12 12 0 0 0-5 4h2.2Z" fill-rule="nonzero"/></svg>',embed:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm4.8 2.6 5.6 4a.5.5 0 0 1 0 .8l-5.6 4A.5.5 0 0 1 9 16V8a.5.5 0 0 1 .8-.4Z" fill-rule="nonzero"/></svg>',emoji:'<svg width="24" height="24"><path d="M9 11c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm6 0c.6 0 1-.4 1-1s-.4-1-1-1a1 1 0 0 0-1 1c0 .6.4 1 1 1Zm-3 5.5c2.1 0 4-1.5 4.4-3.5H7.6c.5 2 2.3 3.5 4.4 3.5ZM12 4a8 8 0 1 0 0 16 8 8 0 0 0 0-16Zm0 14.5a6.5 6.5 0 1 1 0-13 6.5 6.5 0 0 1 0 13Z" fill-rule="nonzero"/></svg>',export:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M14.4 3 18 7v1h-5V5H7v14h9a1 1 0 0 1 2 0c0 1-.8 2-1.9 2H7c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2h7.5Z"/><path d="M18.1 12c.5 0 .9.4.9 1 0 .5-.3 1-.8 1h-7.3c-.5 0-.9-.4-.9-1 0-.5.3-1 .8-1h7.3Z"/><path d="M16.4 9.2a1 1 0 0 1 1.4.2l2.4 3.6-2.4 3.6a1 1 0 0 1-1.7-1v-.2l1.7-2.4-1.6-2.4a1 1 0 0 1 .2-1.4Z"/></g></svg>',fill:'<svg width="24" height="26"><path d="m16.6 12-9-9-1.4 1.4 2.4 2.4-5.2 5.1c-.5.6-.5 1.6 0 2.2L9 19.6a1.5 1.5 0 0 0 2.2 0l5.5-5.5c.5-.6.5-1.6 0-2.2ZM5.2 13 10 8.2l4.8 4.8H5.2ZM19 14.5s-2 2.2-2 3.5c0 1.1.9 2 2 2a2 2 0 0 0 2-2c0-1.3-2-3.5-2-3.5Z" fill-rule="nonzero"/></svg>',"flip-horizontally":'<svg width="24" height="24"><path d="M14 19h2v-2h-2v2Zm4-8h2V9h-2v2ZM4 7v10c0 1.1.9 2 2 2h3v-2H6V7h3V5H6a2 2 0 0 0-2 2Zm14-2v2h2a2 2 0 0 0-2-2Zm-7 16h2V3h-2v18Zm7-6h2v-2h-2v2Zm-4-8h2V5h-2v2Zm4 12a2 2 0 0 0 2-2h-2v2Z" fill-rule="nonzero"/></svg>',"flip-vertically":'<svg width="24" height="24"><path d="M5 14v2h2v-2H5Zm8 4v2h2v-2h-2Zm4-14H7a2 2 0 0 0-2 2v3h2V6h10v3h2V6a2 2 0 0 0-2-2Zm2 14h-2v2a2 2 0 0 0 2-2ZM3 11v2h18v-2H3Zm6 7v2h2v-2H9Zm8-4v2h2v-2h-2ZM5 18c0 1.1.9 2 2 2v-2H5Z" fill-rule="nonzero"/></svg>',footnote:'<svg width="24" height="24"><path d="M19 13c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h14Z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M19 4v6h-1V5h-1.5V4h2.6Z"/><path d="M12 18c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 1 1 0-2h7ZM14 8c.6 0 1 .4 1 1s-.4 1-1 1H5a1 1 0 0 1 0-2h9Z"/></svg>',"format-painter":'<svg width="24" height="24"><path d="M18 5V4c0-.5-.4-1-1-1H5a1 1 0 0 0-1 1v4c0 .6.5 1 1 1h12c.6 0 1-.4 1-1V7h1v4H9v9c0 .6.4 1 1 1h2c.6 0 1-.4 1-1v-7h8V5h-3Z" fill-rule="nonzero"/></svg>',format:'<svg width="24" height="24"><path fill-rule="evenodd" d="M17 5a1 1 0 0 1 0 2h-4v11a1 1 0 0 1-2 0V7H7a1 1 0 1 1 0-2h10Z"/></svg>',fullscreen:'<svg width="24" height="24"><path d="m15.3 10-1.2-1.3 2.9-3h-2.3a.9.9 0 1 1 0-1.7H19c.5 0 .9.4.9.9v4.4a.9.9 0 1 1-1.8 0V7l-2.9 3Zm0 4 3 3v-2.3a.9.9 0 1 1 1.7 0V19c0 .5-.4.9-.9.9h-4.4a.9.9 0 1 1 0-1.8H17l-3-2.9 1.3-1.2ZM10 15.4l-2.9 3h2.3a.9.9 0 1 1 0 1.7H5a.9.9 0 0 1-.9-.9v-4.4a.9.9 0 1 1 1.8 0V17l2.9-3 1.2 1.3ZM8.7 10 5.7 7v2.3a.9.9 0 0 1-1.7 0V5c0-.5.4-.9.9-.9h4.4a.9.9 0 0 1 0 1.8H7l3 2.9-1.3 1.2Z" fill-rule="nonzero"/></svg>',gallery:'<svg width="24" height="24"><path fill-rule="nonzero" d="m5 15.7 2.3-2.2c.3-.3.7-.3 1 0L11 16l5.1-5c.3-.4.8-.4 1 0l2 1.9V8H5v7.7ZM5 18V19h3l1.8-1.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 6h16c.6 0 1 .4 1 1v13c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V7c0-.6.4-1 1-1Zm6 7a2 2 0 1 1 0-4 2 2 0 0 1 0 4ZM4.5 4h15a.5.5 0 1 1 0 1h-15a.5.5 0 0 1 0-1Zm2-2h11a.5.5 0 1 1 0 1h-11a.5.5 0 0 1 0-1Z"/></svg>',gamma:'<svg width="24" height="24"><path d="M4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm1 2v14h14V5H5Zm6.5 11.8V14L9.2 8.7a5.1 5.1 0 0 0-.4-.8l-.1-.2H8v-1l.3-.1.3-.1h.7a1 1 0 0 1 .6.5l.1.3a8.5 8.5 0 0 1 .3.6l1.9 4.6 2-5.2a1 1 0 0 1 1-.6.5.5 0 0 1 .5.6L13 14v2.8a.7.7 0 0 1-1.4 0Z" fill-rule="nonzero"/></svg>',help:'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M12 5.5a6.5 6.5 0 0 0-6 9 6.3 6.3 0 0 0 1.4 2l1 1a6.3 6.3 0 0 0 3.6 1 6.5 6.5 0 0 0 6-9 6.3 6.3 0 0 0-1.4-2l-1-1a6.3 6.3 0 0 0-3.6-1ZM12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Z"/><path d="M9.6 9.7a.7.7 0 0 1-.7-.8c0-1.1 1.5-1.8 3.2-1.8 1.8 0 3.2.8 3.2 2.4 0 1.4-.4 2.1-1.5 2.8-.2 0-.3.1-.3.2a2 2 0 0 0-.8.8.8.8 0 0 1-1.4-.6c.3-.7.8-1 1.3-1.5l.4-.2c.7-.4.8-.6.8-1.5 0-.5-.6-.9-1.7-.9-.5 0-1 .1-1.4.3-.2 0-.3.1-.3.2v-.2c0 .4-.4.8-.8.8Z" fill-rule="nonzero"/><circle cx="12" cy="16" r="1"/></g></svg>',"highlight-bg-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-highlight-bg-color__color" d="M3 18h18v3H3z"/><path fill-rule="nonzero" d="M7.7 16.7H3l3.3-3.3-.7-.8L10.2 8l4 4.1-4 4.2c-.2.2-.6.2-.8 0l-.6-.7-1.1 1.1zm5-7.5L11 7.4l3-2.9a2 2 0 0 1 2.6 0L18 6c.7.7.7 2 0 2.7l-2.9 2.9-1.8-1.8-.5-.6"/></g></svg>',home:'<svg width="24" height="24"><path fill-rule="nonzero" d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/></svg>',"horizontal-rule":'<svg width="24" height="24"><path d="M4 11h16v2H4z" fill-rule="evenodd"/></svg>',"image-options":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',image:'<svg width="24" height="24"><path d="m5 15.7 3.3-3.2c.3-.3.7-.3 1 0L12 15l4.1-4c.3-.4.8-.4 1 0l2 1.9V5H5v10.7ZM5 18V19h3l2.8-2.9-2-2L5 17.9Zm14-3-2.5-2.4-6.4 6.5H19v-4ZM4 3h16c.6 0 1 .4 1 1v16c0 .6-.4 1-1 1H4a1 1 0 0 1-1-1V4c0-.6.4-1 1-1Zm6 8a2 2 0 1 0 0-4 2 2 0 0 0 0 4Z" fill-rule="nonzero"/></svg>',indent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm-2.6-3.8L6.2 12l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',info:'<svg width="24" height="24"><path d="M12 4a7.8 7.8 0 0 1 5.7 2.3A8 8 0 1 1 12 4Zm-1 3v2h2V7h-2Zm3 10v-1h-1v-5h-3v1h1v4h-1v1h4Z" fill-rule="evenodd"/></svg>',"insert-character":'<svg width="24" height="24"><path d="M15 18h4l1-2v4h-6v-3.3l1.4-1a6 6 0 0 0 1.8-2.9 6.3 6.3 0 0 0-.1-4.1 5.8 5.8 0 0 0-3-3.2c-.6-.3-1.3-.5-2.1-.5a5.1 5.1 0 0 0-3.9 1.8 6.3 6.3 0 0 0-1.3 6 6.2 6.2 0 0 0 1.8 3l1.4.9V20H4v-4l1 2h4v-.5l-2-1L5.4 15A6.5 6.5 0 0 1 4 11c0-1 .2-1.9.6-2.7A7 7 0 0 1 6.3 6C7.1 5.4 8 5 9 4.5c1-.3 2-.5 3.1-.5a8.8 8.8 0 0 1 5.7 2 7 7 0 0 1 1.7 2.3 6 6 0 0 1 .2 4.8c-.2.7-.6 1.3-1 1.9a7.6 7.6 0 0 1-3.6 2.5v.5Z" fill-rule="evenodd"/></svg>',"insert-time":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M12 19a7 7 0 1 0 0-14 7 7 0 0 0 0 14Zm0 2a9 9 0 1 1 0-18 9 9 0 0 1 0 18Z"/><path d="M16 12h-3V7c0-.6-.4-1-1-1a1 1 0 0 0-1 1v7h5c.6 0 1-.4 1-1s-.4-1-1-1Z"/></g></svg>',invert:'<svg width="24" height="24"><path d="M18 19.3 16.5 18a5.8 5.8 0 0 1-3.1 1.9 6.1 6.1 0 0 1-5.5-1.6A5.8 5.8 0 0 1 6 14v-.3l.1-1.2A13.9 13.9 0 0 1 7.7 9l-3-3 .7-.8 2.8 2.9 9 8.9 1.5 1.6-.7.6Zm0-5.5v.3l-.1 1.1-.4 1-1.2-1.2a4.3 4.3 0 0 0 .2-1v-.2c0-.4 0-.8-.2-1.3l-.5-1.4a14.8 14.8 0 0 0-3-4.2L12 6a26.1 26.1 0 0 0-2.2 2.5l-1-1a20.9 20.9 0 0 1 2.9-3.3L12 4l1 .8a22.2 22.2 0 0 1 4 5.4c.6 1.2 1 2.4 1 3.6Z" fill-rule="evenodd"/></svg>',italic:'<svg width="24" height="24"><path d="m16.7 4.7-.1.9h-.3c-.6 0-1 0-1.4.3-.3.3-.4.6-.5 1.1l-2.1 9.8v.6c0 .5.4.8 1.4.8h.2l-.2.8H8l.2-.8h.2c1.1 0 1.8-.5 2-1.5l2-9.8.1-.5c0-.6-.4-.8-1.4-.8h-.3l.2-.9h5.8Z" fill-rule="evenodd"/></svg>',language:'<svg width="24" height="24"><path d="M12 3a9 9 0 1 1 0 18 9 9 0 0 1 0-18Zm4.3 13.3c-.5 1-1.2 2-2 2.9a7.5 7.5 0 0 0 3.2-2.1l-.2-.2a6 6 0 0 0-1-.6Zm-8.6 0c-.5.2-.9.5-1.2.8.9 1 2 1.7 3.2 2a10 10 0 0 1-2-2.8Zm3.6-.8c-.8 0-1.6.1-2.2.3.5 1 1.2 1.9 2.1 2.7Zm1.5 0v3c.9-.8 1.6-1.7 2.1-2.7-.6-.2-1.4-.3-2.1-.3Zm-6-2.7H4.5c.2 1 .5 2.1 1 3h.3l1.3-1a10 10 0 0 1-.3-2Zm12.7 0h-2.3c0 .7-.1 1.4-.3 2l1.6 1.1c.5-1 .9-2 1-3.1Zm-3.8 0h-3V14c1 0 2 .1 2.7.4.2-.5.3-1 .3-1.6Zm-4.4 0h-3l.3 1.6c.8-.3 1.7-.4 2.7-.4v-1.3Zm-5.5-5c-.7 1-1.1 2.2-1.3 3.5h2.3c0-1 .2-1.8.5-2.6l-1.5-1Zm2.9 1.4v.1c-.2.6-.4 1.3-.4 2h3V9.4c-1 0-1.8-.1-2.6-.3Zm6.6 0h-.1l-2.4.3v1.8h3l-.5-2.1Zm3-1.4-.3.1-1.3.8c.3.8.5 1.6.5 2.6h2.3a7.5 7.5 0 0 0-1.3-3.5Zm-9 0 2 .2V5.5a9 9 0 0 0-2 2.2Zm3.5-2.3V8c.6 0 1.3 0 1.9-.2a9 9 0 0 0-2-2.3Zm-3-.7h-.1c-1.1.4-2.1 1-3 1.8l1.2.7a10 10 0 0 1 1.9-2.5Zm4.4 0 .1.1a10 10 0 0 1 1.8 2.4l1.1-.7a7.5 7.5 0 0 0-3-1.8Z"/></svg>',"line-height":'<svg width="24" height="24"><path d="M21 5a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zm0 4a1 1 0 0 1 .1 2H13a1 1 0 0 1-.1-2H21zM7 3.6l3.7 3.7a1 1 0 0 1-1.3 1.5h-.1L8 7.3v9.2l1.3-1.3a1 1 0 0 1 1.3 0h.1c.4.4.4 1 0 1.3v.1L7 20.4l-3.7-3.7a1 1 0 0 1 1.3-1.5h.1L6 16.7V7.4L4.7 8.7a1 1 0 0 1-1.3 0h-.1a1 1 0 0 1 0-1.3v-.1L7 3.6z"/></svg>',line:'<svg width="24" height="24"><path d="m15 9-8 8H4v-3l8-8 3 3Zm1-1-3-3 1-1h1c-.2 0 0 0 0 0l2 2s0 .2 0 0v1l-1 1ZM4 18h16v2H4v-2Z" fill-rule="evenodd"/></svg>',link:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2-2a2 2 0 1 0-2.6-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2Z" fill-rule="nonzero"/></svg>',"list-bull-circle":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M11 16a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 26a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6ZM11 36a2 2 0 1 0 0-4 2 2 0 0 0 0 4Zm0 1a3 3 0 1 1 0-6 3 3 0 0 1 0 6Z" fill-rule="nonzero"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-default":'<svg width="48" height="48"><g fill-rule="evenodd"><circle cx="11" cy="14" r="3"/><circle cx="11" cy="24" r="3"/><circle cx="11" cy="34" r="3"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-bull-square":'<svg width="48" height="48"><g fill-rule="evenodd"><path d="M8 11h6v6H8zM8 21h6v6H8zM8 31h6v6H8z"/><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/></g></svg>',"list-num-default-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 17v-4.8h-.1l-1.5 1v-1.1l1.6-1.1h1.2v6zM33.3 17.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm1.7 5.7c0-1.2 1-2 2.2-2 1.3 0 2.1.8 2.1 1.8 0 .7-.3 1.2-1.3 2.2l-1.2 1v.2h2.6v1h-4.3v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H35zm-1.7 4.3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7zm3.2 7.3v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H35c0-1.1 1-1.8 2.2-1.8 1.2 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.7.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .6 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7zm-3.3 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7z"/></g></svg>',"list-num-default":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10 17v-4.8l-1.5 1v-1.1l1.6-1h1.2V17h-1.2Zm3.6.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-5 5.7c0-1.2.8-2 2.1-2s2.1.8 2.1 1.8c0 .7-.3 1.2-1.4 2.2l-1.1 1v.2h2.6v1H8.6v-.9l2-1.9c.8-.8 1-1.1 1-1.5 0-.5-.4-.8-1-.8-.5 0-.9.3-.9.9H8.5Zm6.3 4.3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM10 34.4v-1h.7c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7s-1 .3-1 .8H8.6c0-1.1 1-1.8 2.2-1.8 1.3 0 2.1.6 2.1 1.6 0 .7-.4 1.2-1 1.3v.1c.8.1 1.3.7 1.3 1.4 0 1-1 1.9-2.4 1.9-1.3 0-2.2-.8-2.3-2h1.2c0 .6.5 1 1.1 1 .7 0 1-.4 1-1 0-.5-.3-.8-1-.8h-.7Zm4.7 2.7c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Z"/></g></svg>',"list-num-lower-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M36.5 16c-.9 0-1.5-.5-1.5-1.3s.6-1.3 1.8-1.4h1v-.4c0-.4-.2-.6-.7-.6-.4 0-.7.1-.8.4h-1.1c0-.8.8-1.4 2-1.4S39 12 39 13V16h-1.2v-.6c-.3.4-.8.7-1.4.7Zm.4-.8c.6 0 1-.4 1-.9V14h-1c-.5.1-.7.3-.7.6 0 .4.3.6.7.6ZM33.1 16.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7ZM37.7 26c-.7 0-1.2-.2-1.5-.7v.7H35v-6.3h1.2v2.5c.3-.5.8-.9 1.5-.9 1.1 0 1.8 1 1.8 2.4 0 1.5-.7 2.4-1.8 2.4Zm-.5-3.6c-.6 0-1 .5-1 1.3s.4 1.4 1 1.4c.7 0 1-.6 1-1.4 0-.8-.3-1.3-1-1.3ZM33.2 26.1c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7zm6 7h-1c-.1-.5-.4-.8-1-.8s-1 .5-1 1.4c0 1 .4 1.4 1 1.4.5 0 .9-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7zm-6.1 3c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7z"/></g></svg>',"list-num-lower-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.3 15.2c.5 0 1-.4 1-.9V14h-1c-.5.1-.8.3-.8.6 0 .4.3.6.8.6Zm-.4.9c-1 0-1.5-.6-1.5-1.4 0-.8.6-1.3 1.7-1.4h1.1v-.4c0-.4-.2-.6-.7-.6-.5 0-.8.1-.9.4h-1c0-.8.8-1.4 2-1.4 1.1 0 1.8.6 1.8 1.6V16h-1.1v-.6h-.1c-.2.4-.7.7-1.3.7Zm4.6 0c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-3.2 10c-.6 0-1.2-.3-1.4-.8v.7H8.5v-6.3H10v2.5c.3-.5.8-.9 1.4-.9 1.2 0 1.9 1 1.9 2.4 0 1.5-.7 2.4-1.9 2.4Zm-.4-3.7c-.7 0-1 .5-1 1.3s.3 1.4 1 1.4c.6 0 1-.6 1-1.4 0-.8-.4-1.3-1-1.3Zm4 3.7c-.5 0-.7-.3-.7-.7 0-.4.2-.7.7-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-2.2 7h-1.2c0-.5-.4-.8-.9-.8-.6 0-1 .5-1 1.4 0 1 .4 1.4 1 1.4.5 0 .8-.2 1-.7h1c0 1-.8 1.7-2 1.7-1.4 0-2.2-.9-2.2-2.4s.8-2.4 2.2-2.4c1.2 0 2 .7 2 1.7Zm1.8 3c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M37.4 16c-1.2 0-2-.8-2-2.3 0-1.5.8-2.4 2-2.4.6 0 1 .4 1.3 1v-.9H40v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1-.7h-.2c-.2.4-.7.8-1.3.8Zm.3-1c.6 0 1-.5 1-1.3s-.4-1.3-1-1.3-1 .5-1 1.3.4 1.4 1 1.4ZM33.3 16.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM36 21.9c0-1.5.8-2.3 2.1-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.9 1.3.9.3 1.3.8 1.3 1.7 0 1.2-.7 1.9-1.8 1.9-.6 0-1.1-.3-1.4-.8v2.2H36V22Zm1.8 1.2v-1h.3c.5 0 .9-.2.9-.7 0-.5-.3-.8-.9-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1 1.3s1-.4 1-1-.4-1-1.2-1h-.3ZM33.3 26.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7ZM37.1 34.6 34.8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.2.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1ZM33.3 36.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-greek":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M10.5 15c.7 0 1-.5 1-1.3s-.3-1.3-1-1.3c-.5 0-.9.5-.9 1.3s.4 1.4 1 1.4Zm-.3 1c-1.1 0-1.8-.8-1.8-2.3 0-1.5.7-2.4 1.8-2.4.7 0 1.1.4 1.3 1h.1v-.9h1.2v3.2c0 .4.1.5.4.5h.2v.9h-.6c-.6 0-1-.2-1.1-.7h-.1c-.2.4-.7.8-1.4.8Zm5 .1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.7-.7.5 0 .8.3.8.7 0 .4-.3.7-.8.7Zm-4.9 7v-1h.3c.6 0 1-.2 1-.7 0-.5-.4-.8-1-.8-.5 0-.8.3-.8 1v2.2c0 .8.4 1.3 1.1 1.3.6 0 1-.4 1-1s-.5-1-1.3-1h-.3ZM8.6 22c0-1.5.7-2.3 2-2.3 1.2 0 2 .6 2 1.6 0 .6-.3 1-.8 1.3.8.3 1.3.8 1.3 1.7 0 1.2-.8 1.9-1.9 1.9-.6 0-1.1-.3-1.3-.8v2.2H8.5V22Zm6.2 4.2c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm-4.5 8.5L8 30h1.4l1.7 3.5 1.7-3.5h1.1l-2.2 4.6v.1c.5.8.7 1.4.7 1.8 0 .4-.1.8-.4 1-.2.2-.6.3-1 .3-.9 0-1.3-.4-1.3-1.2 0-.5.2-1 .5-1.7l.1-.2Zm.7 1a2 2 0 0 0-.4.9c0 .3.1.4.4.4.3 0 .4-.1.4-.4 0-.2-.1-.6-.4-1Zm4.5.5c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-lower-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M32.9 16v-1.2h-1.3V16H33Zm0 10v-1.2h-1.3V26H33Zm0 10v-1.2h-1.3V36H33Z"/><path fill-rule="nonzero" d="M36 21h-1.5v5H36zM36 31h-1.5v5H36zM39 21h-1.5v5H39zM39 31h-1.5v5H39zM42 31h-1.5v5H42zM36 11h-1.5v5H36zM36 19h-1.5v1H36zM36 29h-1.5v1H36zM39 19h-1.5v1H39zM39 29h-1.5v1H39zM42 29h-1.5v1H42zM36 9h-1.5v1H36z"/></g></svg>',"list-num-lower-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 16v-1.2h1.3V16H15Zm0 10v-1.2h1.3V26H15Zm0 10v-1.2h1.3V36H15Z"/><path fill-rule="nonzero" d="M12 21h1.5v5H12zM12 31h1.5v5H12zM9 21h1.5v5H9zM9 31h1.5v5H9zM6 31h1.5v5H6zM12 11h1.5v5H12zM12 19h1.5v1H12zM12 29h1.5v1H12zM9 19h1.5v1H9zM9 29h1.5v1H9zM6 29h1.5v1H6zM12 9h1.5v1H12z"/></g></svg>',"list-num-upper-alpha-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="m39.3 17-.5-1.4h-2l-.5 1.4H35l2-6h1.6l2 6h-1.3Zm-1.6-4.7-.7 2.3h1.6l-.8-2.3ZM33.4 17c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7Zm4.7 9.9h-2.7v-6H38c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7Zm-1.4-5v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4h1.1c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9h-1.1V26ZM33 27.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm4.9 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm-4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-alpha":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="m12.6 17-.5-1.4h-2L9.5 17H8.3l2-6H12l2 6h-1.3ZM11 12.3l-.7 2.3h1.6l-.8-2.3Zm4.7 4.8c-.4 0-.7-.3-.7-.7 0-.4.3-.7.7-.7.5 0 .7.3.7.7 0 .4-.2.7-.7.7ZM11.4 27H8.7v-6h2.6c1.2 0 1.9.6 1.9 1.5 0 .6-.5 1.2-1 1.3.7.1 1.3.7 1.3 1.5 0 1-.8 1.7-2 1.7ZM10 22v1.5h1c.6 0 1-.3 1-.8 0-.4-.4-.7-1-.7h-1Zm0 4H11c.7 0 1.1-.3 1.1-.8 0-.6-.4-.9-1.1-.9H10V26Zm5.4 1.1c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Zm-4.1 10c-1.8 0-2.8-1.1-2.8-3.1s1-3.1 2.8-3.1c1.4 0 2.5.9 2.6 2.2h-1.3c0-.7-.6-1.1-1.3-1.1-1 0-1.6.7-1.6 2s.6 2 1.6 2c.7 0 1.2-.4 1.4-1h1.2c-.1 1.3-1.2 2.2-2.6 2.2Zm4.5 0c-.5 0-.8-.3-.8-.7 0-.4.3-.7.8-.7.4 0 .7.3.7.7 0 .4-.3.7-.7.7Z"/></g></svg>',"list-num-upper-roman-rtl":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M8 12h22v4H8zM8 22h22v4H8zM8 32h22v4H8z"/><path d="M31.6 17v-1.2H33V17h-1.3Zm0 10v-1.2H33V27h-1.3Zm0 10v-1.2H33V37h-1.3Z"/><path fill-rule="nonzero" d="M34.5 20H36v7h-1.5zM34.5 30H36v7h-1.5zM37.5 20H39v7h-1.5zM37.5 30H39v7h-1.5zM40.5 30H42v7h-1.5zM34.5 10H36v7h-1.5z"/></g></svg>',"list-num-upper-roman":'<svg width="48" height="48"><g fill-rule="evenodd"><path opacity=".2" d="M18 12h22v4H18zM18 22h22v4H18zM18 32h22v4H18z"/><path d="M15.1 17v-1.2h1.3V17H15Zm0 10v-1.2h1.3V27H15Zm0 10v-1.2h1.3V37H15Z"/><path fill-rule="nonzero" d="M12 20h1.5v7H12zM12 30h1.5v7H12zM9 20h1.5v7H9zM9 30h1.5v7H9zM6 30h1.5v7H6zM12 10h1.5v7H12z"/></g></svg>',lock:'<svg width="24" height="24"><path d="M16.3 11c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H8V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h.3ZM10 8v3h4V8a1 1 0 0 0-.3-.7A1 1 0 0 0 13 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7Z" fill-rule="evenodd"/></svg>',ltr:'<svg width="24" height="24"><path d="M11 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 7.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L11 5ZM4.4 16.2 6.2 15l-1.8-1.2a1 1 0 0 1 1.2-1.6l3 2a1 1 0 0 1 0 1.6l-3 2a1 1 0 1 1-1.2-1.6Z" fill-rule="evenodd"/></svg>',minus:'<svg width="24" height="24"><path d="M19 11a1 1 0 0 1 .1 2H5a1 1 0 0 1-.1-2H19Z"/></svg>',"more-drawer":'<svg width="24" height="24"><path d="M6 10a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm12 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Zm-6 0a2 2 0 0 0-2 2c0 1.1.9 2 2 2a2 2 0 0 0 2-2 2 2 0 0 0-2-2Z" fill-rule="nonzero"/></svg>',"new-document":'<svg width="24" height="24"><path d="M14.4 3H7a2 2 0 0 0-2 2v14c0 1.1.9 2 2 2h10a2 2 0 0 0 2-2V7.6L14.4 3ZM17 19H7V5h6v4h4v10Z" fill-rule="nonzero"/></svg>',"new-tab":'<svg width="24" height="24"><path d="m15 13 2-2v8H5V7h8l-2 2H7v8h8v-4Zm4-8v5.5l-2-2-5.6 5.5H10v-1.4L15.5 7l-2-2H19Z" fill-rule="evenodd"/></svg>',"non-breaking":'<svg width="24" height="24"><path d="M11 11H8a1 1 0 1 1 0-2h3V6c0-.6.4-1 1-1s1 .4 1 1v3h3c.6 0 1 .4 1 1s-.4 1-1 1h-3v3c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-3Zm10 4v5H3v-5c0-.6.4-1 1-1s1 .4 1 1v3h14v-3c0-.6.4-1 1-1s1 .4 1 1Z" fill-rule="evenodd"/></svg>',notice:'<svg width="24" height="24"><path d="M15.5 4 20 8.5v7L15.5 20h-7L4 15.5v-7L8.5 4h7ZM13 17v-2h-2v2h2Zm0-4V7h-2v6h2Z" fill-rule="evenodd" clip-rule="evenodd"/></svg>',"ordered-list-rtl":'<svg width="24" height="24"><path d="M6 17h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 0 1 0-2Zm0-6h8a1 1 0 0 1 0 2H6a1 1 0 1 1 0-2Zm13-1v3.5a.5.5 0 1 1-1 0V5h-.5a.5.5 0 1 1 0-1H19Zm-1 8.8.2.2h1.3a.5.5 0 1 1 0 1h-1.6a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2h-1.3a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3Zm2 4.2v2c0 .6-.4 1-1 1h-1.5a.5.5 0 0 1 0-1h1.2a.3.3 0 1 0 0-.6h-1.3a.4.4 0 1 1 0-.8h1.3a.3.3 0 0 0 0-.6h-1.2a.5.5 0 1 1 0-1H19c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',"ordered-list":'<svg width="24" height="24"><path d="M10 17h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0-6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 1 1 0-2ZM6 4v3.5c0 .3-.2.5-.5.5a.5.5 0 0 1-.5-.5V5h-.5a.5.5 0 0 1 0-1H6Zm-1 8.8.2.2h1.3c.3 0 .5.2.5.5s-.2.5-.5.5H4.9a1 1 0 0 1-.9-1V13c0-.4.3-.8.6-1l1.2-.4.2-.3a.2.2 0 0 0-.2-.2H4.5a.5.5 0 0 1-.5-.5c0-.3.2-.5.5-.5h1.6c.5 0 .9.4.9 1v.1c0 .4-.3.8-.6 1l-1.2.4-.2.3ZM7 17v2c0 .6-.4 1-1 1H4.5a.5.5 0 0 1 0-1h1.2c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.4a.4.4 0 1 1 0-.8h1.3c.2 0 .3-.1.3-.3 0-.2-.1-.3-.3-.3H4.5a.5.5 0 1 1 0-1H6c.6 0 1 .4 1 1Z" fill-rule="evenodd"/></svg>',orientation:'<svg width="24" height="24"><path d="M7.3 6.4 1 13l6.4 6.5 6.5-6.5-6.5-6.5ZM3.7 13l3.6-3.7L11 13l-3.7 3.7-3.6-3.7ZM12 6l2.8 2.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0L9.2 5.7a.8.8 0 0 1 0-1.2L13.6.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L12 4h1a9 9 0 1 1-4.3 16.9l1.5-1.5A7 7 0 1 0 13 6h-1Z" fill-rule="nonzero"/></svg>',outdent:'<svg width="24" height="24"><path d="M7 5h12c.6 0 1 .4 1 1s-.4 1-1 1H7a1 1 0 1 1 0-2Zm5 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm0 4h7c.6 0 1 .4 1 1s-.4 1-1 1h-7a1 1 0 0 1 0-2Zm-5 4h12a1 1 0 0 1 0 2H7a1 1 0 0 1 0-2Zm1.6-3.8a1 1 0 0 1-1.2 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 0 1 1.2 1.6L6.8 12l1.8 1.2Z" fill-rule="evenodd"/></svg>',"page-break":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M5 11c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h1c.6 0 1 .4 1 1s-.4 1-1 1h-1a1 1 0 0 1 0-2Zm4 0c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2ZM7 3v5h10V3c0-.6.4-1 1-1s1 .4 1 1v7H5V3c0-.6.4-1 1-1s1 .4 1 1ZM6 22a1 1 0 0 1-1-1v-7h14v7c0 .6-.4 1-1 1a1 1 0 0 1-1-1v-5H7v5c0 .6-.4 1-1 1Z"/></g></svg>',paragraph:'<svg width="24" height="24"><path fill-rule="evenodd" d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z"/></svg>',"paste-column-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h7v2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm8 7v12h-6V8h6Zm-1.5 1.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-column-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V18c0 1-.8 2-1.9 2H11v-2h7V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v2H4V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm-2 7v12H4V8h6ZM8.5 9.5h-3v9h3v-9ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-after":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V11h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h14c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 11v5H8v-5h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-row-before":'<svg width="24" height="24"><path fill-rule="evenodd" d="M12 1a3 3 0 0 1 2.8 2H18c1 0 2 .8 2 1.9V7h-2V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h12v-4h2v4c0 1-.8 2-1.9 2H6c-1 0-2-.8-2-1.9V5c0-1 .8-2 1.9-2H9.2A3 3 0 0 1 12 1Zm10 7v5H8V8h14Zm-1.5 1.5h-11v2h11v-2ZM12 3a1 1 0 1 0 0 2 1 1 0 0 0 0-2Z"/></svg>',"paste-text":'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Zm0 9h6v2h-.5l-.5-1h-1v4h.8v1h-3.6v-1h.8v-4h-1l-.5 1H12v-2Z" fill-rule="nonzero"/></svg>',paste:'<svg width="24" height="24"><path d="M18 9V5h-2v1c0 .6-.4 1-1 1H9a1 1 0 0 1-1-1V5H6v13h3V9h9ZM9 20H6a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.2A3 3 0 0 1 12 1a3 3 0 0 1 2.8 2H18a2 2 0 0 1 2 2v4h1v12H9v-1Zm1.5-9.5v9h9v-9h-9ZM12 3a1 1 0 0 0-1 1c0 .5.4 1 1 1s1-.5 1-1-.4-1-1-1Z" fill-rule="nonzero"/></svg>',"permanent-pen":'<svg width="24" height="24"><path d="M10.5 17.5 8 20H3v-3l3.5-3.5a2 2 0 0 1 0-3L14 3l1 1-7.3 7.3a1 1 0 0 0 0 1.4l3.6 3.6c.4.4 1 .4 1.4 0L20 9l1 1-7.6 7.6a2 2 0 0 1-2.8 0l-.1-.1Z" fill-rule="nonzero"/></svg>',plus:'<svg width="24" height="24"><path d="M12 4c.5 0 1 .4 1 .9V11h6a1 1 0 0 1 .1 2H13v6a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H11V5c0-.6.4-1 1-1Z"/></svg>',preferences:'<svg width="24" height="24"><path d="m20.1 13.5-1.9.2a5.8 5.8 0 0 1-.6 1.5l1.2 1.5c.4.4.3 1 0 1.4l-.7.7a1 1 0 0 1-1.4 0l-1.5-1.2a6.2 6.2 0 0 1-1.5.6l-.2 1.9c0 .5-.5.9-1 .9h-1a1 1 0 0 1-1-.9l-.2-1.9a5.8 5.8 0 0 1-1.5-.6l-1.5 1.2a1 1 0 0 1-1.4 0l-.7-.7a1 1 0 0 1 0-1.4l1.2-1.5a6.2 6.2 0 0 1-.6-1.5l-1.9-.2a1 1 0 0 1-.9-1v-1c0-.5.4-1 .9-1l1.9-.2a5.8 5.8 0 0 1 .6-1.5L5.2 7.3a1 1 0 0 1 0-1.4l.7-.7a1 1 0 0 1 1.4 0l1.5 1.2a6.2 6.2 0 0 1 1.5-.6l.2-1.9c0-.5.5-.9 1-.9h1c.5 0 1 .4 1 .9l.2 1.9a5.8 5.8 0 0 1 1.5.6l1.5-1.2a1 1 0 0 1 1.4 0l.7.7c.3.4.4 1 0 1.4l-1.2 1.5a6.2 6.2 0 0 1 .6 1.5l1.9.2c.5 0 .9.5.9 1v1c0 .5-.4 1-.9 1ZM12 15a3 3 0 1 0 0-6 3 3 0 0 0 0 6Z" fill-rule="evenodd"/></svg>',preview:'<svg width="24" height="24"><path d="M3.5 12.5c.5.8 1.1 1.6 1.8 2.3 2 2 4.2 3.2 6.7 3.2s4.7-1.2 6.7-3.2a16.2 16.2 0 0 0 2.1-2.8 15.7 15.7 0 0 0-2.1-2.8c-2-2-4.2-3.2-6.7-3.2a9.3 9.3 0 0 0-6.7 3.2A16.2 16.2 0 0 0 3.2 12c0 .2.2.3.3.5Zm-2.4-1 .7-1.2L4 7.8C6.2 5.4 8.9 4 12 4c3 0 5.8 1.4 8.1 3.8a18.2 18.2 0 0 1 2.8 3.7v1l-.7 1.2-2.1 2.5c-2.3 2.4-5 3.8-8.1 3.8-3 0-5.8-1.4-8.1-3.8a18.2 18.2 0 0 1-2.8-3.7 1 1 0 0 1 0-1Zm12-3.3a2 2 0 1 0 2.7 2.6 4 4 0 1 1-2.6-2.6Z" fill-rule="nonzero"/></svg>',print:'<svg width="24" height="24"><path d="M18 8H6a3 3 0 0 0-3 3v6h2v3h14v-3h2v-6a3 3 0 0 0-3-3Zm-1 10H7v-4h10v4Zm.5-5c-.8 0-1.5-.7-1.5-1.5s.7-1.5 1.5-1.5 1.5.7 1.5 1.5-.7 1.5-1.5 1.5Zm.5-8H6v2h12V5Z" fill-rule="nonzero"/></svg>',quote:'<svg width="24" height="24"><path d="M7.5 17h.9c.4 0 .7-.2.9-.6L11 13V8c0-.6-.4-1-1-1H6a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Zm8 0h.9c.4 0 .7-.2.9-.6L19 13V8c0-.6-.4-1-1-1h-4a1 1 0 0 0-1 1v4c0 .6.4 1 1 1h2l-1.3 2.7a1 1 0 0 0 .8 1.3Z" fill-rule="nonzero"/></svg>',redo:'<svg width="24" height="24"><path d="M17.6 10H12c-2.8 0-4.4 1.4-4.9 3.5-.4 2 .3 4 1.4 4.6a1 1 0 1 1-1 1.8c-2-1.2-2.9-4.1-2.3-6.8.6-3 3-5.1 6.8-5.1h5.6l-3.3-3.3a1 1 0 1 1 1.4-1.4l5 5a1 1 0 0 1 0 1.4l-5 5a1 1 0 0 1-1.4-1.4l3.3-3.3Z" fill-rule="nonzero"/></svg>',reload:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="m5 22.1-1.2-4.7v-.2a1 1 0 0 1 1-1l5 .4a1 1 0 1 1-.2 2l-2.2-.2a7.8 7.8 0 0 0 8.4.2 7.5 7.5 0 0 0 3.5-6.4 1 1 0 1 1 2 0 9.5 9.5 0 0 1-4.5 8 9.9 9.9 0 0 1-10.2 0l.4 1.4a1 1 0 1 1-2 .5ZM13.6 7.4c0-.5.5-1 1-.9l2.8.2a8 8 0 0 0-9.5-1 7.5 7.5 0 0 0-3.6 7 1 1 0 0 1-2 0 9.5 9.5 0 0 1 4.5-8.6 10 10 0 0 1 10.9.3l-.3-1a1 1 0 0 1 2-.5l1.1 4.8a1 1 0 0 1-1 1.2l-5-.4a1 1 0 0 1-.9-1Z"/></g></svg>',"remove-formatting":'<svg width="24" height="24"><path d="M13.2 6a1 1 0 0 1 0 .2l-2.6 10a1 1 0 0 1-1 .8h-.2a.8.8 0 0 1-.8-1l2.6-10H8a1 1 0 1 1 0-2h9a1 1 0 0 1 0 2h-3.8ZM5 18h7a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Zm13 1.5L16.5 18 15 19.5a.7.7 0 0 1-1-1l1.5-1.5-1.5-1.5a.7.7 0 0 1 1-1l1.5 1.5 1.5-1.5a.7.7 0 0 1 1 1L17.5 17l1.5 1.5a.7.7 0 0 1-1 1Z" fill-rule="evenodd"/></svg>',remove:'<svg width="24" height="24"><path d="M16 7h3a1 1 0 0 1 0 2h-1v9a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V9H5a1 1 0 1 1 0-2h3V6a3 3 0 0 1 3-3h2a3 3 0 0 1 3 3v1Zm-2 0V6c0-.6-.4-1-1-1h-2a1 1 0 0 0-1 1v1h4Zm2 2H8v9c0 .6.4 1 1 1h6c.6 0 1-.4 1-1V9Zm-7 3a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Zm4 0a1 1 0 0 1 2 0v4a1 1 0 0 1-2 0v-4Z" fill-rule="nonzero"/></svg>',"resize-handle":'<svg width="10" height="10"><g fill-rule="nonzero"><path d="M8.1 1.1A.5.5 0 1 1 9 2l-7 7A.5.5 0 1 1 1 8l7-7ZM8.1 5.1A.5.5 0 1 1 9 6l-3 3A.5.5 0 1 1 5 8l3-3Z"/></g></svg>',resize:'<svg width="24" height="24"><path d="M4 5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h6c.3 0 .5.1.7.3.2.2.3.4.3.7 0 .3-.1.5-.3.7a1 1 0 0 1-.7.3H7.4L18 16.6V13c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3.3 0 .5.1.7.3.2.2.3.4.3.7v6c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-6a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3.6L6 7.4V11c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3 1 1 0 0 1-.7-.3A1 1 0 0 1 4 11V5Z" fill-rule="evenodd"/></svg>',"restore-draft":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M17 13c0 .6-.4 1-1 1h-4V8c0-.6.4-1 1-1s1 .4 1 1v4h2c.6 0 1 .4 1 1Z"/><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></g></svg>',"rotate-left":'<svg width="24" height="24"><path d="M4.7 10H9a1 1 0 0 1 0 2H3a1 1 0 0 1-1-1V5a1 1 0 1 1 2 0v3l2.5-2.4a9.2 9.2 0 0 1 10.8-1.5A9 9 0 0 1 13.4 21c-2.4.1-4.7-.7-6.5-2.2a1 1 0 1 1 1.3-1.5 7.2 7.2 0 0 0 11.6-3.7 7 7 0 0 0-3.5-7.7A7.2 7.2 0 0 0 8 7L4.7 10Z" fill-rule="nonzero"/></svg>',"rotate-right":'<svg width="24" height="24"><path d="M20 8V5a1 1 0 0 1 2 0v6c0 .6-.4 1-1 1h-6a1 1 0 0 1 0-2h4.3L16 7A7.2 7.2 0 0 0 7.7 6a7 7 0 0 0 3 13.1c1.9.1 3.7-.5 5-1.7a1 1 0 0 1 1.4 1.5A9.2 9.2 0 0 1 2.2 14c-.9-3.9 1-8 4.5-9.9 3.5-1.9 8-1.3 10.8 1.5L20 8Z" fill-rule="nonzero"/></svg>',rtl:'<svg width="24" height="24"><path d="M8 5h8v2h-2v12h-2V7h-2v12H8v-7c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 4.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L8 5Zm12 11.2a1 1 0 1 1-1 1.6l-3-2a1 1 0 0 1 0-1.6l3-2a1 1 0 1 1 1 1.6L18.4 15l1.8 1.2Z" fill-rule="evenodd"/></svg>',save:'<svg width="24" height="24"><path d="M5 16h14a2 2 0 0 1 2 2v2a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-2c0-1.1.9-2 2-2Zm0 2v2h14v-2H5Zm10 0h2v2h-2v-2Zm-4-6.4L8.7 9.3a1 1 0 1 0-1.4 1.4l4 4c.4.4 1 .4 1.4 0l4-4a1 1 0 1 0-1.4-1.4L13 11.6V4a1 1 0 0 0-2 0v7.6Z" fill-rule="nonzero"/></svg>',search:'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Z" fill-rule="nonzero"/></svg>',"select-all":'<svg width="24" height="24"><path d="M3 5h2V3a2 2 0 0 0-2 2Zm0 8h2v-2H3v2Zm4 8h2v-2H7v2ZM3 9h2V7H3v2Zm10-6h-2v2h2V3Zm6 0v2h2a2 2 0 0 0-2-2ZM5 21v-2H3c0 1.1.9 2 2 2Zm-2-4h2v-2H3v2ZM9 3H7v2h2V3Zm2 18h2v-2h-2v2Zm8-8h2v-2h-2v2Zm0 8a2 2 0 0 0 2-2h-2v2Zm0-12h2V7h-2v2Zm0 8h2v-2h-2v2Zm-4 4h2v-2h-2v2Zm0-16h2V3h-2v2ZM7 17h10V7H7v10Zm2-8h6v6H9V9Z" fill-rule="nonzero"/></svg>',selected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm3.6 10.9L7 12.3a.7.7 0 0 0-1 1L9.6 17 18 8.6a.7.7 0 0 0 0-1 .7.7 0 0 0-1 0l-7.4 7.3Z"/></svg>',send:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="m13.3 22 7-18.3-18.3 7L9 15l4.3 7ZM18 6.8l-.7-.7L9.4 14l.7.7L18 6.8Z"/></svg>',settings:'<svg width="24" height="24"><path d="M11 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V8H5a1 1 0 1 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.5V6ZM8 8h2V6H8v2Zm9 2.8v.2h2c.6 0 1 .4 1 1s-.4 1-1 1h-2v.3c0 .2 0 .3-.2.5l-.6.2h-2.4c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V13H5a1 1 0 0 1 0-2h8v-.3c0-.2 0-.3.2-.5l.6-.2h2.4c.3 0 .4 0 .6.2l.2.6ZM14 13h2v-2h-2v2Zm-3 2.8v.2h8c.6 0 1 .4 1 1s-.4 1-1 1h-8v.3c0 .2 0 .3-.2.5l-.6.2H7.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6V18H5a1 1 0 0 1 0-2h2v-.3c0-.2 0-.3.2-.5l.5-.2h2.5c.3 0 .4 0 .6.2l.2.6ZM8 18h2v-2H8v2Z" fill-rule="evenodd"/></svg>',sharpen:'<svg width="24" height="24"><path d="m16 6 4 4-8 9-8-9 4-4h8Zm-4 10.2 5.5-6.2-.1-.1H12v-.3h5.1l-.2-.2H12V9h4.6l-.2-.2H12v-.3h4.1l-.2-.2H12V8h3.6l-.2-.2H8.7L6.5 10l.1.1H12v.3H6.9l.2.2H12v.3H7.3l.2.2H12v.3H7.7l.3.2h4v.3H8.2l.2.2H12v.3H8.6l.3.2H12v.3H9l.3.2H12v.3H9.5l.2.2H12v.3h-2l.2.2H12v.3h-1.6l.2.2H12v.3h-1.1l.2.2h.9v.3h-.7l.2.2h.5v.3h-.3l.3.2Z" fill-rule="evenodd"/></svg>',sourcecode:'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M9.8 15.7c.3.3.3.8 0 1-.3.4-.9.4-1.2 0l-4.4-4.1a.8.8 0 0 1 0-1.2l4.4-4.2c.3-.3.9-.3 1.2 0 .3.3.3.8 0 1.1L6 12l3.8 3.7ZM14.2 15.7c-.3.3-.3.8 0 1 .4.4.9.4 1.2 0l4.4-4.1c.3-.3.3-.9 0-1.2l-4.4-4.2a.8.8 0 0 0-1.2 0c-.3.3-.3.8 0 1.1L18 12l-3.8 3.7Z"/></g></svg>',"spell-check":'<svg width="24" height="24"><path d="M6 8v3H5V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h2c.3 0 .5.1.7.3.2.2.3.4.3.7v6H8V8H6Zm0-3v2h2V5H6Zm13 0h-3v5h3v1h-3a1 1 0 0 1-.7-.3 1 1 0 0 1-.3-.7V5c0-.3.1-.5.3-.7.2-.2.4-.3.7-.3h3v1Zm-5 1.5-.1.7c-.1.2-.3.3-.6.3.3 0 .5.1.6.3l.1.7V10c0 .3-.1.5-.3.7a1 1 0 0 1-.7.3h-3V4h3c.3 0 .5.1.7.3.2.2.3.4.3.7v1.5ZM13 10V8h-2v2h2Zm0-3V5h-2v2h2Zm3 5 1 1-6.5 7L7 15.5l1.3-1 2.2 2.2L16 12Z" fill-rule="evenodd"/></svg>',"strike-through":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M15.6 8.5c-.5-.7-1-1.1-1.3-1.3-.6-.4-1.3-.6-2-.6-2.7 0-2.8 1.7-2.8 2.1 0 1.6 1.8 2 3.2 2.3 4.4.9 4.6 2.8 4.6 3.9 0 1.4-.7 4.1-5 4.1A6.2 6.2 0 0 1 7 16.4l1.5-1.1c.4.6 1.6 2 3.7 2 1.6 0 2.5-.4 3-1.2.4-.8.3-2-.8-2.6-.7-.4-1.6-.7-2.9-1-1-.2-3.9-.8-3.9-3.6C7.6 6 10.3 5 12.4 5c2.9 0 4.2 1.6 4.7 2.4l-1.5 1.1Z"/><path d="M5 11h14a1 1 0 0 1 0 2H5a1 1 0 0 1 0-2Z" fill-rule="nonzero"/></g></svg>',subscript:'<svg width="24" height="24"><path d="m10.4 10 4.6 4.6-1.4 1.4L9 11.4 4.4 16 3 14.6 7.6 10 3 5.4 4.4 4 9 8.6 13.6 4 15 5.4 10.4 10ZM21 19h-5v-1l1-.8 1.7-1.6c.3-.4.5-.8.5-1.2 0-.3 0-.6-.2-.7-.2-.2-.5-.3-.9-.3a2 2 0 0 0-.8.2l-.7.3-.4-1.1 1-.6 1.2-.2c.8 0 1.4.3 1.8.7.4.4.6.9.6 1.5s-.2 1.1-.5 1.6a8 8 0 0 1-1.3 1.3l-.6.6h2.6V19Z" fill-rule="nonzero"/></svg>',superscript:'<svg width="24" height="24"><path d="M15 9.4 10.4 14l4.6 4.6-1.4 1.4L9 15.4 4.4 20 3 18.6 7.6 14 3 9.4 4.4 8 9 12.6 13.6 8 15 9.4Zm5.9 1.6h-5v-1l1-.8 1.7-1.6c.3-.5.5-.9.5-1.3 0-.3 0-.5-.2-.7-.2-.2-.5-.3-.9-.3l-.8.2-.7.4-.4-1.2c.2-.2.5-.4 1-.5.3-.2.8-.2 1.2-.2.8 0 1.4.2 1.8.6.4.4.6 1 .6 1.6 0 .5-.2 1-.5 1.5l-1.3 1.4-.6.5h2.6V11Z" fill-rule="nonzero"/></svg>',"table-caption":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="12" height="2" x="3" y="4" rx="1"/><path d="M19 8a2 2 0 0 1 2 2v8a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-8c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></g></svg>',"table-cell-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M13 4v9H3V6c0-1.1.9-2 2-2h8Zm-2 2H5v5h6V6Z"/><path fill-rule="nonzero" d="M13 4h6a2 2 0 0 1 2 2v7h-8v-2h6V6h-6V4Z" opacity=".2"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/><path fill-rule="nonzero" d="M3 13v5c0 1.1.9 2 2 2h8v-7h-2v5H5v-5H3Z" opacity=".2"/></g></svg>',"table-cell-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8 0h-6v5h6v-5Zm-8-7H5v5h6V6Z"/></svg>',"table-cell-select-all":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z" opacity=".2"/></g></svg>',"table-cell-select-inner":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v12h14V6Z" opacity=".2"/><path d="M13 6v5h6v2h-6v5h-2v-5H5v-2h6V6h2Z"/></g></svg>',"table-classes":'<svg width="24" height="24"><g fill-rule="evenodd"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v7h-8v7H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 9H5v5h6v-5Zm8-7h-6v5h6V6Zm-8 0H5v5h6V6Z"/><path d="m18 20-2.6 1.6.7-3-2.4-2 3.1-.2 1.2-2.9 1.2 2.9 3.1.2-2.4 2 .7 3z"/></g></svg>',"table-delete-column":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-4 4h-2V6h-2v2H9V6H5v12h4v-2h2v2h2v-2h2v2h4V6h-4v2Zm.3.5 1 1.2-3 2.3 3 2.3-1 1.2L12 13l-3.3 2.6-1-1.2 3-2.3-3-2.3 1-1.2L12 11l3.3-2.5Z"/></svg>',"table-delete-row":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 2H5v3h2.5v2H5v2h2.5v2H5v3h14v-3h-2.5v-2H19v-2h-2.5V9H19V6Zm-4.7 1.8 1.2 1L13 12l2.6 3.3-1.2 1-2.3-3-2.3 3-1.2-1L11 12 8.5 8.7l1.2-1 2.3 3 2.3-3Z"/></svg>',"table-delete-table":'<svg width="24" height="24"><g fill-rule="nonzero"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 6v12h14V6H5Z"/><path d="m14.4 8.6 1.1 1-2.4 2.4 2.4 2.4-1.1 1.1-2.4-2.4-2.4 2.4-1-1.1 2.3-2.4-2.3-2.4 1-1 2.4 2.3z"/></g></svg>',"table-insert-column-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M20 4c.6 0 1 .4 1 1v2a1 1 0 0 1-2 0V6h-8v12h8v-1a1 1 0 0 1 2 0v2c0 .5-.4 1-.9 1H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h15ZM9 13H5v5h4v-5Zm7-5c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H17v2a1 1 0 0 1-2 .1V13h-2a1 1 0 0 1-.1-2H15V9c0-.6.4-1 1-1ZM9 6H5v5h4V6Z"/></svg>',"table-insert-column-before":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H4a1 1 0 0 1-1-1v-2a1 1 0 0 1 2 0v1h8V6H5v1a1 1 0 1 1-2 0V5c0-.6.4-1 1-1h15Zm0 9h-4v5h4v-5ZM8 8c.5 0 1 .4 1 .9V11h2a1 1 0 0 1 .1 2H9v2a1 1 0 0 1-2 .1V13H5a1 1 0 0 1-.1-2H7V9c0-.6.4-1 1-1Zm11-2h-4v5h4V6Z"/></svg>',"table-insert-row-above":'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4a1 1 0 1 1 0 2H5v6h14V6h-1a1 1 0 0 1 0-2h2c.6 0 1 .4 1 1v13a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5c0-.6.4-1 1-1h2Zm5 10H5v4h6v-4Zm8 0h-6v4h6v-4ZM12 3c.5 0 1 .4 1 .9V6h2a1 1 0 0 1 0 2h-2v2a1 1 0 0 1-2 .1V8H9a1 1 0 0 1 0-2h2V4c0-.6.4-1 1-1Z"/></svg>',"table-insert-row-after":'<svg width="24" height="24"><path fill-rule="nonzero" d="M12 13c.5 0 1 .4 1 .9V16h2a1 1 0 0 1 .1 2H13v2a1 1 0 0 1-2 .1V18H9a1 1 0 0 1-.1-2H11v-2c0-.6.4-1 1-1Zm6 7a1 1 0 0 1 0-2h1v-6H5v6h1a1 1 0 0 1 0 2H4a1 1 0 0 1-1-1V6c0-1.1.9-2 2-2h14a2 2 0 0 1 2 2v13c0 .5-.4 1-.9 1H18ZM11 6H5v4h6V6Zm8 0h-6v4h6V6Z"/></svg>',"table-left-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm0 9h-4v5h4v-5Zm-6 0H9v5h4v-5Zm0-7H9v5h4V6Zm6 0h-4v5h4V6Z"/></svg>',"table-merge-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15.5V18h3v-2.5H5Zm14-5h-9V18h9v-7.5ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Zm-8 7.5h3v-3H5v3Z"/></svg>',"table-row-numbering-rtl":'<svg width="24" height="24"><path d="M6 4a2 2 0 0 0-2 2v13c0 1.1.9 2 2 2h12a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2H6Zm0 12h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 11h8v3H6v-3Zm11 0c.6 0 1 .4 1 1v1a1 1 0 0 1-2 0v-1c0-.6.4-1 1-1ZM6 6h8v3H6V6Zm11 0c.6 0 1 .4 1 1v1a1 1 0 1 1-2 0V7c0-.6.4-1 1-1Z"/></svg>',"table-row-numbering":'<svg width="24" height="24"><path d="M18 4a2 2 0 0 1 2 2v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h12Zm0 12h-8v3h8v-3ZM7 16a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8v-3ZM7 11a1 1 0 0 0-1 1v1a1 1 0 0 0 2 0v-1c0-.6-.4-1-1-1Zm11-5h-8v3h8V6ZM7 6a1 1 0 0 0-1 1v1a1 1 0 1 0 2 0V7c0-.6-.4-1-1-1Z"/></svg>',"table-row-properties":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 15v3h6v-3H5Zm14 0h-6v3h6v-3Zm0-9h-6v3h6V6ZM5 9h6V6H5v3Z"/></svg>',"table-split-cells":'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM8 15.5H5V18h3v-2.5Zm11-5h-9V18h9v-7.5Zm-2.5 1 1 1-2 2 2 2-1 1-2-2-2 2-1-1 2-2-2-2 1-1 2 2 2-2Zm-8.5-1H5v3h3v-3ZM19 6h-4v2.5h4V6ZM8 6H5v2.5h3V6Zm5 0h-3v2.5h3V6Z"/></svg>',"table-top-header":'<svg width="24" height="24"><path d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14Zm-8 11H5v3h6v-3Zm8 0h-6v3h6v-3Zm0-5h-6v3h6v-3ZM5 13h6v-3H5v3Z"/></svg>',table:'<svg width="24" height="24"><path fill-rule="nonzero" d="M19 4a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2h14ZM5 14v4h6v-4H5Zm14 0h-6v4h6v-4Zm0-6h-6v4h6V8ZM5 12h6V8H5v4Z"/></svg>',"template-add":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M9 12v4H5a2 2 0 0 0-2 2v3h9.3a6 6 0 0 1-.3-2H5v-1h7a6 6 0 0 1 .8-2H11v-5l-.8-.6a3 3 0 1 1 3.6 0l-.8.6v4.7a6 6 0 0 1 2-1.9V12a5 5 0 1 0-6 0Z"/><path d="M18 15c.5 0 1 .4 1 .9V18h2a1 1 0 0 1 .1 2H19v2a1 1 0 0 1-2 .1V20h-2a1 1 0 0 1-.1-2H17v-2c0-.6.4-1 1-1Z"/></svg>',template:'<svg width="24" height="24"><path d="M19 19v-1H5v1h14ZM9 16v-4a5 5 0 1 1 6 0v4h4a2 2 0 0 1 2 2v3H3v-3c0-1.1.9-2 2-2h4Zm4 0v-5l.8-.6a3 3 0 1 0-3.6 0l.8.6v5h2Z" fill-rule="nonzero"/></svg>',"temporary-placeholder":'<svg width="24" height="24"><g fill-rule="evenodd"><path d="M9 7.6V6h2.5V4.5a.5.5 0 1 1 1 0V6H15v1.6a8 8 0 1 1-6 0Zm-2.6 5.3a.5.5 0 0 0 .3.6c.3 0 .6 0 .6-.3l.1-.2a5 5 0 0 1 3.3-2.8c.3-.1.4-.4.4-.6-.1-.3-.4-.5-.6-.4a6 6 0 0 0-4.1 3.7Z"/><circle cx="14" cy="4" r="1"/><circle cx="12" cy="2" r="1"/><circle cx="10" cy="4" r="1"/></g></svg>',"text-color":'<svg width="24" height="24"><g fill-rule="evenodd"><path class="tox-icon-text-color__color" d="M3 18h18v3H3z"/><path d="M8.7 16h-.8a.5.5 0 0 1-.5-.6l2.7-9c.1-.3.3-.4.5-.4h2.8c.2 0 .4.1.5.4l2.7 9a.5.5 0 0 1-.5.6h-.8a.5.5 0 0 1-.4-.4l-.7-2.2c0-.3-.3-.4-.5-.4h-3.4c-.2 0-.4.1-.5.4l-.7 2.2c0 .3-.2.4-.4.4Zm2.6-7.6-.6 2a.5.5 0 0 0 .5.6h1.6a.5.5 0 0 0 .5-.6l-.6-2c0-.3-.3-.4-.5-.4h-.4c-.2 0-.4.1-.5.4Z"/></g></svg>',"text-size-decrease":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM14 12a1 1 0 1 0 0 2h6a1 1 0 1 0 0-2h-6Z"/></svg>',"text-size-increase":'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M14 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H4a1 1 0 0 1 0-2h10ZM17 9a1 1 0 0 0-1 1v2h-2a1 1 0 1 0 0 2h2v2a1 1 0 1 0 2 0v-2h2a1 1 0 1 0 0-2h-2v-2c0-.6-.4-1-1-1Z"/></svg>',toc:'<svg width="24" height="24"><path d="M5 5c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 1 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h11c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Zm0-4c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 1 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm-3 8c.6 0 1 .4 1 1s-.4 1-1 1a1 1 0 0 1 0-2Zm3 0h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',translate:'<svg width="24" height="24"><path d="m12.7 14.3-.3.7-.4.7-2.2-2.2-3.1 3c-.3.4-.8.4-1 0a.7.7 0 0 1 0-1l3.1-3A12.4 12.4 0 0 1 6.7 9H8a10.1 10.1 0 0 0 1.7 2.4c.5-.5 1-1.1 1.4-1.8l.9-2H4.7a.7.7 0 1 1 0-1.5h4.4v-.7c0-.4.3-.8.7-.8.4 0 .7.4.7.8v.7H15c.4 0 .8.3.8.7 0 .4-.4.8-.8.8h-1.4a12.3 12.3 0 0 1-1 2.4 13.5 13.5 0 0 1-1.7 2.3l1.9 1.8Zm4.3-3 2.7 7.3a.5.5 0 0 1-.4.7 1 1 0 0 1-1-.7l-.6-1.5h-3.4l-.6 1.5a1 1 0 0 1-1 .7.5.5 0 0 1-.4-.7l2.7-7.4a1 1 0 0 1 2 0Zm-2.2 4.4h2.4L16 12.5l-1.2 3.2Z" fill-rule="evenodd"/></svg>',typography:'<svg width="24" height="24"><path fill-rule="evenodd" clip-rule="evenodd" d="M17 5a1 1 0 1 1 0 2h-4v11a1 1 0 1 1-2 0V7H7a1 1 0 0 1 0-2h10Z"/><path d="m17.5 14 .8-1.7 1.7-.8-1.7-.8-.8-1.7-.8 1.7-1.7.8 1.7.8.8 1.7ZM7 14l1 2 2 1-2 1-1 2-1-2-2-1 2-1 1-2Z"/></svg>',underline:'<svg width="24" height="24"><path d="M16 5c.6 0 1 .4 1 1v5.5a4 4 0 0 1-.4 1.8l-1 1.4a5.3 5.3 0 0 1-5.5 1 5 5 0 0 1-1.6-1c-.5-.4-.8-.9-1.1-1.4a4 4 0 0 1-.4-1.8V6c0-.6.4-1 1-1s1 .4 1 1v5.5c0 .3 0 .6.2 1l.6.7a3.3 3.3 0 0 0 2.2.8 3.4 3.4 0 0 0 2.2-.8c.3-.2.4-.5.6-.8l.2-.9V6c0-.6.4-1 1-1ZM8 17h8c.6 0 1 .4 1 1s-.4 1-1 1H8a1 1 0 0 1 0-2Z" fill-rule="evenodd"/></svg>',undo:'<svg width="24" height="24"><path d="M6.4 8H12c3.7 0 6.2 2 6.8 5.1.6 2.7-.4 5.6-2.3 6.8a1 1 0 0 1-1-1.8c1.1-.6 1.8-2.7 1.4-4.6-.5-2.1-2.1-3.5-4.9-3.5H6.4l3.3 3.3a1 1 0 1 1-1.4 1.4l-5-5a1 1 0 0 1 0-1.4l5-5a1 1 0 0 1 1.4 1.4L6.4 8Z" fill-rule="nonzero"/></svg>',unlink:'<svg width="24" height="24"><path d="M6.2 12.3a1 1 0 0 1 1.4 1.4l-2 2a2 2 0 1 0 2.6 2.8l4.8-4.8a1 1 0 0 0 0-1.4 1 1 0 1 1 1.4-1.3 2.9 2.9 0 0 1 0 4L9.6 20a3.9 3.9 0 0 1-5.5-5.5l2-2Zm11.6-.6a1 1 0 0 1-1.4-1.4l2.1-2a2 2 0 1 0-2.7-2.8L11 10.3a1 1 0 0 0 0 1.4A1 1 0 1 1 9.6 13a2.9 2.9 0 0 1 0-4L14.4 4a3.9 3.9 0 0 1 5.5 5.5l-2 2ZM7.6 6.3a.8.8 0 0 1-1 1.1L3.3 4.2a.7.7 0 1 1 1-1l3.2 3.1ZM5.1 8.6a.8.8 0 0 1 0 1.5H3a.8.8 0 0 1 0-1.5H5Zm5-3.5a.8.8 0 0 1-1.5 0V3a.8.8 0 0 1 1.5 0V5Zm6 11.8a.8.8 0 0 1 1-1l3.2 3.2a.8.8 0 0 1-1 1L16 17Zm-2.2 2a.8.8 0 0 1 1.5 0V21a.8.8 0 0 1-1.5 0V19Zm5-3.5a.7.7 0 1 1 0-1.5H21a.8.8 0 0 1 0 1.5H19Z" fill-rule="nonzero"/></svg>',unlock:'<svg width="24" height="24"><path d="M16 5c.8 0 1.5.3 2.1.9.6.6.9 1.3.9 2.1v3h-2V8a1 1 0 0 0-.3-.7A1 1 0 0 0 16 7h-2a1 1 0 0 0-.7.3 1 1 0 0 0-.3.7v3h.3c.2 0 .3 0 .5.2l.2.6v7.4c0 .3 0 .4-.2.6l-.6.2H4.8c-.3 0-.4 0-.6-.2a.7.7 0 0 1-.2-.6v-7.4c0-.3 0-.4.2-.6l.5-.2H11V8c0-.8.3-1.5.9-2.1.6-.6 1.3-.9 2.1-.9h2Z" fill-rule="evenodd"/></svg>',"unordered-list":'<svg width="24" height="24"><path d="M11 5h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2Zm0 6h8c.6 0 1 .4 1 1s-.4 1-1 1h-8a1 1 0 0 1 0-2ZM4.5 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Zm0 6c0-.4.1-.8.4-1 .3-.4.7-.5 1.1-.5.4 0 .8.1 1 .4.4.3.5.7.5 1.1 0 .4-.1.8-.4 1-.3.4-.7.5-1.1.5-.4 0-.8-.1-1-.4-.4-.3-.5-.7-.5-1.1Z" fill-rule="evenodd"/></svg>',unselected:'<svg width="24" height="24"><path fill-rule="nonzero" d="M6 4h12a2 2 0 0 1 2 2v12a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6c0-1.1.9-2 2-2Zm0 1a1 1 0 0 0-1 1v12c0 .6.4 1 1 1h12c.6 0 1-.4 1-1V6c0-.6-.4-1-1-1H6Z"/></svg>',upload:'<svg width="24" height="24"><path d="M18 19v-2a1 1 0 0 1 2 0v3c0 .6-.4 1-1 1H5a1 1 0 0 1-1-1v-3a1 1 0 0 1 2 0v2h12ZM11 6.4 8.7 8.7a1 1 0 0 1-1.4-1.4l4-4a1 1 0 0 1 1.4 0l4 4a1 1 0 1 1-1.4 1.4L13 6.4V16a1 1 0 0 1-2 0V6.4Z" fill-rule="nonzero"/></svg>',user:'<svg width="24" height="24"><path d="M12 24a12 12 0 1 1 0-24 12 12 0 0 1 0 24Zm-8.7-5.3a11 11 0 0 0 17.4 0C19.4 16.3 14.6 15 12 15c-2.6 0-7.4 1.3-8.7 3.7ZM12 13c2.2 0 4-2 4-4.5S14.2 4 12 4 8 6 8 8.5 9.8 13 12 13Z" fill-rule="nonzero"/></svg>',"vertical-align":'<svg width="24" height="24"><g fill-rule="nonzero"><rect width="18" height="2" x="3" y="11" rx="1"/><path d="M12 2c.6 0 1 .4 1 1v4l2-1.3a1 1 0 0 1 1.2 1.5l-.1.1-4.1 3-4-3a1 1 0 0 1 1-1.7l2 1.5V3c0-.6.4-1 1-1zm0 11.8 4 2.9a1 1 0 0 1-1 1.7l-2-1.5V21c0 .5-.4 1-.9 1H12a1 1 0 0 1-1-1v-4l-2 1.3a1 1 0 0 1-1.2-.1l-.1-.1a1 1 0 0 1 .1-1.3l.1-.1 4.1-3z"/></g></svg>',visualblocks:'<svg width="24" height="24"><path d="M9 19v2H7v-2h2Zm-4 0v2a2 2 0 0 1-2-2h2Zm8 0v2h-2v-2h2Zm8 0a2 2 0 0 1-2 2v-2h2Zm-4 0v2h-2v-2h2ZM15 7a1 1 0 0 1 0 2v7a1 1 0 0 1-2 0V9h-1v7a1 1 0 0 1-2 0v-4a2.5 2.5 0 0 1-.2-5H15ZM5 15v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 11v2H3v-2h2Zm16 0v2h-2v-2h2ZM5 7v2H3V7h2Zm16 0v2h-2V7h2ZM5 3v2H3c0-1.1.9-2 2-2Zm8 0v2h-2V3h2Zm6 0a2 2 0 0 1 2 2h-2V3ZM9 3v2H7V3h2Zm8 0v2h-2V3h2Z" fill-rule="evenodd"/></svg>',visualchars:'<svg width="24" height="24"><path d="M10 5h7a1 1 0 0 1 0 2h-1v11a1 1 0 0 1-2 0V7h-2v11a1 1 0 0 1-2 0v-6c-.5 0-1 0-1.4-.3A3.4 3.4 0 0 1 6.8 10a3.3 3.3 0 0 1 0-2.8 3.4 3.4 0 0 1 1.8-1.8L10 5Z" fill-rule="evenodd"/></svg>',warning:'<svg width="24" height="24"><path d="M19.8 18.3c.2.5.3.9 0 1.2-.1.3-.5.5-1 .5H5.2c-.5 0-.9-.2-1-.5-.3-.3-.2-.7 0-1.2L11 4.7l.5-.5.5-.2c.2 0 .3 0 .5.2.2 0 .3.3.5.5l6.8 13.6ZM12 18c.3 0 .5-.1.7-.3.2-.2.3-.4.3-.7a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7c0 .3.1.5.3.7.2.2.4.3.7.3Zm.7-3 .3-4a1 1 0 0 0-.3-.7 1 1 0 0 0-.7-.3 1 1 0 0 0-.7.3 1 1 0 0 0-.3.7l.3 4h1.4Z" fill-rule="evenodd"/></svg>',"zoom-in":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-1-9a1 1 0 0 1 2 0v6a1 1 0 0 1-2 0V8Zm-2 4a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>',"zoom-out":'<svg width="24" height="24"><path d="M16 17.3a8 8 0 1 1 1.4-1.4l4.3 4.4a1 1 0 0 1-1.4 1.4l-4.4-4.3Zm-5-.3a6 6 0 1 0 0-12 6 6 0 0 0 0 12Zm-3-5a1 1 0 0 1 0-2h6a1 1 0 0 1 0 2H8Z" fill-rule="nonzero"/></svg>'}})},2935:function(e,t,n){var o=n(62).default,i=n(23).default,a=n(14).default,u=n(677).default,c=n(18).default,s=n(95).default,l=n(5).default,d=n(22).default,m=n(334).default,g=n(12).default,p=n(13).default,h=["class","style"],v=["events"],b=["attributes"],y=["primary"],C=["primary"];!function(e,t){"use strict";var n=Object.getPrototypeOf,w=function hasProto(e,t,n){var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},x=function isType$1(e){return function(t){return function typeOf(e){var t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&w(e,String,(function(e,t){return t.isPrototypeOf(e)}))?"string":t}(t)===e}},S=function isSimpleType(e){return function(t){return typeof t===e}},k=function eq$1(e){return function(t){return e===t}},T=x("string"),E=x("object"),O=function isPlainObject(e){return function is$2(e,t){return E(e)&&w(e,t,(function(e,t){return n(e)===t}))}(e,Object)},A=x("array"),D=k(null),R=S("boolean"),N=k(void 0),M=function isNullable(e){return null===e||void 0===e},B=function isNonNullable(e){return!M(e)},I=S("function"),P=S("number"),L=function isArrayOf(e,t){if(A(e)){for(var n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},F=function noop(){},H=function noarg(e){return function(){return e()}},$=function compose(e,t){return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e(t.apply(null,o))}},z=function constant$1(e){return function(){return e}},V=function identity(e){return e},U=function tripleEquals(e,t){return e===t};function curry(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];var a=n.concat(o);return e.apply(null,a)}}var Z=function not(e){return function(t){return!e(t)}},W=function die(e){return function(){throw new Error(e)}},j=function apply$1(e){return e()},G=z(!1),q=z(!0),K=function(){function Optional(e,t){g(this,Optional),this.tag=e,this.value=t}return p(Optional,[{key:"fold",value:function fold(e,t){return this.tag?t(this.value):e()}},{key:"isSome",value:function isSome(){return this.tag}},{key:"isNone",value:function isNone(){return!this.tag}},{key:"map",value:function map(e){return this.tag?Optional.some(e(this.value)):Optional.none()}},{key:"bind",value:function bind(e){return this.tag?e(this.value):Optional.none()}},{key:"exists",value:function exists(e){return this.tag&&e(this.value)}},{key:"forall",value:function forall(e){return!this.tag||e(this.value)}},{key:"filter",value:function filter(e){return!this.tag||e(this.value)?this:Optional.none()}},{key:"getOr",value:function getOr(e){return this.tag?this.value:e}},{key:"or",value:function or(e){return this.tag?this:e}},{key:"getOrThunk",value:function getOrThunk(e){return this.tag?this.value:e()}},{key:"orThunk",value:function orThunk(e){return this.tag?this:e()}},{key:"getOrDie",value:function getOrDie(e){if(this.tag)return this.value;throw new Error(null!==e&&void 0!==e?e:"Called getOrDie on None")}},{key:"getOrNull",value:function getOrNull(){return this.tag?this.value:null}},{key:"getOrUndefined",value:function getOrUndefined(){return this.value}},{key:"each",value:function each(e){this.tag&&e(this.value)}},{key:"toArray",value:function toArray(){return this.tag?[this.value]:[]}},{key:"toString",value:function toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}],[{key:"some",value:function some(e){return new Optional(!0,e)}},{key:"none",value:function none(){return Optional.singletonNone}},{key:"from",value:function from(e){return B(e)?Optional.some(e):Optional.none()}}]),Optional}();K.singletonNone=new K(!1);var Y,X=Array.prototype.slice,J=Array.prototype.indexOf,Q=Array.prototype.push,ee=function rawIndexOf(e,t){return J.call(e,t)},te=function indexOf(e,t){var n=ee(e,t);return-1===n?K.none():K.some(n)},ne=function contains$2(e,t){return ee(e,t)>-1},re=function exists(e,t){for(var n=0,o=e.length;n<o;n++){if(t(e[n],n))return!0}return!1},oe=function range$2(e,t){for(var n=[],o=0;o<e;o++)n.push(t(o));return n},ie=function chunk$1(e,t){for(var n=[],o=0;o<e.length;o+=t){var i=X.call(e,o,o+t);n.push(i)}return n},ae=function map$2(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;i++){var a=e[i];o[i]=t(a,i)}return o},ue=function each$1(e,t){for(var n=0,o=e.length;n<o;n++){t(e[n],n)}},ce=function partition$3(e,t){for(var n=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i];(t(u,i)?n:o).push(u)}return{pass:n,fail:o}},se=function filter$2(e,t){for(var n=[],o=0,i=e.length;o<i;o++){var a=e[o];t(a,o)&&n.push(a)}return n},le=function foldr(e,t,n){return function eachr(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n)}(e,(function(e,o){n=t(n,e,o)})),n},fe=function foldl(e,t,n){return ue(e,(function(e,o){n=t(n,e,o)})),n},de=function find$5(e,t){return function findUntil(e,t,n){for(var o=0,i=e.length;o<i;o++){var a=e[o];if(t(a,o))return K.some(a);if(n(a,o))break}return K.none()}(e,t,G)},me=function findIndex$1(e,t){for(var n=0,o=e.length;n<o;n++){if(t(e[n],n))return K.some(n)}return K.none()},ge=function flatten(e){for(var t=[],n=0,o=e.length;n<o;++n){if(!A(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);Q.apply(t,e[n])}return t},pe=function bind$3(e,t){return ge(ae(e,t))},he=function forall(e,t){for(var n=0,o=e.length;n<o;++n){if(!0!==t(e[n],n))return!1}return!0},ve=function reverse(e){var t=X.call(e,0);return t.reverse(),t},be=function difference(e,t){return se(e,(function(e){return!ne(t,e)}))},ye=function mapToObject(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[String(a)]=t(a,o)}return n},Ce=function pure$2(e){return[e]},we=function sort(e,t){var n=X.call(e,0);return n.sort(t),n},xe=function get$h(e,t){return t>=0&&t<e.length?K.some(e[t]):K.none()},Se=function head(e){return xe(e,0)},ke=function last$1(e){return xe(e,e.length-1)},Te=I(Array.from)?Array.from:function(e){return X.call(e)},Ee=function findMap(e,t){for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o.isSome())return o}return K.none()},Oe=Object.keys,Ae=Object.hasOwnProperty,_e=function each(e,t){for(var n=Oe(e),o=0,i=n.length;o<i;o++){var a=n[o];t(e[a],a)}},De=function map$1(e,t){return Re(e,(function(e,n){return{k:n,v:t(e,n)}}))},Re=function tupleMap(e,t){var n={};return _e(e,(function(e,o){var i=t(e,o);n[i.k]=i.v})),n},Ne=function objAcc(e){return function(t,n){e[n]=t}},Me=function internalFilter(e,t,n,o){_e(e,(function(e,i){(t(e,i)?n:o)(e,i)}))},Be=function filter$1(e,t){var n={};return Me(e,t,Ne(n),F),n},Ie=function mapToArray(e,t){var n=[];return _e(e,(function(e,o){n.push(t(e,o))})),n},Pe=function find$4(e,t){for(var n=Oe(e),o=0,i=n.length;o<i;o++){var a=n[o],u=e[a];if(t(u,a,e))return K.some(u)}return K.none()},Le=function values(e){return Ie(e,V)},Fe=function get$g(e,t){return He(e,t)?K.from(e[t]):K.none()},He=function has$2(e,t){return Ae.call(e,t)},$e=function hasNonNullableKey(e,t){return He(e,t)&&void 0!==e[t]&&null!==e[t]},ze=function is$1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:U;return e.exists((function(e){return n(e,t)}))},Ve=function cat(e){for(var t=[],n=function push(e){t.push(e)},o=0;o<e.length;o++)e[o].each(n);return t},Ue=function lift2(e,t,n){return e.isSome()&&t.isSome()?K.some(n(e.getOrDie(),t.getOrDie())):K.none()},Ze=function mapFrom(e,t){return void 0!==e&&null!==e?K.some(t(e)):K.none()},We=function someIf(e,t){return e?K.some(t):K.none()},je=function checkRange(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},Ge=function removeLeading(e,t){return Ke(e,t)?function removeFromStart(e,t){return e.substring(t)}(e,t.length):e},qe=function contains$1(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0,i=e.indexOf(t,n);return-1!==i&&(!!N(o)||i+t.length<=o)},Ke=function startsWith(e,t){return je(e,t,0)},Ye=function endsWith(e,t){return je(e,t,e.length-t.length)},Xe=function blank(e){return function(t){return t.replace(e,"")}}(/^\s+|\s+$/g),Je=function isNotEmpty(e){return e.length>0},Qe=function isEmpty(e){return!Je(e)},et=function isSupported$1(e){return void 0!==e.style&&I(e.style.getPropertyValue)},tt=function fromDom(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:e}},nt={fromHtml:function fromHtml$2(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){var o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return tt(n.childNodes[0])},fromTag:function fromTag(e,t){var n=(t||document).createElement(e);return tt(n)},fromText:function fromText(e,t){var n=(t||document).createTextNode(e);return tt(n)},fromDom:tt,fromPoint:function fromPoint(e,t,n){return K.from(e.dom.elementFromPoint(t,n)).map(tt)}},rt="undefined"!==typeof window?window:Function("return this;")(),ot=function resolve(e,t){return function path$1(e,t){for(var n=void 0!==t&&null!==t?t:rt,o=0;o<e.length&&void 0!==n&&null!==n;++o)n=n[e[o]];return n}(e.split("."),t)},it=function getOrDie$1(e,t){var n=function unsafe(e,t){return ot(e,t)}(e,t);if(void 0===n||null===n)throw new Error(e+" not available on this browser");return n},at=Object.getPrototypeOf,ut=function isPrototypeOf(e){var t=ot("ownerDocument.defaultView",e);return E(e)&&(function sandHTMLElement(e){return it("HTMLElement",e)}(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(at(e).constructor.name))},ct=function name$3(e){return e.dom.nodeName.toLowerCase()},st=function isType(e){return function(t){return function type$1(e){return e.dom.nodeType}(t)===e}},lt=function isHTMLElement(e){return ft(e)&&ut(e.dom)},ft=st(1),dt=st(3),mt=st(9),gt=st(11),pt=function isTag(e){return function(t){return ft(t)&&ct(t)===e}},ht=function is(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},vt=function bypassSelector(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount},bt=function eq(e,t){return e.dom===t.dom},yt=function contains(e,t){var n=e.dom,o=t.dom;return n!==o&&n.contains(o)},Ct=function owner$4(e){return nt.fromDom(e.dom.ownerDocument)},wt=function documentOrOwner(e){return mt(e)?e:Ct(e)},xt=function documentElement(e){return nt.fromDom(wt(e).dom.documentElement)},St=function defaultView(e){return nt.fromDom(wt(e).dom.defaultView)},kt=function parent(e){return K.from(e.dom.parentNode).map(nt.fromDom)},Tt=function parentElement(e){return K.from(e.dom.parentElement).map(nt.fromDom)},Et=function offsetParent(e){return K.from(e.dom.offsetParent).map(nt.fromDom)},Ot=function children(e){return ae(e.dom.childNodes,nt.fromDom)},At=function child$2(e,t){var n=e.dom.childNodes;return K.from(n[t]).map(nt.fromDom)},_t=function firstChild(e){return At(e,0)},Dt=function spot(e,t){return{element:e,offset:t}},Rt=function leaf(e,t){var n=Ot(e);return n.length>0&&t<n.length?Dt(n[t],0):Dt(e,t)},Nt=function isShadowRoot(e){return gt(e)&&B(e.dom.host)},Mt=I(Element.prototype.attachShadow)&&I(Node.prototype.getRootNode),Bt=z(Mt),It=Mt?function(e){return nt.fromDom(e.dom.getRootNode())}:wt,Pt=function getContentContainer(e){return Nt(e)?e:nt.fromDom(wt(e).dom.body)},Lt=function isInShadowRoot(e){return Ft(e).isSome()},Ft=function getShadowRoot(e){var t=It(e);return Nt(t)?K.some(t):K.none()},Ht=function getShadowHost(e){return nt.fromDom(e.dom.host)},$t=function isOpenShadowHost(e){return B(e.dom.shadowRoot)},zt=function inBody(e){var t=dt(e)?e.dom.parentNode:e.dom;if(void 0===t||null===t||null===t.ownerDocument)return!1;var n=t.ownerDocument;return Ft(nt.fromDom(t)).fold((function(){return n.body.contains(t)}),function compose1(e,t){return function(n){return e(t(n))}}(inBody,Ht))},Vt=function body(){return Ut(nt.fromDom(document))},Ut=function getBody(e){var t=e.dom.body;if(null===t||void 0===t)throw new Error("Body is not available yet");return nt.fromDom(t)},Zt=function rawSet(e,t,n){if(!(T(n)||R(n)||P(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},Wt=function set$9(e,t,n){Zt(e.dom,t,n)},jt=function setAll$1(e,t){var n=e.dom;_e(t,(function(e,t){Zt(n,t,e)}))},Gt=function get$f(e,t){var n=e.dom.getAttribute(t);return null===n?void 0:n},qt=function getOpt(e,t){return K.from(Gt(e,t))},Kt=function has$1(e,t){var n=e.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(t)},Yt=function remove$7(e,t){e.dom.removeAttribute(t)},Xt=function internalSet(e,t,n){if(!T(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);et(e)&&e.style.setProperty(t,n)},Jt=function internalRemove(e,t){et(e)&&e.style.removeProperty(t)},Qt=function set$8(e,t,n){var o=e.dom;Xt(o,t,n)},en=function setAll(e,t){var n=e.dom;_e(t,(function(e,t){Xt(n,t,e)}))},tn=function setOptions(e,t){var n=e.dom;_e(t,(function(e,t){e.fold((function(){Jt(n,t)}),(function(e){Xt(n,t,e)}))}))},nn=function get$e(e,t){var n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return""!==o||zt(e)?o:rn(n,t)},rn=function getUnsafeProperty(e,t){return et(e)?e.style.getPropertyValue(t):""},an=function getRaw(e,t){var n=e.dom,o=rn(n,t);return K.from(o).filter((function(e){return e.length>0}))},un=function getAllRaw(e){var t={},n=e.dom;if(et(n))for(var o=0;o<n.style.length;o++){var i=n.style.item(o);t[i]=n.style[i]}return t},cn=function isValidValue$1(e,t,n){var o=nt.fromTag(e);return Qt(o,t,n),an(o,t).isSome()},sn=function remove$6(e,t){var n=e.dom;Jt(n,t),ze(qt(e,"style").map(Xe),"")&&Yt(e,"style")},ln=function reflow(e){return e.dom.offsetWidth},fn=function Dimension(e,t){var n=function get(n){var o=t(n);if(o<=0||null===o){var i=nn(n,e);return parseFloat(i)||0}return o},o=function aggregate(e,t){return fe(t,(function(t,n){var o=nn(e,n),i=void 0===o?0:parseInt(o,10);return isNaN(i)?t:t+i}),0)};return{set:function set(t,n){if(!P(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);var o=t.dom;et(o)&&(o.style[e]=n+"px")},get:n,getOuter:n,aggregate:o,max:function max(e,t,n){var i=o(e,n);return t>i?t-i:0}}},dn=fn("height",(function(e){var t=e.dom;return zt(e)?t.getBoundingClientRect().height:t.offsetHeight})),mn=function get$d(e){return dn.get(e)},gn=function getOuter$2(e){return dn.getOuter(e)},pn=function r$1(e,t){return{left:e,top:t,translate:function translate(n,o){return r$1(e+n,t+o)}}},hn=function firstDefinedOrZero(e,t){return void 0!==e?e:void 0!==t?t:0},vn=function absolute$3(e){var t=e.dom.ownerDocument,n=t.body,o=t.defaultView,i=t.documentElement;if(n===e.dom)return pn(n.offsetLeft,n.offsetTop);var a=hn(null===o||void 0===o?void 0:o.pageYOffset,i.scrollTop),u=hn(null===o||void 0===o?void 0:o.pageXOffset,i.scrollLeft),c=hn(i.clientTop,n.clientTop),s=hn(i.clientLeft,n.clientLeft);return bn(e).translate(u-s,a-c)},bn=function viewport$1(e){var t=e.dom,n=t.ownerDocument.body;return n===t?pn(n.offsetLeft,n.offsetTop):zt(e)?function boxPosition(e){var t=e.getBoundingClientRect();return pn(t.left,t.top)}(t):pn(0,0)},yn=fn("width",(function(e){return e.dom.offsetWidth})),Cn=function get$c(e){return yn.get(e)},wn=function getOuter$1(e){return yn.getOuter(e)},xn=function cached(e){var t,n=!1;return function(){if(!n){n=!0;for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];t=e.apply(null,i)}return t}},Sn=function unknown$3(){return kn(0,0)},kn=function nu$d(e,t){return{major:e,minor:t}},Tn={nu:kn,detect:function detect$5(e,t){var n=String(t).toLowerCase();return 0===e.length?Sn():function find$3(e,t){var n=function firstMatch(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(o.test(t))return o}}(e,t);if(!n)return{major:0,minor:0};var o=function group(e){return Number(t.replace(n,"$"+e))};return kn(o(1),o(2))}(e,n)},unknown:Sn},En=function detect$4(e,t){var n=String(t).toLowerCase();return de(e,(function(e){return e.search(n)}))},On=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,An=function checkContains(e){return function(t){return qe(t,e)}},_n=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function search(e){return qe(e,"edge/")&&qe(e,"chrome")&&qe(e,"safari")&&qe(e,"applewebkit")}},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,On],search:function search(e){return qe(e,"chrome")&&!qe(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function search(e){return qe(e,"msie")||qe(e,"trident")}},{name:"Opera",versionRegexes:[On,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:An("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:An("firefox")},{name:"Safari",versionRegexes:[On,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function search(e){return(qe(e,"safari")||qe(e,"mobile/"))&&qe(e,"applewebkit")}}],Dn=[{name:"Windows",search:An("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function search(e){return qe(e,"iphone")||qe(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:An("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:An("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:An("linux"),versionRegexes:[]},{name:"Solaris",search:An("sunos"),versionRegexes:[]},{name:"FreeBSD",search:An("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:An("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],Rn={browsers:z(_n),oses:z(Dn)},Nn="Edge",Mn="Chromium",Bn="Opera",In="Firefox",Pn="Safari",Ln=function nu$c(e){var t=e.current,n=e.version,o=function isBrowser(e){return function(){return t===e}};return{current:t,version:n,isEdge:o(Nn),isChromium:o(Mn),isIE:o("IE"),isOpera:o(Bn),isFirefox:o(In),isSafari:o(Pn)}},Fn={unknown:function unknown$2(){return Ln({current:void 0,version:Tn.unknown()})},nu:Ln,edge:z(Nn),chromium:z(Mn),ie:z("IE"),opera:z(Bn),firefox:z(In),safari:z(Pn)},Hn="Windows",$n="Android",zn="Linux",Vn="macOS",Un="Solaris",Zn="FreeBSD",Wn="ChromeOS",jn=function nu$b(e){var t=e.current,n=e.version,o=function isOS(e){return function(){return t===e}};return{current:t,version:n,isWindows:o(Hn),isiOS:o("iOS"),isAndroid:o($n),isMacOS:o(Vn),isLinux:o(zn),isSolaris:o(Un),isFreeBSD:o(Zn),isChromeOS:o(Wn)}},Gn={unknown:function unknown$1(){return jn({current:void 0,version:Tn.unknown()})},nu:jn,windows:z(Hn),ios:z("iOS"),android:z($n),linux:z(zn),macos:z(Vn),solaris:z(Un),freebsd:z(Zn),chromeos:z(Wn)},qn=function detect$3(e,t,n){var o=Rn.browsers(),i=Rn.oses(),a=t.bind((function(e){return function detectBrowser$1(e,t){return Ee(t.brands,(function(t){var n=t.brand.toLowerCase();return de(e,(function(e){var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((function(e){return{current:e.name,version:Tn.nu(parseInt(t.version,10),0)}}))}))}(o,e)})).orThunk((function(){return function detectBrowser(e,t){return En(e,t).map((function(e){var n=Tn.detect(e.versionRegexes,t);return{current:e.name,version:n}}))}(o,e)})).fold(Fn.unknown,Fn.nu),u=function detectOs(e,t){return En(e,t).map((function(e){var n=Tn.detect(e.versionRegexes,t);return{current:e.name,version:n}}))}(i,e).fold(Gn.unknown,Gn.nu),c=function DeviceType(e,t,n,o){var i=e.isiOS()&&!0===/ipad/i.test(n),a=e.isiOS()&&!i,u=e.isiOS()||e.isAndroid(),c=u||o("(pointer:coarse)"),s=i||!a&&u&&o("(min-device-width:768px)"),l=a||u&&!s,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),m=!l&&!s&&!d;return{isiPad:z(i),isiPhone:z(a),isTablet:z(s),isPhone:z(l),isTouch:z(c),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:z(d),isDesktop:z(m)}}(u,a,e,n);return{browser:a,os:u,deviceType:c}},Kn=function mediaMatch(e){return window.matchMedia(e).matches},Yn=xn((function(){return qn(navigator.userAgent,K.from(navigator.userAgentData),Kn)})),Xn=function detect$2(){return Yn()},Jn=function fromRawEvent$1(e){var t=nt.fromDom(function getOriginalEventTarget(e){if(Bt()&&B(e.target)){var t=nt.fromDom(e.target);if(ft(t)&&$t(t)&&e.composed&&e.composedPath){var n=e.composedPath();if(n)return Se(n)}}return K.from(e.target)}(e).getOr(e.target)),n=function stop(){return e.stopPropagation()},o=function prevent(){return e.preventDefault()},i=$(o,n);return function mkEvent(e,t,n,o,i,a,u){return{target:e,x:t,y:n,stop:o,prevent:i,kill:a,raw:u}}(t,e.clientX,e.clientY,n,o,i,e)},Qn=function binder(e,t,n,o,i){var a=function handle(e,t){return function(n){e(n)&&t(Jn(n))}}(n,o);return e.dom.addEventListener(t,a,i),{unbind:curry(er,e,t,a,i)}},er=function unbind(e,t,n,o){e.dom.removeEventListener(t,n,o)},tr=function before$1(e,t){kt(e).each((function(n){n.dom.insertBefore(t.dom,e.dom)}))},nr=function after$2(e,t){var n=function nextSibling(e){return K.from(e.dom.nextSibling).map(nt.fromDom)}(e);n.fold((function(){kt(e).each((function(e){ir(e,t)}))}),(function(e){tr(e,t)}))},rr=function prepend$1(e,t){_t(e).fold((function(){ir(e,t)}),(function(n){e.dom.insertBefore(t.dom,n.dom)}))},ir=function append$2(e,t){e.dom.appendChild(t.dom)},ar=function append$1(e,t){ue(t,(function(t){ir(e,t)}))},ur=function empty(e){e.dom.textContent="",ue(Ot(e),(function(e){cr(e)}))},cr=function remove$5(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},sr=function get$b(e){var t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return pn(n,o)},lr=function to(e,t,n){var o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollTo(e,t)},fr=function bounds$1(e,t,n,o){return{x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}},dr=function getBounds$3(e){var t=void 0===e?window:e,n=t.document,o=sr(nt.fromDom(n));return function get$a(e){var t=void 0===e?window:e;return Xn().browser.isFirefox()?K.none():K.from(t.visualViewport)}(t).fold((function(){var e=t.document.documentElement,n=e.clientWidth,i=e.clientHeight;return fr(o.left,o.top,n,i)}),(function(e){return fr(Math.max(e.pageLeft,o.left),Math.max(e.pageTop,o.top),e.width,e.height)}))},mr=function getDocument(){return nt.fromDom(document)},gr=function walkUp(e,t){return e.view(t).fold(z([]),(function(t){var n=e.owner(t),o=walkUp(e,n);return[t].concat(o)}))},pr=function pathTo(e,t){var n=t.owner(e),o=gr(t,n);return K.some(o)},hr=Object.freeze({__proto__:null,view:function view(e){var t;return(e.dom===document?K.none():K.from(null===(t=e.dom.defaultView)||void 0===t?void 0:t.frameElement)).map(nt.fromDom)},owner:function owner$3(e){return Ct(e)}}),vr=function find$2(e){var t=mr(),n=sr(t);return pr(e,hr).fold(curry(vn,e),(function(t){var o=bn(e),i=le(t,(function(e,t){var n=bn(t);return{left:e.left+n.left,top:e.top+n.top}}),{left:0,top:0});return pn(i.left+o.left+n.left,i.top+o.top+n.top)}))},yr=function bounds(e,t,n,o){return{x:e,y:t,width:n,height:o,right:e+n,bottom:t+o}},Cr=function box$1(e){var t=vn(e),n=wn(e),o=gn(e);return yr(t.left,t.top,n,o)},wr=function absolute$2(e){var t=vr(e),n=wn(e),o=gn(e);return yr(t.left,t.top,n,o)},xr=function constrain(e,t){var n=Math.max(e.x,t.x),o=Math.max(e.y,t.y),i=Math.min(e.right,t.right),a=Math.min(e.bottom,t.bottom);return yr(n,o,i-n,a-o)},Sr=function win(){return dr(window)},kr=tinymce.util.Tools.resolve("tinymce.ThemeManager"),Tr=function value$4(e){var t=function applyHelper(t){return t(e)},n=z(e),o=function outputHelper(){return i},i={tag:!0,inner:e,fold:function fold(t,n){return n(e)},isValue:q,isError:G,map:function map(t){return Or.value(t(e))},mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:function each(t){t(e)},toOptional:function toOptional(){return K.some(e)}};return i},Er=function error$1(e){var t=function outputHelper(){return n},n={tag:!1,inner:e,fold:function fold(t,n){return t(e)},isValue:G,isError:q,map:t,mapError:function mapError(t){return Or.error(t(e))},bind:t,exists:G,forall:q,getOr:V,or:V,getOrThunk:j,orThunk:j,getOrDie:W(String(e)),each:F,toOptional:K.none};return n},Or={value:Tr,error:Er,fromOption:function fromOption(e,t){return e.fold((function(){return Er(t)}),Tr)}};!function(e){e[e.Error=0]="Error",e[e.Value=1]="Value"}(Y||(Y={}));var Ar=function fold$1(e,t,n){return e.stype===Y.Error?t(e.serror):n(e.svalue)},_r=function svalue(e){return{stype:Y.Value,svalue:e}},Dr=function serror(e){return{stype:Y.Error,serror:e}},Rr=function fromResult$1(e){return e.fold(Dr,_r)},Nr=function toResult$1(e){return Ar(e,Or.error,Or.value)},Mr=_r,Br=function partition$2(e){var t=[],n=[];return ue(e,(function(e){Ar(e,(function(e){return n.push(e)}),(function(e){return t.push(e)}))})),{values:t,errors:n}},Ir=Dr,Pr=function bind$1(e,t){return e.stype===Y.Value?t(e.svalue):e},Lr=function bindError(e,t){return e.stype===Y.Error?t(e.serror):e},Fr=function map(e,t){return e.stype===Y.Value?{stype:Y.Value,svalue:t(e.svalue)}:e},Hr=function mapError(e,t){return e.stype===Y.Error?{stype:Y.Error,serror:t(e.serror)}:e},$r=Ar,zr=function field$2(e,t,n,o){return{tag:"field",key:e,newKey:t,presence:n,prop:o}},Vr=function fold(e,t,n){switch(e.tag){case"field":return t(e.key,e.newKey,e.presence,e.prop);case"custom":return n(e.newKey,e.instantiator)}},Ur=function baseMerge(e){return function(){if(0===arguments.length)throw new Error("Can't merge zero objects");for(var t={},n=0;n<arguments.length;n++){var o=n<0||arguments.length<=n?void 0:arguments[n];for(var i in o)He(o,i)&&(t[i]=e(t[i],o[i]))}return t}},Zr=Ur((function deep$1(e,t){return O(e)&&O(t)?Zr(e,t):t})),Wr=Ur((function shallow$1(e,t){return t})),jr=function defaultedThunk(e){return{tag:"defaultedThunk",process:e}},Gr=function defaulted$1(e){return jr(z(e))},qr=function mergeWithThunk(e){return{tag:"mergeWithThunk",process:e}},Kr=function mergeErrors$1(e){return $(Ir,ge)(e)},Yr=function consolidateArr(e){var t=Br(e);return t.errors.length>0?Kr(t.errors):Mr(t.values)},Xr=function formatObj(e){return E(e)&&Oe(e).length>100?" removed due to size":JSON.stringify(e,null,2)},Jr=function nu$a(e,t){return Ir([{path:e,getErrorInfo:t}])},Qr=function value$3(e){return{extract:function extract(t,n){return Lr(e(n),(function(e){return function custom(e,t){return Jr(e,z(t))}(t,e)}))},toString:z("val")}},eo=Qr(Mr),no=function requiredAccess(e,t,n,o){return Fe(t,n).fold((function(){return function missingRequired(e,t,n){return Jr(e,(function(){return'Could not find valid *required* value for "'+t+'" in '+Xr(n)}))}(e,n,t)}),o)},ro=function fallbackAccess(e,t,n,o){return o(Fe(e,t).getOrThunk((function(){return n(e)})))},oo=function extractField(e,t,n,o,i){var a=function bundle(e){return i.extract(t.concat([o]),e)},u=function bundleAsOption(e){return e.fold((function(){return Mr(K.none())}),(function(e){var n=i.extract(t.concat([o]),e);return Fr(n,K.some)}))};switch(e.tag){case"required":return no(t,n,o,a);case"defaultedThunk":return ro(n,o,e.process,a);case"option":return function optionAccess(e,t,n){return n(Fe(e,t))}(n,o,u);case"defaultedOptionThunk":return function optionDefaultedAccess(e,t,n,o){return o(Fe(e,t).map((function(t){return!0===t?n(e):t})))}(n,o,e.process,u);case"mergeWithThunk":return ro(n,o,z({}),(function(t){var o=Zr(e.process(n),t);return a(o)}))}},io=function valueThunk(e){return{extract:function extract(t,n){return e().extract(t,n)},toString:function toString(){return e().toString()}}},ao=function getSetKeys(e){return Oe(Be(e,B))},uo=function objOfOnly(e){var t=co(e),n=le(e,(function(e,t){return Vr(t,(function(t){return Zr(e,l({},t,!0))}),z(e))}),{});return{extract:function extract(e,o){var i=R(o)?[]:ao(o),a=se(i,(function(e){return!$e(n,e)}));return 0===a.length?t.extract(e,o):function unsupportedFields(e,t){return Jr(e,(function(){return"There are unsupported fields: ["+t.join(", ")+"] specified"}))}(e,a)},toString:t.toString}},co=function objOf(e){return{extract:function extract(t,n){return function extractFields(e,t,n){var o,i={},a=[],u=m(n);try{for(u.s();!(o=u.n()).done;){var c=o.value;Vr(c,(function(n,o,u,c){var s=oo(u,e,t,n,c);$r(s,(function(e){a.push.apply(a,d(e))}),(function(e){i[o]=e}))}),(function(e,n){i[e]=n(t)}))}}catch(s){u.e(s)}finally{u.f()}return a.length>0?Ir(a):Mr(i)}(t,n,e)},toString:function toString(){var t=ae(e,(function(e){return Vr(e,(function(e,t,n,o){return e+" -> "+o.toString()}),(function(e,t){return"state("+e+")"}))}));return"obj{\n"+t.join("\n")+"}"}}},so=function arrOf(e){return{extract:function extract(t,n){var o=ae(n,(function(n,o){return e.extract(t.concat(["["+o+"]"]),n)}));return Yr(o)},toString:function toString(){return"array("+e.toString()+")"}}},lo=function oneOf(e,t){var n=void 0!==t?t:V;return{extract:function extract(t,o){var i,a=[],u=m(e);try{for(u.s();!(i=u.n()).done;){var c=i.value.extract(t,o);if(c.stype===Y.Value)return{stype:Y.Value,svalue:n(c.svalue)};a.push(c)}}catch(s){u.e(s)}finally{u.f()}return Yr(a)},toString:function toString(){return"oneOf("+ae(e,(function(e){return e.toString()})).join(", ")+")"}}},fo=function setOf$1(e,t){return{extract:function extract(n,o){var i=Oe(o),a=function validateKeys(t,n){return so(Qr(e)).extract(t,n)}(n,i);return Pr(a,(function(e){var i=ae(e,(function(e){return zr(e,e,{tag:"required",process:{}},t)}));return co(i).extract(n,o)}))},toString:function toString(){return"setOf("+t.toString()+")"}}},mo=$(so,co),po=z(eo),ho=function typedValue(e,t){return Qr((function(n){var o=typeof n;return e(n)?Mr(n):Ir("Expected type: ".concat(t," but got: ").concat(o))}))},vo=ho(P,"number"),bo=ho(T,"string"),yo=ho(R,"boolean"),Co=ho(I,"function"),wo=function isPostMessageable(e){if(Object(e)!==e)return!0;switch({}.toString.call(e).slice(8,-1)){case"Boolean":case"Number":case"String":case"Date":case"RegExp":case"Blob":case"FileList":case"ImageData":case"ImageBitmap":case"ArrayBuffer":return!0;case"Array":case"Object":return Object.keys(e).every((function(t){return isPostMessageable(e[t])}));default:return!1}},xo=Qr((function(e){return wo(e)?Mr(e):Ir("Expected value to be acceptable for sending via postMessage")})),So=function chooseFrom(e,t,n,o){return Fe(n,o).fold((function(){return function missingBranch(e,t,n){return Jr(e,(function(){return'The chosen schema: "'+n+'" did not exist in branches: '+Xr(t)}))}(e,n,o)}),(function(n){return n.extract(e.concat(["branch: "+o]),t)}))},ko=function choose$2(e,t){return{extract:function extract(n,o){return Fe(o,e).fold((function(){return function missingKey(e,t){return Jr(e,(function(){return'Choice schema did not contain choice key: "'+t+'"'}))}(n,e)}),(function(e){return So(n,o,t,e)}))},toString:function toString(){return"chooseOn("+e+"). Possible values: "+Oe(t)}}},To=function valueOf(e){return Qr((function(t){return e(t).fold(Ir,Mr)}))},Eo=function setOf(e,t){return fo((function(t){return Rr(e(t))}),t)},Oo=function asRaw(e,t,n){return Nr(function extractValue(e,t,n){var o=t.extract([e],n);return Hr(o,(function(e){return{input:n,errors:e}}))}(e,t,n))},Ao=function getOrDie(e){return e.fold((function(e){throw new Error(Do(e))}),V)},_o=function asRawOrDie$1(e,t,n){return Ao(Oo(e,t,n))},Do=function formatError(e){return"Errors: \n"+function formatErrors(e){var t=e.length>10?e.slice(0,10).concat([{path:[],getErrorInfo:z("... (only showing first ten failures)")}]):e;return ae(t,(function(e){return"Failed path: ("+e.path.join(" > ")+")\n"+e.getErrorInfo()}))}(e.errors).join("\n")+"\n\nInput object: "+Xr(e.input)},Ro=function choose$1(e,t){return ko(e,De(t,co))},No=function thunkOf(e,t){return function thunk(e,t){var n=xn(t);return{extract:function extract(e,t){return n().extract(e,t)},toString:function toString(){return n().toString()}}}(0,t)},Mo=zr,Bo=function customField$1(e,t){return{tag:"custom",newKey:e,instantiator:t}},Io=function validateEnum(e){return To((function(t){return ne(e,t)?Or.value(t):Or.error('Unsupported value: "'.concat(t,'", choose one of "').concat(e.join(", "),'".'))}))},Po=function required$1(e){return Mo(e,e,{tag:"required",process:{}},po())},Lo=function requiredOf(e,t){return Mo(e,e,{tag:"required",process:{}},t)},Fo=function requiredNumber(e){return Lo(e,vo)},Ho=function requiredString(e){return Lo(e,bo)},$o=function requiredStringEnum(e,t){return Mo(e,e,{tag:"required",process:{}},Io(t))},zo=function requiredFunction(e){return Lo(e,Co)},Vo=function requiredObjOf(e,t){return Mo(e,e,{tag:"required",process:{}},co(t))},Uo=function requiredArrayOfObj(e,t){return Mo(e,e,{tag:"required",process:{}},mo(t))},Zo=function requiredArrayOf(e,t){return Mo(e,e,{tag:"required",process:{}},so(t))},Wo=function option$3(e){return Mo(e,e,{tag:"option",process:{}},po())},jo=function optionOf(e,t){return Mo(e,e,{tag:"option",process:{}},t)},Go=function optionNumber(e){return jo(e,vo)},qo=function optionString(e){return jo(e,bo)},Ko=function optionStringEnum(e,t){return jo(e,Io(t))},Yo=function optionFunction(e){return jo(e,Co)},Xo=function optionArrayOf(e,t){return jo(e,so(t))},Jo=function optionObjOf(e,t){return jo(e,co(t))},Qo=function optionObjOfOnly(e,t){return jo(e,uo(t))},ei=function defaulted(e,t){return Mo(e,e,Gr(t),po())},ti=function defaultedOf(e,t,n){return Mo(e,e,Gr(t),n)},ni=function defaultedNumber(e,t){return ti(e,t,vo)},ri=function defaultedString(e,t){return ti(e,t,bo)},oi=function defaultedStringEnum(e,t,n){return ti(e,t,Io(n))},ii=function defaultedBoolean(e,t){return ti(e,t,yo)},ai=function defaultedFunction(e,t){return ti(e,t,Co)},ui=function defaultedArrayOf(e,t,n){return ti(e,t,so(n))},ci=function defaultedObjOf(e,t,n){return ti(e,t,co(n))},si=function Cell(e){var t=e;return{get:function get(){return t},set:function set(e){t=e}}},li=function generate$7(e){if(!A(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return ue(e,(function(o,i){var a=Oe(o);if(1!==a.length)throw new Error("one and only one name per case");var u=a[0],c=o[u];if(void 0!==n[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!A(c))throw new Error("case arguments must be an array");t.push(u),n[u]=function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=o.length;if(s!==c.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+c.length+" ("+c+"), got "+s);return{fold:function fold(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+n.length);return n[i].apply(null,o)},match:function match(e){var n=Oe(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!he(t,(function(e){return ne(n,e)})))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[u].apply(null,o)},log:function log(e){console.log(e,{constructors:t,constructor:u,params:o})}}}})),n};li([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);var fi,di=function exclude(e,t){return function exclude$1(e,t){var n={};return _e(e,(function(e,o){ne(t,o)||(n[o]=e)})),n}(e,t)},mi=function wrap$1(e,t){return function wrap$2(e,t){return l({},e,t)}(e,t)},gi=function wrapAll(e){return function wrapAll$1(e){var t={};return ue(e,(function(e){t[e.key]=e.value})),t}(e)},hi=function consolidate(e,t){var n=function partition$1(e){var t=[],n=[];return ue(e,(function(e){e.fold((function(e){t.push(e)}),(function(e){n.push(e)}))})),{errors:t,values:n}}(e);return n.errors.length>0?function mergeErrors(e){return Or.error(ge(e))}(n.errors):function mergeValues(e,t){return 0===e.length?Or.value(t):Or.value(Zr(t,Wr.apply(void 0,e)))}(n.values,t)},vi=function ensureIsRoot(e){return I(e)?e:G},bi=function ancestor$2(e,t,n){for(var o=e.dom,i=vi(n);o.parentNode;){o=o.parentNode;var a=nt.fromDom(o),u=t(a);if(u.isSome())return u;if(i(a))break}return K.none()},yi=function closest$4(e,t,n){var o=t(e),i=vi(n);return o.orThunk((function(){return i(e)?K.none():bi(e,t,i)}))},Ci=function isSource(e,t){return bt(e.element,t.event.target)},wi={can:q,abort:G,run:F},xi=function nu$9(e){if(!$e(e,"can")&&!$e(e,"abort")&&!$e(e,"run"))throw new Error("EventHandler defined by: "+JSON.stringify(e,null,2)+" does not have can, abort, or run!");return s(s({},wi),e)},Si=function fuse$1(e){var t=function all$2(e,t){return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return fe(e,(function(e,n){return e&&t(n).apply(void 0,o)}),!0)}}(e,(function(e){return e.can})),n=function any(e,t){return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return fe(e,(function(e,n){return e||t(n).apply(void 0,o)}),!1)}}(e,(function(e){return e.abort}));return{can:t,abort:n,run:function run(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];ue(e,(function(e){e.run.apply(void 0,n)}))}}},ki=z,Ti=ki("touchstart"),Ei=ki("touchmove"),Oi=ki("touchend"),Ai=ki("touchcancel"),_i=ki("mousedown"),Di=ki("mousemove"),Ri=ki("mouseout"),Ni=ki("mouseup"),Mi=ki("mouseover"),Bi=ki("focusin"),Ii=ki("focusout"),Pi=ki("keydown"),Li=ki("keyup"),Fi=ki("input"),Hi=ki("change"),$i=ki("click"),zi=ki("transitioncancel"),Vi=ki("transitionend"),Ui=ki("transitionstart"),Zi=ki("selectstart"),Wi=function prefixName(e){return z("alloy."+e)},ji={tap:Wi("tap")},Gi=Wi("focus"),qi=Wi("blur.post"),Ki=Wi("paste.post"),Yi=Wi("receive"),Xi=Wi("execute"),Ji=Wi("focus.item"),Qi=ji.tap,ea=Wi("longpress"),ta=Wi("sandbox.close"),na=Wi("typeahead.cancel"),ra=Wi("system.init"),oa=Wi("system.touchmove"),ia=Wi("system.touchend"),aa=Wi("system.scroll"),ua=Wi("system.resize"),ca=Wi("system.attached"),sa=Wi("system.detached"),la=Wi("system.dismissRequested"),fa=Wi("system.repositionRequested"),da=Wi("focusmanager.shifted"),ma=Wi("slotcontainer.visibility"),ga=Wi("system.external.element.scroll"),pa=Wi("change.tab"),ha=Wi("dismiss.tab"),va=Wi("highlight"),ba=Wi("dehighlight"),ya=function emit(e,t){Sa(e,e.element,t,{})},Ca=function emitWith(e,t,n){Sa(e,e.element,t,n)},wa=function emitExecute(e){ya(e,Xi())},xa=function dispatch(e,t,n){Sa(e,t,n,{})},Sa=function dispatchWith(e,t,n,o){var i=s({target:t},o);e.getSystem().triggerEvent(n,t,i)},ka=function dispatchEvent(e,t,n,o){e.getSystem().triggerEvent(n,t,o.event)},Ta=function derive$2(e){return gi(e)},Ea=function abort(e,t){return{key:e,value:xi({abort:t})}},Oa=function preventDefault(e){return{key:e,value:xi({run:function run(e,t){t.event.prevent()}})}},Aa=function run$1(e,t){return{key:e,value:xi({run:t})}},_a=function runActionExtra(e,t,n){return{key:e,value:xi({run:function run(e,o){t.apply(void 0,[e,o].concat(n))}})}},Da=function runOnSourceName(e){return function(t){return{key:e,value:xi({run:function run(e,n){Ci(e,n)&&t(e,n)}})}}},Ra=function redirectToPart(e,t,n){return function redirectToUid(e,t){return Aa(e,(function(n,o){n.getSystem().getByUid(t).each((function(t){ka(t,t.element,e,o)}))}))}(e,t.partUids[n])},Na=function runWithTarget(e,t){return Aa(e,(function(e,n){var o=n.event,i=e.getSystem().getByDom(o.target).getOrThunk((function(){return yi(o.target,(function(t){return e.getSystem().getByDom(t).toOptional()}),G).getOr(e)}));t(e,i,n)}))},Ma=function cutter(e){return Aa(e,(function(e,t){t.cut()}))},Ba=function stopper(e){return Aa(e,(function(e,t){t.stop()}))},Ia=function runOnSource(e,t){return Da(e)(t)},Pa=Da(ca()),La=Da(sa()),Fa=Da(ra()),Ha=function runOnName(e){return function(t){return Aa(e,t)}}(Xi()),$a=function get$9(e){return e.dom.innerHTML},za=function set$6(e,t){var n=Ct(e).dom,o=nt.fromDom(n.createDocumentFragment()),i=function fromHtml$1(e,t){var n=(t||document).createElement("div");return n.innerHTML=e,Ot(nt.fromDom(n))}(t,n);ar(o,i),ur(e),ir(e,o)},Va=function clone$1(e,t){return nt.fromDom(e.dom.cloneNode(t))},Ua=function getHtml(e){if(Nt(e))return"#shadow-root";var t=function shallow(e){return Va(e,!1)}(e);return function getOuter(e){var t=nt.fromTag("div"),n=nt.fromDom(e.dom.cloneNode(!0));return ir(t,n),$a(t)}(t)},Za=function element(e){return Ua(e)},Wa=Ta([function can(e,t){return{key:e,value:xi({can:t})}}(Gi(),(function(e,t){var n=t.event,o=n.originator,i=n.target;return!function isRecursive(e,t,n){return bt(t,e.element)&&!bt(t,n)}(e,o,i)||(console.warn(Gi()+" did not get interpreted by the desired target. \nOriginator: "+Za(o)+"\nTarget: "+Za(i)+"\nCheck the "+Gi()+" event handlers"),!1)}))]),ja=Object.freeze({__proto__:null,events:Wa}),Ga=0,qa=function generate$6(e){var t=(new Date).getTime();return e+"_"+Math.floor(1e9*Math.random())+ ++Ga+String(t)},Ka=z("alloy-id-"),Ya=z("data-alloy-id"),Xa=Ka(),Ja=Ya(),Qa=function writeOnly(e,t){Object.defineProperty(e.dom,Ja,{value:t,writable:!0})},eu=function read$1(e){var t=ft(e)?e.dom[Ja]:null;return K.from(t)},tu=function generate$5(e){return qa(e)},ru=V,ou=function NoContextApi(e){var t=function getMessage(t){return"The component must be in a context to execute: ".concat(t)+(e?"\n"+Za(e().element)+" is not in context.":"")},n=function fail(e){return function(){throw new Error(t(e))}},o=function warn(e){return function(){console.warn(t(e))}};return{debugInfo:z("fake"),triggerEvent:o("triggerEvent"),triggerFocus:o("triggerFocus"),triggerEscape:o("triggerEscape"),broadcast:o("broadcast"),broadcastOn:o("broadcastOn"),broadcastEvent:o("broadcastEvent"),build:n("build"),buildOrPatch:n("buildOrPatch"),addToWorld:n("addToWorld"),removeFromWorld:n("removeFromWorld"),addToGui:n("addToGui"),removeFromGui:n("removeFromGui"),getByUid:n("getByUid"),getByDom:n("getByDom"),isConnected:G}},iu=ou(),au=function cleanParameters(e){return ae(e,(function(e){return Ye(e,"/*")?e.substring(0,e.length-"/*".length):e}))},uu=function markAsExtraApi(e,t){var n=e.toString(),o=n.indexOf(")")+1,i=n.indexOf("("),a=n.substring(i+1,o-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:au(a)}},e},cu=qa("alloy-premade"),su=function premade$1(e){return Object.defineProperty(e.element.dom,cu,{value:e.uid,writable:!0}),mi(cu,e)},lu=function getPremade(e){return Fe(e,cu)},fu=function makeApi(e){return function markAsSketchApi(e,t){var n=t.toString(),o=n.indexOf(")")+1,i=n.indexOf("("),a=n.substring(i+1,o-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:"OVERRIDE",parameters:au(a.slice(1))}},e}((function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return e.apply(void 0,[t.getApis(),t].concat(o))}),e)},du={init:function init(){return mu({readState:z("No State required")})}},mu=function nu$8(e){return e},gu=function byInnerKey(e,t){var n={};return _e(e,(function(e,o){_e(e,(function(e,i){var a=Fe(n,i).getOr([]);n[i]=a.concat([t(o,e)])}))})),n},pu=function nu$7(e){return{classes:N(e.classes)?[]:e.classes,attributes:N(e.attributes)?{}:e.attributes,styles:N(e.styles)?{}:e.styles}},hu=function getCurried(e){return e.cHandler},vu=function behaviourTuple(e,t){return{name:e,handler:t}},bu=function groupByEvents(e,t,n){var o=s(s({},n),function nameToHandlers(e,t){var n={};return ue(e,(function(e){n[e.name()]=e.handlers(t)})),n}(t,e));return gu(o,vu)},yu=function assemble(e){var t=function read$2(e){return I(e)?{can:q,abort:G,run:e}:e}(e);return function(e,n){for(var o=arguments.length,i=new Array(o>2?o-2:0),a=2;a<o;a++)i[a-2]=arguments[a];var u=[e,n].concat(i);t.abort.apply(void 0,u)?n.stop():t.can.apply(void 0,u)&&t.run.apply(void 0,u)}},Cu=function fuse(e,t,n){var o=t[n];return o?function sortKeys(e,t,n,o){try{var i=we(n,(function(n,i){var a=n[t],u=i[t],c=o.indexOf(a),s=o.indexOf(u);if(-1===c)throw new Error("The ordering for "+e+" does not have an entry for "+a+".\nOrder specified: "+JSON.stringify(o,null,2));if(-1===s)throw new Error("The ordering for "+e+" does not have an entry for "+u+".\nOrder specified: "+JSON.stringify(o,null,2));return c<s?-1:s<c?1:0}));return Or.value(i)}catch(a){return Or.error([a])}}("Event: "+n,"name",e,o).map((function(e){var t=ae(e,(function(e){return e.handler}));return Si(t)})):function missingOrderError(e,t){return Or.error(["The event ("+e+') has more than one behaviour that listens to it.\nWhen this occurs, you must specify an event ordering for the behaviours in your spec (e.g. [ "listing", "toggling" ]).\nThe behaviours that can trigger it are: '+JSON.stringify(ae(t,(function(e){return e.name})),null,2)])}(n,e)},wu=function combineGroups(e,t){var n=Ie(e,(function(e,n){return(1===e.length?Or.value(e[0].handler):Cu(e,t,n)).map((function(o){var i=yu(o),a=e.length>1?se(t[n],(function(t){return re(e,(function(e){return e.name===t}))})).join(" > "):e[0].name;return mi(n,function uncurried(e,t){return{handler:e,purpose:t}}(i,a))}))}));return hi(n,{})},xu="alloy.base.behaviour",Su=co([Mo("dom","dom",{tag:"required",process:{}},co([Po("tag"),ei("styles",{}),ei("classes",[]),ei("attributes",{}),Wo("value"),Wo("innerHtml")])),Po("components"),Po("uid"),ei("events",{}),ei("apis",{}),Mo("eventOrder","eventOrder",function mergeWith(e){return qr(z(e))}((e={},l(e,Xi(),["disabling",xu,"toggling","typeaheadevents"]),l(e,Gi(),[xu,"focusing","keying"]),l(e,ra(),[xu,"disabling","toggling","representing"]),l(e,Fi(),[xu,"representing","streaming","invalidating"]),l(e,sa(),[xu,"representing","item-events","tooltipping"]),l(e,_i(),["focusing",xu,"item-type-events"]),l(e,Ti(),["focusing",xu,"item-type-events"]),l(e,Mi(),["item-type-events","tooltipping"]),l(e,Yi(),["receiving","reflecting","tooltipping"]),e)),po()),Wo("domModification")]),ku=function toEvents(e){return e.events},Tu=function read(e,t){var n=Gt(e,t);return void 0===n||""===n?[]:n.split(" ")},Eu=function supports(e){return void 0!==e.dom.classList},Ou=function get$8(e){return Tu(e,"class")},Au=function add$3(e,t){return function add$4(e,t,n){var o=Tu(e,t).concat([n]);return Wt(e,t,o.join(" ")),!0}(e,"class",t)},_u=function remove$3(e,t){return function remove$4(e,t,n){var o=se(Tu(e,t),(function(e){return e!==n}));return o.length>0?Wt(e,t,o.join(" ")):Yt(e,t),!1}(e,"class",t)},Du=function add$2(e,t){Eu(e)?e.dom.classList.add(t):Au(e,t)},Ru=function cleanClass(e){0===(Eu(e)?e.dom.classList:Ou(e)).length&&Yt(e,"class")},Nu=function remove$2(e,t){Eu(e)?e.dom.classList.remove(t):_u(e,t);Ru(e)},Mu=function toggle$4(e,t){var n=Eu(e)?e.dom.classList.toggle(t):function toggle$5(e,t){return ne(Ou(e),t)?_u(e,t):Au(e,t)}(e,t);return Ru(e),n},Bu=function has(e,t){return Eu(e)&&e.dom.classList.contains(t)},Iu=function add$1(e,t){ue(t,(function(t){Du(e,t)}))},Pu=function remove$1(e,t){ue(t,(function(t){Nu(e,t)}))},Lu=function get$7(e){return Eu(e)?function getNative(e){for(var t=e.dom.classList,n=new Array(t.length),o=0;o<t.length;o++){var i=t.item(o);null!==i&&(n[o]=i)}return n}(e):Ou(e)},Fu=function get$6(e){return e.dom.value},Hu=function set$5(e,t){if(void 0===t)throw new Error("Value.set was undefined");e.dom.value=t},$u=function ensureInDom(e,t,n){n.fold((function(){return ir(e,t)}),(function(e){bt(e,t)||(tr(e,t),cr(e))}))},zu=function patchChildrenWith(e,t,n){var o=ae(t,n),i=Ot(e);return ue(i.slice(o.length),cr),o},Vu=function patchSpecChild(e,t,n,o){var i=At(e,t),a=o(n,i),u=function determineObsoleted(e,t,n){return At(e,t).map((function(e){if(n.exists((function(t){return!bt(t,e)}))){var t=n.map(ct).getOr("span"),o=nt.fromTag(t);return tr(e,o),o}return e}))}(e,t,i);return $u(e,a.element,u),a},Uu=function diffKeyValueSet(e,t){var n=Oe(e),o=Oe(t),i=be(o,n),a=function bifilter(e,t){var n={},o={};return Me(e,t,Ne(n),Ne(o)),{t:n,f:o}}(e,(function(e,n){return!He(t,n)||e!==t[n]})).t;return{toRemove:i,toSet:a}},Zu=function reconcileToDom(e,t){var n=function clone$2(e){return fe(e.dom.attributes,(function(e,t){return e[t.name]=t.value,e}),{})}(t),o=(n.class,n.style,c(n,h)),i=Uu(e.attributes,o),a=i.toSet,u=i.toRemove,s=un(t),l=Uu(e.styles,s),d=l.toSet,m=l.toRemove,g=Lu(t),p=be(g,e.classes),v=be(e.classes,g);return function updateAttrs(){ue(u,(function(e){return Yt(t,e)})),jt(t,a)}(),function updateClasses(){Iu(t,v),Pu(t,p)}(),function updateStyles(){ue(m,(function(e){return sn(t,e)})),en(t,d)}(),e.innerHtml.fold((function updateChildren(){var n=e.domChildren;!function patchDomChildren(e,t){zu(e,t,(function(t,n){var o=At(e,n);return $u(e,t,o),t}))}(t,n)}),(function updateHtml(e){za(t,e)})),function updateValue(){var n=t,o=e.value.getOrUndefined();o!==Fu(n)&&Hu(n,null!==o&&void 0!==o?o:"")}(),t},Wu=function renderToDom(e,t){var n=t.filter((function canBePatched(t){return ct(t)===e.tag&&!function hasMixedChildren(e){return e.innerHtml.isSome()&&e.domChildren.length>0}(e)&&!function isPremade(e){return He(e.dom,cu)}(t)})).bind((function(t){return function attemptPatch(e,t){try{var n=Zu(e,t);return K.some(n)}catch(o){return K.none()}}(e,t)})).getOrThunk((function(){return function introduceToDom(e){var t=nt.fromTag(e.tag);jt(t,e.attributes),Iu(t,e.classes),en(t,e.styles),e.innerHtml.each((function(e){return za(t,e)}));var n=e.domChildren;return ar(t,n),e.value.each((function(e){Hu(t,e)})),t}(e)}));return Qa(n,e.uid),n},ju=function generateFrom(e,t){return function generateFrom$1(e,t){var n=ae(t,(function(e){return Jo(e.name(),[Po("config"),ei("state",du)])})),o=Oo("component.behaviours",co(n),e.behaviours).fold((function(t){throw new Error(Do(t)+"\nComplete spec:\n"+JSON.stringify(e,null,2))}),V);return{list:t,data:De(o,(function(e){var t=e.map((function(e){return{config:e.config,state:e.state.init(e.config)}}));return z(t)}))}}(e,t)},Gu=function generate$4(e){var t=function getBehaviours$2(e){var t=Fe(e,"behaviours").getOr({});return pe(Oe(t),(function(e){var n=t[e];return B(n)?[n.me]:[]}))}(e);return ju(e,t)},qu=function getDomDefinition(e,t,n){var o=function toDefinition(e){return s(s({},e.dom),{},{uid:e.uid,domChildren:ae(e.components,(function(e){return e.element}))})}(e),i=function toModification(e){return e.domModification.fold((function(){return pu({})}),pu)}(e),a={"alloy.base.modification":i},u=t.length>0?function combine$2(e,t,n,o){var i=s({},t);ue(n,(function(t){i[t.name()]=t.exhibit(e,o)}));var a=gu(i,(function(e,t){return{name:e,modification:t}})),u=function combineObjects(e){return le(e,(function(e,t){return s(s({},t.modification),e)}),{})},c=le(a.classes,(function(e,t){return t.modification.concat(e)}),[]),l=u(a.attributes),d=u(a.styles);return pu({classes:c,attributes:l,styles:d})}(n,a,t,o):i;return function merge(e,t){return s(s({},e),{},{attributes:s(s({},e.attributes),t.attributes),styles:s(s({},e.styles),t.styles),classes:e.classes.concat(t.classes)})}(o,u)},Ku=function getEvents(e,t,n){var o={"alloy.base.behaviour":ku(e)};return function combine$1(e,t,n,o){var i=bu(e,n,o);return wu(i,t)}(n,e.eventOrder,t,o).getOrDie()},Yu=function build$2(e,t){var n=function getMe(){return g},o=si(iu),i=Ao(function toInfo(e){return Oo("custom.definition",Su,e)}(e)),a=Gu(e),u=function getBehaviours$3(e){return e.list}(a),c=function getData$2(e){return e.data}(a),s=qu(i,u,c),l=Wu(s,t),d=Ku(i,u,c),m=si(i.components),g={uid:e.uid,getSystem:o.get,config:function config(t){var n=c;return(I(n[t.name()])?n[t.name()]:function(){throw new Error("Could not find "+t.name()+" in "+JSON.stringify(e,null,2))})()},hasConfigured:function hasConfigured(e){return I(c[e.name()])},spec:e,readState:function readState(e){return c[e]().map((function(e){return e.state.readState()})).getOr("not enabled")},getApis:function getApis(){return i.apis},connect:function connect(e){o.set(e)},disconnect:function disconnect(){o.set(ou(n))},element:l,syncComponents:function syncComponents(){var e=Ot(l),t=pe(e,(function(e){return o.get().getByDom(e).fold((function(){return[]}),Ce)}));m.set(t)},components:m.get,events:d};return g},Xu=function buildFromSpec(e,t){var n=ru(e),o=n.events,i=c(n,v),a=function buildSubcomponents(e,t){var n=Fe(e,"components").getOr([]);return t.fold((function(){return ae(n,nc)}),(function(e){return ae(n,(function(t,n){return tc(t,At(e,n))}))}))}(i,t),u=s(s({},i),{},{events:s(s({},ja),o),components:a});return Or.value(Yu(u,t))},Ju=function text$2(e){var t=nt.fromText(e);return Qu({element:t})},Qu=function external$1(e){var t=_o("external.component",uo([Po("element"),Wo("uid")]),e),n=si(ou()),o=t.uid.getOrThunk((function(){return tu("external")}));Qa(t.element,o);var i={uid:o,getSystem:n.get,config:K.none,hasConfigured:G,connect:function connect(e){n.set(e)},disconnect:function disconnect(){n.set(ou((function(){return i})))},getApis:function getApis(){return{}},element:t.element,spec:e,readState:z("No state"),syncComponents:F,components:z([]),events:{}};return su(i)},ec=tu,tc=function buildOrPatch(e,t){return lu(e).getOrThunk((function(){var n=function isSketchSpec$1(e){return He(e,"uid")}(e)?e:s({uid:ec("")},e);return Xu(n,t).getOrDie()}))},nc=function build$1(e){return tc(e,K.none())},oc=su,ic=function ClosestOrAncestor(e,t,n,o,i){return e(n,o)?K.some(n):I(i)&&i(n)?K.none():t(n,o,i)},ac=function ancestor$1(e,t,n){for(var o=e.dom,i=I(n)?n:G;o.parentNode;){o=o.parentNode;var a=nt.fromDom(o);if(t(a))return K.some(a);if(i(a))break}return K.none()},uc=function closest$3(e,t,n){return ic((function is(e,t){return t(e)}),ac,e,t,n)},cc=function closest$2(e,t,n){return uc(e,t,n).isSome()},sc=function ancestor(e,t,n){return ac(e,(function(e){return ht(e,t)}),n)},lc=function child(e,t){return function child$1(e,t){return de(e.dom.childNodes,(function pred(e){return t(nt.fromDom(e))})).map(nt.fromDom)}(e,(function(e){return ht(e,t)}))},fc=function descendant(e,t){return function one(e,t){var n=void 0===t?document:t.dom;return vt(n)?K.none():K.from(n.querySelector(e)).map(nt.fromDom)}(t,e)},dc=function closest$1(e,t,n){return ic((function is$1(e,t){return ht(e,t)}),sc,e,t,n)},mc="aria-controls",gc=function manager(){var e=qa(mc);return{id:e,link:function link(t){Wt(t,mc,e)},unlink:function unlink(e){Yt(e,mc)}}},pc=function isAriaPartOf(e,t){return function find$1(e){return uc(e,(function(e){if(!ft(e))return!1;var t=Gt(e,"id");return void 0!==t&&t.indexOf(mc)>-1})).bind((function(e){var t=Gt(e,"id"),n=It(e);return fc(n,"[".concat(mc,'="').concat(t,'"]'))}))}(t).exists((function(t){return hc(e,t)}))},hc=function isPartOf$1(e,t){return cc(t,(function(t){return bt(t,e.element)}),G)||pc(e,t)},vc="unknown";!function(e){e[e.STOP=0]="STOP",e[e.NORMAL=1]="NORMAL",e[e.LOGGING=2]="LOGGING"}(fi||(fi={}));var bc=si({}),yc=function processEvent(e,t,n){switch(Fe(bc.get(),e).orThunk((function(){var t=Oe(bc.get());return Ee(t,(function(t){return e.indexOf(t)>-1?K.some(bc.get()[t]):K.none()}))})).getOr(fi.NORMAL)){case fi.NORMAL:return n(xc());case fi.LOGGING:var o=function makeEventLogger(e,t){var n=[],o=(new Date).getTime();return{logEventCut:function logEventCut(e,t,o){n.push({outcome:"cut",target:t,purpose:o})},logEventStopped:function logEventStopped(e,t,o){n.push({outcome:"stopped",target:t,purpose:o})},logNoParent:function logNoParent(e,t,o){n.push({outcome:"no-parent",target:t,purpose:o})},logEventNoHandlers:function logEventNoHandlers(e,t){n.push({outcome:"no-handlers-left",target:t})},logEventResponse:function logEventResponse(e,t,o){n.push({outcome:"response",purpose:o,target:t})},write:function write(){var i=(new Date).getTime();ne(["mousemove","mouseover","mouseout",ra()],e)||console.log(e,{event:e,time:i-o,target:t.dom,sequence:ae(n,(function(e){return ne(["cut","stopped","response"],e.outcome)?"{"+e.purpose+"} "+e.outcome+" at ("+Za(e.target)+")":e.outcome}))})}}}(e,t),i=n(o);return o.write(),i;case fi.STOP:return!0}},Cc=["alloy/data/Fields","alloy/debugging/Debugging"],wc=function monitorEvent(e,t,n){return yc(e,t,n)},xc=z({logEventCut:F,logEventStopped:F,logNoParent:F,logEventNoHandlers:F,logEventResponse:F,write:F}),Sc=z([Po("menu"),Po("selectedMenu")]),kc=z([Po("item"),Po("selectedItem")]);z(co(kc().concat(Sc())));var Tc=z(co(kc())),Ec=Vo("initSize",[Po("numColumns"),Po("numRows")]),Oc=function tieredMenuMarkers(){return Vo("markers",[Po("backgroundMenu")].concat(Sc()).concat(kc()))},Ac=function markers$1(e){return Vo("markers",ae(e,Po))},_c=function onPresenceHandler(e,t,n){return function getTrace(){var e=new Error;if(void 0!==e.stack){var t=e.stack.split("\n");return de(t,(function(e){return e.indexOf("alloy")>0&&!re(Cc,(function(t){return e.indexOf(t)>-1}))})).getOr(vc)}}(),Mo(t,t,n,To((function(e){return Or.value((function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return e.apply(void 0,n)}))})))},Dc=function onHandler(e){return _c(0,e,Gr(F))},Rc=function onKeyboardHandler(e){return _c(0,e,Gr(K.none))},Nc=function onStrictHandler(e){return _c(0,e,{tag:"required",process:{}})},Mc=function onStrictKeyboardHandler(e){return _c(0,e,{tag:"required",process:{}})},Bc=function output$1(e,t){return Bo(e,z(t))},Ic=function snapshot(e){return Bo(e,V)},Pc=z(Ec),Lc=function nu$6(e,t,n,o,i,a,u){var c=arguments.length>7&&void 0!==arguments[7]&&arguments[7];return{x:e,y:t,bubble:n,direction:o,placement:i,restriction:a,label:"".concat(u,"-").concat(i),alwaysFit:c}},Fc=li([{southeast:[]},{southwest:[]},{northeast:[]},{northwest:[]},{south:[]},{north:[]},{east:[]},{west:[]}]),Hc=Fc.southeast,$c=Fc.southwest,zc=Fc.northeast,Vc=Fc.northwest,Uc=Fc.south,Zc=Fc.north,Wc=Fc.east,jc=Fc.west,Gc=function cycleBy(e,t,n,o){var i=e+t;return i>o?n:i<n?o:i},qc=function clamp(e,t,n){return Math.min(Math.max(e,t),n)},Kc=function boundsRestriction(e,t){return ye(["left","right","top","bottom"],(function(n){return Fe(t,n).map((function(t){return function getRestriction(e,t){switch(t){case 1:return e.x;case 0:return e.x+e.width;case 2:return e.y;case 3:return e.y+e.height}}(e,t)}))}))},Yc="layout",Xc=function eastX$1(e){return e.x},Jc=function middleX$1(e,t){return e.x+e.width/2-t.width/2},Qc=function westX$1(e,t){return e.x+e.width-t.width},es=function northY$2(e,t){return e.y-t.height},ts=function southY$2(e){return e.y+e.height},ns=function centreY$1(e,t){return e.y+e.height/2-t.height/2},rs=function southeast$2(e,t,n){return Lc(Xc(e),ts(e),n.southeast(),Hc(),"southeast",Kc(e,{left:1,top:3}),Yc)},os=function southwest$2(e,t,n){return Lc(Qc(e,t),ts(e),n.southwest(),$c(),"southwest",Kc(e,{right:0,top:3}),Yc)},as=function northeast$2(e,t,n){return Lc(Xc(e),es(e,t),n.northeast(),zc(),"northeast",Kc(e,{left:1,bottom:2}),Yc)},us=function northwest$2(e,t,n){return Lc(Qc(e,t),es(e,t),n.northwest(),Vc(),"northwest",Kc(e,{right:0,bottom:2}),Yc)},cs=function north$2(e,t,n){return Lc(Jc(e,t),es(e,t),n.north(),Zc(),"north",Kc(e,{bottom:2}),Yc)},ss=function south$2(e,t,n){return Lc(Jc(e,t),ts(e),n.south(),Uc(),"south",Kc(e,{top:3}),Yc)},ls=function east$2(e,t,n){return Lc(function eastEdgeX$1(e){return e.x+e.width}(e),ns(e,t),n.east(),Wc(),"east",Kc(e,{left:0}),Yc)},fs=function west$2(e,t,n){return Lc(function westEdgeX$1(e,t){return e.x-t.width}(e,t),ns(e,t),n.west(),jc(),"west",Kc(e,{right:1}),Yc)},ds=function all$1(){return[rs,os,as,us,ss,cs,ls,fs]},ms=function allRtl$1(){return[os,rs,us,as,ss,cs,ls,fs]},gs=function aboveOrBelow(){return[as,us,rs,os,cs,ss]},ps=function aboveOrBelowRtl(){return[us,as,os,rs,cs,ss]},hs=function belowOrAbove(){return[rs,os,as,us,ss,cs]},vs=function belowOrAboveRtl(){return[os,rs,us,as,ss,cs]},bs=Object.freeze({__proto__:null,events:function events$h(e){return Ta([Aa(Yi(),(function(t,n){var o=e.channels,i=Oe(o),a=n,u=function chooseChannels(e,t){return t.universal?e:se(e,(function(e){return ne(t.channels,e)}))}(i,a);ue(u,(function(e){var n=o[e],i=n.schema,u=_o("channel["+e+"] data\nReceiver: "+Za(t.element),i,a.data);n.onReceive(t,u)}))}))])}}),ys=[Lo("channels",Eo(Or.value,uo([Nc("onReceive"),ei("schema",po())])))],Cs=function loadEvent(e,t,n){return Fa((function(o,i){n(o,e,t)}))},ws=function wrapApi(e,t,n){return function markAsBehaviourApi(e,t,n){var o=n.toString(),i=o.indexOf(")")+1,a=o.indexOf("("),u=o.substring(a+1,i-1).split(/,\s*/);return e.toFunctionAnnotation=function(){return{name:t,parameters:au(u.slice(0,1).concat(u.slice(3)))}},e}((function f(o){for(var i=arguments.length,a=new Array(i>1?i-1:0),u=1;u<i;u++)a[u-1]=arguments[u];var c=[o].concat(a);return o.config({name:z(e)}).fold((function(){throw new Error("We could not find any behaviour configuration for: "+e+". Using API: "+n)}),(function(e){var n=Array.prototype.slice.call(c,1);return t.apply(void 0,[o,e.config,e.state].concat(n))}))}),n,t)},xs=function revokeBehaviour(e){return{key:e,value:void 0}},Ss=function doCreate(e,t,n,o,i,a,u){var c=function getConfig(e){return $e(e,n)?e[n]():K.none()},l=De(i,(function(e,t){return ws(n,e,t)})),d=De(a,(function(e,t){return uu(e,t)})),m=s(s(s({},d),l),{},{revoke:curry(xs,n),config:function config(t){var o=_o(n+"-config",e,t);return{key:n,value:{config:o,me:m,configAsRaw:xn((function(){return _o(n+"-config",e,t)})),initialConfig:t,state:u}}},schema:z(t),exhibit:function exhibit(e,t){return Ue(c(e),Fe(o,"exhibit"),(function(e,n){return n(t,e.config,e.state)})).getOrThunk((function(){return pu({})}))},name:z(n),handlers:function handlers(e){return c(e).map((function(e){return Fe(o,"events").getOr((function(){return{}}))(e.config,e.state)})).getOr({})}});return m},ks=function derive$1(e){return gi(e)},Ts=uo([Po("fields"),Po("name"),ei("active",{}),ei("apis",{}),ei("state",du),ei("extra",{})]),Es=function create$4(e){var t=_o("Creating behaviour: "+e.name,Ts,e);return function create$5(e,t,n,o,i,a){var u=uo(e),c=Jo(t,[Qo("config",e)]);return Ss(u,c,t,n,o,i,a)}(t.fields,t.name,t.active,t.apis,t.extra,t.state)},Os=uo([Po("branchKey"),Po("branches"),Po("name"),ei("active",{}),ei("apis",{}),ei("state",du),ei("extra",{})]),As=function createModes(e){var t=_o("Creating behaviour: "+e.name,Os,e);return function createModes$1(e,t,n,o,i,a){var u=e,c=Jo(t,[jo("config",e)]);return Ss(u,c,t,n,o,i,a)}(Ro(t.branchKey,t.branches),t.name,t.active,t.apis,t.extra,t.state)},_s=z(void 0),Ds=Es({fields:ys,name:"receiving",active:bs}),Rs=Object.freeze({__proto__:null,exhibit:function exhibit$6(e,t){return pu({classes:[],styles:t.useFixed()?{}:{position:"relative"}})}}),Ns=function focus$3(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.dom.focus({preventScroll:t})},Ms=function blur$1(e){return e.dom.blur()},Bs=function hasFocus(e){var t=It(e).dom;return e.dom===t.activeElement},Is=function active$1(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:mr();return K.from(e.dom.activeElement).map(nt.fromDom)},Ps=function search(e){return Is(It(e)).filter((function(t){return e.dom.contains(t.dom)}))},Ls=function preserve$1(e,t){var n=It(t),o=Is(n).bind((function(e){var n=function hasFocus(t){return bt(e,t)};return n(t)?K.some(t):function descendant$1(e,t){return function descend(e){for(var n=0;n<e.childNodes.length;n++){var o=nt.fromDom(e.childNodes[n]);if(t(o))return K.some(o);var i=descend(e.childNodes[n]);if(i.isSome())return i}return K.none()}(e.dom)}(t,n)})),i=e(t);return o.each((function(e){Is(n).filter((function(t){return bt(t,e)})).fold((function(){Ns(e)}),F)})),i},Fs=function NuPositionCss(e,t,n,o,i){var a=function toPx(e){return e+"px"};return{position:e,left:t.map(a),top:n.map(a),right:o.map(a),bottom:i.map(a)}},Hs=function applyPositionCss(e,t){tn(e,function toOptions(e){return s(s({},e),{},{position:K.some(e.position)})}(t))},$s=li([{none:[]},{relative:["x","y","width","height"]},{fixed:["x","y","width","height"]}]),zs=function positionWithDirection(e,t,n,o,i,a){var u=t.rect,c=u.x-n,s=u.y-o,l=i-(c+u.width),d=a-(s+u.height),m=K.some(c),g=K.some(s),p=K.some(l),h=K.some(d),v=K.none();return function cata$2(e,t,n,o,i,a,u,c,s){return e.fold(t,n,o,i,a,u,c,s)}(t.direction,(function(){return Fs(e,m,g,v,v)}),(function(){return Fs(e,v,g,p,v)}),(function(){return Fs(e,m,v,v,h)}),(function(){return Fs(e,v,v,p,h)}),(function(){return Fs(e,m,g,v,v)}),(function(){return Fs(e,m,v,v,h)}),(function(){return Fs(e,m,g,v,v)}),(function(){return Fs(e,v,g,p,v)}))},Vs=function reposition(e,t){return e.fold((function(){var e=t.rect;return Fs("absolute",K.some(e.x),K.some(e.y),K.none(),K.none())}),(function(e,n,o,i){return zs("absolute",t,e,n,o,i)}),(function(e,n,o,i){return zs("fixed",t,e,n,o,i)}))},Us=function toBox(e,t){var n=curry(vr,t),o=e.fold(n,n,(function(){var e=sr();return vr(t).translate(-e.left,-e.top)})),i=wn(t),a=gn(t);return yr(o.left,o.top,i,a)},Zs=function viewport(e,t){return t.fold((function(){return e.fold(Sr,Sr,yr)}),(function(t){return e.fold(z(t),z(t),(function(){var n=Ws(e,t.x,t.y);return yr(n.left,n.top,t.width,t.height)}))}))},Ws=function translate$2(e,t,n){var o=pn(t,n);return e.fold(z(o),z(o),(function removeScroll(){var e=sr();return o.translate(-e.left,-e.top)}))};$s.none;var js,Gs=$s.relative,qs=$s.fixed,Ks=function box(e,t){return function anchor(e,t){return{anchorBox:e,origin:t}}(e,t)},Ys="data-alloy-placement",Xs=function getPlacement(e){return qt(e,Ys)},Js=li([{fit:["reposition"]},{nofit:["reposition","visibleW","visibleH","isVisible"]}]),Qs=function attempt(e,t,n,o){var i=e.bubble,a=i.offset,u=function adjustBounds(e,t,n){var o=function applyRestriction(o,i){return t[o].map((function(t){var a="top"===o||"bottom"===o,u=a?n.top:n.left,c=("left"===o||"top"===o?Math.max:Math.min)(t,i)+u;return a?qc(c,e.y,e.bottom):qc(c,e.x,e.right)})).getOr(i)},i=o("left",e.x),a=o("top",e.y),u=o("right",e.right),c=o("bottom",e.bottom);return yr(i,a,u-i,c-a)}(o,e.restriction,a),c=e.x+a.left,s=e.y+a.top,l=yr(c,s,t,n),d=function determinePosition(e,t){var n=t.x,o=t.y,i=t.right,a=t.bottom,u=e.x,c=e.y,s=e.right,l=e.bottom,d=e.width,m=e.height;return{originInBounds:u>=n&&u<=i&&c>=o&&c<=a,sizeInBounds:s<=i&&s>=n&&l<=a&&l>=o,visibleW:Math.min(d,u>=n?i-u:s-n),visibleH:Math.min(m,c>=o?a-c:l-o)}}(l,u),m=d.originInBounds,g=d.sizeInBounds,p=d.visibleW,h=d.visibleH,v=m&&g,b=v?l:function calcReposition(e,t){var n=t.x,o=t.y,i=t.right,a=t.bottom,u=e.x,c=e.y,s=e.width,l=e.height,d=Math.max(n,i-s),m=Math.max(o,a-l),g=qc(u,n,d),p=qc(c,o,m),h=Math.min(g+s,i)-g,v=Math.min(p+l,a)-p;return yr(g,p,h,v)}(l,u),y=b.width>0&&b.height>0,C=function calcMaxSizes(e,t,n){var o=z(t.bottom-n.y),i=z(n.bottom-t.y),a=function cataVertical(e,t,n,o){return e.fold(t,t,o,o,t,o,n,n)}(e,i,i,o),u=z(t.right-n.x),c=z(n.right-t.x),s=function cataHorizontal(e,t,n,o){return e.fold(t,o,t,o,n,n,t,o)}(e,c,c,u);return{maxWidth:s,maxHeight:a}}(e.direction,b,o),w=C.maxWidth,x={rect:b,maxHeight:C.maxHeight,maxWidth:w,direction:e.direction,placement:e.placement,classes:{on:i.classesOn,off:i.classesOff},layout:e.label,testY:s};return v||e.alwaysFit?Js.fit(x):Js.nofit(x,p,h,y)},el=function singleton(e){var t=si(K.none()),n=function revoke(){return t.get().each(e)};return{clear:function clear(){n(),t.set(K.none())},isSet:function isSet(){return t.get().isSome()},get:function get(){return t.get()},set:function set(e){n(),t.set(K.some(e))}}},tl=function unbindable(){return el((function(e){return e.unbind()}))},nl=function value$2(){var e=el(F);return s(s({},e),{},{on:function on(t){return e.get().each(t)}})},rl=q,ol=function bind(e,t,n){return function bind$2(e,t,n,o){return Qn(e,t,n,o,!1)}(e,t,rl,n)},il=function capture(e,t,n){return function capture$1(e,t,n,o){return Qn(e,t,n,o,!0)}(e,t,rl,n)},al=Jn,ul=["top","bottom","right","left"],cl="data-alloy-transition-timer",sl=function isTransitioning$1(e,t){return function hasAll(e,t){return he(t,(function(t){return Bu(e,t)}))}(e,t.classes)},ll=function hasChanges(e,t){var n=function round(e){return parseFloat(e).toFixed(3)};return Pe(t,(function(t,o){return!function equals(e,t){return Ue(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:U).getOr(e.isNone()&&t.isNone())}(e[o].map(n),t.map(n))})).isSome()},fl=function setupTransitionListeners(e,t){var n,o=tl(),i=tl(),a=function isSourceTransition(t){var n,o=null!==(n=t.raw.pseudoElement)&&void 0!==n?n:"";return bt(t.target,e)&&Qe(o)&&ne(ul,t.raw.propertyName)},u=function transitionDone(u){if(M(u)||a(u)){o.clear(),i.clear();var c=null===u||void 0===u?void 0:u.raw.type;(M(c)||c===Vi())&&(clearTimeout(n),Yt(e,cl),Pu(e,t.classes))}},c=ol(e,Ui(),(function(t){a(t)&&(c.unbind(),o.set(ol(e,Vi(),u)),i.set(ol(e,zi(),u)))})),s=function getTransitionDuration(e){var t=function get(t){var n=nn(e,t).split(/\s*,\s*/);return se(n,Je)},n=function parse(e){if(T(e)&&/^[\d.]+/.test(e)){var t=parseFloat(e);return Ye(e,"ms")?t:1e3*t}return 0},o=t("transition-delay"),i=t("transition-duration");return fe(i,(function(e,t,i){var a=n(o[i])+n(t);return Math.max(e,a)}),0)}(e);requestAnimationFrame((function(){n=setTimeout(u,s+17),Wt(e,cl,n)}))},dl=function applyTransitionCss(e,t,n,o,i,a){var u=function shouldApplyTransitionCss(e,t,n){return n.exists((function(n){var o=e.mode;return"all"===o||n[o]!==t[o]}))}(o,i,a);if(u||sl(e,o)){Qt(e,"position",n.position);var c=Us(t,e),l=Vs(t,s(s({},i),{},{rect:c})),d=ye(ul,(function(e){return l[e]}));ll(n,d)&&(tn(e,d),u&&function startTransitioning(e,t){Iu(e,t.classes),qt(e,cl).each((function(t){clearTimeout(parseInt(t,10)),Yt(e,cl)})),fl(e,t)}(e,o),ln(e))}else Pu(e,o.classes)},ml=function layout(e,t,n,o){sn(t,"max-height"),sn(t,"max-width");var i=function elementSize(e){return{width:wn(e),height:gn(e)}}(t);return function attempts(e,t,n,o,i,a){var u=o.width,c=o.height,s=function attemptBestFit(t,s,l,d,m){var g=t(n,o,i,e,a),p=Qs(g,u,c,a);return p.fold(z(p),(function(e,t,n,o){return(m===o?n>d||t>l:!m&&o)?p:Js.nofit(s,l,d,m)}))},l=fe(t,(function(e,t){var n=curry(s,t);return e.fold(z(e),n)}),Js.nofit({rect:n,maxHeight:o.height,maxWidth:o.width,direction:Hc(),placement:"southeast",classes:{on:[],off:[]},layout:"none",testY:n.y},-1,-1,!1));return l.fold(V,V)}(t,o.preference,e,i,n,o.bounds)},gl=function setPlacement(e,t){!function setPlacement$1(e,t){Wt(e,Ys,t)}(e,t.placement)},pl=function setMaxHeight(e,t){!function setMax$1(e,t){var n=dn.max(e,t,["margin-top","border-top-width","padding-top","padding-bottom","border-bottom-width","margin-bottom"]);Qt(e,"max-height",n+"px")}(e,Math.floor(t))},hl=z((function(e,t){pl(e,t),en(e,{"overflow-x":"hidden","overflow-y":"auto"})})),vl=z((function(e,t){pl(e,t)})),bl=function defaultOr(e,t,n){return void 0===e[t]?n:e[t]},yl=function go(e,t,n,o){var i=ml(e,t,n,o);return function position$2(e,t,n){var o=Vs(n.origin,t);n.transition.each((function(i){dl(e,n.origin,o,i,t,n.lastPlacement)})),Hs(e,o)}(t,i,o),gl(t,i),function setClasses(e,t){var n=t.classes;Pu(e,n.off),Iu(e,n.on)}(t,i),function setHeight(e,t,n){(0,n.maxHeightFunction)(e,t.maxHeight)}(t,i,o),function setWidth(e,t,n){(0,n.maxWidthFunction)(e,t.maxWidth)}(t,i,o),{layout:i.layout,placement:i.placement}},Cl=["valignCentre","alignLeft","alignRight","alignCentre","top","bottom","left","right","inset"],wl=function nu$5(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,i=e*o,a=t*o,u=function getClasses(e){return Fe(n,e).getOr([])},c=function make(e,t,n){var o=be(Cl,n);return{offset:pn(e,t),classesOn:pe(n,u),classesOff:pe(o,u)}};return{southeast:function southeast(){return c(-e,t,["top","alignLeft"])},southwest:function southwest(){return c(e,t,["top","alignRight"])},south:function south(){return c(-e/2,t,["top","alignCentre"])},northeast:function northeast(){return c(-e,-t,["bottom","alignLeft"])},northwest:function northwest(){return c(e,-t,["bottom","alignRight"])},north:function north(){return c(-e/2,-t,["bottom","alignCentre"])},east:function east(){return c(e,-t/2,["valignCentre","left"])},west:function west(){return c(-e,-t/2,["valignCentre","right"])},insetNortheast:function insetNortheast(){return c(i,a,["top","alignLeft","inset"])},insetNorthwest:function insetNorthwest(){return c(-i,a,["top","alignRight","inset"])},insetNorth:function insetNorth(){return c(-i/2,a,["top","alignCentre","inset"])},insetSoutheast:function insetSoutheast(){return c(i,-a,["bottom","alignLeft","inset"])},insetSouthwest:function insetSouthwest(){return c(-i,-a,["bottom","alignRight","inset"])},insetSouth:function insetSouth(){return c(-i/2,-a,["bottom","alignCentre","inset"])},insetEast:function insetEast(){return c(-i,-a/2,["valignCentre","right","inset"])},insetWest:function insetWest(){return c(i,-a/2,["valignCentre","left","inset"])}}},xl=function fallback(){return wl(0,0,{})},Sl=V,kl=function onDirection(e,t){return function(n){return"rtl"===Tl(n)?t:e}},Tl=function getDirection(e){return"rtl"===nn(e,"direction")?"rtl":"ltr"};!function(e){e.TopToBottom="toptobottom",e.BottomToTop="bottomtotop"}(js||(js={}));var El="data-alloy-vertical-dir",Ol=function isBottomToTopDir(e){return cc(e,(function(e){return ft(e)&&Gt(e,"data-alloy-vertical-dir")===js.BottomToTop}))},Al=function schema$y(){return Jo("layouts",[Po("onLtr"),Po("onRtl"),Wo("onBottomLtr"),Wo("onBottomRtl")])},_l=function get$5(e,t,n,o,i,a,u){var c=u.map(Ol).getOr(!1),s=t.layouts.map((function(t){return t.onLtr(e)})),l=t.layouts.map((function(t){return t.onRtl(e)})),d=c?t.layouts.bind((function(t){return t.onBottomLtr.map((function(t){return t(e)}))})).or(s).getOr(i):s.getOr(n),m=c?t.layouts.bind((function(t){return t.onBottomRtl.map((function(t){return t(e)}))})).or(l).getOr(a):l.getOr(o);return kl(d,m)(e)},Dl=[Po("hotspot"),Wo("bubble"),ei("overrides",{}),Al(),Bc("placement",(function placement$4(e,t,n){var o=t.hotspot,i=Us(n,o.element),a=_l(e.element,t,hs(),vs(),gs(),ps(),K.some(t.hotspot.element));return K.some(Sl({anchorBox:i,bubble:t.bubble.getOr(xl()),overrides:t.overrides,layouts:a}))}))],Rl=[Po("x"),Po("y"),ei("height",0),ei("width",0),ei("bubble",xl()),ei("overrides",{}),Al(),Bc("placement",(function placement$3(e,t,n){var o=Ws(n,t.x,t.y),i=yr(o.left,o.top,t.width,t.height),a=_l(e.element,t,ds(),ms(),ds(),ms(),K.none());return K.some(Sl({anchorBox:i,bubble:t.bubble,overrides:t.overrides,layouts:a}))}))],Nl=li([{screen:["point"]},{absolute:["point","scrollLeft","scrollTop"]}]),Ml=function toFixed(e){return e.fold(V,(function(e,t,n){return e.translate(-t,-n)}))},Bl=function toAbsolute(e){return e.fold(V,V)},Il=function sum(e){return fe(e,(function(e,t){return e.translate(t.left,t.top)}),pn(0,0))},Pl=function sumAsAbsolute(e){var t=ae(e,Bl);return Il(t)},Ll=Nl.screen,Fl=Nl.absolute,Hl=function getRootPoint(e,t,n){var o=Ct(e.element),i=sr(o),a=function getOffset(e,t,n){var o=St(n.root).dom;return K.from(o.frameElement).map(nt.fromDom).filter((function hasSameOwner(t){var n=Ct(t),o=Ct(e.element);return bt(n,o)})).map(vn)}(e,0,n).getOr(i);return Fl(a,i.left,i.top)},$l=function getBox(e,t,n,o){var i=Ll(pn(e,t));return K.some(function pointed(e,t,n){return{point:e,width:t,height:n}}(i,n,o))},zl=function calcNewAnchor(e,t,n,o,i){return e.map((function(e){var a=[t,e.point],u=function cata$1(e,t,n,o){return e.fold(t,n,o)}(o,(function(){return Pl(a)}),(function(){return Pl(a)}),(function(){return function sumAsFixed(e){var t=ae(e,Ml);return Il(t)}(a)})),c=function rect(e,t,n,o){return{x:e,y:t,width:n,height:o}}(u.left,u.top,e.width,e.height),s=n.showAbove?gs():hs(),l=n.showAbove?ps():vs(),d=_l(i,n,s,l,s,l,K.none());return Sl({anchorBox:c,bubble:n.bubble.getOr(xl()),overrides:n.overrides,layouts:d})}))},Vl=[Po("node"),Po("root"),Wo("bubble"),Al(),ei("overrides",{}),ei("showAbove",!1),Bc("placement",(function placement$2(e,t,n){var o=Hl(e,0,t);return t.node.filter(zt).bind((function(i){var a=i.dom.getBoundingClientRect(),u=$l(a.left,a.top,a.width,a.height),c=t.node.getOr(e.element);return zl(u,o,t,n,c)}))}))],Ul=function create$3(e,t,n,o){return{start:e,soffset:t,finish:n,foffset:o}},Zl=li([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),Wl=(Zl.before,Zl.on,Zl.after,function getStart$1(e){return e.fold(V,V,V)}),jl=li([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Gl={domRange:jl.domRange,relative:jl.relative,exact:jl.exact,exactFromRange:function exactFromRange(e){return jl.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function getWin(e){var t=function getStart(e){return e.match({domRange:function domRange(e){return nt.fromDom(e.startContainer)},relative:function relative(e,t){return Wl(e)},exact:function exact(e,t,n,o){return e}})}(e);return St(t)},range:Ul},ql=function relativeToNative(e,t,n){var o=e.document.createRange();return function setStart(e,t){t.fold((function(t){e.setStartBefore(t.dom)}),(function(t,n){e.setStart(t.dom,n)}),(function(t){e.setStartAfter(t.dom)}))}(o,t),function setFinish(e,t){t.fold((function(t){e.setEndBefore(t.dom)}),(function(t,n){e.setEnd(t.dom,n)}),(function(t){e.setEndAfter(t.dom)}))}(o,n),o},Kl=function exactToNative(e,t,n,o,i){var a=e.document.createRange();return a.setStart(t.dom,n),a.setEnd(o.dom,i),a},Yl=function toRect(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}},Xl=li([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),Jl=function fromRange(e,t,n){return t(nt.fromDom(n.startContainer),n.startOffset,nt.fromDom(n.endContainer),n.endOffset)},Ql=function diagnose(e,t){var n=function getRanges(e,t){return t.match({domRange:function domRange(e){return{ltr:z(e),rtl:K.none}},relative:function relative(t,n){return{ltr:xn((function(){return ql(e,t,n)})),rtl:xn((function(){return K.some(ql(e,n,t))}))}},exact:function exact(t,n,o,i){return{ltr:xn((function(){return Kl(e,t,n,o,i)})),rtl:xn((function(){return K.some(Kl(e,o,i,t,n))}))}}})}(e,t);return function doDiagnose(e,t){var n=t.ltr();return n.collapsed?t.rtl().filter((function(e){return!1===e.collapsed})).map((function(e){return Xl.rtl(nt.fromDom(e.endContainer),e.endOffset,nt.fromDom(e.startContainer),e.startOffset)})).getOrThunk((function(){return Jl(0,Xl.ltr,n)})):Jl(0,Xl.ltr,n)}(0,n)},ef=function asLtrRange(e,t){return Ql(e,t).match({ltr:function ltr(t,n,o,i){var a=e.document.createRange();return a.setStart(t.dom,n),a.setEnd(o.dom,i),a},rtl:function rtl(t,n,o,i){var a=e.document.createRange();return a.setStart(o.dom,i),a.setEnd(t.dom,n),a}})};Xl.ltr,Xl.rtl;var tf,nf=function ancestors(e,t,n){return se(function parents(e,t){for(var n=I(t)?t:G,o=e.dom,i=[];null!==o.parentNode&&void 0!==o.parentNode;){var a=o.parentNode,u=nt.fromDom(a);if(i.push(u),!0===n(u))break;o=a}return i}(e,n),t)},rf=function descendants(e,t){return function all$3(e,t){var n=void 0===t?document:t.dom;return vt(n)?[]:ae(n.querySelectorAll(e),nt.fromDom)}(t,e)},of=function after(e,t,n,o){var i=function makeRange(e,t,n,o){var i=Ct(e).dom.createRange();return i.setStart(e.dom,t),i.setEnd(n.dom,o),i}(e,t,n,o),a=bt(e,n)&&t===o;return i.collapsed&&!a},af=function readRange(e){if(e.rangeCount>0){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return K.some(Ul(nt.fromDom(t.startContainer),t.startOffset,nt.fromDom(n.endContainer),n.endOffset))}return K.none()},uf=function doGetExact(e){if(null===e.anchorNode||null===e.focusNode)return af(e);var t=nt.fromDom(e.anchorNode),n=nt.fromDom(e.focusNode);return of(t,e.anchorOffset,n,e.focusOffset)?K.some(Ul(t,e.anchorOffset,n,e.focusOffset)):af(e)},cf=function getExact(e){return function getNativeSelection(e){return K.from(e.getSelection())}(e).filter((function(e){return e.rangeCount>0})).bind(uf)},sf=function getFirstRect(e,t){return function getFirstRect$1(e){var t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?K.some(n).map(Yl):K.none()}(ef(e,t))},lf=function getBounds$1(e,t){return function getBounds$2(e){var t=e.getBoundingClientRect();return t.width>0||t.height>0?K.some(t).map(Yl):K.none()}(ef(e,t))},ff=function NodeValue(e,t){var n=function getOption(t){return e(t)?K.from(t.dom.nodeValue):K.none()};return{get:function get(o){if(!e(o))throw new Error("Can only get "+t+" value of a "+t+" node");return n(o).getOr("")},getOption:n,set:function set(n,o){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=o}}}(dt,"text"),df=function point(e,t){return{element:e,offset:t}},mf=function descendOnce$1(e,t){var n=Ot(e);if(0===n.length)return df(e,t);if(t<n.length)return df(n[t],0);var o=n[n.length-1],i=dt(o)?function get$4(e){return ff.get(e)}(o).length:Ot(o).length;return df(o,i)},gf=function descendOnce(e,t){return dt(e)?df(e,t):mf(e,t)},pf=function isSimRange(e){return void 0!==e.foffset},hf=function getAnchorSelection(e,t){return t.getSelection.getOrThunk((function(){return function(){return cf(e)}}))().map((function(e){if(pf(e)){var t=gf(e.start,e.soffset),n=gf(e.finish,e.foffset);return Gl.range(t.element,t.offset,n.element,n.offset)}return e}))},vf=[Wo("getSelection"),Po("root"),Wo("bubble"),Al(),ei("overrides",{}),ei("showAbove",!1),Bc("placement",(function placement$1(e,t,n){var o=St(t.root).dom,i=Hl(e,0,t),a=hf(o,t).bind((function(e){if(pf(e)){var t=lf(o,Gl.exactFromRange(e)).orThunk((function(){var t=nt.fromText("\ufeff");tr(e.start,t);var n=sf(o,Gl.exact(t,0,t,1));return cr(t),n}));return t.bind((function(e){return $l(e.left,e.top,e.width,e.height)}))}var n=De(e,(function(e){return e.dom.getBoundingClientRect()})),i={left:Math.min(n.firstCell.left,n.lastCell.left),right:Math.max(n.firstCell.right,n.lastCell.right),top:Math.min(n.firstCell.top,n.lastCell.top),bottom:Math.max(n.firstCell.bottom,n.lastCell.bottom)};return $l(i.left,i.top,i.right-i.left,i.bottom-i.top)})),u=hf(o,t).bind((function(e){return pf(e)?ft(e.start)?K.some(e.start):Tt(e.start):K.some(e.firstCell)})).getOr(e.element);return zl(a,i,t,n,u)}))],bf="link-layout",yf=function eastX(e){return e.x+e.width},Cf=function westX(e,t){return e.x-t.width},wf=function northY$1(e,t){return e.y-t.height+e.height},xf=function southY$1(e){return e.y},Sf=function southeast$1(e,t,n){return Lc(yf(e),xf(e),n.southeast(),Hc(),"southeast",Kc(e,{left:0,top:2}),bf)},kf=function southwest$1(e,t,n){return Lc(Cf(e,t),xf(e),n.southwest(),$c(),"southwest",Kc(e,{right:1,top:2}),bf)},Tf=function northeast$1(e,t,n){return Lc(yf(e),wf(e,t),n.northeast(),zc(),"northeast",Kc(e,{left:0,bottom:3}),bf)},Ef=function northwest$1(e,t,n){return Lc(Cf(e,t),wf(e,t),n.northwest(),Vc(),"northwest",Kc(e,{right:1,bottom:3}),bf)},Of=function all(){return[Sf,kf,Tf,Ef]},Af=function allRtl(){return[kf,Sf,Ef,Tf]},_f=[Po("item"),Al(),ei("overrides",{}),Bc("placement",(function placement(e,t,n){var o=Us(n,t.item.element),i=_l(e.element,t,Of(),Af(),Of(),Af(),K.none());return K.some(Sl({anchorBox:o,bubble:xl(),overrides:t.overrides,layouts:i}))}))],Df=Ro("type",{selection:vf,node:Vl,hotspot:Dl,submenu:_f,makeshift:Rl}),Rf=[Zo("classes",bo),oi("mode","all",["all","layout","placement"])],Nf=[ei("useFixed",G),Wo("getBounds")],Mf=[Lo("anchor",Df),Jo("transition",Rf)],Bf=function place(e,t,n,o,i,a){return function simple(e,t,n,o,i,a,u,c){var s=bl(u,"maxHeightFunction",hl()),l=bl(u,"maxWidthFunction",F),d=e.anchorBox,m=e.origin,g={bounds:Zs(m,a),origin:m,preference:o,maxHeightFunction:s,maxWidthFunction:l,lastPlacement:i,transition:c};return yl(d,t,n,g)}(Ks(t.anchorBox,e),o.element,t.bubble,t.layouts,i,n,t.overrides,a)},If=function positionWithinBounds(e,t,n,o,i,a){var u=_o("placement.info",co(Mf),i),c=u.anchor,s=o.element,l=n.get(o.uid);Ls((function(){Qt(s,"position","fixed");var i=an(s,"visibility");Qt(s,"visibility","hidden");var d=t.useFixed()?function getFixedOrigin(){var e=document.documentElement;return qs(0,0,e.clientWidth,e.clientHeight)}():function getRelativeOrigin(e){var t=vn(e.element),n=e.element.dom.getBoundingClientRect();return Gs(t.left,t.top,n.width,n.height)}(e);c.placement(e,c,d).each((function(e){var i=a.orThunk((function(){return t.getBounds.map(j)})),c=Bf(d,e,i,o,l,u.transition);n.set(o.uid,c)})),i.fold((function(){sn(s,"visibility")}),(function(e){Qt(s,"visibility",e)})),an(s,"left").isNone()&&an(s,"top").isNone()&&an(s,"right").isNone()&&an(s,"bottom").isNone()&&ze(an(s,"position"),"fixed")&&sn(s,"position")}),s)},Pf=Object.freeze({__proto__:null,position:function position$1(e,t,n,o,i){var a=K.none();If(e,t,n,o,i,a)},positionWithinBounds:If,getMode:function getMode(e,t,n){return t.useFixed()?"fixed":"absolute"},reset:function reset$1(e,t,n,o){var i=o.element;ue(["position","left","right","top","bottom"],(function(e){return sn(i,e)})),function reset$2(e){Yt(e,Ys)}(i),n.clear(o.uid)}}),Lf=Object.freeze({__proto__:null,init:function init$g(){var e={};return mu({readState:function readState(){return e},clear:function clear(t){B(t)?delete e[t]:e={}},set:function set(t,n){e[t]=n},get:function get(t){return Fe(e,t)}})}}),Ff=Es({fields:Nf,name:"positioning",active:Rs,apis:Pf,state:Lf}),Hf=function isConnected(e){return e.getSystem().isConnected()},$f=function fireDetaching(e){ya(e,sa());var t=e.components();ue(t,fireDetaching)},zf=function fireAttaching(e){var t=e.components();ue(t,fireAttaching),ya(e,ca())},Vf=function virtualAttach(e,t){e.getSystem().addToWorld(t),zt(e.element)&&zf(t)},Uf=function virtualDetach(e){$f(e),e.getSystem().removeFromWorld(e)},Zf=function attach$1(e,t){ir(e.element,t.element)},Wf=function replaceChildren(e,t,n){var o=e.components();!function detachChildren$1(e){ue(e.components(),(function(e){return cr(e.element)})),ur(e.element),e.syncComponents()}(e);var i=n(t),a=be(o,i);ue(a,(function(t){$f(t),e.getSystem().removeFromWorld(t)})),ue(i,(function(t){Hf(t)?Zf(e,t):(e.getSystem().addToWorld(t),Zf(e,t),zt(e.element)&&zf(t))})),e.syncComponents()},jf=function attach(e,t){Gf(e,t,ir)},Gf=function attachWith(e,t,n){e.getSystem().addToWorld(t),n(e.element,t.element),zt(e.element)&&zf(t),e.syncComponents()},qf=function doDetach(e){$f(e),cr(e.element),e.getSystem().removeFromWorld(e)},Kf=function detach(e){var t=kt(e.element).bind((function(t){return e.getSystem().getByDom(t).toOptional()}));qf(e),t.each((function(e){e.syncComponents()}))},Yf=function detachChildren(e){var t=e.components();ue(t,qf),ur(e.element),e.syncComponents()},Xf=function attachSystem(e,t){Qf(e,t,ir)},Jf=function attachSystemAfter(e,t){Qf(e,t,nr)},Qf=function attachSystemWith(e,t,n){n(e,t.element);var o=Ot(t.element);ue(o,(function(e){t.getByDom(e).each(zf)}))},ed=function detachSystem(e){var t=Ot(e.element);ue(t,(function(t){e.getByDom(t).each($f)})),cr(e.element)},td=function rebuild(e,t,n,o){n.get().each((function(t){Yf(e)}));var i=t.getAttachPoint(e);jf(i,e);var a=e.getSystem().build(o);return jf(e,a),n.set(a),a},nd=function open$1(e,t,n,o){var i=td(e,t,n,o);return t.onOpen(e,i),i},rd=function close$1(e,t,n){n.get().each((function(o){Yf(e),Kf(e),t.onClose(e,o),n.clear()}))},od=function isOpen$1(e,t,n){return n.isOpen()},id=function cloak(e,t,n){var o=t.getAttachPoint(e);Qt(e.element,"position",Ff.getMode(o)),function store(e,t,n,o){an(e.element,t).fold((function(){Yt(e.element,n)}),(function(t){Wt(e.element,n,t)})),Qt(e.element,t,o)}(e,"visibility",t.cloakVisibilityAttr,"hidden")},ad=function decloak(e,t,n){(function hasPosition(e){return re(["top","left","right","bottom"],(function(t){return an(e,t).isSome()}))})(e.element)||sn(e.element,"position"),function restore(e,t,n){qt(e.element,n).fold((function(){return sn(e.element,t)}),(function(n){return Qt(e.element,t,n)}))}(e,"visibility",t.cloakVisibilityAttr)},ud=Object.freeze({__proto__:null,cloak:id,decloak:ad,open:nd,openWhileCloaked:function openWhileCloaked(e,t,n,o,i){id(e,t),nd(e,t,n,o),i(),ad(e,t)},close:rd,isOpen:od,isPartOf:function isPartOf(e,t,n,o){return od(0,0,n)&&n.get().exists((function(n){return t.isPartOf(e,n,o)}))},getState:function getState$2(e,t,n){return n.get()},setContent:function setContent(e,t,n,o){return n.get().map((function(){return td(e,t,n,o)}))}}),cd=Object.freeze({__proto__:null,events:function events$g(e,t){return Ta([Aa(ta(),(function(n,o){rd(n,e,t)}))])}}),sd=[Dc("onOpen"),Dc("onClose"),Po("isPartOf"),Po("getAttachPoint"),ei("cloakVisibilityAttr","data-precloak-visibility")],ld=Object.freeze({__proto__:null,init:function init$f(){var e=nl(),t=z("not-implemented");return mu({readState:t,isOpen:e.isSet,clear:e.clear,set:e.set,get:e.get})}}),fd=Es({fields:sd,name:"sandboxing",active:cd,apis:ud,state:ld}),dd=z("dismiss.popups"),md=z("reposition.popups"),gd=z("mouse.released"),pd=uo([ei("isExtraPart",G),Jo("fireEventInstead",[ei("event",la())])]),hd=function receivingChannel$1(e){var t=_o("Dismissal",pd,e);return l({},dd(),{schema:uo([Po("target")]),onReceive:function onReceive(e,n){fd.isOpen(e)&&(fd.isPartOf(e,n.target)||t.isExtraPart(e,n.target)||t.fireEventInstead.fold((function(){return fd.close(e)}),(function(t){return ya(e,t.event)})))}})},vd=uo([Jo("fireEventInstead",[ei("event",fa())]),zo("doReposition")]),bd=function receivingChannel(e){var t=_o("Reposition",vd,e);return l({},md(),{onReceive:function onReceive(e){fd.isOpen(e)&&t.fireEventInstead.fold((function(){return t.doReposition(e)}),(function(t){return ya(e,t.event)}))}})},yd=function onLoad$5(e,t,n){t.store.manager.onLoad(e,t,n)},Cd=function onUnload$2(e,t,n){t.store.manager.onUnload(e,t,n)},wd=Object.freeze({__proto__:null,onLoad:yd,onUnload:Cd,setValue:function setValue$3(e,t,n,o){t.store.manager.setValue(e,t,n,o)},getValue:function getValue$3(e,t,n){return t.store.manager.getValue(e,t,n)},getState:function getState$1(e,t,n){return n}}),xd=Object.freeze({__proto__:null,events:function events$f(e,t){var n=e.resetOnDom?[Pa((function(n,o){yd(n,e,t)})),La((function(n,o){Cd(n,e,t)}))]:[Cs(e,t,yd)];return Ta(n)}}),Sd=function memory$1(){var e=si(null);return mu({set:e.set,get:e.get,isNotSet:function isNotSet(){return null===e.get()},clear:function clear(){e.set(null)},readState:function readState(){return{mode:"memory",value:e.get()}}})},kd=function dataset(){var e=si({}),t=si({});return mu({readState:function readState(){return{mode:"dataset",dataByValue:e.get(),dataByText:t.get()}},lookup:function lookup(n){return Fe(e.get(),n).orThunk((function(){return Fe(t.get(),n)}))},update:function update(n){var o=e.get(),i=t.get(),a={},u={};ue(n,(function(e){a[e.value]=e,Fe(e,"meta").each((function(t){Fe(t,"text").each((function(t){u[t]=e}))}))})),e.set(s(s({},o),a)),t.set(s(s({},i),u))},clear:function clear(){e.set({}),t.set({})}})},Td=Object.freeze({__proto__:null,memory:Sd,dataset:kd,manual:function manual(){return mu({readState:F})},init:function init$e(e){return e.store.manager.state(e)}}),Ed=function setValue$2(e,t,n,o){var i=t.store;n.update([o]),i.setValue(e,o),t.onSetValue(e,o)},Od=[Wo("initialValue"),Po("getFallbackEntry"),Po("getDataKey"),Po("setValue"),Bc("manager",{setValue:Ed,getValue:function getValue$2(e,t,n){var o=t.store,i=o.getDataKey(e);return n.lookup(i).getOrThunk((function(){return o.getFallbackEntry(i)}))},onLoad:function onLoad$4(e,t,n){t.store.initialValue.each((function(o){Ed(e,t,n,o)}))},onUnload:function onUnload$1(e,t,n){n.clear()},state:kd})],Ad=[Po("getValue"),ei("setValue",F),Wo("initialValue"),Bc("manager",{setValue:function setValue$1(e,t,n,o){t.store.setValue(e,o),t.onSetValue(e,o)},getValue:function getValue$1(e,t,n){return t.store.getValue(e)},onLoad:function onLoad$3(e,t,n){t.store.initialValue.each((function(n){t.store.setValue(e,n)}))},onUnload:F,state:du.init})],_d=[Wo("initialValue"),Bc("manager",{setValue:function setValue(e,t,n,o){n.set(o),t.onSetValue(e,o)},getValue:function getValue(e,t,n){return n.get()},onLoad:function onLoad$2(e,t,n){t.store.initialValue.each((function(e){n.isNotSet()&&n.set(e)}))},onUnload:function onUnload(e,t,n){n.clear()},state:Sd})],Dd=[ti("store",{mode:"memory"},Ro("mode",{memory:_d,manual:Ad,dataset:Od})),Dc("onSetValue"),ei("resetOnDom",!1)],Rd=Es({fields:Dd,name:"representing",active:xd,apis:wd,extra:{setValueFrom:function setValueFrom(e,t){var n=Rd.getValue(t);Rd.setValue(e,n)}},state:Td}),Nd=function field(e,t){return ci(e,{},ae(t,(function(t){return function forbid(e,t){return Mo(e,e,{tag:"option",process:{}},Qr((function(n){return Ir("The field: "+e+" is forbidden. "+t)})))}(t.name(),"Cannot configure "+t.name()+" for "+e)})).concat([Bo("dump",V)]))},Md=function get$3(e){return e.dump},Bd=function augment(e,t){return s(s({},ks(t)),e.dump)},Id=Nd,Pd=Bd,Ld="placeholder",Fd=li([{single:["required","valueThunk"]},{multiple:["required","valueThunks"]}]),Hd=function isSubstituted(e){return He(e,"uiType")},$d=function scan(e,t,n,o){return Hd(n)&&n.uiType===Ld?function subPlaceholder(e,t,n,o){return e.exists((function(e){return e!==n.owner}))?Fd.single(!0,z(n)):Fe(o,n.name).fold((function(){throw new Error("Unknown placeholder component: "+n.name+"\nKnown: ["+Oe(o)+"]\nNamespace: "+e.getOr("none")+"\nSpec: "+JSON.stringify(n,null,2))}),(function(e){return e.replace()}))}(e,0,n,o):Fd.single(!1,z(n))},zd=function substitute(e,t,n,o){return $d(e,0,n,o).fold((function(i,a){var u=Hd(n)?a(t,n.config,n.validated):a(t),c=Fe(u,"components").getOr([]),l=pe(c,(function(n){return substitute(e,t,n,o)}));return[s(s({},u),{},{components:l})]}),(function(e,o){if(Hd(n)){var i=o(t,n.config,n.validated);return n.validated.preprocess.getOr(V)(i)}return o(t)}))},Vd=function substituteAll(e,t,n,o){return pe(n,(function(n){return zd(e,t,n,o)}))},Ud=function substitutePlaces(e,t,n,o){var i=De(o,(function(e,t){return function oneReplace(e,t){var n=!1;return{name:z(e),required:function required(){return t.fold((function(e,t){return e}),(function(e,t){return e}))},used:function used(){return n},replace:function replace(){if(n)throw new Error("Trying to use the same placeholder more than once: "+e);return n=!0,t}}}(t,e)})),a=Vd(e,t,n,i);return _e(i,(function(n){if(!1===n.used()&&n.required())throw new Error("Placeholder: "+n.name()+" was not found in components list\nNamespace: "+e.getOr("none")+"\nComponents: "+JSON.stringify(t.components,null,2))})),a},Zd=Fd.single,Wd=Fd.multiple,jd=z(Ld),Gd=li([{required:["data"]},{external:["data"]},{optional:["data"]},{group:["data"]}]),qd=ei("factory",{sketch:V}),Kd=ei("schema",[]),Yd=Po("name"),Xd=Mo("pname","pname",jr((function(e){return"<alloy."+qa(e.name)+">"})),po()),Jd=Bo("schema",(function(){return[Wo("preprocess")]})),Qd=ei("defaults",z({})),em=ei("overrides",z({})),tm=co([qd,Kd,Yd,Xd,Qd,em]),nm=co([qd,Kd,Yd,Qd,em]),rm=co([qd,Kd,Yd,Xd,Qd,em]),om=co([qd,Jd,Yd,Po("unit"),Xd,Qd,em]),im=function asNamedPart(e){return e.fold(K.some,K.none,K.some,K.some)},am=function name$2(e){var t=function get(e){return e.name};return e.fold(t,t,t,t)},um=function convert(e,t){return function(n){var o=_o("Converting part type",t,n);return e(o)}},cm=um(Gd.required,tm),sm=um(Gd.external,nm),lm=um(Gd.optional,rm),fm=um(Gd.group,om),dm=z("entirety"),mm=Object.freeze({__proto__:null,required:cm,external:sm,optional:lm,group:fm,asNamedPart:im,name:am,asCommon:function asCommon(e){return e.fold(V,V,V,V)},original:dm}),gm=function combine(e,t,n,o){return Zr(t.defaults(e,n,o),n,{uid:e.partUids[t.name]},t.overrides(e,n,o))},pm=function generate$3(e,t){var n={};return ue(t,(function(t){im(t).each((function(t){var o=hm(e,t.pname);n[t.name]=function(n){var i=_o("Part: "+t.name+" in "+e,co(t.schema),n);return s(s({},o),{},{config:n,validated:i})}}))})),n},hm=function doGenerateOne(e,t){return{uiType:jd(),owner:e,name:t}},vm=function generateOne$1(e,t,n){return{uiType:jd(),owner:e,name:t,config:n,validated:{}}},bm=function schemas(e){return pe(e,(function(e){return e.fold(K.none,K.some,K.none,K.none).map((function(e){return Vo(e.name,e.schema.concat([Ic(dm())]))})).toArray()}))},ym=function names(e){return ae(e,am)},Cm=function substitutes(e,t,n){return function subs(e,t,n){var o={},i={};return ue(n,(function(e){e.fold((function(e){o[e.pname]=Zd(!0,(function(t,n,o){return e.factory.sketch(gm(t,e,n,o))}))}),(function(e){var n=t.parts[e.name];i[e.name]=z(e.factory.sketch(gm(t,e,n[dm()]),n))}),(function(e){o[e.pname]=Zd(!1,(function(t,n,o){return e.factory.sketch(gm(t,e,n,o))}))}),(function(e){o[e.pname]=Wd(!0,(function(t,n,o){var i=t[e.name];return ae(i,(function(n){return e.factory.sketch(Zr(e.defaults(t,n,o),n,e.overrides(t,n)))}))}))}))})),{internals:z(o),externals:z(i)}}(0,t,n)},wm=function components$1(e,t,n){return Ud(K.some(e),t,t.components,n)},xm=function getPart(e,t,n){var o=t.partUids[n];return e.getSystem().getByUid(o).toOptional()},Sm=function getPartOrDie(e,t,n){return xm(e,t,n).getOrDie("Could not find part: "+n)},km=function getParts(e,t,n){var o={},i=t.partUids,a=e.getSystem();return ue(n,(function(e){o[e]=z(a.getByUid(i[e]))})),o},Tm=function getAllParts(e,t){var n=e.getSystem();return De(t.partUids,(function(e,t){return z(n.getByUid(e))}))},Em=function getAllPartNames(e){return Oe(e.partUids)},Om=function getPartsOrDie(e,t,n){var o={},i=t.partUids,a=e.getSystem();return ue(n,(function(e){o[e]=z(a.getByUid(i[e]).getOrDie())})),o},Am=function defaultUids(e,t){var n=ym(t);return gi(ae(n,(function(t){return{key:t,value:e+"-"+t}})))},_m=function defaultUidsSchema(e){return Mo("partUids","partUids",qr((function(t){return Am(t.uid,e)})),po())},Dm=Object.freeze({__proto__:null,generate:pm,generateOne:vm,schemas:bm,names:ym,substitutes:Cm,components:wm,defaultUids:Am,defaultUidsSchema:_m,getAllParts:Tm,getAllPartNames:Em,getPart:xm,getPartOrDie:Sm,getParts:km,getPartsOrDie:Om}),Rm=function asRawOrDie(e,t,n,o,i){var a=function base(e,t){return(e.length>0?[Vo("parts",e)]:[]).concat([Po("uid"),ei("dom",{}),ei("components",[]),Ic("originalSpec"),ei("debug.sketcher",{})]).concat(t)}(o,i);return _o(e+" [SpecSchema]",uo(a.concat(t)),n)},Nm=function composite$1(e,t,n,o,i){var a=Mm(i),u=bm(n),c=_m(n),s=Rm(e,t,a,u,[c]),l=Cm(0,s,n);return o(s,wm(e,s,l.internals()),a,l.externals())},Mm=function supplyUid(e){return function hasUid(e){return He(e,"uid")}(e)?e:s(s({},e),{},{uid:tu("uid")})},Bm=uo([Po("name"),Po("factory"),Po("configFields"),ei("apis",{}),ei("extraApis",{})]),Im=uo([Po("name"),Po("factory"),Po("configFields"),Po("partFields"),ei("apis",{}),ei("extraApis",{})]),Pm=function single(e){var t=_o("Sketcher for "+e.name,Bm,e),n=De(t.apis,fu),o=De(t.extraApis,(function(e,t){return uu(e,t)}));return s(s({name:t.name,configFields:t.configFields,sketch:function sketch(e){return function single$1(e,t,n,o){var i=Mm(o);return n(Rm(e,t,i,[],[]),i)}(t.name,t.configFields,t.factory,e)}},n),o)},Lm=function composite(e){var t=_o("Sketcher for "+e.name,Im,e),n=pm(t.name,t.partFields),o=De(t.apis,fu),i=De(t.extraApis,(function(e,t){return uu(e,t)}));return s(s({name:t.name,partFields:t.partFields,configFields:t.configFields,sketch:function sketch(e){return Nm(t.name,t.configFields,t.partFields,t.factory,e)},parts:n},o),i)},Fm=function inside(e){return pt("input")(e)&&"radio"!==Gt(e,"type")||pt("textarea")(e)},Hm=Object.freeze({__proto__:null,getCurrent:function getCurrent(e,t,n){return t.find(e)}}),$m=[Po("find")],zm=Es({fields:$m,name:"composing",apis:Hm}),Vm=["input","button","textarea","select"],Um=function onLoad$1(e,t,n){(t.disabled()?Km:Ym)(e,t)},Zm=function hasNative(e,t){return!0===t.useNative&&ne(Vm,ct(e.element))},Wm=function nativeDisable(e){Wt(e.element,"disabled","disabled")},jm=function nativeEnable(e){Yt(e.element,"disabled")},Gm=function ariaDisable(e){Wt(e.element,"aria-disabled","true")},qm=function ariaEnable(e){Wt(e.element,"aria-disabled","false")},Km=function disable(e,t,n){t.disableClass.each((function(t){Du(e.element,t)})),(Zm(e,t)?Wm:Gm)(e),t.onDisabled(e)},Ym=function enable(e,t,n){t.disableClass.each((function(t){Nu(e.element,t)})),(Zm(e,t)?jm:qm)(e),t.onEnabled(e)},Xm=function isDisabled(e,t){return Zm(e,t)?function nativeIsDisabled(e){return Kt(e.element,"disabled")}(e):function ariaIsDisabled(e){return"true"===Gt(e.element,"aria-disabled")}(e)},Jm=Object.freeze({__proto__:null,enable:Ym,disable:Km,isDisabled:Xm,onLoad:Um,set:function set$4(e,t,n,o){(o?Km:Ym)(e,t)}}),Qm=Object.freeze({__proto__:null,exhibit:function exhibit$5(e,t){return pu({classes:t.disabled()?t.disableClass.toArray():[]})},events:function events$e(e,t){return Ta([Ea(Xi(),(function(t,n){return Xm(t,e)})),Cs(e,t,Um)])}}),eg=[ai("disabled",G),ei("useNative",!0),Wo("disableClass"),Dc("onDisabled"),Dc("onEnabled")],tg=Es({fields:eg,name:"disabling",active:Qm,apis:Jm}),ng=function dehighlightAllExcept(e,t,n,o){var i=rf(e.element,"."+t.highlightClass);ue(i,(function(n){re(o,(function(e){return bt(e.element,n)}))||(Nu(n,t.highlightClass),e.getSystem().getByDom(n).each((function(n){t.onDehighlight(e,n),ya(n,ba())})))}))},rg=function highlight(e,t,n,o){ng(e,t,0,[o]),og(e,t,n,o)||(Du(o.element,t.highlightClass),t.onHighlight(e,o),ya(o,va()))},og=function isHighlighted(e,t,n,o){return Bu(o.element,t.highlightClass)},ig=function getByIndex(e,t,n,o){var i=rf(e.element,"."+t.itemClass);return K.from(i[o]).fold((function(){return Or.error(new Error("No element found with index "+o))}),e.getSystem().getByDom)},ag=function getFirst(e,t,n){return fc(e.element,"."+t.itemClass).bind((function(t){return e.getSystem().getByDom(t).toOptional()}))},ug=function getLast(e,t,n){var o=rf(e.element,"."+t.itemClass);return(o.length>0?K.some(o[o.length-1]):K.none()).bind((function(t){return e.getSystem().getByDom(t).toOptional()}))},cg=function getDelta$2(e,t,n,o){var i=rf(e.element,"."+t.itemClass),a=me(i,(function(e){return Bu(e,t.highlightClass)}));return a.bind((function(t){var n=Gc(t,o,0,i.length-1);return e.getSystem().getByDom(i[n]).toOptional()}))},sg=function getCandidates(e,t,n){var o=rf(e.element,"."+t.itemClass);return Ve(ae(o,(function(t){return e.getSystem().getByDom(t).toOptional()})))},lg=Object.freeze({__proto__:null,dehighlightAll:function dehighlightAll(e,t,n){return ng(e,t,0,[])},dehighlight:function dehighlight(e,t,n,o){og(e,t,n,o)&&(Nu(o.element,t.highlightClass),t.onDehighlight(e,o),ya(o,ba()))},highlight:rg,highlightFirst:function highlightFirst(e,t,n){ag(e,t).each((function(o){rg(e,t,n,o)}))},highlightLast:function highlightLast(e,t,n){ug(e,t).each((function(o){rg(e,t,n,o)}))},highlightAt:function highlightAt(e,t,n,o){ig(e,t,n,o).fold((function(e){throw e}),(function(o){rg(e,t,n,o)}))},highlightBy:function highlightBy(e,t,n,o){var i=sg(e,t);de(i,o).each((function(o){rg(e,t,n,o)}))},isHighlighted:og,getHighlighted:function getHighlighted(e,t,n){return fc(e.element,"."+t.highlightClass).bind((function(t){return e.getSystem().getByDom(t).toOptional()}))},getFirst:ag,getLast:ug,getPrevious:function getPrevious(e,t,n){return cg(e,t,0,-1)},getNext:function getNext(e,t,n){return cg(e,t,0,1)},getCandidates:sg}),fg=[Po("highlightClass"),Po("itemClass"),Dc("onHighlight"),Dc("onDehighlight")],dg=Es({fields:fg,name:"highlighting",apis:lg}),mg=[8],gg=[9],pg=[13],hg=[27],vg=[32],bg=[37],yg=[38],Cg=[39],wg=[40],xg=function cyclePrev(e,t,n){var o=ve(e.slice(0,t)),i=ve(e.slice(t+1));return de(o.concat(i),n)},Sg=function tryPrev(e,t,n){var o=ve(e.slice(0,t));return de(o,n)},kg=function cycleNext(e,t,n){var o=e.slice(0,t),i=e.slice(t+1);return de(i.concat(o),n)},Tg=function tryNext(e,t,n){var o=e.slice(t+1);return de(o,n)},Eg=function inSet(e){return function(t){var n=t.raw;return ne(e,n.which)}},Og=function and(e){return function(t){return he(e,(function(e){return e(t)}))}},Ag=function isShift$1(e){return!0===e.raw.shiftKey},_g=function isControl(e){return!0===e.raw.ctrlKey},Dg=Z(Ag),Rg=function rule(e,t){return{matches:e,classification:t}},Ng=function reportFocusShifting(e,t,n){t.exists((function(e){return n.exists((function(t){return bt(t,e)}))}))||Ca(e,da(),{prevFocus:t,newFocus:n})},Mg=function dom$2(){var e=function get(e){return Ps(e.element)};return{get:e,set:function set(t,n){var o=e(t);t.getSystem().triggerFocus(n,t.element);var i=e(t);Ng(t,o,i)}}},Bg=function highlights(){var e=function get(e){return dg.getHighlighted(e).map((function(e){return e.element}))};return{get:e,set:function set(t,n){var o=e(t);t.getSystem().getByDom(n).fold(F,(function(e){dg.highlight(t,e)}));var i=e(t);Ng(t,o,i)}}};!function(e){e.OnFocusMode="onFocus",e.OnEnterOrSpaceMode="onEnterOrSpace",e.OnApiMode="onApi"}(tf||(tf={}));var Ig,Pg=function typical(e,t,n,o,i){var a=function processKey(e,t,n,o,i){return function choose(e,t){var n=de(e,(function(e){return e.matches(t)}));return n.map((function(e){return e.classification}))}(n(e,t,o,i),t.event).bind((function(n){return n(e,t,o,i)}))},u={schema:function schema(){return e.concat([ei("focusManager",Mg()),ti("focusInside","onFocus",To((function(e){return ne(["onFocus","onEnterOrSpace","onApi"],e)?Or.value(e):Or.error("Invalid value for focusInside")}))),Bc("handler",u),Bc("state",t),Bc("sendFocusIn",i)])},processKey:a,toEvents:function toEvents(e,t){var u=e.focusInside!==tf.OnFocusMode?K.none():i(e).map((function(n){return Aa(Gi(),(function(o,i){n(o,e,t),i.stop()}))})),c=[Aa(Pi(),(function(o,u){a(o,u,n,e,t).fold((function(){!function tryGoInsideComponent(n,o){var a=Eg(vg.concat(pg))(o.event);e.focusInside===tf.OnEnterOrSpaceMode&&a&&Ci(n,o)&&i(e).each((function(i){i(n,e,t),o.stop()}))}(o,u)}),(function(e){u.stop()}))})),Aa(Li(),(function(n,i){a(n,i,o,e,t).each((function(e){i.stop()}))}))];return Ta(u.toArray().concat(c))}};return u},Lg=function create$2(e){var t=[Wo("onEscape"),Wo("onEnter"),ei("selector",'[data-alloy-tabstop="true"]:not(:disabled)'),ei("firstTabstop",0),ei("useTabstopAt",q),Wo("visibilitySelector")].concat([e]),n=function isVisible(e,t){var n=e.visibilitySelector.bind((function(e){return dc(t,e)})).getOr(t);return mn(n)>0},o=function findCurrent(e,t){return t.focusManager.get(e).bind((function(e){return dc(e,t.selector)}))},i=function focusIn(e,t,o){(function findInitial(e,t){var o=rf(e.element,t.selector),i=se(o,(function(e){return n(t,e)}));return K.from(i[t.firstTabstop])})(e,t).each((function(n){t.focusManager.set(e,n)}))},a=function goFromTabstop(e,t,o,i,a){return a(t,o,(function(e){return function isTabstop(e,t){return n(e,t)&&e.useTabstopAt(t)}(i,e)})).fold((function(){return i.cyclic?K.some(!0):K.none()}),(function(t){return i.focusManager.set(e,t),K.some(!0)}))},u=function go(e,t,n,i){var u=rf(e.element,n.selector);return o(e,n).bind((function(t){return me(u,curry(bt,t)).bind((function(t){return a(e,u,t,n,i)}))}))},c=function goBackwards(e,t,n){var o=n.cyclic?xg:Sg;return u(e,0,n,o)},s=function goForwards(e,t,n){var o=n.cyclic?kg:Tg;return u(e,0,n,o)},l=function isFirstChild(e){return function parentNode(e){return kt(e)}(e).bind(_t).exists((function(t){return bt(t,e)}))},d=z([Rg(Og([Ag,Eg(gg)]),c),Rg(Eg(gg),s),Rg(Og([Dg,Eg(pg)]),(function execute(e,t,n){return n.onEnter.bind((function(n){return n(e,t)}))}))]),m=z([Rg(Eg(hg),(function exit(e,t,n){return n.onEscape.bind((function(n){return n(e,t)}))})),Rg(Eg(gg),(function goFromPseudoTabstop(e,t,n){return o(e,n).filter((function(e){return!n.useTabstopAt(e)})).bind((function(o){return(l(o)?c:s)(e,t,n)}))}))]);return Pg(t,du.init,d,m,(function(){return K.some(i)}))},Fg=Lg(Bo("cyclic",G)),Hg=Lg(Bo("cyclic",q)),$g=function defaultExecute(e,t,n){return Fm(n)&&Eg(vg)(t.event)?K.none():function doDefaultExecute(e,t,n){return xa(e,n,Xi()),K.some(!0)}(e,0,n)},zg=function stopEventForFirefox(e,t){return K.some(!0)},Vg=[ei("execute",$g),ei("useSpace",!1),ei("useEnter",!0),ei("useControlEnter",!1),ei("useDown",!1)],Ug=function execute$4(e,t,n){return n.execute(e,t,e.element)},Zg=Pg(Vg,du.init,(function getKeydownRules$5(e,t,n,o){var i=n.useSpace&&!Fm(e.element)?vg:[],a=n.useEnter?pg:[],u=n.useDown?wg:[],c=i.concat(a).concat(u);return[Rg(Eg(c),Ug)].concat(n.useControlEnter?[Rg(Og([_g,Eg(pg)]),Ug)]:[])}),(function getKeyupRules$5(e,t,n,o){return n.useSpace&&!Fm(e.element)?[Rg(Eg(vg),zg)]:[]}),(function(){return K.none()})),Wg=function flatgrid$1(){var e=nl();return mu({readState:function readState(){return e.get().map((function(e){return{numRows:String(e.numRows),numColumns:String(e.numColumns)}})).getOr({numRows:"?",numColumns:"?"})},setGridSize:function setGridSize(t,n){e.set({numRows:t,numColumns:n})},getNumRows:function getNumRows(){return e.get().map((function(e){return e.numRows}))},getNumColumns:function getNumColumns(){return e.get().map((function(e){return e.numColumns}))}})},jg=Object.freeze({__proto__:null,flatgrid:Wg,init:function init$d(e){return e.state(e)}}),Gg=function useH(e){return function(t,n,o,i){var a=e(t.element);return Xg(a,t,n,o,i)}},qg=function west$1(e,t){var n=kl(e,t);return Gg(n)},Kg=function east$1(e,t){var n=kl(t,e);return Gg(n)},Yg=function useV(e){return function(t,n,o,i){return Xg(e,t,n,o,i)}},Xg=function use(e,t,n,o,i){return o.focusManager.get(t).bind((function(n){return e(t.element,n,o,i)})).map((function(e){return o.focusManager.set(t,e),!0}))},Jg=Yg,Qg=Yg,ep=Yg,tp=function isVisible(e){return!function isHidden$1(e){return e.offsetWidth<=0&&e.offsetHeight<=0}(e.dom)},np=function locateVisible(e,t,n){var o=rf(e,n);return function locate(e,t){return me(e,t).map((function(t){return{index:t,candidates:e}}))}(se(o,tp),(function predicate(e){return bt(e,t)}))},rp=function findIndex(e,t){return me(e,(function(e){return bt(t,e)}))},op=function withGrid(e,t,n,o){return o(Math.floor(t/n),t%n).bind((function(t){var o=t.row*n+t.column;return o>=0&&o<e.length?K.some(e[o]):K.none()}))},ip=function cycleHorizontal$1(e,t,n,o,i){return op(e,t,o,(function(t,a){var u=t===n-1?e.length-t*o:o,c=Gc(a,i,0,u-1);return K.some({row:t,column:c})}))},ap=function cycleVertical$1(e,t,n,o,i){return op(e,t,o,(function(t,a){var u=Gc(t,i,0,n-1),c=u===n-1?e.length-u*o:o,s=qc(a,0,c-1);return K.some({row:u,column:s})}))},up=[Po("selector"),ei("execute",$g),Rc("onEscape"),ei("captureTab",!1),Pc()],cp=function focusIn$3(e,t,n){fc(e.element,t.selector).each((function(n){t.focusManager.set(e,n)}))},sp=function doMove$2(e){return function(t,n,o,i){return np(t,n,o.selector).bind((function(t){return e(t.candidates,t.index,i.getNumRows().getOr(o.initSize.numRows),i.getNumColumns().getOr(o.initSize.numColumns))}))}},lp=function handleTab(e,t,n){return n.captureTab?K.some(!0):K.none()},fp=sp((function cycleLeft$1(e,t,n,o){return ip(e,t,n,o,-1)})),dp=sp((function cycleRight$1(e,t,n,o){return ip(e,t,n,o,1)})),mp=sp((function cycleUp$1(e,t,n,o){return ap(e,t,n,o,-1)})),gp=sp((function cycleDown$1(e,t,n,o){return ap(e,t,n,o,1)})),pp=z([Rg(Eg(bg),qg(fp,dp)),Rg(Eg(Cg),Kg(fp,dp)),Rg(Eg(yg),Jg(mp)),Rg(Eg(wg),Qg(gp)),Rg(Og([Ag,Eg(gg)]),lp),Rg(Og([Dg,Eg(gg)]),lp),Rg(Eg(vg.concat(pg)),(function execute$3(e,t,n,o){return function findCurrent$1(e,t){return t.focusManager.get(e).bind((function(e){return dc(e,t.selector)}))}(e,n).bind((function(o){return n.execute(e,t,o)}))}))]),hp=z([Rg(Eg(hg),(function doEscape$1(e,t,n){return n.onEscape(e,t)})),Rg(Eg(vg),zg)]),vp=Pg(up,Wg,pp,hp,(function(){return K.some(cp)})),bp=function f(e,t,n,o,i){var a=function tryNewIndex(e,t,n){return i(e,t,o,0,n.length-1,n[t],(function(t){return function isDisabledButton(e){return"button"===ct(e)&&"disabled"===Gt(e,"disabled")}(n[t])?tryNewIndex(e,t,n):K.from(n[t])}))};return np(e,n,t).bind((function(e){var t=e.index,n=e.candidates;return a(t,t,n)}))},yp=function horizontalWithoutCycles(e,t,n,o){return bp(e,t,n,o,(function(e,t,n,o,i,a,u){var c=qc(t+n,o,i);return c===e?K.from(a):u(c)}))},Cp=function horizontal(e,t,n,o){return bp(e,t,n,o,(function(e,t,n,o,i,a,u){var c=Gc(t,n,o,i);return c===e?K.none():u(c)}))},wp=[Po("selector"),ei("getInitial",K.none),ei("execute",$g),Rc("onEscape"),ei("executeOnMove",!1),ei("allowVertical",!0),ei("allowHorizontal",!0),ei("cycles",!0)],xp=function execute$2(e,t,n){return function findCurrent(e,t){return t.focusManager.get(e).bind((function(e){return dc(e,t.selector)}))}(e,n).bind((function(o){return n.execute(e,t,o)}))},Sp=function focusIn$2(e,t,n){t.getInitial(e).orThunk((function(){return fc(e.element,t.selector)})).each((function(n){t.focusManager.set(e,n)}))},kp=function moveLeft$2(e,t,n){return(n.cycles?Cp:yp)(e,n.selector,t,-1)},Tp=function moveRight$2(e,t,n){return(n.cycles?Cp:yp)(e,n.selector,t,1)},Ep=function doMove$1(e){return function(t,n,o,i){return e(t,n,o,i).bind((function(){return o.executeOnMove?xp(t,n,o):K.some(!0)}))}},Op=z([Rg(Eg(vg),zg),Rg(Eg(hg),(function doEscape(e,t,n){return n.onEscape(e,t)}))]),Ap=Pg(wp,du.init,(function getKeydownRules$3(e,t,n,o){var i=d(n.allowHorizontal?bg:[]).concat(n.allowVertical?yg:[]),a=d(n.allowHorizontal?Cg:[]).concat(n.allowVertical?wg:[]);return[Rg(Eg(i),Ep(qg(kp,Tp))),Rg(Eg(a),Ep(Kg(kp,Tp))),Rg(Eg(pg),xp),Rg(Eg(vg),xp)]}),Op,(function(){return K.some(Sp)})),_p=function toCell(e,t,n){return K.from(e[t]).bind((function(e){return K.from(e[n]).map((function(e){return{rowIndex:t,columnIndex:n,cell:e}}))}))},Dp=function cycleHorizontal(e,t,n,o){var i=e[t].length,a=Gc(n,o,0,i-1);return _p(e,t,a)},Rp=function cycleVertical(e,t,n,o){var i=Gc(n,o,0,e.length-1),a=e[i].length,u=qc(t,0,a-1);return _p(e,i,u)},Np=function moveHorizontal(e,t,n,o){var i=e[t].length,a=qc(n+o,0,i-1);return _p(e,t,a)},Mp=function moveVertical(e,t,n,o){var i=qc(n+o,0,e.length-1),a=e[i].length,u=qc(t,0,a-1);return _p(e,i,u)},Bp=[Vo("selectors",[Po("row"),Po("cell")]),ei("cycles",!0),ei("previousSelector",K.none),ei("execute",$g)],Ip=function focusIn$1(e,t,n){t.previousSelector(e).orThunk((function(){var n=t.selectors;return fc(e.element,n.cell)})).each((function(n){t.focusManager.set(e,n)}))},Pp=function doMove(e,t){return function(n,o,i){var a=i.cycles?e:t;return dc(o,i.selectors.row).bind((function(e){var t=rf(e,i.selectors.cell);return rp(t,o).bind((function(t){var o=rf(n,i.selectors.row);return rp(o,e).bind((function(e){var n=function toMatrix(e,t){return ae(e,(function(e){return rf(e,t.selectors.cell)}))}(o,i);return a(n,e,t).map((function(e){return e.cell}))}))}))}))}},Lp=Pp((function cycleLeft(e,t,n){return Dp(e,t,n,-1)}),(function moveLeft$1(e,t,n){return Np(e,t,n,-1)})),Fp=Pp((function cycleRight(e,t,n){return Dp(e,t,n,1)}),(function moveRight$1(e,t,n){return Np(e,t,n,1)})),Hp=Pp((function cycleUp(e,t,n){return Rp(e,n,t,-1)}),(function moveUp$1(e,t,n){return Mp(e,n,t,-1)})),$p=Pp((function cycleDown(e,t,n){return Rp(e,n,t,1)}),(function moveDown$1(e,t,n){return Mp(e,n,t,1)})),zp=z([Rg(Eg(bg),qg(Lp,Fp)),Rg(Eg(Cg),Kg(Lp,Fp)),Rg(Eg(yg),Jg(Hp)),Rg(Eg(wg),Qg($p)),Rg(Eg(vg.concat(pg)),(function execute$1(e,t,n){return Ps(e.element).bind((function(o){return n.execute(e,t,o)}))}))]),Vp=z([Rg(Eg(vg),zg)]),Up=Pg(Bp,du.init,zp,Vp,(function(){return K.some(Ip)})),Zp=[Po("selector"),ei("execute",$g),ei("moveOnTab",!1)],Wp=function execute(e,t,n){return n.focusManager.get(e).bind((function(o){return n.execute(e,t,o)}))},jp=function focusIn(e,t,n){fc(e.element,t.selector).each((function(n){t.focusManager.set(e,n)}))},Gp=function moveUp(e,t,n){return Cp(e,n.selector,t,-1)},qp=function moveDown(e,t,n){return Cp(e,n.selector,t,1)},Kp=z([Rg(Eg(yg),ep(Gp)),Rg(Eg(wg),ep(qp)),Rg(Og([Ag,Eg(gg)]),(function fireShiftTab(e,t,n,o){return n.moveOnTab?ep(Gp)(e,t,n,o):K.none()})),Rg(Og([Dg,Eg(gg)]),(function fireTab(e,t,n,o){return n.moveOnTab?ep(qp)(e,t,n,o):K.none()})),Rg(Eg(pg),Wp),Rg(Eg(vg),Wp)]),Yp=z([Rg(Eg(vg),zg)]),Xp=Pg(Zp,du.init,Kp,Yp,(function(){return K.some(jp)})),Jp=[Rc("onSpace"),Rc("onEnter"),Rc("onShiftEnter"),Rc("onLeft"),Rc("onRight"),Rc("onTab"),Rc("onShiftTab"),Rc("onUp"),Rc("onDown"),Rc("onEscape"),ei("stopSpaceKeyup",!1),Wo("focusIn")],Qp=Pg(Jp,du.init,(function getKeydownRules(e,t,n){return[Rg(Eg(vg),n.onSpace),Rg(Og([Dg,Eg(pg)]),n.onEnter),Rg(Og([Ag,Eg(pg)]),n.onShiftEnter),Rg(Og([Ag,Eg(gg)]),n.onShiftTab),Rg(Og([Dg,Eg(gg)]),n.onTab),Rg(Eg(yg),n.onUp),Rg(Eg(wg),n.onDown),Rg(Eg(bg),n.onLeft),Rg(Eg(Cg),n.onRight),Rg(Eg(vg),n.onSpace)]}),(function getKeyupRules(e,t,n){return[].concat(d(n.stopSpaceKeyup?[Rg(Eg(vg),zg)]:[]),[Rg(Eg(hg),n.onEscape)])}),(function(e){return e.focusIn})),eh=Fg.schema(),th=Hg.schema(),nh=Ap.schema(),rh=vp.schema(),oh=Up.schema(),ih=Zg.schema(),ah=Xp.schema(),uh=Qp.schema(),ch=As({branchKey:"mode",branches:Object.freeze({__proto__:null,acyclic:eh,cyclic:th,flow:nh,flatgrid:rh,matrix:oh,execution:ih,menu:ah,special:uh}),name:"keying",active:{events:function events(e,t){return e.handler.toEvents(e,t)}},apis:{focusIn:function focusIn(e,t,n){t.sendFocusIn(t).fold((function(){e.getSystem().triggerFocus(e.element,e.element)}),(function(o){o(e,t,n)}))},setGridSize:function setGridSize(e,t,n,o,i){!function isFlatgridState(e){return $e(e,"setGridSize")}(n)?console.error("Layout does not support setGridSize"):n.setGridSize(o,i)}},state:jg}),sh=function withoutReuse(e,t){Ls((function(){Wf(e,t,(function(){return ae(t,e.getSystem().build)}))}),e.element)},lh=function withReuse(e,t){Ls((function(){!function virtualReplaceChildren(e,t,n){var o=e.components(),i=pe(t,(function(e){return lu(e).toArray()}));ue(o,(function(e){ne(i,e)||Uf(e)}));var a=n(t),u=be(o,a);ue(u,(function(e){Hf(e)&&Uf(e)})),ue(a,(function(t){Hf(t)||Vf(e,t)})),e.syncComponents()}(e,t,(function(){return function patchSpecChildren(e,t,n){return zu(e,t,(function(t,o){return Vu(e,o,t,n)}))}(e.element,t,e.getSystem().buildOrPatch)}))}),e.element)},fh=function virtualReplace(e,t,n,o){Uf(t);var i=Vu(e.element,n,o,e.getSystem().buildOrPatch);Vf(e,i),e.syncComponents()},dh=function insert(e,t,n){var o=e.getSystem().build(n);Gf(e,o,t)},mh=function replace(e,t,n,o){Kf(t),dh(e,(function(e,t){return function appendAt(e,t,n){At(e,n).fold((function(){ir(e,t)}),(function(e){tr(e,t)}))}(e,t,n)}),o)},gh=function contents(e,t){return e.components()},ph=function replaceAt(e,t,n,o,i){var a=gh(e);return K.from(a[o]).map((function(n){return i.fold((function(){return Kf(n)}),(function(i){(t.reuseDom?fh:mh)(e,n,o,i)})),n}))},hh=Object.freeze({__proto__:null,append:function append(e,t,n,o){dh(e,ir,o)},prepend:function prepend(e,t,n,o){dh(e,rr,o)},remove:function remove(e,t,n,o){var i=gh(e),a=de(i,(function(e){return bt(o.element,e.element)}));a.each(Kf)},replaceAt:ph,replaceBy:function replaceBy(e,t,n,o,i){var a=gh(e);return me(a,o).bind((function(n){return ph(e,t,0,n,i)}))},set:function set$3(e,t,n,o){return(t.reuseDom?lh:sh)(e,o)},contents:gh}),vh=Es({fields:[ii("reuseDom",!0)],name:"replacing",apis:hh}),bh=function config(e,t){var n=function events$d(e,t){var n=Ta(t);return Es({fields:[Po("enabled")],name:e,active:{events:z(n)}})}(e,t);return{key:e,value:{config:{},me:n,configAsRaw:z({}),initialConfig:{},state:du}}},yh=function focus$2(e,t){t.ignore||(Ns(e.element),t.onFocus(e))},Ch=Object.freeze({__proto__:null,focus:yh,blur:function blur(e,t){t.ignore||Ms(e.element)},isFocused:function isFocused(e){return Bs(e.element)}}),wh=Object.freeze({__proto__:null,exhibit:function exhibit$4(e,t){var n=t.ignore?{}:{attributes:{tabindex:"-1"}};return pu(n)},events:function events$c(e){return Ta([Aa(Gi(),(function(t,n){yh(t,e),n.stop()}))].concat(e.stopMousedown?[Aa(_i(),(function(e,t){t.event.prevent()}))]:[]))}}),xh=[Dc("onFocus"),ei("stopMousedown",!1),ei("ignore",!1)],Sh=Es({fields:xh,name:"focusing",active:wh,apis:Ch}),kh=function set$2(e,t,n,o){var i=n.get();n.set(o),function updateClass(e,t,n){t.toggleClass.each((function(t){n.get()?Du(e.element,t):Nu(e.element,t)}))}(e,t,n),function updateAriaState(e,t,n){var o=t.aria;o.update(e,o,n.get())}(e,t,n),i!==o&&t.onToggled(e,o)},Th=function toggle$2(e,t,n){kh(e,t,n,!n.get())},Eh=function onLoad(e,t,n){kh(e,t,n,t.selected)},Oh=Object.freeze({__proto__:null,onLoad:Eh,toggle:Th,isOn:function isOn(e,t,n){return n.get()},on:function on(e,t,n){kh(e,t,n,!0)},off:function off(e,t,n){kh(e,t,n,!1)},set:kh}),Ah=Object.freeze({__proto__:null,exhibit:function exhibit$3(){return pu({})},events:function events$b(e,t){var n=function executeEvent(e,t,n){return Ha((function(o){n(o,e,t)}))}(e,t,Th),o=Cs(e,t,Eh);return Ta(ge([e.toggleOnExecute?[n]:[],[o]]))}}),_h=function updateExpanded(e,t,n){Wt(e.element,"aria-expanded",n)},Dh=[ei("selected",!1),Wo("toggleClass"),ei("toggleOnExecute",!0),Dc("onToggled"),ti("aria",{mode:"none"},Ro("mode",{pressed:[ei("syncWithExpanded",!1),Bc("update",(function updatePressed(e,t,n){Wt(e.element,"aria-pressed",n),t.syncWithExpanded&&_h(e,t,n)}))],checked:[Bc("update",(function updateChecked(e,t,n){Wt(e.element,"aria-checked",n)}))],expanded:[Bc("update",_h)],selected:[Bc("update",(function updateSelected(e,t,n){Wt(e.element,"aria-selected",n)}))],none:[Bc("update",F)]}))],Rh=Es({fields:Dh,name:"toggling",active:Ah,apis:Oh,state:function SetupBehaviourCellState(e){return{init:function init(){var t=si(e);return{get:function get(){return t.get()},set:function set(e){return t.set(e)},clear:function clear(){return t.set(e)},readState:function readState(){return t.get()}}}}}(!1)}),Nh=function pointerEvents(){var e=function onClick(e,t){t.stop(),wa(e)};return[Aa($i(),e),Aa(Qi(),e),Ma(Ti()),Ma(_i())]},Mh=function events$a(e){return Ta(ge([e.map((function executeHandler(e){return Ha((function(t,n){e(t),n.stop()}))})).toArray(),Nh()]))},Bh="alloy.item-hover",Ih="alloy.item-focus",Ph="alloy.item-toggled",Lh=function onHover(e){(Ps(e.element).isNone()||Sh.isFocused(e))&&(Sh.isFocused(e)||Sh.focus(e),Ca(e,Bh,{item:e}))},Fh=function onFocus$1(e){Ca(e,Ih,{item:e})},Hh=z(Bh),$h=z(Ih),zh=z(Ph),Vh=function getItemRole(e){return e.toggling.map((function(e){return e.exclusive?"menuitemradio":"menuitemcheckbox"})).getOr("menuitem")},Uh=function getTogglingSpec(e){return s(s({aria:{mode:"checked"}},Be(e,(function(e,t){return"exclusive"!==t}))),{},{onToggled:function onToggled(t,n){I(e.onToggled)&&e.onToggled(t,n),function onToggled(e,t){Ca(e,Ph,{item:e,state:t})}(t,n)}})},Zh=[Po("data"),Po("components"),Po("dom"),ei("hasSubmenu",!1),Wo("toggling"),Id("itemBehaviours",[Rh,Sh,ch,Rd]),ei("ignoreFocus",!1),ei("domModification",{}),Bc("builder",(function builder$2(e){return{dom:e.dom,domModification:s(s({},e.domModification),{},{attributes:s(s({role:Vh(e)},e.domModification.attributes),{},{"aria-haspopup":e.hasSubmenu},e.hasSubmenu?{"aria-expanded":!1}:{})}),behaviours:Pd(e.itemBehaviours,[e.toggling.fold(Rh.revoke,(function(e){return Rh.config(Uh(e))})),Sh.config({ignore:e.ignoreFocus,stopMousedown:e.ignoreFocus,onFocus:function onFocus(e){Fh(e)}}),ch.config({mode:"execution"}),Rd.config({store:{mode:"memory",initialValue:e.data}}),bh("item-type-events",[].concat(d(Nh()),[Aa(Mi(),Lh),Aa(Ji(),Sh.focus)]))]),components:e.components,eventOrder:e.eventOrder}})),ei("eventOrder",{})],Wh=[Po("dom"),Po("components"),Bc("builder",(function builder$1(e){return{dom:e.dom,components:e.components,events:Ta([Ba(Ji())])}}))],jh=z("item-widget"),Gh=z([cm({name:"widget",overrides:function overrides(e){return{behaviours:ks([Rd.config({store:{mode:"manual",getValue:function getValue(t){return e.data},setValue:F}})])}}})]),qh=[Po("uid"),Po("data"),Po("components"),Po("dom"),ei("autofocus",!1),ei("ignoreFocus",!1),Id("widgetBehaviours",[Rd,Sh,ch]),ei("domModification",{}),_m(Gh()),Bc("builder",(function builder(e){var t=Cm(jh(),e,Gh()),n=wm(jh(),e,t.internals()),o=function focusWidget(t){return xm(t,e,"widget").map((function(e){return ch.focusIn(e),e}))},i=function onHorizontalArrow(t,n){return Fm(n.event.target)?K.none():e.autofocus?(n.setSource(t.element),K.none()):K.none()};return{dom:e.dom,components:n,domModification:e.domModification,events:Ta([Ha((function(e,t){o(e).each((function(e){t.stop()}))})),Aa(Mi(),Lh),Aa(Ji(),(function(t,n){e.autofocus?o(t):Sh.focus(t)}))]),behaviours:Pd(e.widgetBehaviours,[Rd.config({store:{mode:"memory",initialValue:e.data}}),Sh.config({ignore:e.ignoreFocus,onFocus:function onFocus(e){Fh(e)}}),ch.config({mode:"special",focusIn:e.autofocus?function(e){o(e)}:_s(),onLeft:i,onRight:i,onEscape:function onEscape(t,n){return Sh.isFocused(t)||e.autofocus?e.autofocus?(n.setSource(t.element),K.none()):K.none():(Sh.focus(t),K.some(!0))}})])}}))],Kh=Ro("type",{widget:qh,item:Zh,separator:Wh}),Yh=z([fm({factory:{sketch:function sketch(e){var t=_o("menu.spec item",Kh,e);return t.builder(t)}},name:"items",unit:"item",defaults:function defaults(e,t){return He(t,"uid")?t:s(s({},t),{},{uid:tu("item")})},overrides:function overrides(e,t){return{type:t.type,ignoreFocus:e.fakeFocus,domModification:{classes:[e.markers.item]}}}})]),Xh=z([Po("value"),Po("items"),Po("dom"),Po("components"),ei("eventOrder",{}),Nd("menuBehaviours",[dg,Rd,zm,ch]),ti("movement",{mode:"menu",moveOnTab:!0},Ro("mode",{grid:[Pc(),Bc("config",(function configureGrid(e,t){return{mode:"flatgrid",selector:"."+e.markers.item,initSize:{numColumns:t.initSize.numColumns,numRows:t.initSize.numRows},focusManager:e.focusManager}}))],matrix:[Bc("config",(function configureMatrix(e,t){return{mode:"matrix",selectors:{row:t.rowSelector,cell:"."+e.markers.item},previousSelector:t.previousSelector,focusManager:e.focusManager}})),Po("rowSelector"),ei("previousSelector",K.none)],menu:[ei("moveOnTab",!0),Bc("config",(function configureMenu(e,t){return{mode:"menu",selector:"."+e.markers.item,moveOnTab:t.moveOnTab,focusManager:e.focusManager}}))]})),function itemMarkers(){return Lo("markers",Tc())}(),ei("fakeFocus",!1),ei("focusManager",Mg()),Dc("onHighlight"),Dc("onDehighlight")]),Jh=z("alloy.menu-focus"),Qh=Lm({name:"Menu",configFields:Xh(),partFields:Yh(),factory:function make$7(e,t,n,o){return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Bd(e.menuBehaviours,[dg.config({highlightClass:e.markers.selectedItem,itemClass:e.markers.item,onHighlight:e.onHighlight,onDehighlight:e.onDehighlight}),Rd.config({store:{mode:"memory",initialValue:e.value}}),zm.config({find:K.some}),ch.config(e.movement.config(e,e.movement))]),events:Ta([Aa($h(),(function(e,t){var n=t.event;e.getSystem().getByDom(n.target).each((function(n){dg.highlight(e,n),t.stop(),Ca(e,Jh(),{menu:e,item:n})}))})),Aa(Hh(),(function(e,t){var n=t.event.item;dg.highlight(e,n)})),Aa(zh(),(function(e,t){var n=t.event,o=n.item;n.state&&"menuitemradio"===Gt(o.element,"role")&&function deselectOtherRadioItems(e,t){var n=rf(e.element,'[role="menuitemradio"][aria-checked="true"]');ue(n,(function(n){bt(n,t.element)||e.getSystem().getByDom(n).each((function(e){Rh.off(e)}))}))}(e,o)}))]),components:t,eventOrder:e.eventOrder,domModification:{attributes:{role:"menu"}}}}}),ev=function trace(e,t,n,o){return Fe(n,o).bind((function(o){return Fe(e,o).bind((function(o){var i=trace(e,t,n,o);return K.some([o].concat(i))}))})).getOr([])},tv=function generate$2(e,t){var n={};_e(e,(function(e,t){ue(e,(function(e){n[e]=t}))}));var o=t,i=function transpose$1(e){return Re(e,(function(e,t){return{k:e,v:t}}))}(t),a=De(i,(function(e,t){return[t].concat(ev(n,o,i,t))}));return De(n,(function(e){return Fe(a,e).getOr([e])}))},nv=function extractPreparedMenu(e){return"prepared"===e.type?K.some(e.menu):K.none()},rv={init:function init$c(){var e=si({}),t=si({}),n=si({}),o=nl(),i=si({}),a=function getTriggerData(t,n,o){return u(t).bind((function(i){return function getTriggeringItem(t){return Pe(e.get(),(function(e,n){return e===t}))}(t).bind((function(e){return n(e).map((function(e){return{triggeredMenu:i,triggeringItem:e,triggeringPath:o}}))}))}))},u=function getPreparedMenu(e){return c(e).bind(nv)},c=function lookupMenu(e){return Fe(t.get(),e)},d=function lookupItem(t){return Fe(e.get(),t)};return{setMenuBuilt:function setMenuBuilt(e,n){t.set(s(s({},t.get()),{},l({},e,{type:"prepared",menu:n})))},setContents:function setContents(a,u,c,s){o.set(a),e.set(c),t.set(u),i.set(s);var l=tv(s,c);n.set(l)},expand:function expand(t){return Fe(e.get(),t).map((function(e){var o=Fe(n.get(),t).getOr([]);return[e].concat(o)}))},refresh:function refresh(e){return Fe(n.get(),e)},collapse:function collapse(e){return Fe(n.get(),e).bind((function(e){return e.length>1?K.some(e.slice(1)):K.none()}))},lookupMenu:c,lookupItem:d,otherMenus:function otherMenus(e){var t=i.get();return be(Oe(t),e)},getPrimary:function getPrimary(){return o.get().bind(u)},getMenus:function getMenus(){return t.get()},clear:function clear(){e.set({}),t.set({}),n.set({}),o.clear()},isClear:function isClear(){return o.get().isNone()},getTriggeringPath:function getTriggeringPath(e,t){var i=se(d(e).toArray(),(function(e){return u(e).isSome()}));return Fe(n.get(),e).bind((function(e){var n=ve(i.concat(e));return function sequence(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];if(!o.isSome())return K.none();t.push(o.getOrDie())}return K.some(t)}(pe(n,(function(e,i){return a(e,t,n.slice(0,i+1)).fold((function(){return ze(o.get(),e)?[]:[K.none()]}),(function(e){return[K.some(e)]}))})))}))}}},extractPreparedMenu:nv},ov=qa("tiered-menu-item-highlight"),iv=qa("tiered-menu-item-dehighlight");!function(e){e[e.HighlightMenuAndItem=0]="HighlightMenuAndItem",e[e.HighlightJustMenu=1]="HighlightJustMenu",e[e.HighlightNone=2]="HighlightNone"}(Ig||(Ig={}));var av=z("collapse-item"),uv=Pm({name:"TieredMenu",configFields:[Mc("onExecute"),Mc("onEscape"),Nc("onOpenMenu"),Nc("onOpenSubmenu"),Dc("onRepositionMenu"),Dc("onCollapseMenu"),ei("highlightOnOpen",Ig.HighlightMenuAndItem),Vo("data",[Po("primary"),Po("menus"),Po("expansions")]),ei("fakeFocus",!1),Dc("onHighlightItem"),Dc("onDehighlightItem"),Dc("onHover"),Oc(),Po("dom"),ei("navigateOnHover",!0),ei("stayInDom",!1),Nd("tmenuBehaviours",[ch,dg,zm,vh]),ei("eventOrder",{})],apis:{collapseMenu:function collapseMenu(e,t){e.collapseMenu(t)},highlightPrimary:function highlightPrimary(e,t){e.highlightPrimary(t)},repositionMenus:function repositionMenus(e,t){e.repositionMenus(t)}},factory:function make$6(e,t){var n,o=nl(),i=rv.init(),a=function setup(t){var n=function buildMenus(t,n,o){return De(o,(function(o,i){var a=function makeSketch(){return Qh.sketch(s(s({},o),{},{value:i,markers:e.markers,fakeFocus:e.fakeFocus,onHighlight:function onHighlight(e,t){Ca(e,ov,{menuComp:e,itemComp:t})},onDehighlight:function onDehighlight(e,t){Ca(e,iv,{menuComp:e,itemComp:t})},focusManager:e.fakeFocus?Bg():Mg()}))};return i===n?{type:"prepared",menu:t.getSystem().build(a())}:{type:"notbuilt",nbMenu:a}}))}(t,e.data.primary,e.data.menus),o=c();return i.setContents(e.data.primary,n,e.data.expansions,o),i.getPrimary()},u=function getItemValue(e){return Rd.getValue(e).value},c=function toDirectory(t){return De(e.data.menus,(function(e,t){return pe(e.items,(function(e){return"separator"===e.type?[]:[e.data.value]}))}))},l=dg.highlight,m=function setActiveMenuAndItem(t,n){l(t,n),dg.getHighlighted(n).orThunk((function(){return dg.getFirst(n)})).each((function(o){e.fakeFocus?dg.highlight(n,o):xa(t,o.element,Ji())}))},g=function getMenus(e,t){return Ve(ae(t,(function(t){return e.lookupMenu(t).bind((function(e){return"prepared"===e.type?K.some(e.menu):K.none()}))})))},p=function closeOthers(t,n,o){var i=g(n,n.otherMenus(o));ue(i,(function(n){Pu(n.element,[e.markers.backgroundMenu]),e.stayInDom||vh.remove(t,n)}))},h=function updateAriaExpansions(t,n){var i=function getSubmenuParents(t){return o.get().getOrThunk((function(){var n={},i=rf(t.element,".".concat(e.markers.item)),a=se(i,(function(e){return"true"===Gt(e,"aria-haspopup")}));return ue(a,(function(e){t.getSystem().getByDom(e).each((function(e){var t=u(e);n[t]=e}))})),o.set(n),n}))}(t);_e(i,(function(e,t){var o=ne(n,t);Wt(e.element,"aria-expanded",o)}))},v=function updateMenuPath(t,n,o){return K.from(o[0]).bind((function(i){return n.lookupMenu(i).bind((function(i){if("notbuilt"===i.type)return K.none();var a=i.menu,u=g(n,o.slice(1));return ue(u,(function(t){Du(t.element,e.markers.backgroundMenu)})),zt(a.element)||vh.append(t,oc(a)),Pu(a.element,[e.markers.backgroundMenu]),m(t,a),p(t,n,o),K.some(a)}))}))};!function(e){e[e.HighlightSubmenu=0]="HighlightSubmenu",e[e.HighlightParent=1]="HighlightParent"}(n||(n={}));var b=function expandRight(t,o){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n.HighlightSubmenu;if(o.hasConfigured(tg)&&tg.isDisabled(o))return K.some(o);var c=u(o);return i.expand(c).bind((function(u){return h(t,u),K.from(u[0]).bind((function(c){return i.lookupMenu(c).bind((function(s){var l=function buildIfRequired(e,t,n){if("notbuilt"===n.type){var o=e.getSystem().build(n.nbMenu());return i.setMenuBuilt(t,o),o}return n.menu}(t,c,s);return zt(l.element)||vh.append(t,oc(l)),e.onOpenSubmenu(t,o,l,ve(u)),a===n.HighlightSubmenu?(dg.highlightFirst(l),v(t,i,u)):(dg.dehighlightAll(l),K.some(o))}))}))}))},y=function collapseLeft(t,n){var o=u(n);return i.collapse(o).bind((function(o){return h(t,o),v(t,i,o).map((function(o){return e.onCollapseMenu(t,n,o),o}))}))},C=function keyOnItem(t){return function(n,o){return dc(o.getSource(),".".concat(e.markers.item)).bind((function(e){return n.getSystem().getByDom(e).toOptional().bind((function(e){return t(n,e).map(q)}))}))}},w=Ta([Aa(Jh(),(function(e,t){var n=t.event.item;i.lookupItem(u(n)).each((function(){var n=t.event.menu;dg.highlight(e,n);var o=u(t.event.item);i.refresh(o).each((function(t){return p(e,i,t)}))}))})),Ha((function(t,o){var i=o.event.target;t.getSystem().getByDom(i).each((function(o){0===u(o).indexOf("collapse-item")&&y(t,o),b(t,o,n.HighlightSubmenu).fold((function(){e.onExecute(t,o)}),F)}))})),Pa((function(t,n){a(t).each((function(n){vh.append(t,oc(n)),e.onOpenMenu(t,n),e.highlightOnOpen===Ig.HighlightMenuAndItem?m(t,n):e.highlightOnOpen===Ig.HighlightJustMenu&&l(t,n)}))})),Aa(ov,(function(t,n){e.onHighlightItem(t,n.event.menuComp,n.event.itemComp)})),Aa(iv,(function(t,n){e.onDehighlightItem(t,n.event.menuComp,n.event.itemComp)}))].concat(d(e.navigateOnHover?[Aa(Hh(),(function(t,o){var a=o.event.item;!function updateView(e,t){var n=u(t);i.refresh(n).bind((function(t){return h(e,t),v(e,i,t)}))}(t,a),b(t,a,n.HighlightParent),e.onHover(t,a)}))]:[]))),x=function getActiveItem(e){return dg.getHighlighted(e).bind(dg.getHighlighted)},S={collapseMenu:function collapseMenuApi(e){x(e).each((function(t){y(e,t)}))},highlightPrimary:function highlightPrimary(e){i.getPrimary().each((function(t){m(e,t)}))},repositionMenus:function repositionMenus(t){var n=i.getPrimary().bind((function(e){return x(t).bind((function(e){var t=u(e),n=Le(i.getMenus()),o=Ve(ae(n,rv.extractPreparedMenu));return i.getTriggeringPath(t,(function(e){return function getItemByValue(e,t,n){return Ee(t,(function(e){if(!e.getSystem().isConnected())return K.none();var t=dg.getCandidates(e);return de(t,(function(e){return u(e)===n}))}))}(0,o,e)}))})).map((function(t){return{primary:e,triggeringPath:t}}))}));n.fold((function(){(function extractMenuFromContainer(e){return K.from(e.components()[0]).filter((function(e){return"menu"===Gt(e.element,"role")}))})(t).each((function(n){e.onRepositionMenu(t,n,[])}))}),(function(n){var o=n.primary,i=n.triggeringPath;e.onRepositionMenu(t,o,i)}))}};return{uid:e.uid,dom:e.dom,markers:e.markers,behaviours:Bd(e.tmenuBehaviours,[ch.config({mode:"special",onRight:C((function onRight(e,t){return Fm(t.element)?K.none():b(e,t,n.HighlightSubmenu)})),onLeft:C((function onLeft(e,t){return Fm(t.element)?K.none():y(e,t)})),onEscape:C((function onEscape(t,n){return y(t,n).orThunk((function(){return e.onEscape(t,n).map((function(){return t}))}))})),focusIn:function focusIn(e,t){i.getPrimary().each((function(t){xa(e,t.element,Ji())}))}}),dg.config({highlightClass:e.markers.selectedMenu,itemClass:e.markers.menu}),zm.config({find:function find(e){return dg.getHighlighted(e)}}),vh.config({})]),eventOrder:e.eventOrder,apis:S,events:w}},extraApis:{tieredData:function tieredData(e,t,n){return{primary:e,menus:t,expansions:n}},singleData:function singleData(e,t){return{primary:e,menus:mi(e,t),expansions:{}}},collapseItem:function collapseItem(e){return{value:qa(av()),meta:{text:e}}}}}),cv=Pm({name:"InlineView",configFields:[Po("lazySink"),Dc("onShow"),Dc("onHide"),Yo("onEscape"),Nd("inlineBehaviours",[fd,Rd,Ds]),Jo("fireDismissalEventInstead",[ei("event",la())]),Jo("fireRepositionEventInstead",[ei("event",fa())]),ei("getRelated",K.none),ei("isExtraPart",G),ei("eventOrder",K.none)],factory:function factory$o(e,t){var n=function showWithinBounds(t,n,o,i){var a=e.lazySink(t).getOrDie();fd.openWhileCloaked(t,n,(function(){return Ff.positionWithinBounds(a,t,o,i())})),Rd.setValue(t,K.some({mode:"position",config:o,getBounds:i}))},o=function showMenuWithinBounds(t,n,o,i){var a=function makeMenu(e,t,n,o,i){var a=function lazySink(){return e.lazySink(t)},u="horizontal"===o.type?{layouts:{onLtr:function onLtr(){return hs()},onRtl:function onRtl(){return vs()}}}:{},c=function getSubmenuLayouts(e){return function isFirstTierSubmenu(e){return 2===e.length}(e)?u:{}};return uv.sketch({dom:{tag:"div"},data:o.data,markers:o.menu.markers,highlightOnOpen:o.menu.highlightOnOpen,fakeFocus:o.menu.fakeFocus,onEscape:function onEscape(){return fd.close(t),e.onEscape.map((function(e){return e(t)})),K.some(!0)},onExecute:function onExecute(){return K.some(!0)},onOpenMenu:function onOpenMenu(e,t){Ff.positionWithinBounds(a().getOrDie(),t,n,i())},onOpenSubmenu:function onOpenSubmenu(e,t,n,o){var i=a().getOrDie();Ff.position(i,n,{anchor:s({type:"submenu",item:t},c(o))})},onRepositionMenu:function onRepositionMenu(e,t,o){var u=a().getOrDie();Ff.positionWithinBounds(u,t,n,i()),ue(o,(function(e){var t=c(e.triggeringPath);Ff.position(u,e.triggeredMenu,{anchor:s({type:"submenu",item:e.triggeringItem},t)})}))}})}(e,t,n,o,i);fd.open(t,a),Rd.setValue(t,K.some({mode:"menu",menu:a}))},i=function reposition(t){fd.isOpen(t)&&Rd.getValue(t).each((function(n){switch(n.mode){case"menu":fd.getState(t).each(uv.repositionMenus);break;case"position":var o=e.lazySink(t).getOrDie();Ff.positionWithinBounds(o,t,n.config,n.getBounds())}}))},a={setContent:function setContent(e,t){fd.setContent(e,t)},showAt:function showAt(e,t,o){var i=K.none;n(e,t,o,i)},showWithinBounds:n,showMenuAt:function showMenuAt(e,t,n){o(e,t,n,K.none)},showMenuWithinBounds:o,hide:function hide(e){fd.isOpen(e)&&(Rd.setValue(e,K.none()),fd.close(e))},getContent:function getContent(e){return fd.getState(e)},reposition:i,isOpen:fd.isOpen};return{uid:e.uid,dom:e.dom,behaviours:Bd(e.inlineBehaviours,[fd.config({isPartOf:function isPartOf(t,n,o){return hc(n,o)||function isPartOfRelated(t,n){return e.getRelated(t).exists((function(e){return hc(e,n)}))}(t,o)},getAttachPoint:function getAttachPoint(t){return e.lazySink(t).getOrDie()},onOpen:function onOpen(t){e.onShow(t)},onClose:function onClose(t){e.onHide(t)}}),Rd.config({store:{mode:"memory",initialValue:K.none()}}),Ds.config({channels:s(s({},hd(s({isExtraPart:t.isExtraPart},e.fireDismissalEventInstead.map((function(e){return{fireEventInstead:{event:e.event}}})).getOr({})))),bd(s(s({},e.fireRepositionEventInstead.map((function(e){return{fireEventInstead:{event:e.event}}})).getOr({})),{},{doReposition:i})))})]),eventOrder:e.eventOrder,apis:a}},apis:{showAt:function showAt(e,t,n,o){e.showAt(t,n,o)},showWithinBounds:function showWithinBounds(e,t,n,o,i){e.showWithinBounds(t,n,o,i)},showMenuAt:function showMenuAt(e,t,n,o){e.showMenuAt(t,n,o)},showMenuWithinBounds:function showMenuWithinBounds(e,t,n,o,i){e.showMenuWithinBounds(t,n,o,i)},hide:function hide(e,t){e.hide(t)},isOpen:function isOpen(e,t){return e.isOpen(t)},getContent:function getContent(e,t){return e.getContent(t)},setContent:function setContent(e,t,n){e.setContent(t,n)},reposition:function reposition(e,t){e.reposition(t)}}}),sv=tinymce.util.Tools.resolve("tinymce.util.Delay"),lv=Pm({name:"Button",factory:function factory$n(e){var t=Mh(e.action),n=e.dom.tag,o=function lookupAttr(t){return Fe(e.dom,"attributes").bind((function(e){return Fe(e,t)}))};return{uid:e.uid,dom:e.dom,components:e.components,events:t,behaviours:Pd(e.buttonBehaviours,[Sh.config({}),ch.config({mode:"execution",useSpace:!0,useEnter:!0})]),domModification:{attributes:function getModAttributes(){if("button"===n){var t=o("type").getOr("button"),i=o("role").map((function(e){return{role:e}})).getOr({});return s({type:t},i)}return{role:e.role.getOr(o("role").getOr("button"))}}()},eventOrder:e.eventOrder}},configFields:[ei("uid",void 0),Po("dom"),ei("components",[]),Id("buttonBehaviours",[Sh,ch]),Wo("action"),Wo("role"),ei("eventOrder",{})]}),fv=function fromHtml(e){var t=nt.fromHtml(e),n=Ot(t),o=function getAttrs(e){var t=void 0!==e.dom.attributes?e.dom.attributes:[];return fe(t,(function(e,t){return"class"===t.name?e:s(s({},e),{},l({},t.name,t.value))}),{})}(t),i=function getClasses(e){return Array.prototype.slice.call(e.dom.classList,0)}(t),a=0===n.length?{}:{innerHtml:$a(t)};return s({tag:ct(t),classes:i,attributes:o},a)},dv=function record(e){var t=function isSketchSpec(e){return void 0!==e.uid}(e)&&$e(e,"uid")?e.uid:tu("memento");return{get:function get(e){return e.getSystem().getByUid(t).getOrDie()},getOpt:function getOpt(e){return e.getSystem().getByUid(t).toOptional()},asSpec:function asSpec(){return s(s({},e),{},{uid:t})}}},mv=Object.entries,gv=Object.setPrototypeOf,pv=Object.isFrozen,hv=Object.getPrototypeOf,vv=Object.getOwnPropertyDescriptor,bv=Object.freeze,yv=Object.seal,Cv=Object.create,wv="undefined"!==typeof Reflect&&Reflect,xv=wv.apply,Sv=wv.construct;xv||(xv=function apply(e,t,n){return e.apply(t,n)}),bv||(bv=function freeze(e){return e}),yv||(yv=function seal(e){return e}),Sv||(Sv=function construct(e,t){return u(e,d(t))});var kv=unapply(Array.prototype.forEach),Tv=unapply(Array.prototype.pop),Ev=unapply(Array.prototype.push),Ov=unapply(String.prototype.toLowerCase),Av=unapply(String.prototype.toString),_v=unapply(String.prototype.match),Dv=unapply(String.prototype.replace),Rv=unapply(String.prototype.indexOf),Nv=unapply(String.prototype.trim),Mv=unapply(RegExp.prototype.test),Bv=function unconstruct(e){return function(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return Sv(e,n)}}(TypeError);function unapply(e){return function(t){for(var n=arguments.length,o=new Array(n>1?n-1:0),i=1;i<n;i++)o[i-1]=arguments[i];return xv(e,t,o)}}function addToSet(e,t,n){var o;n=null!==(o=n)&&void 0!==o?o:Ov,gv&&gv(e,null);for(var i=t.length;i--;){var a=t[i];if("string"===typeof a){var u=n(a);u!==a&&(pv(t)||(t[i]=u),a=u)}e[a]=!0}return e}function clone(e){var t,n=Cv(null),o=m(mv(e));try{for(o.s();!(t=o.n()).done;){var i=a(t.value,2),u=i[0],c=i[1];n[u]=c}}catch(s){o.e(s)}finally{o.f()}return n}function lookupGetter(e,t){for(;null!==e;){var n=vv(e,t);if(n){if(n.get)return unapply(n.get);if("function"===typeof n.value)return unapply(n.value)}e=hv(e)}return function fallbackValue(e){return console.warn("fallback value for",e),null}}var Iv=bv(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Pv=bv(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Lv=bv(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Fv=bv(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Hv=bv(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),$v=bv(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),zv=bv(["#text"]),Vv=bv(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Uv=bv(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Zv=bv(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Wv=bv(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),jv=yv(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Gv=yv(/<%[\w\W]*|[\w\W]*%>/gm),qv=yv(/\${[\w\W]*}/gm),Kv=yv(/^data-[\-\w.\u00B7-\uFFFF]/),Yv=yv(/^aria-[\-\w]+$/),Xv=yv(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Jv=yv(/^(?:\w+script|data):/i),Qv=yv(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),eb=yv(/^html$/i),tb=Object.freeze({__proto__:null,MUSTACHE_EXPR:jv,ERB_EXPR:Gv,TMPLIT_EXPR:qv,DATA_ATTR:Kv,ARIA_ATTR:Yv,IS_ALLOWED_URI:Xv,IS_SCRIPT_OR_DATA:Jv,ATTR_WHITESPACE:Qv,DOCTYPE_NAME:eb}),nb=function getGlobal(){return"undefined"===typeof window?null:window};var rb,ob,ib=function createDOMPurify(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nb(),t=function DOMPurify(e){return createDOMPurify(e)};if(t.version="3.0.5",t.removed=[],!e||!e.document||9!==e.document.nodeType)return t.isSupported=!1,t;var n,o=e.document,i=o.currentScript,a=e.document,u=e.DocumentFragment,c=e.HTMLTemplateElement,s=e.Node,l=e.Element,m=e.NodeFilter,g=e.NamedNodeMap,p=void 0===g?e.NamedNodeMap||e.MozNamedAttrMap:g,h=e.HTMLFormElement,v=e.DOMParser,b=e.trustedTypes,y=l.prototype,C=lookupGetter(y,"cloneNode"),w=lookupGetter(y,"nextSibling"),x=lookupGetter(y,"childNodes"),S=lookupGetter(y,"parentNode");if("function"===typeof c){var k=a.createElement("template");k.content&&k.content.ownerDocument&&(a=k.content.ownerDocument)}var T="",E=a,O=E.implementation,A=E.createNodeIterator,D=E.createDocumentFragment,R=E.getElementsByTagName,N=o.importNode,M={};t.isSupported="function"===typeof mv&&"function"===typeof S&&O&&void 0!==O.createHTMLDocument;var B,I,P=tb.MUSTACHE_EXPR,L=tb.ERB_EXPR,F=tb.TMPLIT_EXPR,H=tb.DATA_ATTR,$=tb.ARIA_ATTR,z=tb.IS_SCRIPT_OR_DATA,V=tb.ATTR_WHITESPACE,U=tb.IS_ALLOWED_URI,Z=null,W=addToSet({},[].concat(d(Iv),d(Pv),d(Lv),d(Hv),d(zv))),j=null,G=addToSet({},[].concat(d(Vv),d(Uv),d(Zv),d(Wv))),q=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),K=null,Y=null,X=!0,J=!0,Q=!1,ee=!0,te=!1,ne=!1,re=!1,oe=!1,ie=!1,ae=!1,ue=!1,ce=!0,se=!1,le=!0,fe=!1,de={},me=null,ge=addToSet({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),pe=null,he=addToSet({},["audio","video","img","source","image","track"]),ve=null,be=addToSet({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ye="http://www.w3.org/1998/Math/MathML",Ce="http://www.w3.org/2000/svg",we="http://www.w3.org/1999/xhtml",xe=we,Se=!1,ke=null,Te=addToSet({},[ye,Ce,we],Av),Ee=["application/xhtml+xml","text/html"],Oe=null,Ae=a.createElement("form"),_e=function isRegexOrFunction(e){return e instanceof RegExp||e instanceof Function},De=function _parseConfig(e){if(!Oe||Oe!==e){if(e&&"object"===typeof e||(e={}),e=clone(e),B=B=-1===Ee.indexOf(e.PARSER_MEDIA_TYPE)?"text/html":e.PARSER_MEDIA_TYPE,I="application/xhtml+xml"===B?Av:Ov,Z="ALLOWED_TAGS"in e?addToSet({},e.ALLOWED_TAGS,I):W,j="ALLOWED_ATTR"in e?addToSet({},e.ALLOWED_ATTR,I):G,ke="ALLOWED_NAMESPACES"in e?addToSet({},e.ALLOWED_NAMESPACES,Av):Te,ve="ADD_URI_SAFE_ATTR"in e?addToSet(clone(be),e.ADD_URI_SAFE_ATTR,I):be,pe="ADD_DATA_URI_TAGS"in e?addToSet(clone(he),e.ADD_DATA_URI_TAGS,I):he,me="FORBID_CONTENTS"in e?addToSet({},e.FORBID_CONTENTS,I):ge,K="FORBID_TAGS"in e?addToSet({},e.FORBID_TAGS,I):{},Y="FORBID_ATTR"in e?addToSet({},e.FORBID_ATTR,I):{},de="USE_PROFILES"in e&&e.USE_PROFILES,X=!1!==e.ALLOW_ARIA_ATTR,J=!1!==e.ALLOW_DATA_ATTR,Q=e.ALLOW_UNKNOWN_PROTOCOLS||!1,ee=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,te=e.SAFE_FOR_TEMPLATES||!1,ne=e.WHOLE_DOCUMENT||!1,ie=e.RETURN_DOM||!1,ae=e.RETURN_DOM_FRAGMENT||!1,ue=e.RETURN_TRUSTED_TYPE||!1,oe=e.FORCE_BODY||!1,ce=!1!==e.SANITIZE_DOM,se=e.SANITIZE_NAMED_PROPS||!1,le=!1!==e.KEEP_CONTENT,fe=e.IN_PLACE||!1,U=e.ALLOWED_URI_REGEXP||Xv,xe=e.NAMESPACE||we,q=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&_e(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(q.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&_e(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(q.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(q.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),te&&(J=!1),ae&&(ie=!0),de&&(Z=addToSet({},d(zv)),j=[],!0===de.html&&(addToSet(Z,Iv),addToSet(j,Vv)),!0===de.svg&&(addToSet(Z,Pv),addToSet(j,Uv),addToSet(j,Wv)),!0===de.svgFilters&&(addToSet(Z,Lv),addToSet(j,Uv),addToSet(j,Wv)),!0===de.mathMl&&(addToSet(Z,Hv),addToSet(j,Zv),addToSet(j,Wv))),e.ADD_TAGS&&(Z===W&&(Z=clone(Z)),addToSet(Z,e.ADD_TAGS,I)),e.ADD_ATTR&&(j===G&&(j=clone(j)),addToSet(j,e.ADD_ATTR,I)),e.ADD_URI_SAFE_ATTR&&addToSet(ve,e.ADD_URI_SAFE_ATTR,I),e.FORBID_CONTENTS&&(me===ge&&(me=clone(me)),addToSet(me,e.FORBID_CONTENTS,I)),le&&(Z["#text"]=!0),ne&&addToSet(Z,["html","head","body"]),Z.table&&(addToSet(Z,["tbody"]),delete K.tbody),e.TRUSTED_TYPES_POLICY){if("function"!==typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Bv('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!==typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Bv('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');n=e.TRUSTED_TYPES_POLICY,T=n.createHTML("")}else void 0===n&&(n=function _createTrustedTypesPolicy(e,t){if("object"!==typeof e||"function"!==typeof e.createPolicy)return null;var n=null,o="data-tt-policy-suffix";t&&t.hasAttribute(o)&&(n=t.getAttribute(o));var i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML:function createHTML(e){return e},createScriptURL:function createScriptURL(e){return e}})}catch(a){return console.warn("TrustedTypes policy "+i+" could not be created."),null}}(b,i)),null!==n&&"string"===typeof T&&(T=n.createHTML(""));bv&&bv(e),Oe=e}},Re=addToSet({},["mi","mo","mn","ms","mtext"]),Ne=addToSet({},["foreignobject","desc","title","annotation-xml"]),Me=addToSet({},["title","style","font","a","script"]),Be=addToSet({},Pv);addToSet(Be,Lv),addToSet(Be,Fv);var Ie=addToSet({},Hv);addToSet(Ie,$v);var Pe=function _forceRemove(e){Ev(t.removed,{element:e});try{e.parentNode.removeChild(e)}catch(n){e.remove()}},Le=function _removeAttribute(e,n){try{Ev(t.removed,{attribute:n.getAttributeNode(e),from:n})}catch(o){Ev(t.removed,{attribute:null,from:n})}if(n.removeAttribute(e),"is"===e&&!j[e])if(ie||ae)try{Pe(n)}catch(o){}else try{n.setAttribute(e,"")}catch(o){}},Fe=function _initDocument(e){var t,o;if(oe)e="<remove></remove>"+e;else{var i=_v(e,/^[\r\n\t ]+/);o=i&&i[0]}"application/xhtml+xml"===B&&xe===we&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");var u=n?n.createHTML(e):e;if(xe===we)try{t=(new v).parseFromString(u,B)}catch(s){}if(!t||!t.documentElement){t=O.createDocument(xe,"template",null);try{t.documentElement.innerHTML=Se?T:u}catch(s){}}var c=t.body||t.documentElement;return e&&o&&c.insertBefore(a.createTextNode(o),c.childNodes[0]||null),xe===we?R.call(t,ne?"html":"body")[0]:ne?t.documentElement:c},He=function _createIterator(e){return A.call(e.ownerDocument||e,e,m.SHOW_ELEMENT|m.SHOW_COMMENT|m.SHOW_TEXT,null,!1)},$e=function _isNode(e){return"object"===typeof s?e instanceof s:e&&"object"===typeof e&&"number"===typeof e.nodeType&&"string"===typeof e.nodeName},ze=function _executeHook(e,n,o){M[e]&&kv(M[e],(function(e){e.call(t,n,o,Oe)}))},Ve=function _sanitizeElements(e){var n;if(ze("beforeSanitizeElements",e,null),function _isClobbered(e){return e instanceof h&&("string"!==typeof e.nodeName||"string"!==typeof e.textContent||"function"!==typeof e.removeChild||!(e.attributes instanceof p)||"function"!==typeof e.removeAttribute||"function"!==typeof e.setAttribute||"string"!==typeof e.namespaceURI||"function"!==typeof e.insertBefore||"function"!==typeof e.hasChildNodes)}(e))return Pe(e),!0;var o=I(e.nodeName);if(ze("uponSanitizeElement",e,{tagName:o,allowedTags:Z}),e.hasChildNodes()&&!$e(e.firstElementChild)&&(!$e(e.content)||!$e(e.content.firstElementChild))&&Mv(/<[/\w]/g,e.innerHTML)&&Mv(/<[/\w]/g,e.textContent))return Pe(e),!0;if(!Z[o]||K[o]){if(!K[o]&&Ze(o)){if(q.tagNameCheck instanceof RegExp&&Mv(q.tagNameCheck,o))return!1;if(q.tagNameCheck instanceof Function&&q.tagNameCheck(o))return!1}if(le&&!me[o]){var i=S(e)||e.parentNode,a=x(e)||e.childNodes;if(a&&i)for(var u=a.length-1;u>=0;--u)i.insertBefore(C(a[u],!0),w(e))}return Pe(e),!0}return e instanceof l&&!function _checkValidNamespace(e){var t=S(e);t&&t.tagName||(t={namespaceURI:xe,tagName:"template"});var n=Ov(e.tagName),o=Ov(t.tagName);return!!ke[e.namespaceURI]&&(e.namespaceURI===Ce?t.namespaceURI===we?"svg"===n:t.namespaceURI===ye?"svg"===n&&("annotation-xml"===o||Re[o]):Boolean(Be[n]):e.namespaceURI===ye?t.namespaceURI===we?"math"===n:t.namespaceURI===Ce?"math"===n&&Ne[o]:Boolean(Ie[n]):e.namespaceURI===we?!(t.namespaceURI===Ce&&!Ne[o])&&!(t.namespaceURI===ye&&!Re[o])&&!Ie[n]&&(Me[n]||!Be[n]):!("application/xhtml+xml"!==B||!ke[e.namespaceURI]))}(e)?(Pe(e),!0):"noscript"!==o&&"noembed"!==o&&"noframes"!==o||!Mv(/<\/no(script|embed|frames)/i,e.innerHTML)?(te&&3===e.nodeType&&(n=e.textContent,n=Dv(n,P," "),n=Dv(n,L," "),n=Dv(n,F," "),e.textContent!==n&&(Ev(t.removed,{element:e.cloneNode()}),e.textContent=n)),ze("afterSanitizeElements",e,null),!1):(Pe(e),!0)},Ue=function _isValidAttribute(e,t,n){if(ce&&("id"===t||"name"===t)&&(n in a||n in Ae))return!1;if(J&&!Y[t]&&Mv(H,t));else if(X&&Mv($,t));else if(!j[t]||Y[t]){if(!(Ze(e)&&(q.tagNameCheck instanceof RegExp&&Mv(q.tagNameCheck,e)||q.tagNameCheck instanceof Function&&q.tagNameCheck(e))&&(q.attributeNameCheck instanceof RegExp&&Mv(q.attributeNameCheck,t)||q.attributeNameCheck instanceof Function&&q.attributeNameCheck(t))||"is"===t&&q.allowCustomizedBuiltInElements&&(q.tagNameCheck instanceof RegExp&&Mv(q.tagNameCheck,n)||q.tagNameCheck instanceof Function&&q.tagNameCheck(n))))return!1}else if(ve[t]);else if(Mv(U,Dv(n,V,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==Rv(n,"data:")||!pe[e]){if(Q&&!Mv(z,Dv(n,V,"")));else if(n)return!1}else;return!0},Ze=function _basicCustomElementTest(e){return e.indexOf("-")>0},We=function _sanitizeAttributes(e){var t,o,i,a;ze("beforeSanitizeAttributes",e,null);var u=e.attributes;if(u){var c={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:j};for(a=u.length;a--;){var s=t=u[a],l=s.name,d=s.namespaceURI,m=o="value"===l?t.value:Nv(t.value);if(i=I(l),c.attrName=i,c.attrValue=o,c.keepAttr=!0,c.forceKeepAttr=void 0,ze("uponSanitizeAttribute",e,c),o=c.attrValue,!c.forceKeepAttr)if(c.keepAttr)if(ee||!Mv(/\/>/i,o)){te&&(o=Dv(o,P," "),o=Dv(o,L," "),o=Dv(o,F," "));var g=I(e.nodeName);if(Ue(g,i,o)){if(!se||"id"!==i&&"name"!==i||(Le(l,e),o="user-content-"+o),n&&"object"===typeof b&&"function"===typeof b.getAttributeType)if(d);else switch(b.getAttributeType(g,i)){case"TrustedHTML":o=n.createHTML(o);break;case"TrustedScriptURL":o=n.createScriptURL(o)}if(o!==m)try{d?e.setAttributeNS(d,l,o):e.setAttribute(l,o)}catch(p){Le(l,e)}}else Le(l,e)}else Le(l,e);else Le(l,e)}ze("afterSanitizeAttributes",e,null)}},je=function _sanitizeShadowDOM(e){var t,n=He(e);for(ze("beforeSanitizeShadowDOM",e,null);t=n.nextNode();)ze("uponSanitizeShadowNode",t,null),Ve(t)||(t.content instanceof u&&_sanitizeShadowDOM(t.content),We(t));ze("afterSanitizeShadowDOM",e,null)};return t.sanitize=function(e){var i,a,c,l,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if((Se=!e)&&(e="\x3c!--\x3e"),"string"!==typeof e&&!$e(e)){if("function"!==typeof e.toString)throw Bv("toString is not a function");if("string"!==typeof(e=e.toString()))throw Bv("dirty is not a string, aborting")}if(!t.isSupported)return e;if(re||De(d),t.removed=[],"string"===typeof e&&(fe=!1),fe){if(e.nodeName){var m=I(e.nodeName);if(!Z[m]||K[m])throw Bv("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof s)1===(a=(i=Fe("\x3c!----\x3e")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===a.nodeName||"HTML"===a.nodeName?i=a:i.appendChild(a);else{if(!ie&&!te&&!ne&&-1===e.indexOf("<"))return n&&ue?n.createHTML(e):e;if(!(i=Fe(e)))return ie?null:ue?T:""}i&&oe&&Pe(i.firstChild);for(var g=He(fe?e:i);c=g.nextNode();)Ve(c)||(c.content instanceof u&&je(c.content),We(c));if(fe)return e;if(ie){if(ae)for(l=D.call(i.ownerDocument);i.firstChild;)l.appendChild(i.firstChild);else l=i;return(j.shadowroot||j.shadowrootmode)&&(l=N.call(o,l,!0)),l}var p=ne?i.outerHTML:i.innerHTML;return ne&&Z["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&Mv(eb,i.ownerDocument.doctype.name)&&(p="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+p),te&&(p=Dv(p,P," "),p=Dv(p,L," "),p=Dv(p,F," ")),n&&ue?n.createHTML(p):p},t.setConfig=function(e){De(e),re=!0},t.clearConfig=function(){Oe=null,re=!1},t.isValidAttribute=function(e,t,n){Oe||De({});var o=I(e),i=I(t);return Ue(o,i,n)},t.addHook=function(e,t){"function"===typeof t&&(M[e]=M[e]||[],Ev(M[e],t))},t.removeHook=function(e){if(M[e])return Tv(M[e])},t.removeHooks=function(e){M[e]&&(M[e]=[])},t.removeAllHooks=function(){M={}},t}(),ab=function sanitizeHtmlString(e){return ib().sanitize(e)},ub=tinymce.util.Tools.resolve("tinymce.util.I18n"),cb={indent:!0,outdent:!0,"table-insert-column-after":!0,"table-insert-column-before":!0,"paste-column-after":!0,"paste-column-before":!0,"unordered-list":!0,"list-bull-circle":!0,"list-bull-default":!0,"list-bull-square":!0},sb="temporary-placeholder",lb=function defaultIcon(e){return function(){return Fe(e,sb).getOr("!not found!")}},fb=function getIconName(e,t){var n=e.toLowerCase();if(ub.isRtl()){var o=function ensureTrailing(e,t){return Ye(e,t)?e:function addToEnd(e,t){return e+t}(e,t)}(n,"-rtl");return He(t,o)?o:n}return n},db=function lookupIcon(e,t){return Fe(t,fb(e,t))},mb=function get$2(e,t){var n=t();return db(e,n).getOrThunk(lb(n))},gb=function addFocusableBehaviour(){return bh("add-focusable",[Pa((function(e){lc(e.element,"svg").each((function(e){return Wt(e,"focusable","false")}))}))])},pb=function renderIcon$3(e,t,n,o){var i,a,u=function needsRtlTransform(e){return!!ub.isRtl()&&He(cb,e)}(t)?["tox-icon--flip"]:[],c=Fe(n,fb(t,n)).or(o).getOrThunk(lb(n));return{dom:{tag:e.tag,attributes:null!==(i=e.attributes)&&void 0!==i?i:{},classes:e.classes.concat(u),innerHtml:c},behaviours:ks([].concat(d(null!==(a=e.behaviours)&&void 0!==a?a:[]),[gb()]))}},hb=function render$3(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:K.none();return pb(t,e,n(),o)},vb={success:"checkmark",error:"warning",err:"error",warning:"warning",warn:"warning",info:"info"},bb=Pm({name:"Notification",factory:function factory$m(e){var t=dv({dom:fv("<p>".concat(ab(e.translationProvider(e.text)),"</p>")),behaviours:ks([vh.config({})])}),n=function renderPercentBar(e){return{dom:{tag:"div",classes:["tox-bar"],styles:{width:"".concat(e,"%")}}}},o=function renderPercentText(e){return{dom:{tag:"div",classes:["tox-text"],innerHtml:"".concat(e,"%")}}},i=dv({dom:{tag:"div",classes:e.progress?["tox-progress-bar","tox-progress-indicator"]:["tox-progress-bar"]},components:[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(0)]},o(0)],behaviours:ks([vh.config({})])}),a={updateProgress:function updateProgress(e,t){e.getSystem().isConnected()&&i.getOpt(e).each((function(e){vh.set(e,[{dom:{tag:"div",classes:["tox-bar-container"]},components:[n(t)]},o(t)])}))},updateText:function updateText(e,n){if(e.getSystem().isConnected()){var o=t.get(e);vh.set(o,[Ju(n)])}}},u=ge([e.icon.toArray(),e.level.toArray(),e.level.bind((function(e){return K.from(vb[e])})).toArray()]),c=dv(lv.sketch({dom:{tag:"button",classes:["tox-notification__dismiss","tox-button","tox-button--naked","tox-button--icon"]},components:[hb("close",{tag:"span",classes:["tox-icon"],attributes:{"aria-label":e.translationProvider("Close")}},e.iconProvider)],action:function action(t){e.onAction(t)}})),s=function renderFirst(e,t,n){var o=n(),i=de(e,(function(e){return He(o,fb(e,o))}));return pb(t,i.getOr(sb),o,K.none())}(u,{tag:"div",classes:["tox-notification__icon"]},e.iconProvider),l=[s,{dom:{tag:"div",classes:["tox-notification__body"]},components:[t.asSpec()],behaviours:ks([vh.config({})])}];return{uid:e.uid,dom:{tag:"div",attributes:{role:"alert"},classes:e.level.map((function(e){return["tox-notification","tox-notification--in","tox-notification--".concat(e)]})).getOr(["tox-notification","tox-notification--in"])},behaviours:ks([Sh.config({}),bh("notification-events",[Aa(Bi(),(function(e){c.getOpt(e).each(Sh.focus)}))])]),components:l.concat(e.progress?[i.asSpec()]:[]).concat(e.closeButton?[c.asSpec()]:[]),apis:a}},configFields:[Wo("level"),Po("progress"),Wo("icon"),Po("onAction"),Po("text"),Po("iconProvider"),Po("translationProvider"),ii("closeButton",!0)],apis:{updateProgress:function updateProgress(e,t,n){e.updateProgress(t,n)},updateText:function updateText(e,t,n){e.updateText(t,n)}}}),yb=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Cb=tinymce.util.Tools.resolve("tinymce.EditorManager"),wb=tinymce.util.Tools.resolve("tinymce.Env");!function(e){e.default="wrap",e.floating="floating",e.sliding="sliding",e.scrolling="scrolling"}(rb||(rb={})),function(e){e.auto="auto",e.top="top",e.bottom="bottom"}(ob||(ob={}));var xb,Sb=function option$2(e){return function(t){return t.options.get(e)}},kb=function wrapOptional(e){return function(t){return K.from(e(t))}},Tb=function register$e(e){var t=wb.deviceType.isPhone(),n=wb.deviceType.isTablet()||t,o=e.options.register,i=function stringOrFalseProcessor(e){return T(e)||!1===e},a=function stringOrNumberProcessor(e){return T(e)||P(e)};o("skin",{processor:function processor(e){return T(e)||!1===e},default:"oxide"}),o("skin_url",{processor:"string"}),o("height",{processor:a,default:Math.max(e.getElement().offsetHeight,400)}),o("width",{processor:a,default:yb.DOM.getStyle(e.getElement(),"width")}),o("min_height",{processor:"number",default:100}),o("min_width",{processor:"number"}),o("max_height",{processor:"number"}),o("max_width",{processor:"number"}),o("style_formats",{processor:"object[]"}),o("style_formats_merge",{processor:"boolean",default:!1}),o("style_formats_autohide",{processor:"boolean",default:!1}),o("line_height_formats",{processor:"string",default:"1 1.1 1.2 1.3 1.4 1.5 2"}),o("font_family_formats",{processor:"string",default:"Andale Mono=andale mono,monospace;Arial=arial,helvetica,sans-serif;Arial Black=arial black,sans-serif;Book Antiqua=book antiqua,palatino,serif;Comic Sans MS=comic sans ms,sans-serif;Courier New=courier new,courier,monospace;Georgia=georgia,palatino,serif;Helvetica=helvetica,arial,sans-serif;Impact=impact,sans-serif;Symbol=symbol;Tahoma=tahoma,arial,helvetica,sans-serif;Terminal=terminal,monaco,monospace;Times New Roman=times new roman,times,serif;Trebuchet MS=trebuchet ms,geneva,sans-serif;Verdana=verdana,geneva,sans-serif;Webdings=webdings;Wingdings=wingdings,zapf dingbats"}),o("font_size_formats",{processor:"string",default:"8pt 10pt 12pt 14pt 18pt 24pt 36pt"}),o("font_size_input_default_unit",{processor:"string",default:"pt"}),o("block_formats",{processor:"string",default:"Paragraph=p;Heading 1=h1;Heading 2=h2;Heading 3=h3;Heading 4=h4;Heading 5=h5;Heading 6=h6;Preformatted=pre"}),o("content_langs",{processor:"object[]"}),o("removed_menuitems",{processor:"string",default:""}),o("menubar",{processor:function processor(e){return T(e)||R(e)},default:!t}),o("menu",{processor:"object",default:{}}),o("toolbar",{processor:function processor(e){return R(e)||T(e)||A(e)?{value:e,valid:!0}:{valid:!1,message:"Must be a boolean, string or array."}},default:!0}),oe(9,(function(e){o("toolbar"+(e+1),{processor:"string"})})),o("toolbar_mode",{processor:"string",default:n?"scrolling":"floating"}),o("toolbar_groups",{processor:"object",default:{}}),o("toolbar_location",{processor:"string",default:ob.auto}),o("toolbar_persist",{processor:"boolean",default:!1}),o("toolbar_sticky",{processor:"boolean",default:e.inline}),o("toolbar_sticky_offset",{processor:"number",default:0}),o("fixed_toolbar_container",{processor:"string",default:""}),o("fixed_toolbar_container_target",{processor:"object"}),o("ui_mode",{processor:"string",default:"combined"}),o("file_picker_callback",{processor:"function"}),o("file_picker_validator_handler",{processor:"function"}),o("file_picker_types",{processor:"string"}),o("typeahead_urls",{processor:"boolean",default:!0}),o("anchor_top",{processor:i,default:"#top"}),o("anchor_bottom",{processor:i,default:"#bottom"}),o("draggable_modal",{processor:"boolean",default:!1}),o("statusbar",{processor:"boolean",default:!0}),o("elementpath",{processor:"boolean",default:!0}),o("branding",{processor:"boolean",default:!0}),o("promotion",{processor:"boolean",default:!0}),o("resize",{processor:function processor(e){return"both"===e||R(e)},default:!wb.deviceType.isTouch()}),o("sidebar_show",{processor:"string"}),o("help_accessibility",{processor:"boolean",default:e.hasPlugin("help")}),o("default_font_stack",{processor:"string[]",default:[]})},Eb=Sb("readonly"),Ob=Sb("height"),Ab=Sb("width"),_b=kb(Sb("min_width")),Db=kb(Sb("min_height")),Rb=kb(Sb("max_width")),Nb=kb(Sb("max_height")),Mb=kb(Sb("style_formats")),Bb=Sb("style_formats_merge"),Ib=Sb("style_formats_autohide"),Pb=Sb("content_langs"),Lb=Sb("removed_menuitems"),Fb=Sb("toolbar_mode"),Hb=Sb("toolbar_groups"),$b=Sb("toolbar_location"),zb=Sb("fixed_toolbar_container"),Vb=Sb("fixed_toolbar_container_target"),Ub=Sb("toolbar_persist"),Zb=Sb("toolbar_sticky_offset"),Wb=Sb("menubar"),jb=Sb("toolbar"),Gb=Sb("file_picker_callback"),qb=Sb("file_picker_validator_handler"),Kb=Sb("font_size_input_default_unit"),Yb=Sb("file_picker_types"),Xb=Sb("typeahead_urls"),Jb=Sb("anchor_top"),Qb=Sb("anchor_bottom"),ey=Sb("draggable_modal"),ty=Sb("statusbar"),ny=Sb("elementpath"),ry=Sb("branding"),oy=Sb("resize"),iy=Sb("paste_as_text"),ay=Sb("sidebar_show"),uy=Sb("promotion"),cy=Sb("help_accessibility"),sy=Sb("default_font_stack"),ly=function isSkinDisabled(e){return!1===e.options.get("skin")},fy=function isMenubarEnabled(e){return!1!==e.options.get("menubar")},dy=function getSkinUrl(e){var t=e.options.get("skin_url");if(ly(e))return t;if(t)return e.documentBaseURI.toAbsolute(t);var n=e.options.get("skin");return Cb.baseURL+"/skins/ui/"+n},my=function getSkinUrlOption(e){return K.from(e.options.get("skin_url"))},gy=function getLineHeightFormats(e){return e.options.get("line_height_formats").split(" ")},py=function isToolbarEnabled(e){var t=jb(e),n=T(t),o=A(t)&&t.length>0;return!vy(e)&&(o||n||!0===t)},hy=function getMultipleToolbarsOption(e){var t=oe(9,(function(t){return e.options.get("toolbar"+(t+1))})),n=se(t,T);return We(n.length>0,n)},vy=function isMultipleToolbars(e){return hy(e).fold((function(){var t=jb(e);return L(t,T)&&t.length>0}),q)},yy=function isToolbarLocationBottom(e){return $b(e)===ob.bottom},Cy=function fixedContainerTarget(e){var t;if(!e.inline)return K.none();var n=null!==(t=zb(e))&&void 0!==t?t:"";if(n.length>0)return fc(Vt(),n);var o=Vb(e);return B(o)?K.some(nt.fromDom(o)):K.none()},wy=function useFixedContainer(e){return e.inline&&Cy(e).isSome()},xy=function getUiContainer(e){return Cy(e).getOrThunk((function(){return Pt(It(nt.fromDom(e.getElement())))}))},Sy=function isDistractionFree(e){return e.inline&&!fy(e)&&!py(e)&&!vy(e)},ky=function isStickyToolbar(e){var isStickyToolbar=e.options.get("toolbar_sticky");return(isStickyToolbar||e.inline)&&!wy(e)&&!Sy(e)},Ty=function isSplitUiMode(e){return!wy(e)&&"split"===e.options.get("ui_mode")},Ey=function getMenus(e){var t=e.options.get("menu");return De(t,(function(e){return s(s({},e),{},{items:e.items})}))},Oy=Object.freeze({__proto__:null,get ToolbarMode(){return rb},get ToolbarLocation(){return ob},register:Tb,getSkinUrl:dy,getSkinUrlOption:my,isReadOnly:Eb,isSkinDisabled:ly,getHeightOption:Ob,getWidthOption:Ab,getMinWidthOption:_b,getMinHeightOption:Db,getMaxWidthOption:Rb,getMaxHeightOption:Nb,getUserStyleFormats:Mb,shouldMergeStyleFormats:Bb,shouldAutoHideStyleFormats:Ib,getLineHeightFormats:gy,getContentLanguages:Pb,getRemovedMenuItems:Lb,isMenubarEnabled:fy,isMultipleToolbars:vy,isToolbarEnabled:py,isToolbarPersist:Ub,getMultipleToolbarsOption:hy,getUiContainer:xy,useFixedContainer:wy,isSplitUiMode:Ty,getToolbarMode:Fb,isDraggableModal:ey,isDistractionFree:Sy,isStickyToolbar:ky,getStickyToolbarOffset:Zb,getToolbarLocation:$b,isToolbarLocationBottom:yy,getToolbarGroups:Hb,getMenus:Ey,getMenubar:Wb,getToolbar:jb,getFilePickerCallback:Gb,getFilePickerTypes:Yb,useTypeaheadUrls:Xb,getAnchorTop:Jb,getAnchorBottom:Qb,getFilePickerValidatorHandler:qb,getFontSizeInputDefaultUnit:Kb,useStatusBar:ty,useElementPath:ny,promotionEnabled:uy,useBranding:ry,getResize:oy,getPasteAsText:iy,getSidebarShow:ay,useHelpAccessibility:cy,getDefaultFontStack:sy}),Ay="[data-mce-autocompleter]",_y=function detect$1(e){return dc(e,Ay)},Dy=function setup$e(e,t){var n=function redirectKeyToItem(e,t){Ca(e,Pi(),{raw:t})},o=function getItem(){return e.getMenu().bind(dg.getHighlighted)};t.on("keydown",(function(t){var i=t.which;e.isActive()&&(e.isMenuOpen()?13===i?(o().each(wa),t.preventDefault()):40===i?(o().fold((function(){e.getMenu().each(dg.highlightFirst)}),(function(e){n(e,t)})),t.preventDefault(),t.stopImmediatePropagation()):37!==i&&38!==i&&39!==i||o().each((function(e){n(e,t),t.preventDefault(),t.stopImmediatePropagation()})):13!==i&&38!==i&&40!==i||e.cancelIfNecessary())})),t.on("NodeChange",(function(t){e.isActive()&&!e.isProcessingAction()&&_y(nt.fromDom(t.element)).isNone()&&e.cancelIfNecessary()}))};!function(e){e[e.CLOSE_ON_EXECUTE=0]="CLOSE_ON_EXECUTE",e[e.BUBBLE_TO_SANDBOX=1]="BUBBLE_TO_SANDBOX"}(xb||(xb={}));var Ry,Ny=xb,My="tox-menu-nav__js",By="tox-collection__item",Iy="tox-swatch",Py={normal:My,color:Iy},Ly="tox-collection__item--enabled",Fy="tox-collection__item-icon",Hy="tox-collection__item-label",$y="tox-collection__item-caret",zy="tox-collection__item--active",Vy="tox-collection__item-container",Uy="tox-collection__item-container--row",Zy=function classForPreset(e){return Fe(Py,e).getOr(My)},Wy=function forMenu(e){return"color"===e?"tox-swatches":"tox-menu"},jy=function classes(e){return{backgroundMenu:"tox-background-menu",selectedMenu:"tox-selected-menu",selectedItem:"tox-collection__item--active",hasIcons:"tox-menu--has-icons",menu:Wy(e),tieredMenu:"tox-tiered-menu"}},Gy=function markers(e){var t=jy(e);return{backgroundMenu:t.backgroundMenu,selectedMenu:t.selectedMenu,menu:t.menu,selectedItem:t.selectedItem,item:Zy(e)}},qy=function dom$1(e,t,n){var o=jy(n);return{tag:"div",classes:ge([[o.menu,"tox-menu-".concat(t,"-column")],e?[o.hasIcons]:[]])}},Ky=[Qh.parts.items({})],Yy=function part(e,t,n){var o=jy(n);return{dom:{tag:"div",classes:ge([[o.tieredMenu]])},markers:Gy(n)}},Xy=z([Wo("data"),ei("inputAttributes",{}),ei("inputStyles",{}),ei("tag","input"),ei("inputClasses",[]),Dc("onSetValue"),ei("styles",{}),ei("eventOrder",{}),Nd("inputBehaviours",[Rd,Sh]),ei("selectOnFocus",!0)]),Jy=function focusBehaviours(e){return ks([Sh.config({onFocus:e.selectOnFocus?function(e){var t=e.element,n=Fu(t);t.dom.setSelectionRange(0,n.length)}:F})])},Qy=function behaviours(e){return s(s({},Jy(e)),Bd(e.inputBehaviours,[Rd.config({store:s(s({mode:"manual"},e.data.map((function(e){return{initialValue:e}})).getOr({})),{},{getValue:function getValue(e){return Fu(e.element)},setValue:function setValue(e,t){Fu(e.element)!==t&&Hu(e.element,t)}}),onSetValue:e.onSetValue})]))},eC=function dom(e){return{tag:e.tag,attributes:s({type:"text"},e.inputAttributes),styles:e.inputStyles,classes:e.inputClasses}},tC=Pm({name:"Input",configFields:Xy(),factory:function factory$l(e,t){return{uid:e.uid,dom:eC(e),components:[],behaviours:Qy(e),eventOrder:e.eventOrder}}}),nC=qa("refetch-trigger-event"),rC=qa("redirect-menu-item-interaction"),oC="tox-menu__searcher",iC=function findWithinSandbox(e){return fc(e.element,".".concat(oC)).bind((function(t){return e.getSystem().getByDom(t).toOptional()}))},aC=iC,uC=function saveState(e){return{fetchPattern:Rd.getValue(e),selectionStart:e.element.dom.selectionStart,selectionEnd:e.element.dom.selectionEnd}},cC=function renderMenuSearcher(e){var t=function handleByBrowser(e,t){return t.cut(),K.none()},n=function handleByHighlightedItem(e,t){var n={interactionEvent:t.event,eventType:t.event.raw.type};return Ca(e,rC,n),K.some(!0)},o="searcher-events";return{dom:{tag:"div",classes:[By]},components:[tC.sketch({inputClasses:[oC,"tox-textfield"],inputAttributes:s(s({},e.placeholder.map((function(t){return{placeholder:e.i18n(t)}})).getOr({})),{},{type:"search","aria-autocomplete":"list"}),inputBehaviours:ks([bh(o,[Aa(Fi(),(function(e){ya(e,nC)})),Aa(Pi(),(function(e,t){"Escape"===t.event.raw.key&&t.stop()}))]),ch.config({mode:"special",onLeft:t,onRight:t,onSpace:t,onEnter:n,onEscape:n,onUp:n,onDown:n})]),eventOrder:{keydown:[o,ch.name()]}})]}},sC="tox-collection--results__js",lC=function augmentWithAria(e){var t;return e.dom?s(s({},e),{},{dom:s(s({},e.dom),{},{attributes:s(s({},null!==(t=e.dom.attributes)&&void 0!==t?t:{}),{},{id:qa("aria-item-search-result-id"),"aria-selected":"false"})})}):e},fC=function chunk(e,t){return function(n){var o=ie(n,t);return ae(o,(function(t){return{dom:e,components:t}}))}},dC=function preprocessCollection(e,t){var n=[],o=[];return ue(e,(function(e,i){t(e,i)?(o.length>0&&n.push(o),o=[],(He(e.dom,"innerHtml")||e.components&&e.components.length>0)&&o.push(e)):o.push(e)})),o.length>0&&n.push(o),ae(n,(function(e){return{dom:{tag:"div",classes:["tox-collection__group"]},components:e}}))},mC=function insertItemsPlaceholder(e,t,n){return Qh.parts.items({preprocess:function preprocess(o){var i=ae(o,n);return"auto"!==e&&e>1?fC({tag:"div",classes:["tox-collection__group"]},e)(i):dC(i,(function(e,n){return"separator"===t[n].type}))}})},gC=function forCollection(e,t){return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[mC(e,t,V)]}},pC=function menuHasIcons(e){return re(e,(function(e){return"icon"in e&&void 0!==e.icon}))},hC=function handleError(e){return console.error(Do(e)),console.log(e),K.none()},vC=function createHorizontalPartialMenuWithAlloyItems(e,t,n,o,i){var a=function forHorizontalCollection(e){return{dom:{tag:"div",classes:["tox-collection","tox-collection--horizontal"]},components:[Qh.parts.items({preprocess:function preprocess(t){return dC(t,(function(t,n){return"separator"===e[n].type}))}})]}}(n);return{value:e,dom:a.dom,components:a.components,items:n}},bC=function createPartialMenuWithAlloyItems(e,t,n,o,i){if("color"===i.menuType){var a=function forSwatch(e){return{dom:{tag:"div",classes:["tox-menu","tox-swatches-menu"]},components:[{dom:{tag:"div",classes:["tox-swatches"]},components:[Qh.parts.items({preprocess:"auto"!==e?fC({tag:"div",classes:["tox-swatches__row"]},e):V})]}]}}(o);return{value:e,dom:a.dom,components:a.components,items:n}}if("normal"===i.menuType&&"auto"===o){var u=gC(o,n);return{value:e,dom:u.dom,components:u.components,items:n}}if("normal"===i.menuType||"searchable"===i.menuType){var c=function getNormalStructure(){return"searchable"!==i.menuType?gC(o,n):"search-with-field"===i.searchMode.searchMode?function forCollectionWithSearchField(e,t,n){var o=qa("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection"].concat(1===e?["tox-collection--list"]:["tox-collection--grid"])},components:[cC({i18n:ub.translate,placeholder:n.placeholder}),{dom:{tag:"div",classes:[].concat(d(1===e?["tox-collection--list"]:["tox-collection--grid"]),[sC]),attributes:{id:o}},components:[mC(e,t,lC)]}]}}(o,n,i.searchMode):function forCollectionWithSearchResults(e,t){var n=qa("aria-controls-search-results");return{dom:{tag:"div",classes:["tox-menu","tox-collection",sC].concat(1===e?["tox-collection--list"]:["tox-collection--grid"]),attributes:{id:n}},components:[mC(e,t,lC)]}}(o,n)}();return{value:e,dom:c.dom,components:c.components,items:n}}if("listpreview"===i.menuType&&"auto"!==o){var s=function forToolbar(e){return{dom:{tag:"div",classes:["tox-menu","tox-collection","tox-collection--toolbar","tox-collection--toolbar-lg"]},components:[Qh.parts.items({preprocess:fC({tag:"div",classes:["tox-collection__group"]},e)})]}}(o);return{value:e,dom:s.dom,components:s.components,items:n}}return{value:e,dom:qy(t,o,i.menuType),components:Ky,items:n}},yC=Ho("type"),CC=Ho("name"),wC=Ho("label"),xC=Ho("text"),SC=Ho("title"),kC=Ho("icon"),TC=Ho("value"),EC=zo("fetch"),OC=zo("getSubmenuItems"),AC=zo("onAction"),_C=zo("onItemAction"),DC=ai("onSetup",(function(){return F})),RC=qo("name"),NC=qo("text"),MC=qo("icon"),BC=qo("tooltip"),IC=qo("label"),PC=qo("shortcut"),LC=Yo("select"),FC=ii("active",!1),HC=ii("borderless",!1),$C=ii("enabled",!0),zC=ii("primary",!1),VC=function defaultedColumns(e){return ei("columns",e)},UC=ei("meta",{}),ZC=ai("onAction",F),WC=function defaultedType(e){return ri("type",e)},jC=function generatedName(e){return Mo("name","name",jr((function(){return qa("".concat(e,"-name"))})),bo)},GC=co([yC,NC]),qC=co([WC("autocompleteitem"),FC,$C,UC,TC,NC,MC]),KC=[$C,BC,MC,NC,DC],YC=co([yC,AC].concat(KC)),XC=function createToolbarButton(e){return Oo("toolbarbutton",YC,e)},JC=[FC].concat(KC),QC=co(JC.concat([yC,AC])),ew=function createToggleButton(e){return Oo("ToggleButton",QC,e)},tw=[ai("predicate",G),oi("scope","node",["node","editor"]),oi("position","selection",["node","selection","line"])],nw=KC.concat([WC("contextformbutton"),zC,AC,Bo("original",V)]),rw=JC.concat([WC("contextformbutton"),zC,AC,Bo("original",V)]),ow=KC.concat([WC("contextformbutton")]),iw=JC.concat([WC("contextformtogglebutton")]),aw=Ro("type",{contextformbutton:nw,contextformtogglebutton:rw}),uw=co([WC("contextform"),ai("initValue",z("")),IC,Zo("commands",aw),jo("launch",Ro("type",{contextformbutton:ow,contextformtogglebutton:iw}))].concat(tw)),cw=co([WC("contexttoolbar"),Ho("items")].concat(tw)),sw=[yC,Ho("src"),qo("alt"),ui("classes",[],bo)],lw=co(sw),fw=[yC,xC,RC,ui("classes",["tox-collection__item-label"],bo)],dw=co(fw),mw=io((function(){return ko("type",{cardimage:lw,cardtext:dw,cardcontainer:gw})})),gw=co([yC,ri("direction","horizontal"),ri("align","left"),ri("valign","middle"),Zo("items",mw)]),pw=[$C,NC,PC,function generatedValue(e){return Mo("value","value",jr((function(){return qa("".concat(e,"-value"))})),po())}("menuitem"),UC],hw=co([yC,IC,Zo("items",mw),DC,ZC].concat(pw)),vw=co([yC,FC,MC].concat(pw)),bw=[yC,Ho("fancytype"),ZC],yw=[ei("initData",{})].concat(bw),Cw=[Yo("select"),ci("initData",{},[ii("allowCustomColors",!0),ri("storageKey","default"),Xo("colors",po())])].concat(bw),ww=Ro("fancytype",{inserttable:yw,colorswatch:Cw}),xw=co([yC,DC,ZC,MC].concat(pw)),Sw=co([yC,OC,DC,MC].concat(pw)),kw=co([yC,MC,FC,DC,AC].concat(pw)),Tw=function detectSize(e,t,n){var o=rf(e.element,"."+n);if(o.length>0){var i=me(o,(function(e){var n=e.dom.getBoundingClientRect().top,i=o[0].dom.getBoundingClientRect().top;return Math.abs(n-i)>t})).getOr(o.length);return K.some({numColumns:i,numRows:Math.ceil(o.length/i)})}return K.none()},Ew=function namedEvents(e,t){return ks([bh(e,t)])},Ow=function unnamedEvents(e){return Ew(qa("unnamed-events"),e)},Aw=qa("tooltip.exclusive"),_w=qa("tooltip.show"),Dw=qa("tooltip.hide"),Rw=function hideAllExclusive(e,t,n){e.getSystem().broadcastOn([Aw],{})},Nw=Object.freeze({__proto__:null,hideAllExclusive:Rw,setComponents:function setComponents(e,t,n,o){n.getTooltip().each((function(e){e.getSystem().isConnected()&&vh.set(e,o)}))}}),Mw=Object.freeze({__proto__:null,events:function events$9(e,t){var n=function hide(n){t.getTooltip().each((function(o){Kf(o),e.onHide(n,o),t.clearTooltip()})),t.clearTimer()};return Ta(ge([[Aa(_w,(function(n){t.resetTimer((function(){!function show(n){if(!t.isShowing()){Rw(n);var o=e.lazySink(n).getOrDie(),i=n.getSystem().build({dom:e.tooltipDom,components:e.tooltipComponents,events:Ta("normal"===e.mode?[Aa(Mi(),(function(e){ya(n,_w)})),Aa(Ri(),(function(e){ya(n,Dw)}))]:[]),behaviours:ks([vh.config({})])});t.setTooltip(i),jf(o,i),e.onShow(n,i),Ff.position(o,i,{anchor:e.anchor(n)})}}(n)}),e.delay)})),Aa(Dw,(function(o){t.resetTimer((function(){n(o)}),e.delay)})),Aa(Yi(),(function(e,t){var o=t;o.universal||ne(o.channels,Aw)&&n(e)})),La((function(e){n(e)}))],"normal"===e.mode?[Aa(Bi(),(function(e){ya(e,_w)})),Aa(qi(),(function(e){ya(e,Dw)})),Aa(Mi(),(function(e){ya(e,_w)})),Aa(Ri(),(function(e){ya(e,Dw)}))]:[Aa(va(),(function(e,t){ya(e,_w)})),Aa(ba(),(function(e){ya(e,Dw)}))]]))}}),Bw=[Po("lazySink"),Po("tooltipDom"),ei("exclusive",!0),ei("tooltipComponents",[]),ei("delay",300),oi("mode","normal",["normal","follow-highlight"]),ei("anchor",(function(e){return{type:"hotspot",hotspot:e,layouts:{onLtr:z([ss,cs,rs,as,os,us]),onRtl:z([ss,cs,rs,as,os,us])}}})),Dc("onHide"),Dc("onShow")],Iw=Object.freeze({__proto__:null,init:function init$b(){var e=nl(),t=nl(),n=function clearTimer(){e.on(clearTimeout)},o=z("not-implemented");return mu({getTooltip:t.get,isShowing:t.isSet,setTooltip:t.set,clearTooltip:t.clear,clearTimer:n,resetTimer:function resetTimer(t,o){n(),e.set(setTimeout(t,o))},readState:o})}}),Pw=Es({fields:Bw,name:"tooltipping",active:Mw,state:Iw,apis:Nw}),Lw="silver.readonly",Fw=co([function requiredBoolean(e){return Lo(e,yo)}("readonly")]),Hw=function broadcastReadonly(e,t){var n=e.mainUi.outerContainer.element,o=[e.mainUi.mothership].concat(d(e.uiMotherships));t&&ue(o,(function(e){e.broadcastOn([dd()],{target:n})})),ue(o,(function(e){e.broadcastOn([Lw],{readonly:t})}))},$w=function setupReadonlyModeSwitch(e,t){e.on("init",(function(){e.mode.isReadOnly()&&Hw(t,!0)})),e.on("SwitchMode",(function(){return Hw(t,e.mode.isReadOnly())})),Eb(e)&&e.mode.set("readonly")},zw=function receivingConfig(){return Ds.config({channels:l({},Lw,{schema:Fw,onReceive:function onReceive(e,t){tg.set(e,t.readonly)}})})},Vw=function item(e){return tg.config({disabled:e,disableClass:"tox-collection__item--state-disabled"})},Uw=function button(e){return tg.config({disabled:e})},Zw=function splitButton(e){return tg.config({disabled:e,disableClass:"tox-tbtn--disabled"})},Ww=function toolbarButton(e){return tg.config({disabled:e,disableClass:"tox-tbtn--disabled",useNative:!1})},jw=function runWithApi(e,t){var n=e.getApi(t);return function(e){e(n)}},Gw=function onControlAttached(e,t){return Pa((function(n){jw(e,n)((function(n){var o=e.onSetup(n);I(o)&&t.set(o)}))}))},qw=function onControlDetached(e,t){return La((function(n){return jw(e,n)(t.get())}))},Kw=function onMenuItemExecute(e,t){return Ha((function(n,o){jw(e,n)(e.onAction),e.triggersSubmenu||t!==Ny.CLOSE_ON_EXECUTE||(n.getSystem().isConnected()&&ya(n,ta()),o.stop())}))},Yw=l({},Xi(),["disabling","alloy.base.behaviour","toggling","item-events"]),Xw=Ve,Jw=function renderCommonItem(e,t,n,o){var i=si(F);return{type:"item",dom:t.dom,components:Xw(t.optComponents),data:e.data,eventOrder:Yw,hasSubmenu:e.triggersSubmenu,itemBehaviours:ks([bh("item-events",[Kw(e,n),Gw(e,i),qw(e,i)]),Vw((function(){return!e.enabled||o.isDisabled()})),zw(),vh.config({})].concat(e.itemBehaviours))}},Qw=function buildData(e){return{value:e.value,meta:s({text:e.text.getOr("")},e.meta)}},ex=function convertText(e){var t=wb.os.isMacOS()||wb.os.isiOS(),n=t?{alt:"\u2325",ctrl:"\u2303",shift:"\u21e7",meta:"\u2318",access:"\u2303\u2325"}:{meta:"Ctrl",access:"Shift+Alt"},o=e.split("+"),i=ae(o,(function(e){var t=e.toLowerCase().trim();return He(n,t)?n[t]:e}));return t?i.join(""):i.join("+")},tx=function renderIcon$2(e,t){return hb(e,{tag:"div",classes:arguments.length>2&&void 0!==arguments[2]?arguments[2]:[Fy]},t)},nx=function renderText(e){return{dom:{tag:"div",classes:[Hy]},components:[Ju(ub.translate(e))]}},rx=function renderHtml(e,t){return{dom:{tag:"div",classes:t,innerHtml:e}}},ox=function renderStyledText(e,t){return{dom:{tag:"div",classes:[Hy]},components:[{dom:{tag:e.tag,styles:e.styles},components:[Ju(ub.translate(t))]}]}},ix=function renderShortcut(e){return{dom:{tag:"div",classes:["tox-collection__item-accessory"]},components:[Ju(ex(e))]}},ax=function renderCheckmark(e){return tx("checkmark",e,["tox-collection__item-checkmark"])},ux=function renderColorStructure(e,t,n){var o=e.ariaLabel,i=e.value,a=e.iconContent.map((function(e){return function getOr(e,t,n){var o=t();return db(e,o).or(n).getOrThunk(lb(o))}(e,t.icons,n)}));return{dom:function getDom(){var e=Iy,n=a.getOr(""),u=o.map((function(e){return{title:t.translate(e)}})).getOr({}),c={tag:"div",attributes:u,classes:[e]};return"custom"===i?s(s({},c),{},{tag:"button",classes:[].concat(d(c.classes),["tox-swatches__picker-btn"]),innerHtml:n}):"remove"===i?s(s({},c),{},{classes:[].concat(d(c.classes),["tox-swatch--remove"]),innerHtml:n}):B(i)?s(s({},c),{},{attributes:s(s({},c.attributes),{},{"data-mce-color":i}),styles:{"background-color":i},innerHtml:n}):c}(),optComponents:[]}},cx=function renderItemDomStructure(e){var t=e.map((function(e){return{attributes:{title:ub.translate(e),id:qa("menu-item")}}})).getOr({});return s({tag:"div",classes:[My,By]},t)},sx=function renderItemStructure(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:K.none();return"color"===e.presets?ux(e,t,o):function renderNormalItemStructure(e,t,n,o){var i={tag:"div",classes:[Fy]},a=n?e.iconContent.map((function renderIcon(e){return hb(e,i,t.icons,o)})).orThunk((function renderEmptyIcon(){return K.some({dom:i})})):K.none(),u=e.checkMark,c=K.from(e.meta).fold((function(){return nx}),(function(e){return He(e,"style")?curry(ox,e.style):nx})),s=e.htmlContent.fold((function(){return e.textContent.map(c)}),(function(e){return K.some(rx(e,[Hy]))}));return{dom:cx(e.ariaLabel),optComponents:[a,s,e.shortcutContent.map(ix),u,e.caret]}}(e,t,n,o)},lx=function tooltipBehaviour(e,t){return Fe(e,"tooltipWorker").map((function(e){return[Pw.config({lazySink:t.getSink,tooltipDom:{tag:"div",classes:["tox-tooltip-worker-container"]},tooltipComponents:[],anchor:function anchor(e){return{type:"submenu",item:e,overrides:{maxHeightFunction:vl}}},mode:"follow-highlight",onShow:function onShow(t,n){e((function(e){Pw.setComponents(t,[Qu({element:nt.fromDom(e)})])}))}})]})).getOr([])},fx=function replaceText(e,t){var n=function encodeText(e){return yb.DOM.encode(e)}(ub.translate(e));if(t.length>0){var o=new RegExp(function escape(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}(t),"gi");return n.replace(o,(function(e){return'<span class="tox-autocompleter-highlight">'.concat(e,"</span>")}))}return n},dx=function render$2(e,t){return ae(e,(function(e){switch(e.type){case"cardcontainer":return function renderContainer(e,t){var n="vertical"===e.direction?"tox-collection__item-container--column":Uy,o="left"===e.align?"tox-collection__item-container--align-left":"tox-collection__item-container--align-right";return{dom:{tag:"div",classes:[Vy,n,o,function getValignClass(){switch(e.valign){case"top":return"tox-collection__item-container--valign-top";case"middle":return"tox-collection__item-container--valign-middle";case"bottom":return"tox-collection__item-container--valign-bottom"}}()]},components:t}}(e,render$2(e.items,t));case"cardimage":return function renderImage(e,t,n){return{dom:{tag:"img",classes:t,attributes:{src:e,alt:n.getOr("")}}}}(e.src,e.classes,e.alt);case"cardtext":var n=e.name.exists((function(e){return ne(t.cardText.highlightOn,e)})),o=n?K.from(t.cardText.matchText).getOr(""):"";return rx(fx(e.text,o),e.classes)}}))},mx=pm(jh(),Gh()),gx=function hexColour(e){return{value:bx(e)}},px=/^#?([a-f\d])([a-f\d])([a-f\d])$/i,hx=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,vx=function isHexString(e){return px.test(e)||hx.test(e)},bx=function normalizeHex(e){return Ge(e,"#").toUpperCase()},yx=function extractValues(e){var t=function getLongForm(e){var t=e.value.replace(px,(function(e,t,n,o){return t+t+n+n+o+o}));return{value:t}}(e),n=hx.exec(t.value);return null===n?["FFFFFF","FF","FF","FF"]:n},Cx=function toHex(e){var t=e.toString(16);return(1===t.length?"0"+t:t).toUpperCase()},wx=function fromRgba(e){var t=Cx(e.red)+Cx(e.green)+Cx(e.blue);return gx(t)},xx=Math.min,Sx=Math.max,kx=Math.round,Tx=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Ex=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Ox=function rgbaColour(e,t,n,o){return{red:e,green:t,blue:n,alpha:o}},Ax=function isRgbaComponent(e){var t=parseInt(e,10);return t.toString()===e&&t>=0&&t<=255},_x=function fromHsv(e){var t,n,o,i=(e.hue||0)%360,a=e.saturation/100,u=e.value/100;if(a=Sx(0,xx(a,1)),u=Sx(0,xx(u,1)),0===a)return t=n=o=kx(255*u),Ox(t,n,o,1);var c=i/60,s=u*a,l=s*(1-Math.abs(c%2-1)),d=u-s;switch(Math.floor(c)){case 0:t=s,n=l,o=0;break;case 1:t=l,n=s,o=0;break;case 2:t=0,n=s,o=l;break;case 3:t=0,n=l,o=s;break;case 4:t=l,n=0,o=s;break;case 5:t=s,n=0,o=l;break;default:t=n=o=0}return t=kx(255*(t+d)),n=kx(255*(n+d)),o=kx(255*(o+d)),Ox(t,n,o,1)},Dx=function fromHex(e){var t=yx(e),n=parseInt(t[1],16),o=parseInt(t[2],16),i=parseInt(t[3],16);return Ox(n,o,i,1)},Rx=function fromStringValues(e,t,n,o){var i=parseInt(e,10),a=parseInt(t,10),u=parseInt(n,10),c=parseFloat(o);return Ox(i,a,u,c)},Nx=function fromString(e){if("transparent"===e)return K.some(Ox(0,0,0,0));var t=Tx.exec(e);if(null!==t)return K.some(Rx(t[1],t[2],t[3],"1"));var n=Ex.exec(e);return null!==n?K.some(Rx(n[1],n[2],n[3],n[4])):K.none()},Mx=function toString(e){return"rgba(".concat(e.red,",").concat(e.green,",").concat(e.blue,",").concat(e.alpha,")")},Bx=Ox(255,0,0,1),Ix=function fireResizeContent(e,t){e.dispatch("ResizeContent",t)},Px=function fireTextColorChange(e,t){e.dispatch("TextColorChange",t)},Lx=function fireResolveName(e,t){return e.dispatch("ResolveName",{name:t.nodeName.toLowerCase(),target:t})},Fx=function composeUnbinders(e,t){return function(){e(),t()}},Hx=function onSetupEditableToggle(e){return zx(e,"NodeChange",(function(t){t.setEnabled(e.selection.isEditable())}))},$x=function onSetupStateToggle(e,t){return function(n){var o=Hx(e)(n),i=function onSetupFormatToggle(e,t){return function(n){var o=tl(),i=function init(){n.setActive(e.formatter.match(t));var i=e.formatter.formatChanged(t,n.setActive);o.set(i)};return e.initialized?i():e.once("init",i),function(){e.off("init",i),o.clear()}}}(e,t)(n);return function(){o(),i()}}},zx=function onSetupEvent(e,t,n){return function(o){var i=function handleEvent(){return n(o)},a=function init(){n(o),e.on(t,i)};return e.initialized?a():e.once("init",a),function(){e.off("init",a),e.off(t,i)}}},Vx=function onActionToggleFormat$1(e){return function(t){return function(){e.undoManager.transact((function(){e.focus(),e.execCommand("mceToggleFormat",!1,t.format)}))}}},Ux=function onActionExecCommand(e,t){return function(){return e.execCommand(t)}},Zx=tinymce.util.Tools.resolve("tinymce.util.LocalStorage"),Wx={},jx=function getCacheForId(e){return Fe(Wx,e).getOrThunk((function(){var t="tinymce-custom-colors-".concat(e),n=Zx.getItem(t);if(M(n)){var o=Zx.getItem("tinymce-custom-colors");Zx.setItem(t,B(o)?o:"[]")}var i=function ColorCache(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=Zx.getItem(e),o=function prune(e){return t-e.length<0?e.slice(0,t):e}(T(n)?JSON.parse(n):[]),i=function remove(e){o.splice(e,1)};return{add:function add(n){te(o,n).each(i),o.unshift(n),o.length>t&&o.pop(),Zx.setItem(e,JSON.stringify(o))},state:function state(){return o.slice(0)}}}(t,10);return Wx[e]=i,i}))},Gx=function addColor(e,t){jx(e).add(t)},qx=function hsvColour(e,t,n){return{hue:e,saturation:t,value:n}},Kx=function fromRgb(e){var t,n=0,o=0,i=e.red/255,a=e.green/255,u=e.blue/255,c=Math.min(i,Math.min(a,u)),s=Math.max(i,Math.max(a,u));return c===s?qx(0,0,100*(o=c)):(n=60*((n=i===c?3:u===c?1:5)-(i===c?a-u:u===c?i-a:u-i)/(s-c)),t=(s-c)/s,o=s,qx(Math.round(n),Math.round(100*t),Math.round(100*o)))},Yx=function hsvToHex(e){return wx(_x(e))},Xx=function anyToHex(e){return function fromString$1(e){return vx(e)?K.some({value:bx(e)}):K.none()}(e).orThunk((function(){return Nx(e).map(wx)})).getOrThunk((function(){var t=document.createElement("canvas");t.height=1,t.width=1;var n=t.getContext("2d");n.clearRect(0,0,t.width,t.height),n.fillStyle="#FFFFFF",n.fillStyle=e,n.fillRect(0,0,1,1);var o=n.getImageData(0,0,1,1).data,i=o[0],a=o[1],u=o[2],c=o[3];return wx(Ox(i,a,u,c))}))},Jx="forecolor",Qx="hilitecolor",eS=function mapColors(e){for(var t=[],n=0;n<e.length;n+=2)t.push({text:e[n+1],value:"#"+Xx(e[n]).value,icon:"checkmark",type:"choiceitem"});return t},tS=function option$1(e){return function(t){return t.options.get(e)}},nS="#000000",rS=function getColors$2(e,t){return t===Jx&&e.options.isSet("color_map_foreground")?tS("color_map_foreground")(e):t===Qx&&e.options.isSet("color_map_background")?tS("color_map_background")(e):tS("color_map")(e)},oS=function calcCols(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return Math.max(5,Math.ceil(Math.sqrt(rS(e,t).length)))},iS=function defaultCols(e,t){var defaultCols=tS("color_cols")(e),n=oS(e,t);return defaultCols===oS(e)?n:defaultCols},aS=function getColorCols$1(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return Math.round(function getCols(){return t===Jx?tS("color_cols_foreground")(e):t===Qx?tS("color_cols_background")(e):tS("color_cols")(e)}())},uS=tS("custom_colors"),cS=tS("color_default_foreground"),sS=tS("color_default_background"),lS=function getClosestCssBackgroundColorValue(e){return yi(e,(function(e){if(ft(e)){var t=nn(e,"background-color");return We(function isValidBackgroundColor(e){return Nx(e).exists((function(e){return 0!==e.alpha}))}(t),t)}return K.none()})).getOr("rgba(0, 0, 0, 0)")},fS=function getCurrentColor(e,t){var n=nt.fromDom(e.selection.getStart()),o="hilitecolor"===t?lS(n):nn(n,"color");return Nx(o).map((function(e){return"#"+wx(e).value}))},dS=function getAdditionalColors(e){var t="choiceitem",n={type:t,text:"Remove color",icon:"color-swatch-remove-color",value:"remove"};return e?[n,{type:t,text:"Custom color",icon:"color-picker",value:"custom"}]:[n]},mS=function applyColor(e,t,n,o){"custom"===n?xS(e)((function(n){n.each((function(n){Gx(t,n),e.execCommand("mceApplyTextcolor",t,n),o(n)}))}),fS(e,t).getOr(nS)):"remove"===n?(o(""),e.execCommand("mceRemoveTextcolor",t)):(o(n),e.execCommand("mceApplyTextcolor",t,n))},gS=function getColors$1(e,t,n){return e.concat(function getCurrentColors(e){return ae(jx(e).state(),(function(e){return{type:"choiceitem",text:e,icon:"checkmark",value:e}}))}(t).concat(dS(n)))},pS=function getFetch$1(e,t,n){return function(o){o(gS(e,t,n))}},hS=function setIconColor(e,t,n){var o="forecolor"===t?"tox-icon-text-color__color":"tox-icon-highlight-bg-color__color";e.setIconFill(o,n)},vS=function setTooltip(e,t){e.setTooltip(t)},bS=function select$1(e,t){return function(n){var o=fS(e,t);return ze(o,n.toUpperCase())}},yS=function getToolTipText(e,t,n){if(Qe(n))return"forecolor"===t?"Text color":"Background color";var o="forecolor"===t?"Text color {0}":"Background color {0}",i=gS(rS(e,t),t,!1),a=de(i,(function(e){return e.value===n})).getOr({text:""}).text;return e.translate([o,e.translate(a)])},CS=function registerTextColorButton(e,t,n,o){e.ui.registry.addSplitButton(t,{tooltip:yS(e,n,o.get()),presets:"color",icon:"forecolor"===t?"text-color":"highlight-bg-color",select:bS(e,n),columns:aS(e,n),fetch:pS(rS(e,n),n,uS(e)),onAction:function onAction(t){mS(e,n,o.get(),F)},onItemAction:function onItemAction(i,a){mS(e,n,a,(function(n){o.set(n),Px(e,{name:t,color:n})}))},onSetup:function onSetup(i){hS(i,t,o.get());var a=function handler(o){o.name===t&&(hS(i,o.name,o.color),vS(i,yS(e,n,o.color)))};return e.on("TextColorChange",a),Fx(Hx(e)(i),(function(){e.off("TextColorChange",a)}))}})},wS=function registerTextColorMenuItem(e,t,n,o,i){e.ui.registry.addNestedMenuItem(t,{text:o,icon:"forecolor"===t?"text-color":"highlight-bg-color",onSetup:function onSetup(o){return vS(o,yS(e,n,i.get())),hS(o,t,i.get()),Hx(e)(o)},getSubmenuItems:function getSubmenuItems(){return[{type:"fancymenuitem",fancytype:"colorswatch",select:bS(e,n),initData:{storageKey:n},onAction:function onAction(o){mS(e,n,o.value,(function(n){i.set(n),Px(e,{name:t,color:n})}))}}]}})},xS=function colorPickerDialog(e){return function(t,n){var o=!1,i={colorpicker:n};e.windowManager.open({title:"Color Picker",size:"normal",body:{type:"panel",items:[{type:"colorpicker",name:"colorpicker",label:"Color"}]},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:i,onAction:function onAction(e,t){"hex-valid"===t.name&&(o=t.value)},onSubmit:function onSubmit(n){var i=n.getData().colorpicker;o?(t(K.from(i)),n.close()):e.windowManager.alert(e.translate(["Invalid hex color code: {0}",i]))},onClose:F,onCancel:function onCancel(){t(K.none())}})}},SS=function createPartialChoiceMenu(e,t,n,o,i,a,u,c){var s=pC(t),l=kS(t,n,o,"color"!==i?"normal":"color",a,u,c);return bC(e,s,l,o,{menuType:i})},kS=function createChoiceItems(e,t,n,o,i,a,u){return Ve(ae(e,(function(c){return"choiceitem"===c.type?function createChoiceMenuItem(e){return Oo("choicemenuitem",vw,e)}(c).fold(hC,(function(c){return K.some(function renderChoiceItem(e,t,n,o,i,a,u){var c=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],s=sx({presets:n,textContent:t?e.text:K.none(),htmlContent:K.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:t?e.shortcut:K.none(),checkMark:t?K.some(ax(u.icons)):K.none(),caret:K.none(),value:e.value},u,c);return Zr(Jw({data:Qw(e),enabled:e.enabled,getApi:function getApi(e){return{setActive:function setActive(t){Rh.set(e,t)},isActive:function isActive(){return Rh.isOn(e)},isEnabled:function isEnabled(){return!tg.isDisabled(e)},setEnabled:function setEnabled(t){return tg.set(e,!t)}}},onAction:function onAction(t){return o(e.value)},onSetup:function onSetup(e){return e.setActive(i),F},triggersSubmenu:!1,itemBehaviours:[]},s,a,u),{toggling:{toggleClass:Ly,toggleOnExecute:!1,selected:e.active,exclusive:!0}})}(c,1===n,o,t,a(c.value),i,u,pC(e)))})):K.none()})))},TS=function deriveMenuMovement(e,t){var n=Gy(t);return 1===e?{mode:"menu",moveOnTab:!0}:"auto"===e?{mode:"grid",selector:"."+n.item,initSize:{numColumns:1,numRows:1}}:{mode:"matrix",rowSelector:"."+("color"===t?"tox-swatches__row":"tox-collection__group"),previousSelector:function previousSelector(e){return"color"===t?fc(e.element,"[aria-checked=true]"):K.none()}}},ES=function deriveCollectionMovement(e,t){return 1===e?{mode:"menu",moveOnTab:!1,selector:".tox-collection__item"}:"auto"===e?{mode:"flatgrid",selector:".tox-collection__item",initSize:{numColumns:1,numRows:1}}:{mode:"matrix",selectors:{row:"color"===t?".tox-swatches__row":".tox-collection__group",cell:".".concat("color"===t?Iy:By)}}},OS=function getColorItems(e,t){var n=e.initData.allowCustomColors&&t.colorinput.hasCustomColors();return e.initData.colors.fold((function(){return gS(t.colorinput.getColors(e.initData.storageKey),e.initData.storageKey,n)}),(function(e){return e.concat(dS(n))}))},AS=qa("cell-over"),_S=qa("cell-execute"),DS=function makeCell(e,t,n){var o=function emitExecute(n){return Ca(n,_S,{row:e,col:t})},i=function onClick(e,t){t.stop(),o(e)};return nc({dom:{tag:"div",attributes:l({role:"button"},"aria-label",n)},behaviours:ks([bh("insert-table-picker-cell",[Aa(Mi(),Sh.focus),Aa(Xi(),o),Aa($i(),i),Aa(Qi(),i)]),Rh.config({toggleClass:"tox-insert-table-picker__selected",toggleOnExecute:!1}),Sh.config({onFocus:function emitCellOver(n){return Ca(n,AS,{row:e,col:t})}})])})},RS=function makeComponents(e){return pe(e,(function(e){return ae(e,oc)}))},NS=function makeLabelText(e,t){return Ju("".concat(t,"x").concat(e))},MS={inserttable:function renderInsertTableMenuItem(e,t){var n=function makeAnnouncementText(e){return function(t,n){return e.shared.providers.translate(["{0} columns, {1} rows",n,t])}}(t),o=function makeCells(e,t,n){for(var o=[],i=0;i<t;i++){for(var a=[],u=0;u<n;u++){var c=e(i+1,u+1);a.push(DS(i,u,c))}o.push(a)}return o}(n,10,10),i=NS(0,0),a=dv({dom:{tag:"span",classes:["tox-insert-table-picker__label"]},components:[i],behaviours:ks([vh.config({})])});return{type:"widget",data:{value:qa("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[mx.widget({dom:{tag:"div",classes:["tox-insert-table-picker"]},components:RS(o).concat(a.asSpec()),behaviours:ks([bh("insert-table-picker",[Pa((function(e){vh.set(a.get(e),[i])})),Na(AS,(function(e,t,n){var i=n.event,u=i.row,c=i.col;!function selectCells(e,t,n,o,i){for(var a=0;a<o;a++)for(var u=0;u<i;u++)Rh.set(e[a][u],a<=t&&u<=n)}(o,u,c,10,10),vh.set(a.get(e),[NS(u+1,c+1)])})),Na(_S,(function(t,n,o){var i=o.event,a=i.row,u=i.col;e.onAction({numRows:a+1,numColumns:u+1}),ya(t,ta())}))]),ch.config({initSize:{numRows:10,numColumns:10},mode:"flatgrid",selector:'[role="button"]'})])})]}},colorswatch:function renderColorSwatchItem(e,t){var n=OS(e,t),o=t.colorinput.getColorCols(e.initData.storageKey),i="color",a=SS(qa("menu-value"),n,(function(t){e.onAction({value:t})}),o,i,Ny.CLOSE_ON_EXECUTE,e.select.getOr(G),t.shared.providers),u=s(s({},a),{},{markers:Gy(i),movement:TS(o,i)});return{type:"widget",data:{value:qa("widget-id")},dom:{tag:"div",classes:["tox-fancymenuitem"]},autofocus:!0,components:[mx.widget(Qh.sketch(u))]}}},BS=function renderAutocompleteItem(e,t,n,o,i,a,u){var c=!(arguments.length>7&&void 0!==arguments[7])||arguments[7],s=sx({presets:o,textContent:K.none(),htmlContent:n?e.text.map((function(e){return fx(e,t)})):K.none(),ariaLabel:e.text,iconContent:e.icon,shortcutContent:K.none(),checkMark:K.none(),caret:K.none(),value:e.value},u.providers,c,e.icon);return Jw({data:Qw(e),enabled:e.enabled,getApi:z({}),onAction:function onAction(t){return i(e.value,e.meta)},onSetup:z(F),triggersSubmenu:!1,itemBehaviours:lx(e.meta,u)},s,a,u.providers)},IS=function renderSeparatorItem(e){return{type:"separator",dom:{tag:"div",classes:[By,"tox-collection__group-heading"]},components:e.text.map(Ju).toArray()}},PS=function renderNormalItem(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=sx({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:K.none(),ariaLabel:e.text,caret:K.none(),checkMark:K.none(),shortcutContent:e.shortcut},n,o);return Jw({data:Qw(e),getApi:function getApi(e){return{isEnabled:function isEnabled(){return!tg.isDisabled(e)},setEnabled:function setEnabled(t){return tg.set(e,!t)}}},enabled:e.enabled,onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},i,t,n)},LS=function renderNestedItem(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4]?function renderDownwardsCaret(e){return tx("chevron-down",e,[$y])}(n.icons):function renderSubmenuCaret(e){return tx("chevron-right",e,[$y])}(n.icons),a=sx({presets:"normal",iconContent:e.icon,textContent:e.text,htmlContent:K.none(),ariaLabel:e.text,caret:K.some(i),checkMark:K.none(),shortcutContent:e.shortcut},n,o);return Jw({data:Qw(e),getApi:function getApi(e){return{isEnabled:function isEnabled(){return!tg.isDisabled(e)},setEnabled:function setEnabled(t){return tg.set(e,!t)},setIconFill:function setIconFill(t,n){fc(e.element,'svg path[class="'.concat(t,'"], rect[class="').concat(t,'"]')).each((function(e){Wt(e,"fill",n)}))},setTooltip:function setTooltip(t){var o=n.translate(t);jt(e.element,{"aria-label":o,title:o})}}},enabled:e.enabled,onAction:F,onSetup:e.onSetup,triggersSubmenu:!0,itemBehaviours:[]},a,t,n)},FS=function renderToggleMenuItem(e,t,n){var o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],i=sx({iconContent:e.icon,textContent:e.text,htmlContent:K.none(),ariaLabel:e.text,checkMark:K.some(ax(n.icons)),caret:K.none(),shortcutContent:e.shortcut,presets:"normal",meta:e.meta},n,o);return Zr(Jw({data:Qw(e),enabled:e.enabled,getApi:function getApi(e){return{setActive:function setActive(t){Rh.set(e,t)},isActive:function isActive(){return Rh.isOn(e)},isEnabled:function isEnabled(){return!tg.isDisabled(e)},setEnabled:function setEnabled(t){return tg.set(e,!t)}}},onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:[]},i,t,n),{toggling:{toggleClass:Ly,toggleOnExecute:!1,selected:e.active}})},HS=function renderFancyMenuItem(e,t){return Fe(MS,e.fancytype).map((function(n){return n(e,t)}))},$S=function renderCardMenuItem(e,t,n,o){var i={dom:cx(e.label),optComponents:[K.some({dom:{tag:"div",classes:[Vy,Uy]},components:dx(e.items,o)})]};return Jw({data:Qw(s({text:K.none()},e)),enabled:e.enabled,getApi:function getApi(e){return{isEnabled:function isEnabled(){return!tg.isDisabled(e)},setEnabled:function setEnabled(t){tg.set(e,!t),ue(rf(e.element,"*"),(function(n){e.getSystem().getByDom(n).each((function(e){e.hasConfigured(tg)&&tg.set(e,!t)}))}))}}},onAction:e.onAction,onSetup:e.onSetup,triggersSubmenu:!1,itemBehaviours:K.from(o.itemBehaviours).getOr([])},i,t,n.providers)},zS=Object.freeze({__proto__:null,getCoupled:function getCoupled(e,t,n,o){return n.getOrCreate(e,t,o)},getExistingCoupled:function getExistingCoupled(e,t,n,o){return n.getExisting(e,t,o)}}),VS=[Lo("others",Eo(Or.value,po()))],US=Object.freeze({__proto__:null,init:function init$a(){var e={},t=function lookupCoupled(t,n){if(0===Oe(t.others).length)throw new Error("Cannot find any known coupled components");return Fe(e,n)},n=z({});return mu({readState:n,getExisting:function getExisting(e,n,o){return t(n,o).orThunk((function(){return Fe(n.others,o).getOrDie("No information found for coupled component: "+o),K.none()}))},getOrCreate:function getOrCreate(n,o,i){return t(o,i).getOrThunk((function(){var t=Fe(o.others,i).getOrDie("No information found for coupled component: "+i)(n),a=n.getSystem().build(t);return e[i]=a,a}))}})}}),ZS=Es({fields:VS,name:"coupling",apis:zS,state:US}),WS=function nu$3(e){var t=K.none(),n=[],o=function get(e){i()?u(e):n.push(e)},i=function isReady(){return t.isSome()},a=function run(e){ue(e,u)},u=function call(e){t.each((function(t){setTimeout((function(){e(t)}),0)}))};return e((function set(e){i()||(t=K.some(e),a(n),n=[])})),{get:o,map:function map(e){return nu$3((function(t){o((function(n){t(e(n))}))}))},isReady:i}},jS=WS,GS=function errorReporter(e){setTimeout((function(){throw e}),0)},qS=function make$5(e){var t=function get(t){e().then(t,GS)};return{map:function map(t){return make$5((function(){return e().then(t)}))},bind:function bind(t){return make$5((function(){return e().then((function(e){return t(e).toPromise()}))}))},anonBind:function anonBind(t){return make$5((function(){return e().then((function(){return t.toPromise()}))}))},toLazy:function toLazy(){return jS(t)},toCached:function toCached(){var t=null;return make$5((function(){return null===t&&(t=e()),t}))},toPromise:e,get:t}},KS=function nu$2(e){return qS((function(){return new Promise(e)}))},YS=function pure(e){return qS((function(){return Promise.resolve(e)}))},XS=z("sink"),JS=z(lm({name:XS(),overrides:z({dom:{tag:"div"},behaviours:ks([Ff.config({useFixed:q})]),events:Ta([Ma(Pi()),Ma(_i()),Ma($i())])})})),QS=function getAnchor(e,t){var n=e.getHotspot(t).getOr(t),o="hotspot",i=e.getAnchorOverrides();return e.layouts.fold((function(){return{type:o,hotspot:n,overrides:i}}),(function(e){return{type:o,hotspot:n,overrides:i,layouts:e}}))},ek=function open(e,t,n,o,i,a,u){var c=function openF(e,t,n,o,i,a,u){var c=function fetch(e,t,n){return(0,e.fetch)(n).map(t)}(e,t,o),l=ok(o,e);return c.map((function(e){return e.bind((function(e){return K.from(uv.sketch(s(s({},a.menu()),{},{uid:tu(""),data:e,highlightOnOpen:u,onOpenMenu:function onOpenMenu(e,t){var o=l().getOrDie();Ff.position(o,t,{anchor:n}),fd.decloak(i)},onOpenSubmenu:function onOpenSubmenu(e,t,n){var o=l().getOrDie();Ff.position(o,n,{anchor:{type:"submenu",item:t}}),fd.decloak(i)},onRepositionMenu:function onRepositionMenu(e,t,o){var i=l().getOrDie();Ff.position(i,t,{anchor:n}),ue(o,(function(e){Ff.position(i,e.triggeredMenu,{anchor:{type:"submenu",item:e.triggeringItem}})}))},onEscape:function onEscape(){return Sh.focus(o),fd.close(i),K.some(!0)}})))}))}))}(e,t,QS(e,n),n,o,i,u);return c.map((function(e){return e.fold((function(){fd.isOpen(o)&&fd.close(o)}),(function(e){fd.cloak(o),fd.open(o,e),a(o)})),o}))},tk=function close(e,t,n,o,i,a,u){return fd.close(o),YS(o)},nk=function togglePopup(e,t,n,o,i,a){var u=ZS.getCoupled(n,"sandbox");return(fd.isOpen(u)?tk:ek)(e,t,n,u,o,i,a)},rk=function matchWidth(e,t,n){var o=zm.getCurrent(t).getOr(t),i=Cn(e.element);n?Qt(o.element,"min-width",i+"px"):function set$7(e,t){yn.set(e,t)}(o.element,i)},ok=function getSink(e,t){return e.getSystem().getByUid(t.uid+"-"+XS()).map((function(e){return function(){return Or.value(e)}})).getOrThunk((function(){return t.lazySink.fold((function(){return function(){return Or.error(new Error("No internal sink is specified, nor could an external sink be found"))}}),(function(t){return function(){return t(e)}}))}))},ik=function doRepositionMenus(e){fd.getState(e).each((function(e){uv.repositionMenus(e)}))},ak=function makeSandbox$1(e,t,n){var o=gc(),i=ok(t,e);return{dom:{tag:"div",classes:e.sandboxClasses,attributes:{id:o.id,role:"listbox"}},behaviours:Pd(e.sandboxBehaviours,[Rd.config({store:{mode:"memory",initialValue:t}}),fd.config({onOpen:function onOpen(i,a){var u=QS(e,t);o.link(t.element),e.matchWidth&&rk(u.hotspot,a,e.useMinWidth),e.onOpen(u,i,a),void 0!==n&&void 0!==n.onOpen&&n.onOpen(i,a)},onClose:function onClose(e,i){o.unlink(t.element),void 0!==n&&void 0!==n.onClose&&n.onClose(e,i)},isPartOf:function isPartOf(e,n,o){return hc(n,o)||hc(t,o)},getAttachPoint:function getAttachPoint(){return i().getOrDie()}}),zm.config({find:function find(e){return fd.getState(e).bind((function(e){return zm.getCurrent(e)}))}}),Ds.config({channels:s(s({},hd({isExtraPart:G})),bd({doReposition:ik}))})])}},uk=function repositionMenus(e){var t=ZS.getCoupled(e,"sandbox");ik(t)},ck=function sandboxFields(){return[ei("sandboxClasses",[]),Id("sandboxBehaviours",[zm,Ds,fd,Rd])]},sk=z([Po("dom"),Po("fetch"),Dc("onOpen"),Rc("onExecute"),ei("getHotspot",K.some),ei("getAnchorOverrides",z({})),Al(),Nd("dropdownBehaviours",[Rh,ZS,ch,Sh]),Po("toggleClass"),ei("eventOrder",{}),Wo("lazySink"),ei("matchWidth",!1),ei("useMinWidth",!1),Wo("role")].concat(ck())),lk=z([sm({schema:[Oc(),ei("fakeFocus",!1)],name:"menu",defaults:function defaults(e){return{onExecute:e.onExecute}}}),JS()]),fk=Lm({name:"Dropdown",configFields:sk(),partFields:lk(),factory:function factory$k(e,t,n,o){var i=function switchToMenu(e){fd.getState(e).each((function(e){uv.highlightPrimary(e)}))},a=function togglePopup$1(t,n,i){return nk(e,V,t,o,n,i)},u={expand:function expand(e){Rh.isOn(e)||a(e,F,Ig.HighlightNone).get(F)},open:function open(e){Rh.isOn(e)||a(e,F,Ig.HighlightMenuAndItem).get(F)},refetch:function refetch(t){return ZS.getExistingCoupled(t,"sandbox").fold((function(){return a(t,F,Ig.HighlightMenuAndItem).map(F)}),(function(n){return ek(e,V,t,n,o,F,Ig.HighlightMenuAndItem).map(F)}))},isOpen:Rh.isOn,close:function close(e){Rh.isOn(e)&&a(e,F,Ig.HighlightMenuAndItem).get(F)},repositionMenus:function repositionMenus(e){Rh.isOn(e)&&uk(e)}},c=function triggerExecute(e,t){return wa(e),K.some(!0)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Bd(e.dropdownBehaviours,[Rh.config({toggleClass:e.toggleClass,aria:{mode:"expanded"}}),ZS.config({others:{sandbox:function sandbox(t){return ak(e,t,{onOpen:function onOpen(){return Rh.on(t)},onClose:function onClose(){return Rh.off(t)}})}}}),ch.config({mode:"special",onSpace:c,onEnter:c,onDown:function onDown(e,t){if(fk.isOpen(e)){var n=ZS.getCoupled(e,"sandbox");i(n)}else fk.open(e);return K.some(!0)},onEscape:function onEscape(e,t){return fk.isOpen(e)?(fk.close(e),K.some(!0)):K.none()}}),Sh.config({})]),events:Mh(K.some((function action(e){a(e,i,Ig.HighlightMenuAndItem).get(F)}))),eventOrder:s(s({},e.eventOrder),{},l({},Xi(),["disabling","toggling","alloy.base.behaviour"])),apis:u,domModification:{attributes:s(s({"aria-haspopup":"true"},e.role.fold((function(){return{}}),(function(e){return{role:e}}))),"button"===e.dom.tag?{type:function lookupAttr(t){return Fe(e.dom,"attributes").bind((function(e){return Fe(e,t)}))}("type").getOr("button")}:{})}}},apis:{open:function open(e,t){return e.open(t)},refetch:function refetch(e,t){return e.refetch(t)},expand:function expand(e,t){return e.expand(t)},close:function close(e,t){return e.close(t)},isOpen:function isOpen(e,t){return e.isOpen(t)},repositionMenus:function repositionMenus(e,t){return e.repositionMenus(t)}}}),dk=function handleRefetchTrigger(e){var t=Rd.getValue(e),n=iC(e).map(uC);fk.refetch(t).get((function(){var e=ZS.getCoupled(t,"sandbox");n.each((function(t){return iC(e).each((function(e){return function restoreState(e,t){Rd.setValue(e,t.fetchPattern),e.element.dom.selectionStart=t.selectionStart,e.element.dom.selectionEnd=t.selectionEnd}(e,t)}))}))}))},mk=function handleRedirectToMenuItem(e,t){gk(e).each((function(n){!function retargetAndDispatchWith(e,t,n,o){var i=s(s({},o),{},{target:t});e.getSystem().triggerEvent(n,t,i)}(e,n.element,t.event.eventType,t.event.interactionEvent)}))},gk=function getActiveMenuItemFrom(e){return fd.getState(e).bind(dg.getHighlighted).bind(dg.getHighlighted)},pk=function updateAriaOnHighlight(e,t,n){aC(e).each((function(e){!function setActiveDescendant(e,t){qt(t.element,"id").each((function(t){return Wt(e.element,"aria-activedescendant",t)}))}(e,n),function getSearchResults(e){return Bu(e.element,sC)?K.some(e.element):fc(e.element,"."+sC)}(t).each((function(t){qt(t,"id").each((function(t){return Wt(e.element,"aria-controls",t)}))}))})),Wt(n.element,"aria-selected","true")},hk=function updateAriaOnDehighlight(e,t,n){Wt(n.element,"aria-selected","false")},vk=function getSearchPattern(e){return ZS.getExistingCoupled(e,"sandbox").bind(iC).map(uC).map((function(e){return e.fetchPattern})).getOr("")};!function(e){e[e.ContentFocus=0]="ContentFocus",e[e.UiFocus=1]="UiFocus"}(Ry||(Ry={}));var bk,yk=function createMenuItemFromBridge(e,t,n,o,i){var a=n.shared.providers,u=function parseForHorizontalMenu(e){return i?s(s({},e),{},{shortcut:K.none(),icon:e.text.isSome()?K.none():e.icon}):e};switch(e.type){case"menuitem":return function createMenuItem(e){return Oo("menuitem",xw,e)}(e).fold(hC,(function(e){return K.some(PS(u(e),t,a,o))}));case"nestedmenuitem":return function createNestedMenuItem(e){return Oo("nestedmenuitem",Sw,e)}(e).fold(hC,(function(e){return K.some(LS(u(e),t,a,o,i))}));case"togglemenuitem":return function createToggleMenuItem(e){return Oo("togglemenuitem",kw,e)}(e).fold(hC,(function(e){return K.some(FS(u(e),t,a,o))}));case"separator":return function createSeparatorMenuItem(e){return Oo("separatormenuitem",GC,e)}(e).fold(hC,(function(e){return K.some(IS(e))}));case"fancymenuitem":return function createFancyMenuItem(e){return Oo("fancymenuitem",ww,e)}(e).fold(hC,(function(e){return HS(e,n)}));default:return console.error("Unknown item in general menu",e),K.none()}},Ck=function createAutocompleteItems(e,t,n,o,i,a,u){var c=1===o,l=!c||pC(e);return Ve(ae(e,(function(e){switch(e.type){case"separator":return function createSeparatorItem(e){return Oo("Autocompleter.Separator",GC,e)}(e).fold(hC,(function(e){return K.some(IS(e))}));case"cardmenuitem":return function createCardMenuItem(e){return Oo("cardmenuitem",hw,e)}(e).fold(hC,(function(e){return K.some($S(s(s({},e),{},{onAction:function onAction(t){e.onAction(t),n(e.value,e.meta)}}),i,a,{itemBehaviours:lx(e.meta,a),cardText:{matchText:t,highlightOn:u}}))}));default:return function createAutocompleterItem(e){return Oo("Autocompleter.Item",qC,e)}(e).fold(hC,(function(e){return K.some(BS(e,t,c,"normal",n,i,a,l))}))}})))},wk=function createPartialMenu(e,t,n,o,i,a){var u=pC(t),c=Ve(ae(t,(function(e){var t=function createItem(e){return yk(e,n,o,function itemHasIcon(e){return i?!He(e,"text"):u}(e),i)};return"nestedmenuitem"===e.type&&e.getSubmenuItems().length<=0?t(s(s({},e),{},{enabled:!1})):t(e)}))),l=function identifyMenuLayout(e){return"no-search"===e.searchMode?{menuType:"normal"}:{menuType:"searchable",searchMode:e}}(a);return(i?vC:bC)(e,u,c,1,l)},xk=function createTieredDataFrom(e){return uv.singleData(e.value,e)},Sk=function register$b(e,t){var n=qa("autocompleter"),o=si(!1),i=si(!1),a=nc(cv.sketch({dom:{tag:"div",classes:["tox-autocompleter"],attributes:{id:n}},components:[],fireDismissalEventInstead:{},inlineBehaviours:ks([bh("dismissAutocompleter",[Aa(la(),(function(){return m()})),Aa(va(),(function(t,n){qt(n.event.target,"id").each((function(t){return Wt(nt.fromDom(e.getBody()),"aria-activedescendant",t)}))}))])]),lazySink:t.getSink})),u=function isMenuOpen(){return cv.isOpen(a)},c=i.get,l=function hideIfNecessary(){if(u()){cv.hide(a),e.dom.remove(n,!1);var t=nt.fromDom(e.getBody());qt(t,"aria-owns").filter((function(e){return e===n})).each((function(){Yt(t,"aria-owns"),Yt(t,"aria-activedescendant")}))}},d=function getMenu(){return cv.getContent(a).bind((function(e){return xe(e.components(),0)}))},m=function cancelIfNecessary(){return e.execCommand("mceAutocompleterClose")},g=function getCombinedItems(n){var i=Ee(n,(function(e){return K.from(e.columns)})).getOr(1);return pe(n,(function(n){var a=n.items;return Ck(a,n.matchText,(function(t,i){var a=e.selection.getRng();(function getAutocompleterRange(e,t){return _y(nt.fromDom(t.startContainer)).map((function(t){var n=e.createRng();return n.selectNode(t.dom),n}))})(e.dom,a).each((function(a){var u={hide:function hide(){return m()},reload:function reload(t){l(),e.execCommand("mceAutocompleterReload",!1,{fetchOptions:t})}};o.set(!0),n.onAction(u,a,t,i),o.set(!1)}))}),i,Ny.BUBBLE_TO_SANDBOX,t,n.highlightOn)}))},p=function display(t,n){(function findIn(e){return fc(e,Ay)})(nt.fromDom(e.getBody())).each((function(o){var i=Ee(t,(function(e){return K.from(e.columns)})).getOr(1);cv.showMenuAt(a,{anchor:{type:"node",root:nt.fromDom(e.getBody()),node:K.from(o)}},function createInlineMenuFrom(e,t,n,o){var i=TS(t,o),a=Gy(o);return{data:xk(s(s({},e),{},{movement:i,menuBehaviours:Ow("auto"!==t?[]:[Pa((function(e,t){Tw(e,4,a.item).each((function(t){var n=t.numColumns,o=t.numRows;ch.setGridSize(e,o,n)}))}))])})),menu:{markers:Gy(o),fakeFocus:n===Ry.ContentFocus}}}(bC("autocompleter-value",!0,n,i,{menuType:"normal"}),i,Ry.ContentFocus,"normal"))})),d().each(dg.highlightFirst)},h=function updateDisplay(t){var o=g(t);o.length>0?(p(t,o),Wt(nt.fromDom(e.getBody()),"aria-owns",n),e.inline||v()):l()},v=function cloneAutocompleterToEditorDoc(){e.dom.get(n)&&e.dom.remove(n,!1);var t=e.getDoc().documentElement,o=e.selection.getNode(),i=function deep(e){return Va(e,!0)}(a.element);en(i,{border:"0",clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:"0",position:"absolute",width:"1px",top:"".concat(o.offsetTop,"px"),left:"".concat(o.offsetLeft,"px")}),e.dom.add(t,i.dom),fc(i,'[role="menu"]').each((function(e){sn(e,"position"),sn(e,"max-height")}))};e.on("AutocompleterStart",(function(e){var t=e.lookupData;i.set(!0),o.set(!1),h(t)})),e.on("AutocompleterUpdate",(function(e){var t=e.lookupData;return h(t)})),e.on("AutocompleterEnd",(function(){l(),i.set(!1),o.set(!1)}));var b={cancelIfNecessary:m,isMenuOpen:u,isActive:c,isProcessingAction:o.get,getMenu:d};Dy(b,e)},kk=["visible","hidden","clip"],Tk=function isScrollingOverflowValue(e){return Xe(e).length>0&&!ne(kk,e)},Ek=function isScroller(e){if(lt(e)){var t=nn(e,"overflow-x"),n=nn(e,"overflow-y");return Tk(t)||Tk(n)}return!1},Ok=function detectWhenSplitUiMode(e,t){return Ty(e)?function detect(e){var t=nf(e,Ek),n=0===t.length?Ft(e).map(Ht).map((function(e){return nf(e,Ek)})).getOr([]):t;return Se(n).map((function(e){return{element:e,others:n.slice(1)}}))}(t):K.none()},Ak=function getBoundsFrom(e){var t=[].concat(d(ae(e.others,Cr)),[Sr()]);return function constrainByMany(e,t){return fe(t,(function(e,t){return xr(e,t)}),e)}(Cr(e.element),t)},_k=function closest(e,t,n){return dc(e,t,n).isSome()},Dk=function DelayedFunction(e,t){var n=null;return{cancel:function cancel(){null!==n&&(clearTimeout(n),n=null)},schedule:function schedule(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];n=setTimeout((function(){e.apply(null,i),n=null}),t)}}},Rk=function getTouch(e){var t=e.raw;return void 0===t.touches||1!==t.touches.length?K.none():K.some(t.touches[0])},Nk=function monitor(e){var t=nl(),n=si(!1),o=Dk((function(t){e.triggerEvent(ea(),t),n.set(!0)}),400),i=gi([{key:Ti(),value:function handleTouchstart(e){return Rk(e).each((function(i){o.cancel();var a={x:i.clientX,y:i.clientY,target:e.target};o.schedule(e),n.set(!1),t.set(a)})),K.none()}},{key:Ei(),value:function handleTouchmove(e){return o.cancel(),Rk(e).each((function(e){t.on((function(n){(function isFarEnough(e,t){var n=Math.abs(e.clientX-t.x),o=Math.abs(e.clientY-t.y);return n>5||o>5})(e,n)&&t.clear()}))})),K.none()}},{key:Oi(),value:function handleTouchend(i){o.cancel();return t.get().filter((function isSame(e){return bt(e.target,i.target)})).map((function(t){return n.get()?(i.prevent(),!1):e.triggerEvent(Qi(),i)}))}}]);return{fireIfReady:function fireIfReady(e,t){return Fe(i,t).bind((function(t){return t(e)}))}}},Mk=function setup$d(e,t){var n=s({stopBackspace:!0},t),o=Nk(n),i=ae(["touchstart","touchmove","touchend","touchcancel","gesturestart","mousedown","mouseup","mouseover","mousemove","mouseout","click"].concat(["selectstart","input","contextmenu","change","transitionend","transitioncancel","drag","dragstart","dragend","dragenter","dragleave","dragover","drop","keyup"]),(function(t){return ol(e,t,(function(e){o.fireIfReady(e,t).each((function(t){t&&e.kill()})),n.triggerEvent(t,e)&&e.kill()}))})),a=nl(),u=ol(e,"paste",(function(e){o.fireIfReady(e,"paste").each((function(t){t&&e.kill()})),n.triggerEvent("paste",e)&&e.kill(),a.set(setTimeout((function(){n.triggerEvent(Ki(),e)}),0))})),c=ol(e,"keydown",(function(e){n.triggerEvent("keydown",e)?e.kill():n.stopBackspace&&function isDangerous(e){return e.raw.which===mg[0]&&!ne(["input","textarea"],ct(e.target))&&!_k(e.target,'[contenteditable="true"]')}(e)&&e.prevent()})),l=ol(e,"focusin",(function(e){n.triggerEvent("focusin",e)&&e.kill()})),d=nl(),m=ol(e,"focusout",(function(e){n.triggerEvent("focusout",e)&&e.kill(),d.set(setTimeout((function(){n.triggerEvent(qi(),e)}),0))}));return{unbind:function unbind(){ue(i,(function(e){e.unbind()})),c.unbind(),l.unbind(),m.unbind(),u.unbind(),a.on(clearTimeout),d.on(clearTimeout)}}},Bk=function derive(e,t){var n=Fe(e,"target").getOr(t);return si(n)},Ik=li([{stopped:[]},{resume:["element"]},{complete:[]}]),Pk=function doTriggerHandler(e,t,n,o,i,a){var u=e(t,o),c=function fromSource(e,t){var n=si(!1),o=si(!1);return{stop:function stop(){n.set(!0)},cut:function cut(){o.set(!0)},isStopped:n.get,isCut:o.get,event:e,setSource:t.set,getSource:t.get}}(n,i);return u.fold((function(){return a.logEventNoHandlers(t,o),Ik.complete()}),(function(e){var n=e.descHandler;return hu(n)(c),c.isStopped()?(a.logEventStopped(t,e.element,n.purpose),Ik.stopped()):c.isCut()?(a.logEventCut(t,e.element,n.purpose),Ik.complete()):kt(e.element).fold((function(){return a.logNoParent(t,e.element,n.purpose),Ik.complete()}),(function(o){return a.logEventResponse(t,e.element,n.purpose),Ik.resume(o)}))}))},Lk=function doTriggerOnUntilStopped(e,t,n,o,i,a){return Pk(e,t,n,o,i,a).fold(q,(function(o){return doTriggerOnUntilStopped(e,t,n,o,i,a)}),G)},Fk=function broadcast(e,t,n){var o=function fromExternal(e){var t=si(!1);return{stop:function stop(){t.set(!0)},cut:F,isStopped:t.get,isCut:G,event:e,setSource:W("Cannot set source of a broadcasted event"),getSource:W("Cannot get source of a broadcasted event")}}(t);return ue(e,(function(e){var t=e.descHandler;hu(t)(o)})),o.isStopped()},Hk=function triggerOnUntilStopped(e,t,n,o,i){var a=Bk(n,o);return Lk(e,t,n,o,a,i)},$k=function EventRegistry(){var e={};return{registerId:function registerId(t,n,o){_e(o,(function(o,i){var a=void 0!==e[i]?e[i]:{};a[n]=function curryArgs(e,t){return function curried(e,t){return{cHandler:e,purpose:t}}(curry.apply(void 0,[e.handler].concat(t)),e.purpose)}(o,t),e[i]=a}))},unregisterId:function unregisterId(t){_e(e,(function(e,n){He(e,t)&&delete e[t]}))},filterByType:function filterByType(t){return Fe(e,t).map((function(e){return Ie(e,(function(e,t){return function broadcastHandler(e,t){return{id:e,descHandler:t}}(t,e)}))})).getOr([])},find:function find(t,n,o){return Fe(e,n).bind((function(e){return yi(o,(function(t){return function findHandler(e,t){return eu(t).bind((function(t){return Fe(e,t)})).map((function(e){return function eventHandler(e,t){return{element:e,descHandler:t}}(t,e)}))}(e,t)}),t)}))}}},zk=function Registry(){var e=$k(),t={},n=function readOrTag(e){var t=e.element;return eu(t).getOrThunk((function(){return function write(e,t){var n=qa(Xa+e);return Qa(t,n),n}("uid-",e.element)}))},o=function unregister(n){eu(n.element).each((function(n){delete t[n],e.unregisterId(n)}))};return{find:function find(t,n,o){return e.find(t,n,o)},filter:function filter(t){return e.filterByType(t)},register:function register(i){var a=n(i);$e(t,a)&&function failOnDuplicate(e,n){var i=t[n];if(i!==e)throw new Error('The tagId "'+n+'" is already used by: '+Za(i.element)+"\nCannot use it for: "+Za(e.element)+"\nThe conflicting element is"+(zt(i.element)?" ":" not ")+"already in the DOM");o(e)}(i,a);var u=[i];e.registerId(u,a,i.events),t[a]=i},unregister:o,getById:function getById(e){return Fe(t,e)}}},Vk=Pm({name:"Container",factory:function factory$j(e){var t=e.dom,n=t.attributes,o=c(t,b);return{uid:e.uid,dom:s({tag:"div",attributes:s({role:"presentation"},n)},o),components:e.components,behaviours:Md(e.containerBehaviours),events:e.events,domModification:e.domModification,eventOrder:e.eventOrder}},configFields:[ei("components",[]),Nd("containerBehaviours",[]),ei("events",{}),ei("domModification",{}),ei("eventOrder",{})]}),Uk=function takeover(e){var t=function isAboveRoot(t){return kt(e.element).fold(q,(function(e){return bt(t,e)}))},n=zk(),o=function lookup(e,o){return n.find(t,e,o)},i=Mk(e.element,{triggerEvent:function triggerEvent(e,t){return wc(e,t.target,(function(n){return function triggerUntilStopped(e,t,n,o){return Hk(e,t,n,n.target,o)}(o,e,t,n)}))}}),a={debugInfo:z("real"),triggerEvent:function triggerEvent(e,t,n){wc(e,t,(function(i){return Hk(o,e,n,t,i)}))},triggerFocus:function triggerFocus(e,t){eu(e).fold((function(){Ns(e)}),(function(n){wc(Gi(),e,(function(n){return function triggerHandler(e,t,n,o,i){var a=Bk(n,o);Pk(e,t,n,o,a,i)}(o,Gi(),{originator:t,kill:F,prevent:F,target:e},e,n),!1}))}))},triggerEscape:function triggerEscape(e,t){a.triggerEvent("keydown",e.element,t.event)},getByUid:function getByUid(e){return h(e)},getByDom:function getByDom(e){return v(e)},build:nc,buildOrPatch:tc,addToGui:function addToGui(e){s(e)},removeFromGui:function removeFromGui(e){l(e)},addToWorld:function addToWorld(e){u(e)},removeFromWorld:function removeFromWorld(e){c(e)},broadcast:function broadcast(e){m(e)},broadcastOn:function broadcastOn(e,t){g(e,t)},broadcastEvent:function broadcastEvent(e,t){p(e,t)},isConnected:q},u=function _addToWorld(e){e.connect(a),dt(e.element)||(n.register(e),ue(e.components(),_addToWorld),a.triggerEvent(ra(),e.element,{target:e.element}))},c=function _removeFromWorld(e){dt(e.element)||(ue(e.components(),_removeFromWorld),n.unregister(e)),e.disconnect()},s=function add(t){jf(e,t)},l=function remove(e){Kf(e)},d=function broadcastData(e){var t=n.filter(Yi());ue(t,(function(t){var n=t.descHandler;hu(n)(e)}))},m=function broadcast$1(e){d({universal:!0,data:e})},g=function _broadcastOn(e,t){d({universal:!1,channels:e,data:t})},p=function _broadcastEvent(e,t){var o=n.filter(e);return Fk(o,t)},h=function _getByUid(e){return n.getById(e).fold((function(){return Or.error(new Error('Could not find component with uid: "'+e+'" in system.'))}),Or.value)},v=function _getByDom(e){var t=eu(e).getOr("not found");return h(t)};return u(e),{root:e,element:e.element,destroy:function destroy(){i.unbind(),cr(e.element)},add:s,remove:l,getByUid:h,getByDom:v,addToWorld:u,removeFromWorld:c,broadcast:m,broadcastOn:g,broadcastEvent:p}},Zk=z([ei("prefix","form-field"),Nd("fieldBehaviours",[zm,Rd])]),Wk=z([lm({schema:[Po("dom")],name:"label"}),lm({factory:{sketch:function sketch(e){return{uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}}}},schema:[Po("text")],name:"aria-descriptor"}),cm({factory:{sketch:function sketch(e){var t=di(e,["factory"]);return e.factory.sketch(t)}},schema:[Po("factory")],name:"field"})]),jk=Lm({name:"FormField",configFields:Zk(),partFields:Wk(),factory:function factory$i(e,t,n,o){var i=Bd(e.fieldBehaviours,[zm.config({find:function find(t){return xm(t,e,"field")}}),Rd.config({store:{mode:"manual",getValue:function getValue(e){return zm.getCurrent(e).bind(Rd.getValue)},setValue:function setValue(e,t){zm.getCurrent(e).each((function(e){Rd.setValue(e,t)}))}}})]),a=Ta([Pa((function(t,n){var o=km(t,e,["label","field","aria-descriptor"]);o.field().each((function(t){var n=qa(e.prefix);o.label().each((function(e){Wt(e.element,"for",n),Wt(t.element,"id",n)})),o["aria-descriptor"]().each((function(n){var o=qa(e.prefix);Wt(n.element,"id",o),Wt(t.element,"aria-describedby",o)}))}))}))]),u={getField:function getField(t){return xm(t,e,"field")},getLabel:function getLabel(t){return xm(t,e,"label")}};return{uid:e.uid,dom:e.dom,components:t,behaviours:i,events:a,apis:u}},apis:{getField:function getField(e,t){return e.getField(t)},getLabel:function getLabel(e,t){return e.getLabel(t)}}}),Gk=Object.freeze({__proto__:null,exhibit:function exhibit$2(e,t){return pu({attributes:gi([{key:t.tabAttr,value:"true"}])})}}),qk=[ei("tabAttr","data-alloy-tabstop")],Kk=Es({fields:qk,name:"tabstopping",active:Gk}),Yk=tinymce.util.Tools.resolve("tinymce.html.Entities"),Xk=function renderFormFieldWith(e,t,n,o){var i=Jk(e,t,n,o);return jk.sketch(i)},Jk=function renderFormFieldSpecWith(e,t,n,o){return{dom:eT(n),components:e.toArray().concat([t]),fieldBehaviours:ks(o)}},Qk=function renderFormFieldDom(){return eT([])},eT=function renderFormFieldDomWith(e){return{tag:"div",classes:["tox-form__group"].concat(e)}},tT=function renderLabel$3(e,t){return jk.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ju(t.translate(e))]})},nT=qa("form-component-change"),rT=qa("form-close"),oT=qa("form-cancel"),iT=qa("form-action"),aT=qa("form-submit"),uT=qa("form-block"),cT=qa("form-unblock"),sT=qa("form-tabchange"),lT=qa("form-resize"),fT=function renderCollection(e,t,n){var o=e.label.map((function(e){return tT(e,t)})),i=t.icons(),a=function runOnItem(e){return function(t,n){dc(n.event.target,"[data-collection-item-value]").each((function(o){e(t,n,o,Gt(o,"data-collection-item-value"))}))}},u=function setContents(n,o){var a=ae(o,(function(n){var o=ub.translate(n.text),a=1===e.columns?'<div class="tox-collection__item-label">'.concat(o,"</div>"):"",u='<div class="tox-collection__item-icon">'.concat(function getIcon(e){var t;return null!==(t=i[e])&&void 0!==t?t:e}(n.icon),"</div>"),c={_:" "," - ":" ","-":" "},s=o.replace(/\_| \- |\-/g,(function(e){return c[e]})),l=t.isDisabled()?" tox-collection__item--state-disabled":"";return'<div class="tox-collection__item'.concat(l,'" tabindex="-1" data-collection-item-value="').concat(Yk.encodeAllRaw(n.value),'" title="').concat(s,'" aria-label="').concat(s,'">').concat(u).concat(a,"</div>")})),u="auto"!==e.columns&&e.columns>1?ie(a,e.columns):[a],c=ae(u,(function(e){return'<div class="tox-collection__group">'.concat(e.join(""),"</div>")}));za(n.element,c.join(""))},c=a((function(n,o,i,a){o.stop(),t.isDisabled()||Ca(n,iT,{name:e.name,value:a})})),s=[Aa(Mi(),a((function(e,t,n){Ns(n)}))),Aa($i(),c),Aa(Qi(),c),Aa(Bi(),a((function(e,t,n){fc(e.element,"."+zy).each((function(e){Nu(e,zy)})),Du(n,zy)}))),Aa(Ii(),a((function(e){fc(e.element,"."+zy).each((function(e){Nu(e,zy)}))}))),Ha(a((function(t,n,o,i){Ca(t,iT,{name:e.name,value:i})})))],d=function iterCollectionItems(e,t){return ae(rf(e.element,".tox-collection__item"),t)},m=jk.parts.field({dom:{tag:"div",classes:["tox-collection"].concat(1!==e.columns?["tox-collection--grid"]:["tox-collection--list"])},components:[],factory:{sketch:V},behaviours:ks([tg.config({disabled:t.isDisabled,onDisabled:function onDisabled(e){d(e,(function(e){Du(e,"tox-collection__item--state-disabled"),Wt(e,"aria-disabled",!0)}))},onEnabled:function onEnabled(e){d(e,(function(e){Nu(e,"tox-collection__item--state-disabled"),Yt(e,"aria-disabled")}))}}),zw(),vh.config({}),Rd.config({store:{mode:"memory",initialValue:n.getOr([])},onSetValue:function onSetValue(t,n){u(t,n),"auto"===e.columns&&Tw(t,5,"tox-collection__item").each((function(e){var n=e.numRows,o=e.numColumns;ch.setGridSize(t,n,o)})),ya(t,lT)}}),Kk.config({}),ch.config(ES(e.columns,"normal")),bh("collection-events",s)]),eventOrder:l({},Xi(),["disabling","alloy.base.behaviour","collection-events"])});return Xk(o,m,["tox-form__group--collection"],[])},dT=["input","textarea"],mT=function isAriaElement(e){var t=ct(e);return ne(dT,t)},gT=function markValid(e,t){var n=t.getRoot(e).getOr(e.element);Nu(n,t.invalidClass),t.notify.each((function(t){mT(e.element)&&Wt(e.element,"aria-invalid",!1),t.getContainer(e).each((function(e){za(e,t.validHtml)})),t.onValid(e)}))},pT=function markInvalid(e,t,n,o){var i=t.getRoot(e).getOr(e.element);Du(i,t.invalidClass),t.notify.each((function(t){mT(e.element)&&Wt(e.element,"aria-invalid",!0),t.getContainer(e).each((function(e){za(e,o)})),t.onInvalid(e,o)}))},hT=function query(e,t,n){return t.validator.fold((function(){return YS(Or.value(!0))}),(function(t){return t.validate(e)}))},vT=function run(e,t,n){return t.notify.each((function(t){t.onValidate(e)})),hT(e,t).map((function(n){return e.getSystem().isConnected()?n.fold((function(n){return pT(e,t,0,n),Or.error(n)}),(function(n){return gT(e,t),Or.value(n)})):Or.error("No longer in system")}))},bT=Object.freeze({__proto__:null,markValid:gT,markInvalid:pT,query:hT,run:vT,isInvalid:function isInvalid(e,t){var n=t.getRoot(e).getOr(e.element);return Bu(n,t.invalidClass)}}),yT=Object.freeze({__proto__:null,events:function events$8(e,t){return e.validator.map((function(t){return Ta([Aa(t.onEvent,(function(t){vT(t,e).get(V)}))].concat(t.validateOnLoad?[Pa((function(t){vT(t,e).get(F)}))]:[]))})).getOr({})}}),CT=[Po("invalidClass"),ei("getRoot",K.none),Jo("notify",[ei("aria","alert"),ei("getContainer",K.none),ei("validHtml",""),Dc("onValid"),Dc("onInvalid"),Dc("onValidate")]),Jo("validator",[Po("validate"),ei("onEvent","input"),ei("validateOnLoad",!0)])],wT=Es({fields:CT,name:"invalidating",active:yT,apis:bT,extra:{validation:function validation(e){return function(t){var n=Rd.getValue(t);return YS(e(n))}}}}),xT=Object.freeze({__proto__:null,events:function events$7(){return Ta([Ea(Zi(),q)])},exhibit:function exhibit$1(){return pu({styles:{"-webkit-user-select":"none","user-select":"none","-ms-user-select":"none","-moz-user-select":"-moz-none"},attributes:{unselectable:"on"}})}}),ST=Es({fields:[],name:"unselecting",active:xT}),kT=qa("color-input-change"),TT=qa("color-swatch-change"),ET=qa("color-picker-cancel"),OT=function renderColorInput(e,t,n,o){var i=jk.parts.field({factory:tC,inputClasses:["tox-textfield"],data:o,onSetValue:function onSetValue(e){return wT.run(e).get(F)},inputBehaviours:ks([tg.config({disabled:t.providers.isDisabled}),zw(),Kk.config({}),wT.config({invalidClass:"tox-textbox-field-invalid",getRoot:function getRoot(e){return Tt(e.element)},notify:{onValid:function onValid(e){var t=Rd.getValue(e);Ca(e,kT,{color:t})}},validator:{validateOnLoad:!1,validate:function validate(e){var t=Rd.getValue(e);if(0===t.length)return YS(Or.value(!0));var n=nt.fromTag("span");Qt(n,"background-color",t);var o=an(n,"background-color").fold((function(){return Or.error("blah")}),(function(e){return Or.value(t)}));return YS(o)}}})]),selectOnFocus:!1}),a=e.label.map((function(e){return tT(e,t.providers)})),u=function emitSwatchChange(e,t){Ca(e,TT,{value:t})},c=dv(function renderPanelButton(e,t){return fk.sketch({dom:e.dom,components:e.components,toggleClass:"mce-active",dropdownBehaviours:ks([Uw(t.providers.isDisabled),zw(),ST.config({}),Kk.config({})]),layouts:e.layouts,sandboxClasses:["tox-dialog__popups"],lazySink:t.getSink,fetch:function fetch(n){return KS((function(t){return e.fetch(t)})).map((function(o){return K.from(xk(Zr(SS(qa("menu-value"),o,(function(t){e.onItemAction(n,t)}),e.columns,e.presets,Ny.CLOSE_ON_EXECUTE,G,t.providers),{movement:TS(e.columns,e.presets)})))}))},parts:{menu:Yy(0,0,e.presets)}})}({dom:{tag:"span",attributes:{"aria-label":t.providers.translate("Color swatch")}},layouts:{onRtl:function onRtl(){return[os,rs,ss]},onLtr:function onLtr(){return[rs,os,ss]}},components:[],fetch:pS(n.getColors(e.storageKey),e.storageKey,n.hasCustomColors()),columns:n.getColorCols(e.storageKey),presets:"color",onItemAction:function onItemAction(t,o){c.getOpt(t).each((function(t){"custom"===o?n.colorPicker((function(n){n.fold((function(){return ya(t,ET)}),(function(n){u(t,n),Gx(e.storageKey,n)}))}),"#ffffff"):u(t,"remove"===o?"":o)}))}},t));return jk.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:a.toArray().concat([{dom:{tag:"div",classes:["tox-color-input"]},components:[i,c.asSpec()]}]),fieldBehaviours:ks([bh("form-field-events",[Aa(kT,(function(t,n){c.getOpt(t).each((function(e){Qt(e.element,"background-color",n.event.color)})),Ca(t,nT,{name:e.name})})),Aa(TT,(function(e,t){jk.getField(e).each((function(n){Rd.setValue(n,t.event.value),zm.getCurrent(e).each(Sh.focus)}))})),Aa(ET,(function(e,t){jk.getField(e).each((function(t){zm.getCurrent(e).each(Sh.focus)}))}))])])})},AT=lm({schema:[Po("dom")],name:"label"}),_T=function edgePart(e){return lm({name:e+"-edge",overrides:function overrides(t){return t.model.manager.edgeActions[e].fold((function(){return{}}),(function(e){return{events:Ta([_a(Ti(),(function(t,n,o){return e(t,o)}),[t]),_a(_i(),(function(t,n,o){return e(t,o)}),[t]),_a(Di(),(function(t,n,o){o.mouseIsDown.get()&&e(t,o)}),[t])])}}))}})},DT=_T("top-left"),RT=_T("top"),NT=_T("top-right"),MT=_T("right"),BT=_T("bottom-right"),IT=_T("bottom"),PT=_T("bottom-left"),LT=_T("left"),FT=cm({name:"thumb",defaults:z({dom:{styles:{position:"absolute"}}}),overrides:function overrides(e){return{events:Ta([Ra(Ti(),e,"spectrum"),Ra(Ei(),e,"spectrum"),Ra(Oi(),e,"spectrum"),Ra(_i(),e,"spectrum"),Ra(Di(),e,"spectrum"),Ra(Ni(),e,"spectrum")])}}}),HT=function isShift(e){return Ag(e.event)},$T=cm({schema:[Bo("mouseIsDown",(function(){return si(!1)}))],name:"spectrum",overrides:function overrides(e){var t=e.model.manager,n=function setValueFrom(n,o){return t.getValueFromEvent(o).map((function(o){return t.setValueFrom(n,e,o)}))};return{behaviours:ks([ch.config({mode:"special",onLeft:function onLeft(n,o){return t.onLeft(n,e,HT(o))},onRight:function onRight(n,o){return t.onRight(n,e,HT(o))},onUp:function onUp(n,o){return t.onUp(n,e,HT(o))},onDown:function onDown(n,o){return t.onDown(n,e,HT(o))}}),Kk.config({}),Sh.config({})]),events:Ta([Aa(Ti(),n),Aa(Ei(),n),Aa(_i(),n),Aa(Di(),(function(t,o){e.mouseIsDown.get()&&n(t,o)}))])}}}),zT=[AT,LT,MT,RT,IT,DT,NT,PT,BT,FT,$T],VT=z("slider.change.value"),UT=function getEventSource(e){var t=e.event.raw;if(function isTouchEvent$2(e){return-1!==e.type.indexOf("touch")}(t)){var n=t;return void 0!==n.touches&&1===n.touches.length?K.some(n.touches[0]).map((function(e){return pn(e.clientX,e.clientY)})):K.none()}var o=t;return void 0!==o.clientX?K.some(o).map((function(e){return pn(e.clientX,e.clientY)})):K.none()},ZT=function minX(e){return e.model.minX},WT=function minY(e){return e.model.minY},jT=function min1X(e){return e.model.minX-1},GT=function min1Y(e){return e.model.minY-1},qT=function maxX(e){return e.model.maxX},KT=function maxY(e){return e.model.maxY},YT=function max1X(e){return e.model.maxX+1},XT=function max1Y(e){return e.model.maxY+1},JT=function range(e,t,n){return t(e)-n(e)},QT=function xRange(e){return JT(e,qT,ZT)},eE=function yRange(e){return JT(e,KT,WT)},tE=function halfX(e){return QT(e)/2},nE=function halfY(e){return eE(e)/2},rE=function step(e,t){return t?e.stepSize*e.speedMultiplier:e.stepSize},oE=function snap(e){return e.snapToGrid},iE=function snapStart(e){return e.snapStart},aE=function rounded(e){return e.rounded},uE=function hasEdge(e,t){return void 0!==e[t+"-edge"]},cE=function hasLEdge(e){return uE(e,"left")},sE=function hasREdge(e){return uE(e,"right")},lE=function hasTEdge(e){return uE(e,"top")},fE=function hasBEdge(e){return uE(e,"bottom")},dE=function currentValue(e){return e.model.value.get()},mE=function xyValue(e,t){return{x:e,y:t}},gE=function fireSliderChange$3(e,t){Ca(e,VT(),{value:t})},pE=function reduceBy(e,t,n,o){return e<t?e:e>n?n:e===t?t-1:Math.max(t,e-o)},hE=function increaseBy(e,t,n,o){return e>n?e:e<t?t:e===n?n+1:Math.min(n,e+o)},vE=function capValue(e,t,n){return Math.max(t,Math.min(n,e))},bE=function findValueOf(e){var t=e.min,n=e.max,o=e.range,i=e.value,a=e.step,u=e.snap,c=e.snapStart,s=e.rounded,l=e.hasMinEdge,d=e.hasMaxEdge,m=e.minBound,g=e.maxBound,p=e.screenRange,h=l?t-1:t,v=d?n+1:n;if(i<m)return h;if(i>g)return v;var b=function findOffsetOf(e,t,n){return Math.min(n,Math.max(e,t))-t}(i,m,g),y=vE(b/p*o+t,h,v);return u&&y>=t&&y<=n?function snapValueOf(e,t,n,o,i){return i.fold((function(){var i=e-t,a=Math.round(i/o)*o;return vE(t+a,t-1,n+1)}),(function(t){var i=(e-t)%o,a=Math.round(i/o),u=Math.floor((e-t)/o),c=Math.floor((n-t)/o),s=t+Math.min(c,u+a)*o;return Math.max(t,s)}))}(y,t,n,a,c):s?Math.round(y):y},yE=function findOffsetOfValue$2(e){var t=e.min,n=e.max,o=e.range,i=e.value,a=e.hasMinEdge,u=e.hasMaxEdge,c=e.maxBound,s=e.maxOffset,l=e.centerMinEdge,d=e.centerMaxEdge;return i<t?a?0:l:i>n?u?c:d:(i-t)/o*s},CE="top",wE="right",xE="bottom",SE="left",kE=function getBounds(e){return e.element.dom.getBoundingClientRect()},TE=function getBoundsProperty(e,t){return e[t]},EE=function getMinXBounds(e){var t=kE(e);return TE(t,SE)},OE=function getMaxXBounds(e){var t=kE(e);return TE(t,wE)},AE=function getMinYBounds(e){var t=kE(e);return TE(t,CE)},_E=function getMaxYBounds(e){var t=kE(e);return TE(t,xE)},DE=function getXScreenRange(e){var t=kE(e);return TE(t,"width")},RE=function getYScreenRange(e){var t=kE(e);return TE(t,"height")},NE=function getCenterOffsetOf(e,t,n){return(e+t)/2-n},ME=function getXCenterOffSetOf(e,t){var n=kE(e),o=kE(t),i=TE(n,SE),a=TE(n,wE),u=TE(o,SE);return NE(i,a,u)},BE=function getYCenterOffSetOf(e,t){var n=kE(e),o=kE(t),i=TE(n,CE),a=TE(n,xE),u=TE(o,CE);return NE(i,a,u)},IE=function fireSliderChange$2(e,t){Ca(e,VT(),{value:t})},PE=function findValueOfOffset$1(e,t,n){var o={min:ZT(t),max:qT(t),range:QT(t),value:n,step:rE(t),snap:oE(t),snapStart:iE(t),rounded:aE(t),hasMinEdge:cE(t),hasMaxEdge:sE(t),minBound:EE(e),maxBound:OE(e),screenRange:DE(e)};return bE(o)},LE=function handleMovement$2(e){return function(t,n,o){return function moveBy$2(e,t,n,o){var i=(e>0?hE:pE)(dE(n),ZT(n),qT(n),rE(n,o));return IE(t,i),K.some(i)}(e,t,n,o).map(q)}},FE=function findPositionOfValue$1(e,t,n,o,i,a){var u=function findOffsetOfValue$1(e,t,n,o,i){var a=DE(e),u=o.bind((function(t){return K.some(ME(t,e))})).getOr(0),c=i.bind((function(t){return K.some(ME(t,e))})).getOr(a),s={min:ZT(t),max:qT(t),range:QT(t),value:n,hasMinEdge:cE(t),hasMaxEdge:sE(t),minBound:EE(e),minOffset:0,maxBound:OE(e),maxOffset:a,centerMinEdge:u,centerMaxEdge:c};return yE(s)}(t,a,n,o,i);return EE(t)-EE(e)+u},HE=LE(-1),$E=LE(1),zE=K.none,VE=K.none,UE={"top-left":K.none(),top:K.none(),"top-right":K.none(),right:K.some((function setToREdge(e,t){gE(e,YT(t))})),"bottom-right":K.none(),bottom:K.none(),"bottom-left":K.none(),left:K.some((function setToLEdge(e,t){gE(e,jT(t))}))},ZE=Object.freeze({__proto__:null,setValueFrom:function setValueFrom$2(e,t,n){var o=PE(e,t,n);return IE(e,o),o},setToMin:function setToMin$2(e,t){var n=ZT(t);IE(e,n)},setToMax:function setToMax$2(e,t){var n=qT(t);IE(e,n)},findValueOfOffset:PE,getValueFromEvent:function getValueFromEvent$2(e){return UT(e).map((function(e){return e.left}))},findPositionOfValue:FE,setPositionFromValue:function setPositionFromValue$2(e,t,n,o){var i=dE(n),a=FE(e,o.getSpectrum(e),i,o.getLeftEdge(e),o.getRightEdge(e),n),u=Cn(t.element)/2;Qt(t.element,"left",a-u+"px")},onLeft:HE,onRight:$E,onUp:zE,onDown:VE,edgeActions:UE}),WE=function fireSliderChange$1(e,t){Ca(e,VT(),{value:t})},jE=function findValueOfOffset(e,t,n){var o={min:WT(t),max:KT(t),range:eE(t),value:n,step:rE(t),snap:oE(t),snapStart:iE(t),rounded:aE(t),hasMinEdge:lE(t),hasMaxEdge:fE(t),minBound:AE(e),maxBound:_E(e),screenRange:RE(e)};return bE(o)},GE=function handleMovement$1(e){return function(t,n,o){return function moveBy$1(e,t,n,o){var i=(e>0?hE:pE)(dE(n),WT(n),KT(n),rE(n,o));return WE(t,i),K.some(i)}(e,t,n,o).map(q)}},qE=function findPositionOfValue(e,t,n,o,i,a){var u=function findOffsetOfValue(e,t,n,o,i){var a=RE(e),u=o.bind((function(t){return K.some(BE(t,e))})).getOr(0),c=i.bind((function(t){return K.some(BE(t,e))})).getOr(a),s={min:WT(t),max:KT(t),range:eE(t),value:n,hasMinEdge:lE(t),hasMaxEdge:fE(t),minBound:AE(e),minOffset:0,maxBound:_E(e),maxOffset:a,centerMinEdge:u,centerMaxEdge:c};return yE(s)}(t,a,n,o,i);return AE(t)-AE(e)+u},KE=K.none,YE=K.none,XE=GE(-1),JE=GE(1),QE={"top-left":K.none(),top:K.some((function setToTEdge(e,t){gE(e,GT(t))})),"top-right":K.none(),right:K.none(),"bottom-right":K.none(),bottom:K.some((function setToBEdge(e,t){gE(e,XT(t))})),"bottom-left":K.none(),left:K.none()},eO=Object.freeze({__proto__:null,setValueFrom:function setValueFrom$1(e,t,n){var o=jE(e,t,n);return WE(e,o),o},setToMin:function setToMin$1(e,t){var n=WT(t);WE(e,n)},setToMax:function setToMax$1(e,t){var n=KT(t);WE(e,n)},findValueOfOffset:jE,getValueFromEvent:function getValueFromEvent$1(e){return UT(e).map((function(e){return e.top}))},findPositionOfValue:qE,setPositionFromValue:function setPositionFromValue$1(e,t,n,o){var i=dE(n),a=qE(e,o.getSpectrum(e),i,o.getTopEdge(e),o.getBottomEdge(e),n),u=mn(t.element)/2;Qt(t.element,"top",a-u+"px")},onLeft:KE,onRight:YE,onUp:XE,onDown:JE,edgeActions:QE}),tO=function fireSliderChange(e,t){Ca(e,VT(),{value:t})},nO=function sliderValue(e,t){return{x:e,y:t}},rO=function handleMovement(e,t){return function(n,o,i){return function moveBy(e,t,n,o,i){var a=e>0?hE:pE,u=t?dE(o).x:a(dE(o).x,ZT(o),qT(o),rE(o,i)),c=t?a(dE(o).y,WT(o),KT(o),rE(o,i)):dE(o).y;return tO(n,nO(u,c)),K.some(u)}(e,t,n,o,i).map(q)}},oO=rO(-1,!1),iO=rO(1,!1),aO=rO(-1,!0),uO=rO(1,!0),cO={"top-left":K.some((function setToTLEdgeXY(e,t){gE(e,mE(jT(t),GT(t)))})),top:K.some((function setToTEdgeXY(e,t){gE(e,mE(tE(t),GT(t)))})),"top-right":K.some((function setToTREdgeXY(e,t){gE(e,mE(YT(t),GT(t)))})),right:K.some((function setToREdgeXY(e,t){gE(e,mE(YT(t),nE(t)))})),"bottom-right":K.some((function setToBREdgeXY(e,t){gE(e,mE(YT(t),XT(t)))})),bottom:K.some((function setToBEdgeXY(e,t){gE(e,mE(tE(t),XT(t)))})),"bottom-left":K.some((function setToBLEdgeXY(e,t){gE(e,mE(jT(t),XT(t)))})),left:K.some((function setToLEdgeXY(e,t){gE(e,mE(jT(t),nE(t)))}))},sO=Object.freeze({__proto__:null,setValueFrom:function setValueFrom(e,t,n){var o=PE(e,t,n.left),i=jE(e,t,n.top),a=nO(o,i);return tO(e,a),a},setToMin:function setToMin(e,t){var n=ZT(t),o=WT(t);tO(e,nO(n,o))},setToMax:function setToMax(e,t){var n=qT(t),o=KT(t);tO(e,nO(n,o))},getValueFromEvent:function getValueFromEvent(e){return UT(e)},setPositionFromValue:function setPositionFromValue(e,t,n,o){var i=dE(n),a=FE(e,o.getSpectrum(e),i.x,o.getLeftEdge(e),o.getRightEdge(e),n),u=qE(e,o.getSpectrum(e),i.y,o.getTopEdge(e),o.getBottomEdge(e),n),c=Cn(t.element)/2,s=mn(t.element)/2;Qt(t.element,"left",a-c+"px"),Qt(t.element,"top",u-s+"px")},onLeft:oO,onRight:iO,onUp:aO,onDown:uO,edgeActions:cO}),lO=[ei("stepSize",1),ei("speedMultiplier",10),ei("onChange",F),ei("onChoose",F),ei("onInit",F),ei("onDragStart",F),ei("onDragEnd",F),ei("snapToGrid",!1),ei("rounded",!0),Wo("snapStart"),Lo("model",Ro("mode",{x:[ei("minX",0),ei("maxX",100),Bo("value",(function(e){return si(e.mode.minX)})),Po("getInitialValue"),Bc("manager",ZE)],y:[ei("minY",0),ei("maxY",100),Bo("value",(function(e){return si(e.mode.minY)})),Po("getInitialValue"),Bc("manager",eO)],xy:[ei("minX",0),ei("maxX",100),ei("minY",0),ei("maxY",100),Bo("value",(function(e){return si({x:e.mode.minX,y:e.mode.minY})})),Po("getInitialValue"),Bc("manager",sO)]})),Nd("sliderBehaviours",[ch,Rd]),Bo("mouseIsDown",(function(){return si(!1)}))],fO=Lm({name:"Slider",configFields:lO,partFields:zT,factory:function sketch$2(e,t,n,o){var i=function getThumb(t){return Sm(t,e,"thumb")},a=function getSpectrum(t){return Sm(t,e,"spectrum")},u=function getLeftEdge(t){return xm(t,e,"left-edge")},c=function getRightEdge(t){return xm(t,e,"right-edge")},s=function getTopEdge(t){return xm(t,e,"top-edge")},d=function getBottomEdge(t){return xm(t,e,"bottom-edge")},m=e.model,g=m.manager,p=function refresh(t,n){g.setPositionFromValue(t,n,e,{getLeftEdge:u,getRightEdge:c,getTopEdge:s,getBottomEdge:d,getSpectrum:a})},h=function setValue(e,t){m.value.set(t);var n=i(e);p(e,n)},v=function choose(t){var n=e.mouseIsDown.get();e.mouseIsDown.set(!1),n&&function fireOnChoose(){xm(t,e,"thumb").each((function(n){var o=m.value.get();e.onChoose(t,n,o)}))}()},b=function onDragStart(t,n){n.stop(),e.mouseIsDown.set(!0),e.onDragStart(t,i(t))},y=function onDragEnd(t,n){n.stop(),e.onDragEnd(t,i(t)),v(t)},C=function focusWidget(t){xm(t,e,"spectrum").map(ch.focusIn)};return{uid:e.uid,dom:e.dom,components:t,behaviours:Bd(e.sliderBehaviours,[ch.config({mode:"special",focusIn:C}),Rd.config({store:{mode:"manual",getValue:function getValue(e){return m.value.get()},setValue:h}}),Ds.config({channels:l({},gd(),{onReceive:v})})]),events:Ta([Aa(VT(),(function(t,n){!function changeValue(t,n){h(t,n);var o=i(t);e.onChange(t,o,n),K.some(!0)}(t,n.event.value)})),Pa((function(t,n){var o=m.getInitialValue();m.value.set(o);var u=i(t);p(t,u);var c=a(t);e.onInit(t,u,c,m.value.get())})),Aa(Ti(),b),Aa(Oi(),y),Aa(_i(),(function(e,t){C(e),b(e,t)})),Aa(Ni(),y)]),apis:{resetToMin:function resetToMin(t){g.setToMin(t,e)},resetToMax:function resetToMax(t){g.setToMax(t,e)},setValue:h,refresh:p},domModification:{styles:{position:"relative"}}}},apis:{setValue:function setValue(e,t,n){e.setValue(t,n)},resetToMin:function resetToMin(e,t){e.resetToMin(t)},resetToMax:function resetToMax(e,t){e.resetToMax(t)},refresh:function refresh(e,t){e.refresh(t)}}}),dO=qa("rgb-hex-update"),mO=qa("slider-update"),gO=qa("palette-update"),pO="form",hO=[Nd("formBehaviours",[Rd])],vO=function getPartName$1(e){return"<alloy.field."+e+">"},bO=function make$4(e,t){return{uid:e.uid,dom:e.dom,components:t,behaviours:Bd(e.formBehaviours,[Rd.config({store:{mode:"manual",getValue:function getValue(t){var n=Tm(t,e);return De(n,(function(e,t){return e().bind((function(e){return function toResult(e,t){return e.fold((function(){return Or.error(t)}),Or.value)}(zm.getCurrent(e),new Error("Cannot find a current component to extract the value from for form part '".concat(t,"': ")+Za(e.element)))})).map(Rd.getValue)}))},setValue:function setValue(t,n){_e(n,(function(n,o){xm(t,e,o).each((function(e){zm.getCurrent(e).each((function(e){Rd.setValue(e,n)}))}))}))}}})]),apis:{getField:function getField(t,n){return xm(t,e,n).bind(zm.getCurrent)}}}},yO={getField:fu((function(e,t,n){return e.getField(t,n)})),sketch:function sketch$1(e){var t=function(){var e=[];return{field:function field(t,n){return e.push(t),vm(pO,vO(t),n)},record:z(e)}}(),n=e(t),o=t.record(),i=ae(o,(function(e){return cm({name:e,pname:vO(e)})}));return Nm(pO,hO,i,bO,n)}},CO=qa("valid-input"),wO=qa("invalid-input"),xO=qa("validating-input"),SO="colorcustom.rgb.",kO=function rgbFormFactory(e,t,n,o){var i=function invalidation(n,o){return wT.config({invalidClass:t("invalid"),notify:{onValidate:function onValidate(e){Ca(e,xO,{type:n})},onValid:function onValid(e){Ca(e,CO,{type:n,value:Rd.getValue(e)})},onInvalid:function onInvalid(e){Ca(e,wO,{type:n,value:Rd.getValue(e)})}},validator:{validate:function validate(t){var n=Rd.getValue(t),i=o(n)?Or.value(!0):Or.error(e("aria.input.invalid"));return YS(i)},validateOnLoad:!1}})},a=function renderTextField(n,o,a,u,c){var l=e(SO+"range"),d=jk.parts.label({dom:{tag:"label",attributes:{"aria-label":u}},components:[Ju(a)]}),m=jk.parts.field({data:c,factory:tC,inputAttributes:s({type:"text"},"hex"===o?{"aria-live":"polite"}:{}),inputClasses:[t("textfield")],inputBehaviours:ks([i(o,n),Kk.config({})]),onSetValue:function onSetValue(e){wT.isInvalid(e)&&wT.run(e).get(F)}}),g=[d,m],p="hex"!==o?[jk.parts["aria-descriptor"]({text:l})]:[];return{dom:{tag:"div",attributes:{role:"presentation"}},components:g.concat(p)}},u=function copyRgbToForm(e,t){var n=t.red,o=t.green,i=t.blue;Rd.setValue(e,{red:n,green:o,blue:i})},c=dv({dom:{tag:"div",classes:[t("rgba-preview")],styles:{"background-color":"white"},attributes:{role:"presentation"}}}),l=function updatePreview(e,t){c.getOpt(e).each((function(e){Qt(e.element,"background-color","#"+t.value)}))},d=Pm({factory:function factory(){var i={red:si(K.some(255)),green:si(K.some(255)),blue:si(K.some(255)),hex:si(K.some("ffffff"))},s=function get(e){return i[e].get()},d=function set(e,t){i[e].set(t)},m=function setValueRgb(e){var t=e.red,n=e.green,o=e.blue;d("red",K.some(t)),d("green",K.some(n)),d("blue",K.some(o))},g=function onInvalidInput(e,t){var n=t.event;"hex"!==n.type?d(n.type,K.none()):o(e)},p=function onValidRgb(e,t,n){var o=parseInt(n,10);d(t,K.some(o)),function getValueRgb(){return s("red").bind((function(e){return s("green").bind((function(t){return s("blue").map((function(n){return Ox(e,t,n,1)}))}))}))}().each((function(t){var n=function copyRgbToHex(e,t){var n=wx(t);return yO.getField(e,"hex").each((function(t){Sh.isFocused(t)||Rd.setValue(e,{hex:n.value})})),n}(e,t);Ca(e,dO,{hex:n}),l(e,n)}))},h=function onValidInput(e,t){var o=t.event;!function isHexInputEvent(e){return"hex"===e.type}(o)?p(e,o.type,o.value):function onValidHex(e,t){n(e);var o=gx(t);d("hex",K.some(o.value));var i=Dx(o);u(e,i),m(i),Ca(e,dO,{hex:o}),l(e,o)}(e,o.value)},v=function formPartStrings(t){return{label:e(SO+t+".label"),description:e(SO+t+".description")}},b=v("red"),y=v("green"),C=v("blue"),w=v("hex");return Zr(yO.sketch((function(n){return{dom:{tag:"form",classes:[t("rgb-form")],attributes:{"aria-label":e("aria.color.picker")}},components:[n.field("red",jk.sketch(a(Ax,"red",b.label,b.description,255))),n.field("green",jk.sketch(a(Ax,"green",y.label,y.description,255))),n.field("blue",jk.sketch(a(Ax,"blue",C.label,C.description,255))),n.field("hex",jk.sketch(a(vx,"hex",w.label,w.description,"ffffff"))),c.asSpec()],formBehaviours:ks([wT.config({invalidClass:t("form-invalid")}),bh("rgb-form-events",[Aa(CO,h),Aa(wO,g),Aa(xO,g)])])}})),{apis:{updateHex:function updateHex(e,t){Rd.setValue(e,{hex:t.value}),function copyHexToRgb(e,t){var n=Dx(t);u(e,n),m(n)}(e,t),l(e,t)}}})},name:"RgbForm",configFields:[],apis:{updateHex:function updateHex(e,t,n){e.updateHex(t,n)}},extraApis:{}});return d},TO=function paletteFactory(e,t){var n=fO.parts.spectrum({dom:{tag:"canvas",attributes:{role:"presentation"},classes:[t("sv-palette-spectrum")]}}),o=fO.parts.thumb({dom:{tag:"div",attributes:{role:"presentation"},classes:[t("sv-palette-thumb")],innerHtml:"<div class=".concat(t("sv-palette-inner-thumb"),' role="presentation"></div>')}}),i=function setColour(e,t){var n=e.width,o=e.height,i=e.getContext("2d");if(null!==i){i.fillStyle=t,i.fillRect(0,0,n,o);var a=i.createLinearGradient(0,0,n,0);a.addColorStop(0,"rgba(255,255,255,1)"),a.addColorStop(1,"rgba(255,255,255,0)"),i.fillStyle=a,i.fillRect(0,0,n,o);var u=i.createLinearGradient(0,0,0,o);u.addColorStop(0,"rgba(0,0,0,0)"),u.addColorStop(1,"rgba(0,0,0,1)"),i.fillStyle=u,i.fillRect(0,0,n,o)}},a=Pm({factory:function factory(a){var u=z({x:0,y:0}),c=ks([zm.config({find:K.some}),Sh.config({})]);return fO.sketch({dom:{tag:"div",attributes:{role:"slider","aria-valuetext":e(["Saturation {0}%, Brightness {1}%",0,0])},classes:[t("sv-palette")]},model:{mode:"xy",getInitialValue:u},rounded:!1,components:[n,o],onChange:function onChange(t,n,o){P(o)||Wt(t.element,"aria-valuetext",e(["Saturation {0}%, Brightness {1}%",Math.floor(o.x),Math.floor(100-o.y)])),Ca(t,gO,{value:o})},onInit:function onInit(e,t,n,o){i(n.element.dom,Mx(Bx))},sliderBehaviours:c})},name:"SaturationBrightnessPalette",configFields:[],apis:{setHue:function setHue(e,t,n){!function setPaletteHue(e,t){var n=e.components()[0].element.dom,o=qx(t,100,100),a=_x(o);i(n,Mx(a))}(t,n)},setThumb:function setThumb(t,n,o){!function setPaletteThumb(t,n){var o=Kx(Dx(n));fO.setValue(t,{x:o.saturation,y:100-o.value}),Wt(t.element,"aria-valuetext",e(["Saturation {0}%, Brightness {1}%",o.saturation,o.value]))}(n,o)}},extraApis:{}});return a},EO=function makeFactory(e,t){var n=Pm({name:"ColourPicker",configFields:[Po("dom"),ei("onValidHex",F),ei("onInvalidHex",F)],factory:function factory(n){var o=kO(e,t,n.onValidHex,n.onInvalidHex),i=TO(e,t),a={paletteRgba:si(Bx),paletteHue:si(0)},u=dv(function sliderFactory(e,t){var n=fO.parts.spectrum({dom:{tag:"div",classes:[t("hue-slider-spectrum")],attributes:{role:"presentation"}}}),o=fO.parts.thumb({dom:{tag:"div",classes:[t("hue-slider-thumb")],attributes:{role:"presentation"}}});return fO.sketch({dom:{tag:"div",classes:[t("hue-slider")],attributes:{role:"slider","aria-valuemin":0,"aria-valuemax":360,"aria-valuenow":120}},rounded:!1,model:{mode:"y",getInitialValue:z(0)},components:[n,o],sliderBehaviours:ks([Sh.config({})]),onChange:function onChange(e,t,n){Wt(e.element,"aria-valuenow",Math.floor(360-3.6*n)),Ca(e,mO,{value:n})}})}(0,t)),c=dv(i.sketch({})),s=dv(o.sketch({})),l=function updatePalette(e,t,n){c.getOpt(e).each((function(e){i.setHue(e,n)}))},d=function updateFields(e,t){s.getOpt(e).each((function(e){o.updateHex(e,t)}))},m=function updateSlider(e,t,n){u.getOpt(e).each((function(e){fO.setValue(e,function hueDegreesToSlider(e){return 100-e/360*100}(n))}))},g=function updatePaletteThumb(e,t){c.getOpt(e).each((function(e){i.setThumb(e,t)}))},p=function runUpdates(e,t,n,o){!function updateState(e,t){var n=Dx(e);a.paletteRgba.set(n),a.paletteHue.set(t)}(t,n),ue(o,(function(o){o(e,t,n)}))};return{uid:n.uid,dom:n.dom,components:[c.asSpec(),u.asSpec(),s.asSpec()],behaviours:ks([bh("colour-picker-events",[Aa(dO,function onFieldsUpdate(){var e=[l,m,g];return function(t,n){var o=n.event.hex,i=function hexToHsv(e){return Kx(Dx(e))}(o);p(t,o,i.hue,e)}}()),Aa(gO,function onPaletteUpdate(){var e=[d];return function(t,n){var o=n.event.value,i=a.paletteHue.get(),u=qx(i,o.x,100-o.y),c=Yx(u);p(t,c,i,e)}}()),Aa(mO,function onSliderUpdate(){var e=[l,d];return function(t,n){var o=function hueSliderToDegrees(e){return(100-e)/100*360}(n.event.value),i=a.paletteRgba.get(),u=Kx(i),c=qx(o,u.saturation,u.value),s=Yx(c);p(t,s,o,e)}}())]),zm.config({find:function find(e){return s.getOpt(e)}}),ch.config({mode:"acyclic"})])}}});return n},OO=function self(){return zm.config({find:K.some})},AO=function memento$1(e){return zm.config({find:e.getOpt})},_O=function childAt(e){return zm.config({find:function find(t){return At(t.element,e).bind((function(e){return t.getSystem().getByDom(e).toOptional()}))}})},DO=co([ei("preprocess",V),ei("postprocess",V)]),RO=function memento(e,t){var n=_o("RepresentingConfigs.memento processors",DO,t);return Rd.config({store:{mode:"manual",getValue:function getValue(t){var o=e.get(t),i=Rd.getValue(o);return n.postprocess(i)},setValue:function setValue(t,o){var i=n.preprocess(o),a=e.get(t);Rd.setValue(a,i)}}})},NO=function withComp(e,t,n){return Rd.config({store:s(s({mode:"manual"},e.map((function(e){return{initialValue:e}})).getOr({})),{},{getValue:t,setValue:n})})},MO=function withElement(e,t,n){return NO(e,(function(e){return t(e.element)}),(function(e,t){return n(e.element,t)}))},BO=function domHtml(e){return MO(e,$a,za)},IO=function memory(e){return Rd.config({store:{mode:"memory",initialValue:e}})},PO={"colorcustom.rgb.red.label":"R","colorcustom.rgb.red.description":"Red component","colorcustom.rgb.green.label":"G","colorcustom.rgb.green.description":"Green component","colorcustom.rgb.blue.label":"B","colorcustom.rgb.blue.description":"Blue component","colorcustom.rgb.hex.label":"#","colorcustom.rgb.hex.description":"Hex color code","colorcustom.rgb.range":"Range 0 to 255","aria.color.picker":"Color Picker","aria.input.invalid":"Invalid input"},LO=function renderColorPicker(e,t,n){var o=function getClass(e){return"tox-"+e},i=EO(function translate$1(e){return function(t){return T(t)?e.translate(PO[t]):e.translate(t)}}(t),o),a=dv(i.sketch({dom:{tag:"div",classes:[o("color-picker-container")],attributes:{role:"presentation"}},onValidHex:function onValidHex(e){Ca(e,iT,{name:"hex-valid",value:!0})},onInvalidHex:function onInvalidHex(e){Ca(e,iT,{name:"hex-valid",value:!1})}}));return{dom:{tag:"div"},components:[a.asSpec()],behaviours:ks([NO(n,(function(e){var t=a.get(e);return zm.getCurrent(t).bind((function(e){return Rd.getValue(e).hex})).map((function(e){return"#"+Ge(e,"#")})).getOr("")}),(function(e,t){var n=K.from(/^#([a-fA-F0-9]{3}(?:[a-fA-F0-9]{3})?)/.exec(t)).bind((function(e){return xe(e,1)})),o=a.get(e);zm.getCurrent(o).fold((function(){console.log("Can not find form")}),(function(e){Rd.setValue(e,{hex:n.getOr("")}),yO.getField(e,"hex").each((function(e){ya(e,Fi())}))}))})),OO()])}},FO=tinymce.util.Tools.resolve("tinymce.Resource"),HO=tinymce.util.Tools.resolve("tinymce.util.Tools"),$O=function renderDropZone(e,t,n){var o=function stopper(e,t){t.stop()},i=function sequence(e){return function(t,n){ue(e,(function(e){e(t,n)}))}},a=function onDrop(e,t){var n;if(!tg.isDisabled(e)){var o=t.event.raw;c(e,null===(n=o.dataTransfer)||void 0===n?void 0:n.files)}},u=function onSelect(e,t){var n=t.event.raw.target;c(e,n.files)},c=function handleFiles(n,o){o&&(Rd.setValue(n,function filterByExtension(e,t){var n=HO.explode(t.getOption("images_file_types"));return se(Te(e),(function isFileInAllowedTypes(e){return re(n,(function(t){return Ye(e.name.toLowerCase(),".".concat(t.toLowerCase()))}))}))}(o,t)),Ca(n,nT,{name:e.name}))},s=dv({dom:{tag:"input",attributes:{type:"file",accept:"image/*"},styles:{display:"none"}},behaviours:ks([bh("input-file-events",[Ma($i()),Ma(Qi())])])}),l=e.label.map((function(e){return tT(e,t)})),d=jk.parts.field({factory:{sketch:function renderField(e){return{uid:e.uid,dom:{tag:"div",classes:["tox-dropzone-container"]},behaviours:ks([IO(n.getOr([])),OO(),tg.config({}),Rh.config({toggleClass:"dragenter",toggleOnExecute:!1}),bh("dropzone-events",[Aa("dragenter",i([o,Rh.toggle])),Aa("dragleave",i([o,Rh.toggle])),Aa("dragover",o),Aa("drop",i([o,a])),Aa(Hi(),u)])]),components:[{dom:{tag:"div",classes:["tox-dropzone"],styles:{}},components:[{dom:{tag:"p"},components:[Ju(t.translate("Drop an image here"))]},lv.sketch({dom:{tag:"button",styles:{position:"relative"},classes:["tox-button","tox-button--secondary"]},components:[Ju(t.translate("Browse for an image")),s.asSpec()],action:function action(e){s.get(e).element.dom.click()},buttonBehaviours:ks([Kk.config({}),Uw(t.isDisabled),zw()])})]}]}}}});return Xk(l,d,["tox-form__group--stretched"],[])},zO=function last(e,t){var n=null,o=function cancel(){D(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:function throttle(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];o(),n=setTimeout((function(){n=null,e.apply(null,a)}),t)}}},VO=qa("alloy-fake-before-tabstop"),UO=qa("alloy-fake-after-tabstop"),ZO=function craftWithClasses(e){return{dom:{tag:"div",styles:{width:"1px",height:"1px",outline:"none"},attributes:{tabindex:"0"},classes:e},behaviours:ks([Sh.config({ignore:!0}),Kk.config({})])}},WO=function craft(e,t){return{dom:{tag:"div",classes:["tox-navobj"].concat(d(e.getOr([])))},components:[ZO([VO]),t,ZO([UO])],behaviours:ks([_O(1)])}},jO=function triggerTab(e,t){Ca(e,Pi(),{raw:{which:9,shiftKey:t}})},GO=function onFocus(e,t){var n=t.element;Bu(n,VO)?jO(e,!0):Bu(n,UO)&&jO(e,!1)},qO=function isPseudoStop(e){return _k(e,["."+VO,"."+UO].join(","),G)},KO=qa("update-dialog"),YO=qa("update-title"),XO=qa("update-body"),JO=qa("update-footer"),QO=qa("body-send-message"),eA=qa("dialog-focus-shifted"),tA=Xn().browser,nA=tA.isSafari(),rA=tA.isFirefox(),oA=nA||rA,iA=tA.isChromium(),aA=function isElementScrollAtBottom(e){var t=e.scrollTop,n=e.scrollHeight,o=e.clientHeight;return Math.ceil(t)+o>=n},uA=function scrollToY(e,t){return e.scrollTo(0,"bottom"===t?99999999:t)},cA=function writeValue(e,t,n){var o=e.dom;K.from(o.contentDocument).fold(n,(function(e){var n=0,i=function getScrollingElement(e,t){var n=e.body;return K.from(!/^<!DOCTYPE (html|HTML)/.test(t)&&(!iA&&!nA||B(n)&&(0!==n.scrollTop||Math.abs(n.scrollHeight-n.clientHeight)>1))?n:e.documentElement)}(e,t).map((function(e){return n=e.scrollTop,e})).forall(aA),a=function scrollAfterWrite(){var e=o.contentWindow;B(e)&&(i?uA(e,"bottom"):!i&&oA&&0!==n&&uA(e,n))};nA&&o.addEventListener("load",a,{once:!0}),e.open(),e.write(t),e.close(),nA||a()}))},sA=We(oA,nA?500:200),lA=sA.map((function(e){return function adaptable(e,t){var n=null,o=null;return{cancel:function cancel(){D(n)||(clearTimeout(n),n=null,o=null)},throttle:function throttle(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];o=a,D(n)&&(n=setTimeout((function(){var t=o;n=null,o=null,e.apply(null,t)}),t))}}}(cA,e)})),fA=function renderIFrame(e,t,n){var o="tox-dialog__iframe",i=e.transparent?[]:["".concat(o,"--opaque")],a=e.border?["tox-navobj-bordered"]:[],u=s(s(s({},e.label.map((function(e){return{title:e}})).getOr({})),n.map((function(e){return{srcdoc:e}})).getOr({})),e.sandboxed?{sandbox:"allow-scripts allow-same-origin"}:{}),c=function getDynamicSource(e,t){var n=si(e.getOr(""));return{getValue:function getValue(e){return n.get()},setValue:function setValue(e,o){if(n.get()!==o){var i=e.element,a=function setSrcdocValue(){return Wt(i,"srcdoc",o)};t?lA.fold(z(cA),(function(e){return e.throttle}))(i,o,a):a()}n.set(o)}}}(n,e.streamContent),d=e.label.map((function(e){return tT(e,t)})),m=jk.parts.field({factory:{sketch:function factory(e){return WO(K.from(a),{uid:e.uid,dom:{tag:"iframe",attributes:u,classes:[o].concat(i)},behaviours:ks([Kk.config({}),Sh.config({}),NO(n,c.getValue,c.setValue),Ds.config({channels:l({},eA,{onReceive:function onReceive(e,t){t.newFocus.each((function(t){Tt(e.element).each((function(n){(bt(e.element,t)?Du:Nu)(n,"tox-navobj-bordered-focus")}))}))}})})])})}}});return Xk(d,m,["tox-form__group--stretched"],[])},dA=function renderImagePreview(e,t){var n=si(t.getOr({url:""})),o=dv({dom:{tag:"img",classes:["tox-imagepreview__image"],attributes:t.map((function(e){return{src:e.url}})).getOr({})}}),i=dv({dom:{tag:"div",classes:["tox-imagepreview__container"],attributes:{role:"presentation"}},components:[o.asSpec()]}),a={};e.height.each((function(e){return a.height=e}));var u=t.map((function(e){return{url:e.url,zoom:K.from(e.zoom),cachedWidth:K.from(e.cachedWidth),cachedHeight:K.from(e.cachedHeight)}}));return{dom:{tag:"div",classes:["tox-imagepreview"],styles:a,attributes:{role:"presentation"}},components:[i.asSpec()],behaviours:ks([OO(),NO(u,(function(){return n.get()}),(function setValue(e,t){var a={url:t.url};t.zoom.each((function(e){return a.zoom=e})),t.cachedWidth.each((function(e){return a.cachedWidth=e})),t.cachedHeight.each((function(e){return a.cachedHeight=e})),n.set(a);var u=function applyFramePositioning(){var t=a.cachedWidth,n=a.cachedHeight,o=a.zoom;if(!N(t)&&!N(n)){if(N(o)){var u=function zoomToFit(e,t,n){var o=Cn(e),i=mn(e);return Math.min(o/t,i/n,1)}(e.element,t,n);a.zoom=u}var c=function calculateImagePosition(e,t,n,o,i){var a=n*i,u=o*i,c=Math.max(0,e/2-a/2),s=Math.max(0,t/2-u/2);return{left:c.toString()+"px",top:s.toString()+"px",width:a.toString()+"px",height:u.toString()+"px"}}(Cn(e.element),mn(e.element),t,n,a.zoom);i.getOpt(e).each((function(e){en(e.element,c)}))}};o.getOpt(e).each((function(n){var o=n.element;t.url!==Gt(o,"src")&&(Wt(o,"src",t.url),Nu(e.element,"tox-imagepreview__loaded")),u(),function image(e){return new Promise((function(t,n){var o=function loaded(){a(),t(e)},i=[ol(e,"load",o),ol(e,"error",(function(){a(),n("Unable to load data from image: "+e.dom.src)}))],a=function destroy(){return ue(i,(function(e){return e.unbind()}))};e.dom.complete&&o()}))}(o).then((function(t){e.getSystem().isConnected()&&(Du(e.element,"tox-imagepreview__loaded"),a.cachedWidth=t.dom.naturalWidth,a.cachedHeight=t.dom.naturalHeight,u())}))}))}))])}},mA=qa("toolbar.button.execute"),gA=function onToolbarButtonExecute(e){return Ha((function(t,n){jw(e,t)((function(n){Ca(t,mA,{buttonApi:n}),e.onAction(n)}))}))},pA=qa("common-button-display-events"),hA=(t={},l(t,Xi(),["disabling","alloy.base.behaviour","toggling","toolbar-button-events"]),l(t,ca(),["toolbar-button-events",pA]),l(t,_i(),["focusing","alloy.base.behaviour",pA]),t),vA=function forceInitialSize(e){return Qt(e.element,"width",nn(e.element,"width"))},bA=function renderIcon$1(e,t,n){return hb(e,{tag:"span",classes:["tox-icon","tox-tbtn__icon-wrap"],behaviours:n},t)},yA=function renderIconFromPack$1(e,t){return bA(e,t,[])},CA=function renderReplaceableIconFromPack(e,t){return bA(e,t,[vh.config({})])},wA=function renderLabel$1(e,t,n){return{dom:{tag:"span",classes:["".concat(t,"__select-label")]},components:[Ju(n.translate(e))],behaviours:ks([vh.config({})])}},xA=qa("update-menu-text"),SA=qa("update-menu-icon"),kA=function renderCommonDropdown(e,t,n){var o=si(F),i=e.text.map((function(e){return dv(wA(e,t,n.providers))})),a=e.icon.map((function(e){return dv(CA(e,n.providers.icons))})),u=function onLeftOrRightInMenu(e,t){var n=Rd.getValue(e);return Sh.focus(n),Ca(n,"keydown",{raw:t.event.raw}),fk.close(n),K.some(!0)},c=e.role.fold((function(){return{}}),(function(e){return{role:e}})),m=e.tooltip.fold((function(){return{}}),(function(e){var t=n.providers.translate(e);return{title:t,"aria-label":t}})),g=hb("chevron-down",{tag:"div",classes:["".concat(t,"__select-chevron")]},n.providers.icons),p=qa("common-button-display-events"),h=dv(fk.sketch(s(s(s({},e.uid?{uid:e.uid}:{}),c),{},{dom:{tag:"button",classes:[t,"".concat(t,"--select")].concat(ae(e.classes,(function(e){return"".concat(t,"--").concat(e)}))),attributes:s({},m)},components:Xw([a.map((function(e){return e.asSpec()})),i.map((function(e){return e.asSpec()})),K.some(g)]),matchWidth:!0,useMinWidth:!0,onOpen:function onOpen(t,n,o){e.searchable&&function focusSearchField(e){aC(e).each((function(e){return Sh.focus(e)}))}(o)},dropdownBehaviours:ks([].concat(d(e.dropdownBehaviours),[Uw((function(){return e.disabled||n.providers.isDisabled()})),zw(),ST.config({}),vh.config({}),bh("dropdown-events",[Gw(e,o),qw(e,o)]),bh(p,[Pa((function(e,t){return vA(e)}))]),bh("menubutton-update-display-text",[Aa(xA,(function(e,t){i.bind((function(t){return t.getOpt(e)})).each((function(e){vh.set(e,[Ju(n.providers.translate(t.event.text))])}))})),Aa(SA,(function(e,t){a.bind((function(t){return t.getOpt(e)})).each((function(e){vh.set(e,[CA(t.event.icon,n.providers.icons)])}))}))])])),eventOrder:Zr(hA,l({mousedown:["focusing","alloy.base.behaviour","item-type-events","normal-dropdown-events"]},ca(),["toolbar-button-events","dropdown-events",p])),sandboxBehaviours:ks([ch.config({mode:"special",onLeft:u,onRight:u}),bh("dropdown-sandbox-events",[Aa(nC,(function(e,t){dk(e),t.stop()})),Aa(rC,(function(e,t){mk(e,t),t.stop()}))])]),lazySink:n.getSink,toggleClass:"".concat(t,"--active"),parts:{menu:s(s({},Yy(0,e.columns,e.presets)),{},{fakeFocus:e.searchable,onHighlightItem:pk,onCollapseMenu:function onCollapseMenu(e,t,n){dg.getHighlighted(n).each((function(t){pk(e,n,t)}))},onDehighlightItem:hk})},getAnchorOverrides:function getAnchorOverrides(){return{maxHeightFunction:function maxHeightFunction(e,t){hl()(e,t-10)}}},fetch:function fetch(t){return KS(curry(e.fetch,t))}})));return h.asSpec()},TA=function isSeparator$2(e){return"separator"===e.type},EA={type:"separator"},OA=function unwrapReferences(e,t){var n=fe(e,(function(e,n){return function isMenuItemReference(e){return T(e)}(n)?""===n?e:"|"===n?e.length>0&&!TA(e[e.length-1])?e.concat([EA]):e:He(t,n.toLowerCase())?e.concat([t[n.toLowerCase()]]):e:e.concat([n])}),[]);return n.length>0&&TA(n[n.length-1])&&n.pop(),n},AA=function getFromExpandingItem(e,t){var n=e.getSubmenuItems(),o=_A(n,t);return{item:e,menus:Zr(o.menus,l({},e.value,o.items)),expansions:Zr(o.expansions,l({},e.value,e.value))}},_A=function expand(e,t){var n=OA(T(e)?e.split(" "):e,t);return le(n,(function(e,n){if(function isExpandingMenuItem(e){return He(e,"getSubmenuItems")}(n)){var o=function generateValueIfRequired(e){var t=Fe(e,"value").getOrThunk((function(){return qa("generated-menu-item")}));return Zr({value:t},e)}(n),i=AA(o,t);return{menus:Zr(e.menus,i.menus),items:[i.item].concat(d(e.items)),expansions:Zr(e.expansions,i.expansions)}}return s(s({},e),{},{items:[n].concat(d(e.items))})}),{menus:{},expansions:{},items:[]})},DA=function build(e,t,n,o){var i=qa("primary-menu"),a=_A(e,n.shared.providers.menuItems());if(0===a.items.length)return K.none();var u=function getSearchModeForField(e){return e.search.fold((function(){return{searchMode:"no-search"}}),(function(e){return{searchMode:"search-with-field",placeholder:e.placeholder}}))}(o),c=wk(i,a.items,t,n,o.isHorizontalMenu,u),s=function getSearchModeForResults(e){return e.search.fold((function(){return{searchMode:"no-search"}}),(function(e){return{searchMode:"search-with-results"}}))}(o),l=De(a.menus,(function(e,o){return wk(o,e,t,n,!1,s)})),d=Zr(l,mi(i,c));return K.from(uv.tieredData(i,d,a.expansions))},RA=function isSingleListItem(e){return!He(e,"items")},NA="data-value",MA=function fetchItems(e,t,n,o){return ae(n,(function(n){return RA(n)?{type:"togglemenuitem",text:n.text,value:n.value,active:n.value===o,onAction:function onAction(){Rd.setValue(e,n.value),Ca(e,nT,{name:t}),Sh.focus(e)}}:{type:"nestedmenuitem",text:n.text,getSubmenuItems:function getSubmenuItems(){return fetchItems(e,t,n.items,o)}}}))},BA=function findItemByValue(e,t){return Ee(e,(function(e){return RA(e)?We(e.value===t,e):findItemByValue(e.items,t)}))},IA=function renderListBox(e,t,n){var o=t.shared.providers,i=n.bind((function(t){return BA(e.items,t)})).orThunk((function(){return Se(e.items).filter(RA)})),a=e.label.map((function(e){return tT(e,o)})),u=jk.parts.field({dom:{},factory:{sketch:function sketch(n){return kA({uid:n.uid,text:i.map((function(e){return e.text})),icon:K.none(),tooltip:e.label,role:K.none(),fetch:function fetch(n,o){var i=MA(n,e.name,e.items,Rd.getValue(n));o(DA(i,Ny.CLOSE_ON_EXECUTE,t,{isHorizontalMenu:!1,search:K.none()}))},onSetup:z(F),getApi:z({}),columns:1,presets:"normal",classes:[],dropdownBehaviours:[Kk.config({}),NO(i.map((function(e){return e.value})),(function(e){return Gt(e.element,NA)}),(function(t,n){BA(e.items,n).each((function(e){Wt(t.element,NA,e.value),Ca(t,xA,{text:e.text})}))}))]},"tox-listbox",t.shared)}}}),c={dom:{tag:"div",classes:["tox-listboxfield"]},components:[u]};return jk.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:ge([a.toArray(),[c]]),fieldBehaviours:ks([tg.config({disabled:z(!e.enabled),onDisabled:function onDisabled(e){jk.getField(e).each(tg.disable)},onEnabled:function onEnabled(e){jk.getField(e).each(tg.enable)}})])})},PA=Pm({name:"HtmlSelect",configFields:[Po("options"),Nd("selectBehaviours",[Sh,Rd]),ei("selectClasses",[]),ei("selectAttributes",{}),Wo("data")],factory:function factory$h(e,t){var n=ae(e.options,(function(e){return{dom:{tag:"option",value:e.value,innerHtml:e.text}}})),o=e.data.map((function(e){return mi("initialValue",e)})).getOr({});return{uid:e.uid,dom:{tag:"select",classes:e.selectClasses,attributes:e.selectAttributes},components:n,behaviours:Bd(e.selectBehaviours,[Sh.config({}),Rd.config({store:s({mode:"manual",getValue:function getValue(e){return Fu(e.element)},setValue:function setValue(t,n){var o=Se(e.options);de(e.options,(function(e){return e.value===n})).isSome()?Hu(t.element,n):-1===t.element.dom.selectedIndex&&""===n&&o.each((function(e){return Hu(t.element,e.value)}))}},o)})])}}}),LA=z([ei("field1Name","field1"),ei("field2Name","field2"),Nc("onLockedChange"),Ac(["lockClass"]),ei("locked",!1),Id("coupledFieldBehaviours",[zm,Rd])]),FA=function coupledPart(e,t){return cm({factory:jk,name:e,overrides:function overrides(e){return{fieldBehaviours:ks([bh("coupled-input-behaviour",[Aa(Fi(),(function(n){(function getField(e,t,n){return xm(e,t,n).bind(zm.getCurrent)})(n,e,t).each((function(t){xm(n,e,"lock").each((function(o){Rh.isOn(o)&&e.onLockedChange(n,t,o)}))}))}))])])}}})},HA=z([FA("field1","field2"),FA("field2","field1"),cm({factory:lv,schema:[Po("dom")],name:"lock",overrides:function overrides(e){return{buttonBehaviours:ks([Rh.config({selected:e.locked,toggleClass:e.markers.lockClass,aria:{mode:"pressed"}})])}}})]),$A=Lm({name:"FormCoupledInputs",configFields:LA(),partFields:HA(),factory:function factory$g(e,t,n,o){return{uid:e.uid,dom:e.dom,components:t,behaviours:Pd(e.coupledFieldBehaviours,[zm.config({find:K.some}),Rd.config({store:{mode:"manual",getValue:function getValue(t){var n,o=Om(t,e,["field1","field2"]);return l(n={},e.field1Name,Rd.getValue(o.field1())),l(n,e.field2Name,Rd.getValue(o.field2())),n},setValue:function setValue(t,n){var o=Om(t,e,["field1","field2"]);$e(n,e.field1Name)&&Rd.setValue(o.field1(),n[e.field1Name]),$e(n,e.field2Name)&&Rd.setValue(o.field2(),n[e.field2Name])}}})]),apis:{getField1:function getField1(t){return xm(t,e,"field1")},getField2:function getField2(t){return xm(t,e,"field2")},getLock:function getLock(t){return xm(t,e,"lock")}}}},apis:{getField1:function getField1(e,t){return e.getField1(t)},getField2:function getField2(e,t){return e.getField2(t)},getLock:function getLock(e,t){return e.getLock(t)}}}),zA=function parseSize(e){var t=/^\s*(\d+(?:\.\d+)?)\s*(|cm|mm|in|px|pt|pc|em|ex|ch|rem|vw|vh|vmin|vmax|%)\s*$/.exec(e);if(null!==t){var n=parseFloat(t[1]),o=t[2];return Or.value({value:n,unit:o})}return Or.error(e)},VA=function convertUnit(e,t){var n={"":96,px:96,pt:72,cm:2.54,pc:12,mm:25.4,in:1},o=function supported(e){return He(n,e)};return e.unit===t?K.some(e.value):o(e.unit)&&o(t)?n[e.unit]===n[t]?K.some(e.value):K.some(e.value/n[e.unit]*n[t]):K.none()},UA=function noSizeConversion(e){return K.none()},ZA=function makeRatioConverter(e,t){var n=zA(e).toOptional(),o=zA(t).toOptional();return Ue(n,o,(function(e,t){return VA(e,t.unit).map((function(e){return t.value/e})).map((function(e){return function ratioSizeConversion(e,t){return function(n){return VA(n,t).map((function(n){return{value:n*e,unit:t}}))}}(e,t.unit)})).getOr(UA)})).getOr(UA)},WA=function renderTextField(e,t){var n=e.label.map((function(e){return tT(e,t)})),o=[tg.config({disabled:function disabled(){return e.disabled||t.isDisabled()}}),zw(),ch.config({mode:"execution",useEnter:!0!==e.multiline,useControlEnter:!0===e.multiline,execute:function execute(e){return ya(e,aT),K.some(!0)}}),bh("textfield-change",[Aa(Fi(),(function(t,n){Ca(t,nT,{name:e.name})})),Aa(Ki(),(function(t,n){Ca(t,nT,{name:e.name})}))]),Kk.config({})],i=e.validation.map((function(e){return wT.config({getRoot:function getRoot(e){return Tt(e.element)},invalidClass:"tox-invalid",validator:{validate:function validate(t){var n=Rd.getValue(t),o=e.validator(n);return YS(!0===o?Or.value(n):Or.error(o))},validateOnLoad:e.validateOnLoad}})})).toArray(),a=e.placeholder.fold(z({}),(function(e){return{placeholder:t.translate(e)}})),u=e.inputMode.fold(z({}),(function(e){return{inputmode:e}})),c=s(s({},a),u),l=jk.parts.field(s(s({tag:!0===e.multiline?"textarea":"input"},e.data.map((function(e){return{data:e}})).getOr({})),{},{inputAttributes:c,inputClasses:[e.classname],inputBehaviours:ks(ge([o,i])),selectOnFocus:!1,factory:tC})),d=e.multiline?{dom:{tag:"div",classes:["tox-textarea-wrap"]},components:[l]}:l,m=(e.flex?["tox-form__group--stretched"]:[]).concat(e.maximized?["tox-form-group--maximize"]:[]),g=[tg.config({disabled:function disabled(){return e.disabled||t.isDisabled()},onDisabled:function onDisabled(e){jk.getField(e).each(tg.disable)},onEnabled:function onEnabled(e){jk.getField(e).each(tg.enable)}}),zw()];return Xk(n,d,m,g)},jA=function getAnimationRoot(e,t){return t.getAnimationRoot.fold((function(){return e.element}),(function(t){return t(e)}))},GA=function getDimensionProperty(e){return e.dimension.property},qA=function getDimension(e,t){return e.dimension.getDimension(t)},KA=function disableTransitions(e,t){var n=jA(e,t);Pu(n,[t.shrinkingClass,t.growingClass])},YA=function setShrunk(e,t){Nu(e.element,t.openClass),Du(e.element,t.closedClass),Qt(e.element,GA(t),"0px"),ln(e.element)},XA=function setGrown(e,t){Nu(e.element,t.closedClass),Du(e.element,t.openClass),sn(e.element,GA(t))},JA=function doImmediateShrink(e,t,n,o){n.setCollapsed(),Qt(e.element,GA(t),qA(t,e.element)),KA(e,t),YA(e,t),t.onStartShrink(e),t.onShrunk(e)},QA=function doStartShrink(e,t,n,o){var i=o.getOrThunk((function(){return qA(t,e.element)}));n.setCollapsed(),Qt(e.element,GA(t),i),ln(e.element);var a=jA(e,t);Nu(a,t.growingClass),Du(a,t.shrinkingClass),YA(e,t),t.onStartShrink(e)},e_=function doStartSmartShrink(e,t,n){var o=qA(t,e.element);("0px"===o?JA:QA)(e,t,n,K.some(o))},t_=function doStartGrow(e,t,n){var o=jA(e,t),i=Bu(o,t.shrinkingClass),a=qA(t,e.element);XA(e,t);var u=qA(t,e.element);(i?function startPartialGrow(){Qt(e.element,GA(t),a),ln(e.element)}:function startCompleteGrow(){YA(e,t)})(),Nu(o,t.shrinkingClass),Du(o,t.growingClass),XA(e,t),Qt(e.element,GA(t),u),n.setExpanded(),t.onStartGrow(e)},n_=function isGrowing(e,t,n){var o=jA(e,t);return!0===Bu(o,t.growingClass)},r_=function isShrinking(e,t,n){var o=jA(e,t);return!0===Bu(o,t.shrinkingClass)},o_=Object.freeze({__proto__:null,refresh:function refresh$4(e,t,n){if(n.isExpanded()){sn(e.element,GA(t));var o=qA(t,e.element);Qt(e.element,GA(t),o)}},grow:function grow(e,t,n){n.isExpanded()||t_(e,t,n)},shrink:function shrink(e,t,n){n.isExpanded()&&e_(e,t,n)},immediateShrink:function immediateShrink(e,t,n){n.isExpanded()&&JA(e,t,n)},hasGrown:function hasGrown(e,t,n){return n.isExpanded()},hasShrunk:function hasShrunk(e,t,n){return n.isCollapsed()},isGrowing:n_,isShrinking:r_,isTransitioning:function isTransitioning(e,t,n){return n_(e,t)||r_(e,t)},toggleGrow:function toggleGrow(e,t,n){(n.isExpanded()?e_:t_)(e,t,n)},disableTransitions:KA,immediateGrow:function immediateGrow(e,t,n){n.isExpanded()||(XA(e,t),Qt(e.element,GA(t),qA(t,e.element)),KA(e,t),n.setExpanded(),t.onStartGrow(e),t.onGrown(e))}}),i_=Object.freeze({__proto__:null,exhibit:function exhibit(e,t,n){var o=t.expanded;return pu(o?{classes:[t.openClass],styles:{}}:{classes:[t.closedClass],styles:mi(t.dimension.property,"0px")})},events:function events$6(e,t){return Ta([Ia(Vi(),(function(n,o){o.event.raw.propertyName===e.dimension.property&&(KA(n,e),t.isExpanded()&&sn(n.element,e.dimension.property),(t.isExpanded()?e.onGrown:e.onShrunk)(n))}))])}}),a_=[Po("closedClass"),Po("openClass"),Po("shrinkingClass"),Po("growingClass"),Wo("getAnimationRoot"),Dc("onShrunk"),Dc("onStartShrink"),Dc("onGrown"),Dc("onStartGrow"),ei("expanded",!1),Lo("dimension",Ro("property",{width:[Bc("property","width"),Bc("getDimension",(function(e){return Cn(e)+"px"}))],height:[Bc("property","height"),Bc("getDimension",(function(e){return mn(e)+"px"}))]}))],u_=Object.freeze({__proto__:null,init:function init$9(e){var t=si(e.expanded);return mu({isExpanded:function isExpanded(){return!0===t.get()},isCollapsed:function isCollapsed(){return!1===t.get()},setCollapsed:curry(t.set,!1),setExpanded:curry(t.set,!0),readState:function readState(){return"expanded: "+t.get()}})}}),c_=Es({fields:a_,name:"sliding",active:i_,apis:o_,state:u_}),s_=function getMenuButtonApi(e){return{isEnabled:function isEnabled(){return!tg.isDisabled(e)},setEnabled:function setEnabled(t){return tg.set(e,!t)},setActive:function setActive(t){var n=e.element;t?(Du(n,"tox-tbtn--enabled"),Wt(n,"aria-pressed",!0)):(Nu(n,"tox-tbtn--enabled"),Yt(n,"aria-pressed"))},isActive:function isActive(){return Bu(e.element,"tox-tbtn--enabled")},setText:function setText(t){Ca(e,xA,{text:t})},setIcon:function setIcon(t){return Ca(e,SA,{icon:t})}}},l_=function renderMenuButton(e,t,n,o){var i=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];return kA({text:e.text,icon:e.icon,tooltip:e.tooltip,searchable:e.search.isSome(),role:o,fetch:function fetch(t,o){var i={pattern:e.search.isSome()?vk(t):""};e.fetch((function(t){o(DA(t,Ny.CLOSE_ON_EXECUTE,n,{isHorizontalMenu:!1,search:e.search}))}),i,s_(t))},onSetup:e.onSetup,getApi:s_,columns:1,presets:"normal",classes:[],dropdownBehaviours:d(i?[Kk.config({})]:[])},t,n.shared)},f_=function getFetch(e,t,n){var o=function getMenuItemAction(e){return function(o){var i=!o.isActive();o.setActive(i),e.storage.set(i),n.shared.getSink().each((function(n){t().getOpt(n).each((function(t){Ns(t.element),Ca(t,iT,{name:e.name,value:e.storage.get()})}))}))}},i=function getMenuItemSetup(e){return function(t){t.setActive(e.storage.get())}};return function(t){t(ae(e,(function(e){var t=e.text.fold((function(){return{}}),(function(e){return{text:e}}));return s(s({type:e.type,active:!1},t),{},{onAction:o(e),onSetup:i(e)})})))}},d_=function renderLabel(e){return{dom:{tag:"span",classes:["tox-tree__label"],attributes:{title:e,"aria-label":e}},components:[Ju(e)]}},m_=qa("leaf-label-event-id"),g_=function renderLeafLabel(e){var t=e.leaf,n=e.onLeafAction,o=e.visible,i=e.treeId,a=e.selectedId,u=e.backstage,c=t.menu.map((function(e){return l_(e,"tox-mbtn",u,K.none(),o)})),s=[d_(t.title)];return c.each((function(e){return s.push(e)})),lv.sketch({dom:{tag:"div",classes:["tox-tree--leaf__label","tox-trbtn"].concat(o?["tox-tree--leaf__label--visible"]:[])},components:s,role:"treeitem",action:function action(e){n(t.id),e.getSystem().broadcastOn(["update-active-item-".concat(i)],{value:t.id})},eventOrder:l({},Pi(),[m_,"keying"]),buttonBehaviours:ks([].concat(d(o?[Kk.config({})]:[]),[Rh.config({toggleClass:"tox-trbtn--enabled",toggleOnExecute:!1,aria:{mode:"selected"}}),Ds.config({channels:l({},"update-active-item-".concat(i),{onReceive:function onReceive(e,n){(n.value===t.id?Rh.on:Rh.off)(e)}})}),bh(m_,[Pa((function(e,n){a.each((function(n){(n===t.id?Rh.on:Rh.off)(e)}))})),Aa(Pi(),(function(e,t){var n="ArrowLeft"===t.event.raw.code,o="ArrowRight"===t.event.raw.code;n?(sc(e.element,".tox-tree--directory").each((function(t){e.getSystem().getByDom(t).each((function(e){lc(t,".tox-tree--directory__label").each((function(t){e.getSystem().getByDom(t).each(Sh.focus)}))}))})),t.stop()):o&&t.stop()}))])]))})},p_=function renderIconFromPack(e,t){return function renderIcon(e,t,n){return hb(e,{tag:"span",classes:["tox-tree__icon-wrap","tox-icon"],behaviours:n},t)}(e,t,[])},h_=qa("directory-label-event-id"),v_=function renderDirectoryLabel(e){var t=e.directory,n=e.visible,o=e.noChildren,i=e.backstage,a=t.menu.map((function(e){return l_(e,"tox-mbtn",i,K.none())})),u=[{dom:{tag:"div",classes:["tox-chevron"]},components:[p_("chevron-right",i.shared.providers.icons)]},d_(t.title)];a.each((function(e){u.push(e)}));var c=function toggleExpandChildren(e){sc(e.element,".tox-tree--directory").each((function(n){e.getSystem().getByDom(n).each((function(n){var o=!Rh.isOn(n);Rh.toggle(n),Ca(e,"expand-tree-node",{expanded:o,node:t.id})}))}))};return lv.sketch({dom:{tag:"div",classes:["tox-tree--directory__label","tox-trbtn"].concat(n?["tox-tree--directory__label--visible"]:[])},components:u,action:c,eventOrder:l({},Pi(),[h_,"keying"]),buttonBehaviours:ks([].concat(d(n?[Kk.config({})]:[]),[bh(h_,[Aa(Pi(),(function(e,t){var n="ArrowRight"===t.event.raw.code,i="ArrowLeft"===t.event.raw.code;n&&o&&t.stop(),(n||i)&&sc(e.element,".tox-tree--directory").each((function(o){e.getSystem().getByDom(o).each((function(o){!Rh.isOn(o)&&n||Rh.isOn(o)&&i?(c(e),t.stop()):i&&!Rh.isOn(o)&&(sc(o.element,".tox-tree--directory").each((function(e){lc(e,".tox-tree--directory__label").each((function(e){o.getSystem().getByDom(e).each(Sh.focus)}))})),t.stop())}))}))}))])]))})},b_=function renderDirectoryChildren(e){var t=e.children,n=e.onLeafAction,o=e.visible,i=e.treeId,a=e.expandedIds,u=e.selectedId,c=e.backstage;return{dom:{tag:"div",classes:["tox-tree--directory__children"]},components:t.map((function(e){return"leaf"===e.type?g_({leaf:e,selectedId:u,onLeafAction:n,visible:o,treeId:i,backstage:c}):C_({directory:e,expandedIds:a,selectedId:u,onLeafAction:n,labelTabstopping:o,treeId:i,backstage:c})})),behaviours:ks([c_.config({dimension:{property:"height"},closedClass:"tox-tree--directory__children--closed",openClass:"tox-tree--directory__children--open",growingClass:"tox-tree--directory__children--growing",shrinkingClass:"tox-tree--directory__children--shrinking",expanded:o}),vh.config({})])}},y_=qa("directory-event-id"),C_=function renderDirectory(e){var t=e.directory,n=e.onLeafAction,o=e.labelTabstopping,i=e.treeId,a=e.backstage,u=e.expandedIds,c=e.selectedId,l=t.children,m=si(u),g=u.includes(t.id);return{dom:{tag:"div",classes:["tox-tree--directory"],attributes:{role:"treeitem"}},components:[v_({directory:t,visible:o,noChildren:0===t.children.length,backstage:a}),b_({children:l,expandedIds:u,selectedId:c,onLeafAction:n,visible:g,treeId:i,backstage:a})],behaviours:ks([bh(y_,[Pa((function(e,t){Rh.set(e,g)})),Aa("expand-tree-node",(function(e,t){var n=t.event,o=n.expanded,i=n.node;m.set(o?[].concat(d(m.get()),[i]):m.get().filter((function(e){return e!==i})))}))]),Rh.config(s(s({},t.children.length>0?{aria:{mode:"expanded"}}:{}),{},{toggleClass:"tox-tree--directory--expanded",onToggled:function onToggled(e,t){var o=e.components()[1],u=function computedChildrenComponents(e){return l.map((function(t){return"leaf"===t.type?g_({leaf:t,selectedId:c,onLeafAction:n,visible:e,treeId:i,backstage:a}):renderDirectory({directory:t,expandedIds:m.get(),selectedId:c,onLeafAction:n,labelTabstopping:e,treeId:i,backstage:a})}))}(t);t?c_.grow(o):c_.shrink(o),vh.set(o,u)}}))])}},w_=qa("tree-event-id"),x_=Object.freeze({__proto__:null,events:function events$5(e,t){var n=e.stream.streams.setup(e,t);return Ta([Aa(e.event,n),La((function(){return t.cancel()}))].concat(e.cancelEvent.map((function(e){return[Aa(e,(function(){return t.cancel()}))]})).getOr([])))}}),S_=function throttle(e){var t=si(null);return mu({readState:function readState(){return{timer:null!==t.get()?"set":"unset"}},setTimer:function setTimer(e){t.set(e)},cancel:function cancel(){var e=t.get();null!==e&&e.cancel()}})},k_=Object.freeze({__proto__:null,throttle:S_,init:function init$8(e){return e.stream.streams.state(e)}}),T_=[Lo("stream",Ro("mode",{throttle:[Po("delay"),ei("stopEvent",!0),Bc("streams",{setup:function setup$c(e,t){var n=e.stream,o=zO(e.onStream,n.delay);return t.setTimer(o),function(e,t){o.throttle(e,t),n.stopEvent&&t.stop()}},state:S_})]})),ei("event","input"),Wo("cancelEvent"),Nc("onStream")],E_=Es({fields:T_,name:"streaming",active:x_,state:k_}),O_=function setValueFromItem(e,t,n){var o=Rd.getValue(n);Rd.setValue(t,o),__(t)},A_=function setSelectionOn(e,t){var n=e.element,o=Fu(n),i=n.dom;"number"!==Gt(n,"type")&&t(i,o)},__=function setCursorAtEnd(e){A_(e,(function(e,t){return e.setSelectionRange(t.length,t.length)}))},D_=function attemptSelectOver(e,t,n){if(e.selectsOver){var o=Rd.getValue(t),i=e.getDisplayText(o),a=Rd.getValue(n);return 0===e.getDisplayText(a).indexOf(i)?K.some((function(){O_(0,t,n),function setSelectionToEnd(e,t){A_(e,(function(e,n){return e.setSelectionRange(t,n.length)}))}(t,i.length)})):K.none()}return K.none()},R_=z("alloy.typeahead.itemexecute"),N_=z([Wo("lazySink"),Po("fetch"),ei("minChars",5),ei("responseTime",1e3),Dc("onOpen"),ei("getHotspot",K.some),ei("getAnchorOverrides",z({})),ei("layouts",K.none()),ei("eventOrder",{}),ci("model",{},[ei("getDisplayText",(function(e){return void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.value})),ei("selectsOver",!0),ei("populateFromBrowse",!0)]),Dc("onSetValue"),Rc("onExecute"),Dc("onItemExecute"),ei("inputClasses",[]),ei("inputAttributes",{}),ei("inputStyles",{}),ei("matchWidth",!0),ei("useMinWidth",!1),ei("dismissOnBlur",!0),Ac(["openClass"]),Wo("initialData"),Nd("typeaheadBehaviours",[Sh,Rd,E_,ch,Rh,ZS]),Bo("lazyTypeaheadComp",(function(){return si(K.none)})),Bo("previewing",(function(){return si(!0)}))].concat(Xy()).concat(ck())),M_=z([sm({schema:[Oc()],name:"menu",overrides:function overrides(e){return{fakeFocus:!0,onHighlightItem:function onHighlightItem(t,n,o){e.previewing.get()?e.lazyTypeaheadComp.get().each((function(t){D_(e.model,t,o).fold((function(){e.model.selectsOver?(dg.dehighlight(n,o),e.previewing.set(!0)):e.previewing.set(!1)}),(function(t){t(),e.previewing.set(!1)}))})):e.lazyTypeaheadComp.get().each((function(t){e.model.populateFromBrowse&&O_(e.model,t,o),qt(o.element,"id").each((function(e){return Wt(t.element,"aria-activedescendant",e)}))}))},onExecute:function onExecute(t,n){return e.lazyTypeaheadComp.get().map((function(e){return Ca(e,R_(),{item:n}),!0}))},onHover:function onHover(t,n){e.previewing.set(!1),e.lazyTypeaheadComp.get().each((function(t){e.model.populateFromBrowse&&O_(e.model,t,n)}))}}}})]),B_=Lm({name:"Typeahead",configFields:N_(),partFields:M_(),factory:function make$3(e,t,n,o){var i=function navigateList(t,n,i){e.previewing.set(!1);var a=ZS.getCoupled(t,"sandbox");if(fd.isOpen(a))zm.getCurrent(a).each((function(e){dg.getHighlighted(e).fold((function(){i(e)}),(function(){ka(a,e.element,"keydown",n)}))}));else{ek(e,u(t),t,a,o,(function onOpenSync(e){zm.getCurrent(e).each(i)}),Ig.HighlightMenuAndItem).get(F)}},a=Jy(e),u=function mapFetch(e){return function(t){return t.map((function(t){var n=Le(t.menus),o=pe(n,(function(e){return se(e.items,(function(e){return"item"===e.type}))}));return Rd.getState(e).update(ae(o,(function(e){return e.data}))),t}))}},c=function getActiveMenu(e){return zm.getCurrent(e)},d="typeaheadevents",m=[Sh.config({}),Rd.config({onSetValue:e.onSetValue,store:s({mode:"dataset",getDataKey:function getDataKey(e){return Fu(e.element)},getFallbackEntry:function getFallbackEntry(e){return{value:e,meta:{}}},setValue:function setValue(t,n){Hu(t.element,e.model.getDisplayText(n))}},e.initialData.map((function(e){return mi("initialValue",e)})).getOr({}))}),E_.config({stream:{mode:"throttle",delay:e.responseTime,stopEvent:!1},onStream:function onStream(t,n){var i=ZS.getCoupled(t,"sandbox");if(Sh.isFocused(t)&&Fu(t.element).length>=e.minChars){var a=c(i).bind((function(e){return dg.getHighlighted(e).map(Rd.getValue)}));e.previewing.set(!0);ek(e,u(t),t,i,o,(function onOpenSync(t){c(i).each((function(t){a.fold((function(){e.model.selectsOver&&dg.highlightFirst(t)}),(function(e){dg.highlightBy(t,(function(t){return Rd.getValue(t).value===e.value})),dg.getHighlighted(t).orThunk((function(){return dg.highlightFirst(t),K.none()}))}))}))}),Ig.HighlightJustMenu).get(F)}},cancelEvent:na()}),ch.config({mode:"special",onDown:function onDown(e,t){return i(e,t,dg.highlightFirst),K.some(!0)},onEscape:function onEscape(e){var t=ZS.getCoupled(e,"sandbox");return fd.isOpen(t)?(fd.close(t),K.some(!0)):K.none()},onUp:function onUp(e,t){return i(e,t,dg.highlightLast),K.some(!0)},onEnter:function onEnter(t){var n=ZS.getCoupled(t,"sandbox"),o=fd.isOpen(n);if(o&&!e.previewing.get())return c(n).bind((function(e){return dg.getHighlighted(e)})).map((function(e){return Ca(t,R_(),{item:e}),!0}));var i=Rd.getValue(t);return ya(t,na()),e.onExecute(n,t,i),o&&fd.close(n),K.some(!0)}}),Rh.config({toggleClass:e.markers.openClass,aria:{mode:"expanded"}}),ZS.config({others:{sandbox:function sandbox(t){return ak(e,t,{onOpen:function onOpen(){return Rh.on(t)},onClose:function onClose(){e.lazyTypeaheadComp.get().each((function(e){return Yt(e.element,"aria-activedescendant")})),Rh.off(t)}})}}}),bh(d,[Pa((function(t){e.lazyTypeaheadComp.set(K.some(t))})),La((function(t){e.lazyTypeaheadComp.set(K.none())})),Ha((function(t){var n=F;nk(e,u(t),t,o,n,Ig.HighlightMenuAndItem).get(F)})),Aa(R_(),(function(t,n){var o=ZS.getCoupled(t,"sandbox");O_(e.model,t,n.event.item),ya(t,na()),e.onItemExecute(t,o,n.event.item,Rd.getValue(t)),fd.close(o),__(t)}))].concat(e.dismissOnBlur?[Aa(qi(),(function(e){var t=ZS.getCoupled(e,"sandbox");Ps(t.element).isNone()&&fd.close(t)}))]:[]))],g=s(l({},sa(),[Rd.name(),E_.name(),d]),e.eventOrder);return{uid:e.uid,dom:eC(Zr(e,{inputAttributes:{role:"combobox","aria-autocomplete":"list","aria-haspopup":"true"}})),behaviours:s(s({},a),Bd(e.typeaheadBehaviours,m)),eventOrder:g}}}),I_=function wrap(e){return s(s({},e),{},{toCached:function toCached(){return wrap(e.toCached())},bindFuture:function bindFuture(t){return wrap(e.bind((function(e){return e.fold((function(e){return YS(Or.error(e))}),(function(e){return t(e)}))})))},bindResult:function bindResult(t){return wrap(e.map((function(e){return e.bind(t)})))},mapResult:function mapResult(t){return wrap(e.map((function(e){return e.map(t)})))},mapError:function mapError(t){return wrap(e.map((function(e){return e.mapError(t)})))},foldResult:function foldResult(t,n){return e.map((function(e){return e.fold(t,n)}))},withTimeout:function withTimeout(t,n){return wrap(KS((function(o){var i=!1,a=setTimeout((function(){i=!0,o(Or.error(n()))}),t);e.get((function(e){i||(clearTimeout(a),o(e))}))})))}})},P_=function nu$1(e){return I_(KS(e))},L_=P_,F_=function renderCommonSpec(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3?arguments[3]:void 0,i=arguments.length>4?arguments[4]:void 0,a=arguments.length>5?arguments[5]:void 0,u=t.fold((function(){return{}}),(function(e){return{action:e}})),c=s({buttonBehaviours:ks([Uw((function(){return!e.enabled||a.isDisabled()})),zw(),Kk.config({}),bh("button press",[Oa("click"),Oa("mousedown")])].concat(n)),eventOrder:{click:["button press","alloy.base.behaviour"],mousedown:["button press","alloy.base.behaviour"]}},u),l=Zr(c,{dom:o});return Zr(l,{components:i})},H_=function renderIconButtonSpec(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i={tag:"button",classes:["tox-tbtn"],attributes:e.tooltip.map((function(e){return{"aria-label":n.translate(e),title:n.translate(e)}})).getOr({})},a=e.icon.map((function(e){return yA(e,n.icons)})),u=Xw([a]);return F_(e,t,o,i,u,n)},$_=function calculateClassesFromButtonType(e){switch(e){case"primary":return["tox-button"];case"toolbar":return["tox-tbtn"];default:return["tox-button","tox-button--secondary"]}},z_=function renderButtonSpec(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=n.translate(e.text),u=e.icon.map((function(e){return yA(e,n.icons)})),c=[u.getOrThunk((function(){return Ju(a)}))],s=e.buttonType.getOr(e.primary||e.borderless?"primary":"secondary"),l=$_(s),m=[].concat(d(l),d(u.isSome()?["tox-button--icon"]:[]),d(e.borderless?["tox-button--naked"]:[]),d(i));return F_(e,t,o,{tag:"button",classes:m,attributes:{title:a}},c,n)},V_=function renderButton$1(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],a=z_(e,K.some(t),n,o,i);return lv.sketch(a)},U_=function getAction(e,t){return function(n){"custom"===t?Ca(n,iT,{name:e,value:{}}):"submit"===t?ya(n,aT):"cancel"===t?ya(n,oT):console.error("Unknown button type: ",t)}},Z_=function renderFooterButton(e,t,n){if(function isMenuFooterButtonSpec(e,t){return"menu"===t}(0,t)){var o=e,i=s(s({},e),{},{type:"menubutton",search:K.none(),onSetup:function onSetup(t){return t.setEnabled(e.enabled),F},fetch:f_(o.items,(function getButton(){return a}),n)}),a=dv(l_(i,"tox-tbtn",n,K.none()));return a.asSpec()}if(function isNormalFooterButtonSpec(e,t){return"custom"===t||"cancel"===t||"submit"===t}(0,t)){var u=U_(e.name,t),c=s(s({},e),{},{borderless:!1});return V_(c,u,n.shared.providers,[])}if(function isToggleButtonSpec(e,t){return"togglebutton"===t}(0,t))return function renderToggleButton(e,t){var n,o,i=e.icon.map((function(e){return CA(e,t.icons)})).map(dv),a=e.buttonType.getOr(e.primary?"primary":"secondary"),u=s(s({},e),{},{name:null!==(n=e.name)&&void 0!==n?n:"",primary:"primary"===a,tooltip:K.from(e.tooltip),enabled:null!==(o=e.enabled)&&void 0!==o&&o,borderless:!1}),c=u.tooltip.map((function(e){return{"aria-label":t.translate(e),title:t.translate(e)}})).getOr({}),l=$_(null!==a&&void 0!==a?a:"secondary"),m=e.icon.isSome()&&e.text.isSome(),g={tag:"button",classes:[].concat(d(l.concat(e.icon.isSome()?["tox-button--icon"]:[])),d(e.active?["tox-button--enabled"]:[]),d(m?["tox-button--icon-and-text"]:[])),attributes:c},p=t.translate(e.text.getOr("")),h=Ju(p),v=Xw([i.map((function(e){return e.asSpec()}))]),b=[].concat(d(v),d(e.text.isSome()?[h]:[])),y=F_(u,K.some((function action(n){Ca(n,iT,{name:e.name,value:{setIcon:function setIcon(e){i.map((function(o){return o.getOpt(n).each((function(n){vh.set(n,[CA(e,t.icons)])}))}))}}})})),[],g,b,t);return lv.sketch(y)}(e,n.shared.providers);throw console.error("Unknown footer button type: ",t),new Error("Unknown footer button type")},W_=function renderDialogButton(e,t){var n=U_(e.name,"custom");return function renderFormField(e,t){return Xk(e,t,[],[])}(K.none(),jk.parts.field(s({factory:lv},z_(e,K.some(n),t,[IO(""),OO()]))))},j_={type:"separator"},G_=function toMenuItem(e){return{type:"menuitem",value:e.url,text:e.title,meta:{attach:e.attach},onAction:F}},q_=function staticMenuItem(e,t){return{type:"menuitem",value:t,text:e,meta:{attach:void 0},onAction:F}},K_=function filteredTargets(e,t){return function toMenuItems(e){return ae(e,G_)}(function filterLinkTargets(e,t){return se(t,(function(t){return t.type===e}))}(e,t))},Y_=function headerTargets(e){return K_("header",e.targets)},X_=function anchorTargets(e){return K_("anchor",e.targets)},J_=function anchorTargetTop(e){return K.from(e.anchorTop).map((function(e){return q_("<top>",e)})).toArray()},Q_=function anchorTargetBottom(e){return K.from(e.anchorBottom).map((function(e){return q_("<bottom>",e)})).toArray()},eD=function filterByQuery(e,t){var n=e.toLowerCase();return se(t,(function(e){var t,o=void 0!==e.meta&&void 0!==e.meta.text?e.meta.text:e.text,i=null!==(t=e.value)&&void 0!==t?t:"";return qe(o.toLowerCase(),n)||qe(i.toLowerCase(),n)}))},tD=function getItems(e,t,n){var o,i,a=Rd.getValue(t),u=null!==(i=null===(o=null===a||void 0===a?void 0:a.meta)||void 0===o?void 0:o.text)&&void 0!==i?i:a.value;return n.getLinkInformation().fold((function(){return[]}),(function(t){var o=eD(u,function historyTargets(e){return ae(e,(function(e){return q_(e,e)}))}(n.getHistory(e)));return"file"===e?function joinMenuLists(e){return fe(e,(function(e,t){return 0===e.length||0===t.length?e.concat(t):e.concat(j_,t)}),[])}([o,eD(u,Y_(t)),eD(u,ge([J_(t),X_(t),Q_(t)]))]):o}))},nD=qa("aria-invalid"),rD=function set$1(e,t){e.dom.checked=t},oD=function get$1(e){return e.dom.checked},iD=function make$2(e){return function(t,n,o,i){return Fe(n,"name").fold((function(){return e(n,i,K.none())}),(function(a){return t.field(a,e(n,i,Fe(o,a)))}))}},aD={bar:iD((function(e,t){return function renderBar(e,t){return{dom:{tag:"div",classes:["tox-bar","tox-form__controls-h-stack"]},components:ae(e.items,t.interpreter)}}(e,t.shared)})),collection:iD((function(e,t,n){return fT(e,t.shared.providers,n)})),alertbanner:iD((function(e,t){return function renderAlertBanner(e,t){var n=mb(e.icon,t.icons);return Vk.sketch({dom:{tag:"div",attributes:{role:"alert"},classes:["tox-notification","tox-notification--in","tox-notification--".concat(e.level)]},components:[{dom:{tag:"div",classes:["tox-notification__icon"],innerHtml:e.url?void 0:n},components:e.url?[lv.sketch({dom:{tag:"button",classes:["tox-button","tox-button--naked","tox-button--icon"],innerHtml:n,attributes:{title:t.translate(e.iconTooltip)}},action:function action(t){return Ca(t,iT,{name:"alert-banner",value:e.url})},buttonBehaviours:ks([gb()])})]:void 0},{dom:{tag:"div",classes:["tox-notification__body"],innerHtml:t.translate(e.text)}}]})}(e,t.shared.providers)})),input:iD((function(e,t,n){return function renderInput(e,t,n){return WA({name:e.name,multiline:!1,label:e.label,inputMode:e.inputMode,placeholder:e.placeholder,flex:!1,disabled:!e.enabled,classname:"tox-textfield",validation:K.none(),maximized:e.maximized,data:n},t)}(e,t.shared.providers,n)})),textarea:iD((function(e,t,n){return function renderTextarea(e,t,n){return WA({name:e.name,multiline:!0,label:e.label,inputMode:K.none(),placeholder:e.placeholder,flex:!0,disabled:!e.enabled,classname:"tox-textarea",validation:K.none(),maximized:e.maximized,data:n},t)}(e,t.shared.providers,n)})),label:iD((function(e,t){return function renderLabel$2(e,t){var n="tox-label",o="center"===e.align?["".concat(n,"--center")]:[],i="end"===e.align?["".concat(n,"--end")]:[],a={dom:{tag:"label",classes:[n].concat(o,i)},components:[Ju(t.providers.translate(e.label))]},u=ae(e.items,t.interpreter);return{dom:{tag:"div",classes:["tox-form__group"]},components:[a].concat(d(u)),behaviours:ks([OO(),vh.config({}),BO(K.none()),ch.config({mode:"acyclic"})])}}(e,t.shared)})),iframe:function makeIframe(e){return function(t,n,o,i){var a=Zr(n,{source:"dynamic"});return iD(e)(t,a,o,i)}}((function(e,t,n){return fA(e,t.shared.providers,n)})),button:iD((function(e,t){return W_(e,t.shared.providers)})),checkbox:iD((function(e,t,n){return function renderCheckbox(e,t,n){var o=function toggleCheckboxHandler(e){return e.element.dom.click(),K.some(!0)},i=jk.parts.field({factory:{sketch:V},dom:{tag:"input",classes:["tox-checkbox__input"],attributes:{type:"checkbox"}},behaviours:ks([OO(),tg.config({disabled:function disabled(){return!e.enabled||t.isDisabled()},onDisabled:function onDisabled(e){Tt(e.element).each((function(e){return Du(e,"tox-checkbox--disabled")}))},onEnabled:function onEnabled(e){Tt(e.element).each((function(e){return Nu(e,"tox-checkbox--disabled")}))}}),Kk.config({}),Sh.config({}),MO(n,oD,rD),ch.config({mode:"special",onEnter:o,onSpace:o,stopSpaceKeyup:!0}),bh("checkbox-events",[Aa(Hi(),(function(t,n){Ca(t,nT,{name:e.name})}))])])}),a=jk.parts.label({dom:{tag:"span",classes:["tox-checkbox__label"]},components:[Ju(t.translate(e.label))],behaviours:ks([ST.config({})])}),u=function makeIcon(e){return hb("checked"===e?"selected":"unselected",{tag:"span",classes:["tox-icon","tox-checkbox-icon__"+e]},t.icons)},c=dv({dom:{tag:"div",classes:["tox-checkbox__icons"]},components:[u("checked"),u("unchecked")]});return jk.sketch({dom:{tag:"label",classes:["tox-checkbox"]},components:[i,c.asSpec(),a],fieldBehaviours:ks([tg.config({disabled:function disabled(){return!e.enabled||t.isDisabled()}}),zw()])})}(e,t.shared.providers,n)})),colorinput:iD((function(e,t,n){return OT(e,t.shared,t.colorinput,n)})),colorpicker:iD((function(e,t,n){return LO(0,t.shared.providers,n)})),dropzone:iD((function(e,t,n){return $O(e,t.shared.providers,n)})),grid:iD((function(e,t){return function renderGrid(e,t){return{dom:{tag:"div",classes:["tox-form__grid","tox-form__grid--".concat(e.columns,"col")]},components:ae(e.items,t.interpreter)}}(e,t.shared)})),listbox:iD((function(e,t,n){return IA(e,t,n)})),selectbox:iD((function(e,t,n){return function renderSelectBox(e,t,n){var o=ae(e.items,(function(e){return{text:t.translate(e.text),value:e.value}})),i=e.label.map((function(e){return tT(e,t)})),a=jk.parts.field(s(s({dom:{}},n.map((function(e){return{data:e}})).getOr({})),{},{selectAttributes:{size:e.size},options:o,factory:PA,selectBehaviours:ks([tg.config({disabled:function disabled(){return!e.enabled||t.isDisabled()}}),Kk.config({}),bh("selectbox-change",[Aa(Hi(),(function(t,n){Ca(t,nT,{name:e.name})}))])])})),u=e.size>1?K.none():K.some(hb("chevron-down",{tag:"div",classes:["tox-selectfield__icon-js"]},t.icons)),c={dom:{tag:"div",classes:["tox-selectfield"]},components:ge([[a],u.toArray()])};return jk.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:ge([i.toArray(),[c]]),fieldBehaviours:ks([tg.config({disabled:function disabled(){return!e.enabled||t.isDisabled()},onDisabled:function onDisabled(e){jk.getField(e).each(tg.disable)},onEnabled:function onEnabled(e){jk.getField(e).each(tg.enable)}}),zw()])})}(e,t.shared.providers,n)})),sizeinput:iD((function(e,t){return function renderSizeInput(e,t){var n=UA,o=qa("ratio-event"),i=function makeIcon(e){return hb(e,{tag:"span",classes:["tox-icon","tox-lock-icon__"+e]},t.icons)},a=$A.parts.lock({dom:{tag:"button",classes:["tox-lock","tox-button","tox-button--naked","tox-button--icon"],attributes:{title:t.translate(e.label.getOr("Constrain proportions"))}},components:[i("lock"),i("unlock")],buttonBehaviours:ks([tg.config({disabled:function disabled(){return!e.enabled||t.isDisabled()}}),zw(),Kk.config({})])}),u=function formGroup(e){return{dom:{tag:"div",classes:["tox-form__group"]},components:e}},c=function getFieldPart(n){return jk.parts.field({factory:tC,inputClasses:["tox-textfield"],inputBehaviours:ks([tg.config({disabled:function disabled(){return!e.enabled||t.isDisabled()}}),zw(),Kk.config({}),bh("size-input-events",[Aa(Bi(),(function(e,t){Ca(e,o,{isField1:n})})),Aa(Hi(),(function(t,n){Ca(t,nT,{name:e.name})}))])]),selectOnFocus:!1})},s=function getLabel(e){return{dom:{tag:"label",classes:["tox-label"]},components:[Ju(t.translate(e))]}},l=$A.parts.field1(u([jk.parts.label(s("Width")),c(!0)])),d=$A.parts.field2(u([jk.parts.label(s("Height")),c(!1)]));return $A.sketch({dom:{tag:"div",classes:["tox-form__group"]},components:[{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:[l,d,u([s("\xa0"),a])]}],field1Name:"width",field2Name:"height",locked:!0,markers:{lockClass:"tox-locked"},onLockedChange:function onLockedChange(e,t,o){zA(Rd.getValue(e)).each((function(e){n(e).each((function(e){Rd.setValue(t,function formatSize(e){var t={"":0,px:0,pt:1,mm:1,pc:2,ex:2,em:2,ch:2,rem:2,cm:3,in:4,"%":4},n=e.value.toFixed(function maxDecimal(e){return e in t?t[e]:1}(e.unit));return-1!==n.indexOf(".")&&(n=n.replace(/\.?0*$/,"")),n+e.unit}(e))}))}))},coupledFieldBehaviours:ks([tg.config({disabled:function disabled(){return!e.enabled||t.isDisabled()},onDisabled:function onDisabled(e){$A.getField1(e).bind(jk.getField).each(tg.disable),$A.getField2(e).bind(jk.getField).each(tg.disable),$A.getLock(e).each(tg.disable)},onEnabled:function onEnabled(e){$A.getField1(e).bind(jk.getField).each(tg.enable),$A.getField2(e).bind(jk.getField).each(tg.enable),$A.getLock(e).each(tg.enable)}}),zw(),bh("size-input-events2",[Aa(o,(function(e,t){var o=t.event.isField1,i=o?$A.getField1(e):$A.getField2(e),a=o?$A.getField2(e):$A.getField1(e),u=i.map(Rd.getValue).getOr(""),c=a.map(Rd.getValue).getOr("");n=ZA(u,c)}))])])})}(e,t.shared.providers)})),slider:iD((function(e,t,n){return function renderSlider(e,t,n){var o=fO.parts.label({dom:{tag:"label",classes:["tox-label"]},components:[Ju(t.translate(e.label))]}),i=fO.parts.spectrum({dom:{tag:"div",classes:["tox-slider__rail"],attributes:{role:"presentation"}}}),a=fO.parts.thumb({dom:{tag:"div",classes:["tox-slider__handle"],attributes:{role:"presentation"}}});return fO.sketch({dom:{tag:"div",classes:["tox-slider"],attributes:{role:"presentation"}},model:{mode:"x",minX:e.min,maxX:e.max,getInitialValue:z(n.getOrThunk((function(){return(Math.abs(e.max)-Math.abs(e.min))/2})))},components:[o,i,a],sliderBehaviours:ks([OO(),Sh.config({})]),onChoose:function onChoose(t,n,o){Ca(t,nT,{name:e.name,value:o})}})}(e,t.shared.providers,n)})),urlinput:iD((function(e,t,n){return function renderUrlInput(e,t,n,o){var i=t.shared.providers,a=function updateHistory(t){var o=Rd.getValue(t);n.addToHistory(o.value,e.filetype)},u=s(s({},o.map((function(e){return{initialData:e}})).getOr({})),{},{dismissOnBlur:!0,inputClasses:["tox-textfield"],sandboxClasses:["tox-dialog__popups"],inputAttributes:{"aria-errormessage":nD,type:"url"},minChars:0,responseTime:0,fetch:function fetch(o){var i=tD(e.filetype,o,n),a=DA(i,Ny.BUBBLE_TO_SANDBOX,t,{isHorizontalMenu:!1,search:K.none()});return YS(a)},getHotspot:function getHotspot(e){return b.getOpt(e)},onSetValue:function onSetValue(e,t){e.hasConfigured(wT)&&wT.run(e).get(F)},typeaheadBehaviours:ks([].concat(d(n.getValidationHandler().map((function(t){return wT.config({getRoot:function getRoot(e){return Tt(e.element)},invalidClass:"tox-control-wrap--status-invalid",notify:{onInvalid:function onInvalid(e,t){g.getOpt(e).each((function(e){Wt(e.element,"title",i.translate(t))}))}},validator:{validate:function validate(n){var o=Rd.getValue(n);return L_((function(n){t({type:e.filetype,url:o.value},(function(e){if("invalid"===e.status){var t=Or.error(e.message);n(t)}else{var o=Or.value(e.message);n(o)}}))}))},validateOnLoad:!1}})})).toArray()),[tg.config({disabled:function disabled(){return!e.enabled||i.isDisabled()}}),Kk.config({}),bh("urlinput-events",[Aa(Fi(),(function(t){var n=Fu(t.element),o=n.trim();o!==n&&Hu(t.element,o),"file"===e.filetype&&Ca(t,nT,{name:e.name})})),Aa(Hi(),(function(t){Ca(t,nT,{name:e.name}),a(t)})),Aa(Ki(),(function(t){Ca(t,nT,{name:e.name}),a(t)}))])])),eventOrder:l({},Fi(),["streaming","urlinput-events","invalidating"]),model:{getDisplayText:function getDisplayText(e){return e.value},selectsOver:!1,populateFromBrowse:!1},markers:{openClass:"tox-textfield--popup-open"},lazySink:t.shared.getSink,parts:{menu:Yy(0,0,"normal")},onExecute:function onExecute(e,t,n){Ca(t,aT,{})},onItemExecute:function onItemExecute(t,n,o,i){a(t),Ca(t,nT,{name:e.name})}}),c=jk.parts.field(s(s({},u),{},{factory:B_})),m=e.label.map((function(e){return tT(e,i)})),g=dv(function makeIcon(e,t){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e;return hb(arguments.length>2&&void 0!==arguments[2]?arguments[2]:e,{tag:"div",classes:["tox-icon","tox-control-wrap__status-icon-"+e],attributes:s({title:i.translate(n),"aria-live":"polite"},t.fold((function(){return{}}),(function(e){return{id:e}})))},i.icons)}("invalid",K.some(nD),"warning")),p=dv({dom:{tag:"div",classes:["tox-control-wrap__status-icon-wrap"]},components:[g.asSpec()]}),h=n.getUrlPicker(e.filetype),v=qa("browser.url.event"),b=dv({dom:{tag:"div",classes:["tox-control-wrap"]},components:[c,p.asSpec()],behaviours:ks([tg.config({disabled:function disabled(){return!e.enabled||i.isDisabled()}})])}),y=dv(V_({name:e.name,icon:K.some("browse"),text:e.picker_text.or(e.label).getOr(""),enabled:e.enabled,primary:!1,buttonType:K.none(),borderless:!0},(function(e){return ya(e,v)}),i,[],["tox-browse-url"]));return jk.sketch({dom:Qk(),components:m.toArray().concat([function controlHWrapper(){return{dom:{tag:"div",classes:["tox-form__controls-h-stack"]},components:ge([[b.asSpec()],h.map((function(){return y.asSpec()})).toArray()])}}()]),fieldBehaviours:ks([tg.config({disabled:function disabled(){return!e.enabled||i.isDisabled()},onDisabled:function onDisabled(e){jk.getField(e).each(tg.disable),y.getOpt(e).each(tg.disable)},onEnabled:function onEnabled(e){jk.getField(e).each(tg.enable),y.getOpt(e).each(tg.enable)}}),zw(),bh("url-input-events",[Aa(v,(function openUrlPicker(t){zm.getCurrent(t).each((function(n){var o=Rd.getValue(n),i=s({fieldname:e.name},o);h.each((function(o){o(i).get((function(o){Rd.setValue(n,o),Ca(t,nT,{name:e.name})}))}))}))}))])])})}(e,t,t.urlinput,n)})),customeditor:iD((function renderCustomEditor(e){var t=nl(),n=dv({dom:{tag:e.tag}}),o=nl();return{dom:{tag:"div",classes:["tox-custom-editor"]},behaviours:ks([bh("custom-editor-events",[Pa((function(i){n.getOpt(i).each((function(n){(!function isOldCustomEditor(e){return He(e,"init")}(e)?FO.load(e.scriptId,e.scriptUrl).then((function(t){return t(n.element.dom,e.settings)})):e.init(n.element.dom)).then((function(e){o.on((function(t){e.setValue(t)})),o.clear(),t.set(e)}))}))}))]),NO(K.none(),(function(){return t.get().fold((function(){return o.get().getOr("")}),(function(e){return e.getValue()}))}),(function(e,n){t.get().fold((function(){return o.set(n)}),(function(e){return e.setValue(n)}))})),OO()]),components:[n.asSpec()]}})),htmlpanel:iD((function renderHtmlPanel(e){return"presentation"===e.presets?Vk.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html}}):Vk.sketch({dom:{tag:"div",classes:["tox-form__group"],innerHtml:e.html,attributes:{role:"document"}},containerBehaviours:ks([Kk.config({}),Sh.config({})])})})),imagepreview:iD((function(e,t,n){return dA(e,n)})),table:iD((function(e,t){return function renderTable(e,t){var n=function renderTh(e){return{dom:{tag:"th",innerHtml:t.translate(e)}}},o=function renderTd(e){return{dom:{tag:"td",innerHtml:t.translate(e)}}},i=function renderTr(e){return{dom:{tag:"tr"},components:ae(e,o)}};return{dom:{tag:"table",classes:["tox-dialog__table"]},components:[function renderHeader(e){return{dom:{tag:"thead"},components:[{dom:{tag:"tr"},components:ae(e,n)}]}}(e.header),function renderRows(e){return{dom:{tag:"tbody"},components:ae(e,i)}}(e.cells)],behaviours:ks([Kk.config({}),Sh.config({})])}}(e,t.shared.providers)})),tree:iD((function(e,t){return function renderTree(e,t){var n=e.onLeafAction.getOr(F),o=e.onToggleExpand.getOr(F),i=e.defaultExpandedIds,a=si(i),u=si(e.defaultSelectedId),c=qa("tree-id"),s=function children(o,i){return e.items.map((function(e){return"leaf"===e.type?g_({leaf:e,selectedId:o,onLeafAction:n,visible:!0,treeId:c,backstage:t}):C_({directory:e,selectedId:o,onLeafAction:n,expandedIds:i,labelTabstopping:!0,treeId:c,backstage:t})}))};return{dom:{tag:"div",classes:["tox-tree"],attributes:{role:"tree"}},components:s(u.get(),a.get()),behaviours:ks([ch.config({mode:"flow",selector:".tox-tree--leaf__label--visible, .tox-tree--directory__label--visible",cycles:!1}),bh(w_,[Aa("expand-tree-node",(function(e,t){var n=t.event,i=n.expanded,u=n.node;a.set(i?[].concat(d(a.get()),[u]):a.get().filter((function(e){return e!==u}))),o(a.get(),{expanded:i,node:u})}))]),Ds.config({channels:l({},"update-active-item-".concat(c),{onReceive:function onReceive(e,t){u.set(K.some(t.value)),vh.set(e,s(K.some(t.value),a.get()))}})}),vh.config({})])}}(e,t)})),panel:iD((function(e,t){return function renderPanel(e,t){return{dom:{tag:"div",classes:e.classes},components:ae(e.items,t.shared.interpreter)}}(e,t)}))},uD={field:function field(e,t){return t},record:z([])},cD=function interpretInForm(e,t,n,o){var i=Zr(o,{shared:{interpreter:function interpreter(t){return sD(e,t,n,i)}}});return sD(e,t,n,i)},sD=function interpretParts(e,t,n,o){return Fe(aD,t.type).fold((function(){return console.error('Unknown factory type "'.concat(t.type,'", defaulting to container: '),t),t}),(function(i){return i(e,t,n,o)}))},lD=function interpretWithoutForm(e,t,n){return sD(uD,e,t,n)},fD="layout-inset",dD=function westEdgeX(e){return e.x},mD=function middleX(e,t){return e.x+e.width/2-t.width/2},gD=function eastEdgeX(e,t){return e.x+e.width-t.width},pD=function northY(e){return e.y},hD=function southY(e,t){return e.y+e.height-t.height},vD=function centreY(e,t){return e.y+e.height/2-t.height/2},bD=function southwest(e,t,n){return Lc(gD(e,t),hD(e,t),n.insetSouthwest(),Vc(),"southwest",Kc(e,{right:0,bottom:3}),fD)},yD=function southeast(e,t,n){return Lc(dD(e),hD(e,t),n.insetSoutheast(),zc(),"southeast",Kc(e,{left:1,bottom:3}),fD)},CD=function northwest(e,t,n){return Lc(gD(e,t),pD(e),n.insetNorthwest(),$c(),"northwest",Kc(e,{right:0,top:2}),fD)},wD=function northeast(e,t,n){return Lc(dD(e),pD(e),n.insetNortheast(),Hc(),"northeast",Kc(e,{left:1,top:2}),fD)},xD=function north(e,t,n){return Lc(mD(e,t),pD(e),n.insetNorth(),Uc(),"north",Kc(e,{top:2}),fD)},SD=function south(e,t,n){return Lc(mD(e,t),hD(e,t),n.insetSouth(),Zc(),"south",Kc(e,{bottom:3}),fD)},kD=function east(e,t,n){return Lc(gD(e,t),vD(e,t),n.insetEast(),jc(),"east",Kc(e,{right:0}),fD)},TD=function west(e,t,n){return Lc(dD(e),vD(e,t),n.insetWest(),Wc(),"west",Kc(e,{left:1}),fD)},ED=function lookupPreserveLayout(e){switch(e){case"north":return xD;case"northeast":return wD;case"northwest":return CD;case"south":return SD;case"southeast":return yD;case"southwest":return bD;case"east":return kD;case"west":return TD}},OD=function preserve(e,t,n,o,i){return Xs(o).map(ED).getOr(xD)(e,t,n,o,i)},AD=function lookupFlippedLayout(e){switch(e){case"north":return SD;case"northeast":return yD;case"northwest":return bD;case"south":return xD;case"southeast":return wD;case"southwest":return CD;case"east":return TD;case"west":return kD}},_D=function flip(e,t,n,o,i){return Xs(o).map(AD).getOr(xD)(e,t,n,o,i)},DD={valignCentre:[],alignCentre:[],alignLeft:[],alignRight:[],right:[],left:[],bottom:[],top:[]},RD=function getInlineDialogAnchor(e,t,n){var o={maxHeightFunction:vl()};return function(){return n()?function editableAreaAnchor(){return{type:"node",root:Pt(It(e())),node:K.from(e()),bubble:wl(12,12,DD),layouts:{onRtl:function onRtl(){return[wD]},onLtr:function onLtr(){return[CD]}},overrides:o}}():function standardAnchor(){return{type:"hotspot",hotspot:t(),bubble:wl(-12,12,DD),layouts:{onRtl:function onRtl(){return[rs,os,ss]},onLtr:function onLtr(){return[os,rs,ss]}},overrides:o}}()}},ND=function getInlineBottomDialogAnchor(e,t,n,o){var i={maxHeightFunction:vl()};return function(){return o()?function editableAreaAnchor(){return{type:"node",root:Pt(It(t())),node:K.from(t()),bubble:wl(12,12,DD),layouts:{onRtl:function onRtl(){return[xD]},onLtr:function onLtr(){return[xD]}},overrides:i}}():function standardAnchor(){return e?{type:"node",root:Pt(It(t())),node:K.from(t()),bubble:wl(0,-gn(t()),DD),layouts:{onRtl:function onRtl(){return[cs]},onLtr:function onLtr(){return[cs]}},overrides:i}:{type:"hotspot",hotspot:n(),bubble:wl(0,0,DD),layouts:{onRtl:function onRtl(){return[cs]},onLtr:function onLtr(){return[cs]}},overrides:i}}()}},MD=function getBannerAnchor(e,t,n){return function(){return n()?function editableAreaAnchor(){return{type:"node",root:Pt(It(e())),node:K.from(e()),layouts:{onRtl:function onRtl(){return[xD]},onLtr:function onLtr(){return[xD]}}}}():function standardAnchor(){return{type:"hotspot",hotspot:t(),layouts:{onRtl:function onRtl(){return[ss]},onLtr:function onLtr(){return[ss]}}}}()}},BD=function getCursorAnchor(e,t){return function(){return{type:"selection",root:t(),getSelection:function getSelection(){var t=e.selection.getRng(),n=e.model.table.getSelectedCells();if(n.length>1){var o=n[0],i=n[n.length-1],a={firstCell:nt.fromDom(o),lastCell:nt.fromDom(i)};return K.some(a)}return K.some(Gl.range(nt.fromDom(t.startContainer),t.startOffset,nt.fromDom(t.endContainer),t.endOffset))}}}},ID=function getNodeAnchor$1(e){return function(t){return{type:"node",root:e(),node:t}}},PD=function getAnchors(e,t,n,o){var i=wy(e),a=function bodyElement(){return nt.fromDom(e.getBody())},u=function contentAreaElement(){return nt.fromDom(e.getContentAreaContainer())},c=function lazyUseEditableAreaAnchor(){return i||!o()};return{inlineDialog:RD(u,t,c),inlineBottomDialog:ND(e.inline,u,n,c),banner:MD(u,t,c),cursor:BD(e,a),node:ID(a)}},LD=function colorPicker(e){return function(t,n){xS(e)(t,n)}},FD=function hasCustomColors(e){return function(){return uS(e)}},HD=function getColors(e){return function(t){return rS(e,t)}},$D=function getColorCols(e){return function(t){return aS(e,t)}},zD=function isDraggableModal(e){return function(){return ey(e)}},VD=function isNestedFormat(e){return $e(e,"items")},UD=function isFormatReference(e){return $e(e,"format")},ZD=[{title:"Headings",items:[{title:"Heading 1",format:"h1"},{title:"Heading 2",format:"h2"},{title:"Heading 3",format:"h3"},{title:"Heading 4",format:"h4"},{title:"Heading 5",format:"h5"},{title:"Heading 6",format:"h6"}]},{title:"Inline",items:[{title:"Bold",format:"bold"},{title:"Italic",format:"italic"},{title:"Underline",format:"underline"},{title:"Strikethrough",format:"strikethrough"},{title:"Superscript",format:"superscript"},{title:"Subscript",format:"subscript"},{title:"Code",format:"code"}]},{title:"Blocks",items:[{title:"Paragraph",format:"p"},{title:"Blockquote",format:"blockquote"},{title:"Div",format:"div"},{title:"Pre",format:"pre"}]},{title:"Align",items:[{title:"Left",format:"alignleft"},{title:"Center",format:"aligncenter"},{title:"Right",format:"alignright"},{title:"Justify",format:"alignjustify"}]}],WD=function mapFormats(e){return fe(e,(function(e,t){if(function isNestedFormats(e){return He(e,"items")}(t)){var n=mapFormats(t.items);return{customFormats:e.customFormats.concat(n.customFormats),formats:e.formats.concat([{title:t.title,items:n.formats}])}}if(function isInlineFormat(e){return He(e,"inline")}(t)||function isBlockFormat(e){return He(e,"block")}(t)||function isSelectorFormat(e){return He(e,"selector")}(t)){var o=T(t.name)?t.name:t.title.toLowerCase(),i="custom-".concat(o);return{customFormats:e.customFormats.concat([{name:i,format:t}]),formats:e.formats.concat([{title:t.title,format:i,icon:t.icon}])}}return s(s({},e),{},{formats:e.formats.concat(t)})}),{customFormats:[],formats:[]})},jD=function getStyleFormats(e){return Mb(e).map((function(t){var n=function registerCustomFormats(e,t){var n=WD(t),o=function registerFormats(t){ue(t,(function(t){e.formatter.has(t.name)||e.formatter.register(t.name,t.format)}))};return e.formatter?o(n.customFormats):e.on("init",(function(){o(n.customFormats)})),n.formats}(e,t);return Bb(e)?ZD.concat(n):n})).getOr(ZD)},GD=function processBasic(e,t,n){return s(s({},e),{},{type:"formatter",isSelected:t(e.format),getStylePreview:n(e.format)})},qD=function register$a(e,t,n,o){var i=function enrichMenu(e){var t=a(e.items);return s(s({},e),{},{type:"submenu",getStyleItems:z(t)})},a=function doEnrich(t){return ae(t,(function(t){return VD(t)?i(t):UD(t)?function enrichSupported(e){return GD(e,n,o)}(t):function isSeparator$1(e){var t=Oe(e);return 1===t.length&&ne(t,"title")}(t)?s(s({},t),{},{type:"separator"}):function enrichCustom(t){var i=T(t.name)?t.name:qa(t.title),a="custom-".concat(i),u=s(s({},t),{},{type:"formatter",format:a,isSelected:n(a),getStylePreview:o(a)});return e.formatter.register(i,u),u}(t)}))};return a(t)},KD=HO.trim,YD=function hasContentEditableState(e){return function(t){if(function isElement(e){return B(e)&&1===e.nodeType}(t)){if(t.contentEditable===e)return!0;if(t.getAttribute("data-mce-contenteditable")===e)return!0}return!1}},XD=YD("true"),JD=YD("false"),QD=function create(e,t,n,o,i){return{type:e,title:t,url:n,level:o,attach:i}},eR=function getElementText(e){return e.innerText||e.textContent},tR=function isValidAnchor(e){return function isAnchor(e){return e&&"A"===e.nodeName&&void 0!==(e.id||e.name)}(e)&&rR(e)},nR=function isHeader(e){return e&&/^(H[1-6])$/.test(e.nodeName)},rR=function isEditable(e){return function isChildOfContentEditableTrue(e){for(var t=e;t=t.parentNode;){var n=t.contentEditable;if(n&&"inherit"!==n)return XD(t)}return!1}(e)&&!JD(e)},oR=function isValidHeader(e){return nR(e)&&rR(e)},iR=function headerTarget(e){var t,n=function getOrGenerateId(e){return e.id?e.id:qa("h")}(e);return QD("header",null!==(t=eR(e))&&void 0!==t?t:"","#"+n,function getLevel(e){return nR(e)?parseInt(e.nodeName.substr(1),10):0}(e),(function attach(){e.id=n}))},aR=function anchorTarget(e){var t=e.id||e.name,n=eR(e);return QD("anchor",n||"#"+t,"#"+t,0,F)},uR=function getTargetElements(e){var t=function select(e,t){return ae(rf(nt.fromDom(t),e),(function(e){return e.dom}))}("h1,h2,h3,h4,h5,h6,a:not([href])",e);return t},cR=function hasTitle(e){return KD(e.title).length>0},sR=function find(e){var t=uR(e);return se(function getHeaderTargets(e){return ae(se(e,oR),iR)}(t).concat(function getAnchorTargets(e){return ae(se(e,tR),aR)}(t)),cR)},lR="tinymce-url-history",fR=function isHttpUrl(e){return T(e)&&/^https?/.test(e)},dR=function isRecordOfUrlArray(e){return E(e)&&Pe(e,(function(e){return!function isArrayOfUrl(e){return A(e)&&e.length<=5&&he(e,fR)}(e)})).isNone()},mR=function getAllHistory(){var e,t=Zx.getItem(lR);if(null===t)return{};try{e=JSON.parse(t)}catch(n){if(n instanceof SyntaxError)return console.log("Local storage "+lR+" was not valid JSON",n),{};throw n}return dR(e)?e:(console.log("Local storage "+lR+" was not valid format",e),{})},gR=function getHistory(e){var t=mR();return Fe(t,e).getOr([])},pR=function addToHistory(e,t){if(fR(e)){var n=mR(),o=Fe(n,t).getOr([]),i=se(o,(function(t){return t!==e}));n[t]=[e].concat(i).slice(0,5),function setAllHistory(e){if(!dR(e))throw new Error("Bad format for history:\n"+JSON.stringify(e));Zx.setItem(lR,JSON.stringify(e))}(n)}},hR=function isTruthy(e){return!!e},vR=function makeMap(e){return De(HO.makeMap(e,/[, ]/),hR)},bR=function getPicker(e){return K.from(Gb(e))},yR=function getPickerSetting(e,t){var n=function getPickerTypes(e){var t=K.from(Yb(e)).filter(hR).map(vR);return bR(e).fold(G,(function(e){return t.fold(q,(function(e){return Oe(e).length>0&&e}))}))}(e);return R(n)?n?bR(e):K.none():n[t]?bR(e):K.none()},CR=function getTextSetting(e){return K.from(e).filter(T).getOrUndefined()},wR=function UrlInputBackstage(e){return{getHistory:gR,addToHistory:pR,getLinkInformation:function getLinkInformation(){return function getLinkInformation(e){return Xb(e)?K.some({targets:sR(e.getBody()),anchorTop:CR(Jb(e)),anchorBottom:CR(Qb(e))}):K.none()}(e)},getValidationHandler:function getValidationHandler(){return function getValidationHandler(e){return K.from(qb(e))}(e)},getUrlPicker:function getUrlPicker(t){return function getUrlPicker(e,t){return yR(e,t).map((function(n){return function(o){return KS((function(i){var a=s({filetype:t,fieldname:o.fieldname},K.from(o.meta).getOr({}));n.call(e,(function handler(e,t){if(!T(e))throw new Error("Expected value to be string");if(void 0!==t&&!E(t))throw new Error("Expected meta to be a object");i({value:e,meta:t})}),o.value,a)}))}}))}(e,t)}}},xR=function init$6(e,t,n,o){var i=si(!1),a=function HeaderBackstage(e){var t=si(yy(e)?"bottom":"top");return{isPositionedAtTop:function isPositionedAtTop(){return"top"===t.get()},getDockingMode:t.get,setDockingMode:t.set}}(t),u={icons:function icons(){return t.ui.registry.getAll().icons},menuItems:function menuItems(){return t.ui.registry.getAll().menuItems},translate:ub.translate,isDisabled:function isDisabled(){return t.mode.isReadOnly()||!t.ui.isEnabled()},getOption:t.options.get},c=wR(t),l=function init$7(e){var t=function isSelectedFor(t){return function(){return e.formatter.match(t)}},n=function getPreviewFor(t){return function(){var n=e.formatter.get(t);return void 0!==n?K.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):K.none()}},o=si([]),i=si([]),a=si(!1);return e.on("PreInit",(function(i){var a=jD(e),u=qD(e,a,t,n);o.set(u)})),e.on("addStyleModifications",(function(o){var u=qD(e,o.items,t,n);i.set(u),a.set(o.replace)})),{getData:function getData(){var e=a.get()?[]:o.get(),t=i.get();return e.concat(t)}}}(t),d=function ColorInputBackstage(e){return{colorPicker:LD(e),hasCustomColors:FD(e),getColors:HD(e),getColorCols:$D(e)}}(t),m=function DialogBackstage(e){return{isDraggableModal:zD(e)}}(t),g={shared:{providers:u,anchors:PD(t,n,o,a.isPositionedAtTop),header:a},urlinput:c,styles:l,colorinput:d,dialog:m,isContextMenuOpen:function isContextMenuOpen(){return i.get()},setContextMenuState:function setContextMenuState(e){return i.set(e)}},p=s(s({},g),{},{shared:s(s({},g.shared),{},{interpreter:function interpreter(e){return lD(e,{},p)},getSink:e.popup})}),h=s(s({},g),{},{shared:s(s({},g.shared),{},{interpreter:function interpreter(e){return lD(e,{},h)},getSink:e.dialog})});return{popup:p,dialog:h}},SR=Dm,kR=mm,TR=z([ei("shell",!1),Po("makeItem"),ei("setupItem",F),Id("listBehaviours",[vh])]),ER=lm({name:"items",overrides:function customListDetail(){return{behaviours:ks([vh.config({})])}}}),OR=z([ER]),AR=z("CustomList"),_R=Lm({name:AR(),configFields:TR(),partFields:OR(),factory:function factory$f(e,t,n,o){var i=e.shell?{behaviours:[vh.config({})],components:[]}:{behaviours:[],components:t},a=function getListContainer(t){return e.shell?K.some(t):xm(t,e,"items")};return{uid:e.uid,dom:e.dom,components:i.components,behaviours:Bd(e.listBehaviours,i.behaviours),apis:{setItems:function setItems(t,n){a(t).fold((function(){throw console.error("Custom List was defined to not be a shell, but no item container was specified in components"),new Error("Custom List was defined to not be a shell, but no item container was specified in components")}),(function(o){var i=vh.contents(o),a=n.length,u=a-i.length,c=u>0?oe(u,(function(){return e.makeItem()})):[],s=i.slice(a);ue(s,(function(e){return vh.remove(o,e)})),ue(c,(function(e){return vh.append(o,e)}));var l=vh.contents(o);ue(l,(function(o,i){e.setupItem(t,o,n[i],i)}))}))}}}},apis:{setItems:function setItems(e,t,n){e.setItems(t,n)}}}),DR=z([Po("dom"),ei("shell",!0),Nd("toolbarBehaviours",[vh])]),RR=z([lm({name:"groups",overrides:function enhanceGroups(){return{behaviours:ks([vh.config({})])}}})]),NR=Lm({name:"Toolbar",configFields:DR(),partFields:RR(),factory:function factory$e(e,t,n,o){var i=function getGroupContainer(t){return e.shell?K.some(t):xm(t,e,"groups")},a=e.shell?{behaviours:[vh.config({})],components:[]}:{behaviours:[],components:t};return{uid:e.uid,dom:e.dom,components:a.components,behaviours:Bd(e.toolbarBehaviours,a.behaviours),apis:{setGroups:function setGroups(e,t){i(e).fold((function(){throw console.error("Toolbar was defined to not be a shell, but no groups container was specified in components"),new Error("Toolbar was defined to not be a shell, but no groups container was specified in components")}),(function(e){vh.set(e,t)}))},refresh:F},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function setGroups(e,t,n){e.setGroups(t,n)}}}),MR=F,BR=G,IR=z([]),PR=Object.freeze({__proto__:null,setup:MR,isDocked:BR,getBehaviours:IR}),LR=function getOffsetParent(e){return(ze(an(e,"position"),"fixed")?K.none():Et(e)).orThunk((function(){var t=nt.fromTag("span");return kt(e).bind((function(e){ir(e,t);var n=Et(t);return cr(t),n}))}))},FR=function getOrigin(e){return LR(e).map(vn).getOrThunk((function(){return pn(0,0)}))},HR=function appear(e,t){var n=e.element;Du(n,t.transitionClass),Nu(n,t.fadeOutClass),Du(n,t.fadeInClass),t.onShow(e)},$R=function disappear(e,t){var n=e.element;Du(n,t.transitionClass),Nu(n,t.fadeInClass),Du(n,t.fadeOutClass),t.onHide(e)},zR=function isTopCompletelyVisible(e,t){return e.y>=t.y},VR=function isBottomCompletelyVisible(e,t){return e.bottom<=t.bottom},UR=function forceTopPosition(e,t,n){return{location:"top",leftX:t,topY:n.bounds.y-e.y}},ZR=function forceBottomPosition(e,t,n){return{location:"bottom",leftX:t,bottomY:e.bottom-n.bounds.bottom}},WR=function getDockedLeftPosition(e){return e.box.x-e.win.x},jR=function getPrior(e,t,n){return n.getInitialPos().map((function(n){var o=function getXYForRestoring(e,t){var n=t.optScrollEnv.fold(z(e.bounds.y),(function(t){return t.scrollElmTop+(e.bounds.y-t.currentScrollTop)}));return pn(e.bounds.x,n)}(n,t);return{box:yr(o.left,o.top,Cn(e),mn(e)),location:n.location}}))},GR=function storePrior(e,t,n,o,i){var a=function getXYForSaving(e,t){var n=t.optScrollEnv.fold(z(e.y),(function(t){return e.y+t.currentScrollTop-t.scrollElmTop}));return pn(e.x,n)}(t,n),u=yr(a.left,a.top,t.width,t.height);o.setInitialPos({style:un(e),position:nn(e,"position")||"static",bounds:u,location:i.location})},qR=function revertToOriginal(e,t,n){return n.getInitialPos().bind((function(o){var i;switch(n.clearInitialPos(),o.position){case"static":return K.some({morph:"static"});case"absolute":var a=LR(e).getOr(Vt()),u=Cr(a),c=null!==(i=a.dom.scrollTop)&&void 0!==i?i:0;return K.some({morph:"absolute",positionCss:Fs("absolute",Fe(o.style,"left").map((function(e){return t.x-u.x})),Fe(o.style,"top").map((function(e){return t.y-u.y+c})),Fe(o.style,"right").map((function(e){return u.right-t.right})),Fe(o.style,"bottom").map((function(e){return u.bottom-t.bottom})))});default:return K.none()}}))},KR=function tryMorphToOriginal(e,t,n){return jR(e,t,n).filter((function(e){var o=e.box;return function isVisibleForModes(e,t,n){return he(e,(function(e){switch(e){case"bottom":return VR(t,n.bounds);case"top":return zR(t,n.bounds)}}))}(n.getModes(),o,t)})).bind((function(t){var o=t.box;return qR(e,o,n)}))},YR=function tryDecisionToFixedMorph(e){switch(e.location){case"top":return K.some({morph:"fixed",positionCss:Fs("fixed",K.some(e.leftX),K.some(e.topY),K.none(),K.none())});case"bottom":return K.some({morph:"fixed",positionCss:Fs("fixed",K.some(e.leftX),K.none(),K.none(),K.some(e.bottomY))});default:return K.none()}},XR=function tryMorphToFixed(e,t,n){var o=Cr(e),i=Sr(),a=function tryDockingPosition(e,t,n){var o=t.win,i=t.box,a=WR(t);return Ee(e,(function(e){switch(e){case"bottom":return VR(i,n.bounds)?K.none():K.some(ZR(o,a,n));case"top":return zR(i,n.bounds)?K.none():K.some(UR(o,a,n));default:return K.none()}})).getOr({location:"no-dock"})}(n.getModes(),{win:i,box:o},t);return"top"===a.location||"bottom"===a.location?(GR(e,o,t,n,a),YR(a)):K.none()},JR=function tryMorph(e,t,n){var o=e.element;return ze(an(o,"position"),"fixed")?function tryMorphToOriginalOrUpdateFixed(e,t,n){return KR(e,t,n).orThunk((function(){return t.optScrollEnv.bind((function(o){return jR(e,t,n)})).bind((function(e){var n=e.box,o=e.location,i=Sr(),a=WR({win:i,box:n}),u="top"===o?UR(i,a,t):ZR(i,a,t);return YR(u)}))}))}(o,t,n):XR(o,t,n)},QR=function forceDockWith(e,t,n,o){var i=Cr(e),a=Sr(),u=o(a,WR({win:a,box:i}),t);return"bottom"===u.location||"top"===u.location?(function storePriorIfNone(e,t,n,o,i){o.getInitialPos().fold((function(){return GR(e,t,n,o,i)}),(function(){return F}))}(e,i,t,n,u),YR(u)):K.none()},eN=function morphToStatic(e,t,n){n.setDocked(!1),ue(["left","right","top","bottom","position"],(function(t){return sn(e.element,t)})),t.onUndocked(e)},tN=function morphToCoord(e,t,n,o){var i="fixed"===o.position;n.setDocked(i),Hs(e.element,o),(i?t.onDocked:t.onUndocked)(e)},nN=function updateVisibility(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];t.contextual.each((function(t){t.lazyContext(e).each((function(a){var u=function isPartiallyVisible(e,t){return e.y<t.bottom&&e.bottom>t.y}(a,o.bounds);u!==n.isVisible()&&(n.setVisible(u),i&&!u?(Iu(e.element,[t.fadeOutClass]),t.onHide(e)):(u?HR:$R)(e,t))}))}))},rN=function applyFixedMorph(e,t,n,o,i){nN(e,t,n,o,!0),tN(e,t,n,i.positionCss)},oN=function refreshInternal(e,t,n){var o=t.lazyViewport(e);nN(e,t,n,o),JR(e,o,n).each((function(i){!function applyMorph(e,t,n,o,i){switch(i.morph){case"static":return eN(e,t,n);case"absolute":return tN(e,t,n,i.positionCss);case"fixed":rN(e,t,n,o,i)}}(e,t,n,o,i)}))},iN=function resetInternal(e,t,n){var o=e.element;n.setDocked(!1);var i=t.lazyViewport(e);(function calculateMorphToOriginal(e,t,n){var o=e.element;return jR(o,t,n).bind((function(e){var t=e.box;return qR(o,t,n)}))})(e,i,n).each((function(o){switch(o.morph){case"static":eN(e,t,n);break;case"absolute":tN(e,t,n,o.positionCss)}})),n.setVisible(!0),t.contextual.each((function(t){Pu(o,[t.fadeInClass,t.fadeOutClass,t.transitionClass]),t.onShow(e)})),aN(e,t,n)},aN=function refresh$3(e,t,n){e.getSystem().isConnected()&&oN(e,t,n)},uN=function reset(e,t,n){n.isDocked()&&iN(e,t,n)},cN=function forceDockWithDecision(e){return function(t,n,o){var i=n.lazyViewport(t);QR(t.element,i,o,e).each((function(e){rN(t,n,o,i,e)}))}},sN=cN(UR),lN=cN(ZR),fN=Object.freeze({__proto__:null,refresh:aN,reset:uN,isDocked:function isDocked$1(e,t,n){return n.isDocked()},getModes:function getModes(e,t,n){return n.getModes()},setModes:function setModes(e,t,n,o){return n.setModes(o)},forceDockToTop:sN,forceDockToBottom:lN}),dN=Object.freeze({__proto__:null,events:function events$4(e,t){return Ta([Ia(Vi(),(function(n,o){e.contextual.each((function(e){Bu(n.element,e.transitionClass)&&(Pu(n.element,[e.transitionClass,e.fadeInClass]),(t.isVisible()?e.onShown:e.onHidden)(n));o.stop()}))})),Aa(aa(),(function(n,o){aN(n,e,t)})),Aa(ga(),(function(n,o){aN(n,e,t)})),Aa(ua(),(function(n,o){uN(n,e,t)}))])}}),mN=[Jo("contextual",[Ho("fadeInClass"),Ho("fadeOutClass"),Ho("transitionClass"),zo("lazyContext"),Dc("onShow"),Dc("onShown"),Dc("onHide"),Dc("onHidden")]),ai("lazyViewport",(function(){return{bounds:Sr(),optScrollEnv:K.none()}})),ui("modes",["top","bottom"],bo),Dc("onDocked"),Dc("onUndocked")],gN=Es({fields:mN,name:"docking",active:dN,apis:fN,state:Object.freeze({__proto__:null,init:function init$5(e){var t=si(!1),n=si(!0),o=nl(),i=si(e.modes);return mu({isDocked:t.get,setDocked:t.set,getInitialPos:o.get,setInitialPos:o.set,clearInitialPos:o.clear,isVisible:n.get,setVisible:n.set,getModes:i.get,setModes:i.set,readState:function readState(){return"docked:  ".concat(t.get(),", visible: ").concat(n.get(),", modes: ").concat(i.get().join(","))}})}})}),pN=z(qa("toolbar-height-change")),hN={fadeInClass:"tox-editor-dock-fadein",fadeOutClass:"tox-editor-dock-fadeout",transitionClass:"tox-editor-dock-transition"},vN="tox-tinymce--toolbar-sticky-on",bN="tox-tinymce--toolbar-sticky-off",yN=function isDockedMode(e,t){return ne(gN.getModes(e),t)},CN=function updateIframeContentFlow(e){var t=e.element;Tt(t).each((function(n){var o="padding-"+gN.getModes(e)[0];if(gN.isDocked(e)){var i=Cn(n);Qt(t,"width",i+"px"),Qt(n,o,function getOccupiedHeight(e){return gn(e)+(parseInt(nn(e,"margin-top"),10)||0)+(parseInt(nn(e,"margin-bottom"),10)||0)}(t)+"px")}else sn(t,"width"),sn(n,o)}))},wN=function updateSinkVisibility(e,t){t?(Nu(e,hN.fadeOutClass),Iu(e,[hN.transitionClass,hN.fadeInClass])):(Nu(e,hN.fadeInClass),Iu(e,[hN.fadeOutClass,hN.transitionClass]))},xN=function updateEditorClasses(e,t){var n=nt.fromDom(e.getContainer());t?(Du(n,vN),Nu(n,bN)):(Du(n,bN),Nu(n,vN))},SN=function getBehaviours(e,t){var n=nl(),o=t.getSink,i=function runOnSinkElement(e){o().each((function(t){return e(t.element)}))},a=function onDockingSwitch(t){e.inline||CN(t),xN(e,gN.isDocked(t)),t.getSystem().broadcastOn([md()],{}),o().each((function(e){return e.getSystem().broadcastOn([md()],{})}))},u=e.inline?[]:function getIframeBehaviours(){return[Ds.config({channels:l({},pN(),{onReceive:CN})})]}();return[Sh.config({}),gN.config({contextual:s({lazyContext:function lazyContext(t){var n=gn(t.element),o=e.inline?e.getContentAreaContainer():e.getContainer();return K.from(o).map((function(o){var i=Cr(nt.fromDom(o));return Ok(e,t.element).fold((function(){var e=i.height-n,o=i.y+(yN(t,"top")?0:n);return yr(i.x,o,i.width,e)}),(function(e){var o=xr(i,Ak(e)),a=yN(t,"top")?o.y:o.y+n;return yr(o.x,a,o.width,o.height-n)}))}))},onShow:function onShow(){i((function(e){return wN(e,!0)}))},onShown:function onShown(e){i((function(e){return Pu(e,[hN.transitionClass,hN.fadeInClass])})),n.get().each((function(t){!function restoreFocus(e,t){var n=Ct(t);Is(n).filter((function(e){return!bt(t,e)})).filter((function(t){return bt(t,nt.fromDom(n.dom.body))||yt(e,t)})).each((function(){return Ns(t)}))}(e.element,t),n.clear()}))},onHide:function onHide(e){(function findFocusedElem(e,t){return Ps(e).orThunk((function(){return t().toOptional().bind((function(e){return Ps(e.element)}))}))})(e.element,o).fold(n.clear,n.set),i((function(e){return wN(e,!1)}))},onHidden:function onHidden(){i((function(e){return Pu(e,[hN.transitionClass])}))}},hN),lazyViewport:function lazyViewport(t){return Ok(e,t.element).fold((function(){var n=Sr(),o=Zb(e),i=n.y+(yN(t,"top")?o:0),a=n.height-(yN(t,"bottom")?o:0);return{bounds:yr(n.x,i,n.width,a),optScrollEnv:K.none()}}),(function(e){return{bounds:Ak(e),optScrollEnv:K.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:vn(e.element).top})}}))},modes:[t.header.getDockingMode()],onDocked:a,onUndocked:a})].concat(d(u))},kN=Object.freeze({__proto__:null,setup:function setup$9(e,t,n){e.inline||(t.header.isPositionedAtTop()||e.on("ResizeEditor",(function(){n().each(gN.reset)})),e.on("ResizeWindow ResizeEditor",(function(){n().each(CN)})),e.on("SkinLoaded",(function(){n().each((function(e){gN.isDocked(e)?gN.reset(e):gN.refresh(e)}))})),e.on("FullscreenStateChanged",(function(){n().each(gN.reset)}))),e.on("AfterScrollIntoView",(function(e){n().each((function(t){gN.refresh(t);var n=t.element;tp(n)&&function scrollFromBehindHeader(e,t){var n=Ct(t),o=St(t).dom.innerHeight,i=sr(n),a=nt.fromDom(e.elm),u=wr(a),c=mn(a),s=u.y,l=s+c,d=vn(t),m=mn(t),g=d.top,p=g+m,h=Math.abs(g-i.top)<2,v=Math.abs(p-(i.top+o))<2;if(h&&s<p)lr(i.left,s-m,n);else if(v&&l>g){var b=s-o+c+m;lr(i.left,b,n)}}(e,n)}))})),e.on("PostRender",(function(){xN(e,!1)}))},isDocked:function isDocked(e){return e().map(gN.isDocked).getOr(!1)},getBehaviours:SN}),TN=co([yC,Lo("items",lo([mo([CC,Zo("items",bo)]),bo]))].concat(KC)),EN=[qo("text"),qo("tooltip"),qo("icon"),ti("search",!1,lo([yo,co([qo("placeholder")])],(function(e){return R(e)?e?K.some({placeholder:K.none()}):K.none():K.some(e)}))),zo("fetch"),ai("onSetup",(function(){return F}))],ON=co([yC].concat(EN)),AN=function createMenuButton(e){return Oo("menubutton",ON,e)},_N=co([yC,BC,MC,NC,LC,EC,DC,oi("presets","normal",["normal","color","listpreview"]),VC(1),AC,_C]),DN=Pm({factory:function factory$d(e,t){var n={focus:ch.focusIn,setMenus:function setMenus(e,n){var o=ae(n,(function(e){var n={type:"menubutton",text:e.text,fetch:function fetch(t){t(e.getItems())}},o=AN(n).mapError((function(e){return Do(e)})).getOrDie();return l_(o,"tox-mbtn",t.backstage,K.some("menuitem"))}));vh.set(e,o)}};return{uid:e.uid,dom:e.dom,components:[],behaviours:ks([vh.config({}),bh("menubar-events",[Pa((function(t){e.onSetup(t)})),Aa(Mi(),(function(e,t){fc(e.element,".tox-mbtn--active").each((function(n){dc(t.event.target,".tox-mbtn").each((function(t){bt(n,t)||e.getSystem().getByDom(n).each((function(n){e.getSystem().getByDom(t).each((function(e){fk.expand(e),fk.close(n),Sh.focus(e)}))}))}))}))})),Aa(da(),(function(e,t){t.event.prevFocus.bind((function(t){return e.getSystem().getByDom(t).toOptional()})).each((function(n){t.event.newFocus.bind((function(t){return e.getSystem().getByDom(t).toOptional()})).each((function(e){fk.isOpen(n)&&(fk.expand(e),fk.close(n))}))}))}))]),ch.config({mode:"flow",selector:".tox-mbtn",onEscape:function onEscape(t){return e.onEscape(t),K.some(!0)}}),Kk.config({})]),apis:n,domModification:{attributes:{role:"menubar"}}}},name:"silver.Menubar",configFields:[Po("dom"),Po("uid"),Po("onEscape"),Po("backstage"),ei("onSetup",F)],apis:{focus:function focus(e,t){e.focus(t)},setMenus:function setMenus(e,t,n){e.setMenus(t,n)}}}),RN="container",NN=[Nd("slotBehaviours",[])],MN=function getPartName(e){return"<alloy.field."+e+">"},BN=function make$1(e,t){var n=function getSlotNames(t){return Em(e)},o=function onSlot(t,n){return function(o,i){return xm(o,e,i).map((function(e){return t(e,i)})).getOr(n)}},i=function doShowing(e,t){return"true"!==Gt(e.element,"aria-hidden")},a=o(i,!1),u=o((function doHide(e,t){if(i(e)){var n=e.element;Qt(n,"display","none"),Wt(n,"aria-hidden","true"),Ca(e,ma(),{name:t,visible:!1})}})),c=function onSlots(e){return function(t,n){ue(n,(function(n){return e(t,n)}))}}(u),s=o((function doShow(e,t){if(!i(e)){var n=e.element;sn(n,"display"),Yt(n,"aria-hidden"),Ca(e,ma(),{name:t,visible:!0})}})),l={getSlotNames:n,getSlot:function getSlot(t,n){return xm(t,e,n)},isShowing:a,hideSlot:u,hideAllSlots:function hideAllSlots(e){return c(e,n())},showSlot:s};return{uid:e.uid,dom:e.dom,components:t,behaviours:Md(e.slotBehaviours),apis:l}},IN=De({getSlotNames:function getSlotNames(e,t){return e.getSlotNames(t)},getSlot:function getSlot(e,t,n){return e.getSlot(t,n)},isShowing:function isShowing(e,t,n){return e.isShowing(t,n)},hideSlot:function hideSlot(e,t,n){return e.hideSlot(t,n)},hideAllSlots:function hideAllSlots(e,t){return e.hideAllSlots(t)},showSlot:function showSlot(e,t,n){return e.showSlot(t,n)}},(function(e){return fu(e)})),PN=s(s({},IN),{sketch:function sketch(e){var t=function(){var e=[];return{slot:function slot(t,n){return e.push(t),vm(RN,MN(t),n)},record:z(e)}}(),n=e(t),o=t.record(),i=ae(o,(function(e){return cm({name:e,pname:MN(e)})}));return Nm(RN,NN,i,BN,n)}}),LN=co([MC,BC,ai("onShow",F),ai("onHide",F),DC]),FN=function getApi(e){return{element:function element(){return e.element.dom}}},HN=function makePanels(e,t){var n=ae(Oe(t),(function(e){var n=t[e],o=Ao(function createSidebar(e){return Oo("sidebar",LN,e)}(n));return{name:e,getApi:FN,onSetup:o.onSetup,onShow:o.onShow,onHide:o.onHide}}));return ae(n,(function(t){var o=si(F);return e.slot(t.name,{dom:{tag:"div",classes:["tox-sidebar__pane"]},behaviours:Ow([Gw(t,o),qw(t,o),Aa(ma(),(function(e,t){var o=t.event,i=de(n,(function(e){return e.name===o.name}));i.each((function(t){(o.visible?t.onShow:t.onHide)(t.getApi(e))}))}))])})}))},$N=function makeSidebar(e){return PN.sketch((function(t){return{dom:{tag:"div",classes:["tox-sidebar__pane-container"]},components:HN(t,e),slotBehaviours:Ow([Pa((function(e){return PN.hideAllSlots(e)}))])}}))},zN=function updateSidebarRoleOnToggle(e,t){Wt(e,"role",t)},VN=function whichSidebar(e){return zm.getCurrent(e).bind((function(e){return c_.isGrowing(e)||c_.hasGrown(e)?zm.getCurrent(e).bind((function(e){return de(PN.getSlotNames(e),(function(t){return PN.isShowing(e,t)}))})):K.none()}))},UN=qa("FixSizeEvent"),ZN=qa("AutoSizeEvent"),WN=Object.freeze({__proto__:null,block:function block(e,t,n,o){Wt(e.element,"aria-busy",!0);var i=t.getRoot(e).getOr(e),a=ks([ch.config({mode:"special",onTab:function onTab(){return K.some(!0)},onShiftTab:function onShiftTab(){return K.some(!0)}}),Sh.config({})]),u=o(i,a),c=i.getSystem().build(u);vh.append(i,oc(c)),c.hasConfigured(ch)&&t.focus&&ch.focusIn(c),n.isBlocked()||t.onBlock(e),n.blockWith((function(){return vh.remove(i,c)}))},unblock:function unblock(e,t,n){Yt(e.element,"aria-busy"),n.isBlocked()&&t.onUnblock(e),n.clear()},isBlocked:function isBlocked(e,t,n){return n.isBlocked()}}),jN=[ai("getRoot",K.none),ii("focus",!0),Dc("onBlock"),Dc("onUnblock")],GN=Es({fields:jN,name:"blocking",apis:WN,state:Object.freeze({__proto__:null,init:function init$4(){var e=function destroyable(){return el((function(e){return e.destroy()}))}();return mu({readState:e.isSet,blockWith:function blockWith(t){e.set({destroy:t})},clear:e.clear,isBlocked:e.isSet})}})}),qN=function focusBusyComponent(e){return zm.getCurrent(e).each((function(e){return Ns(e.element,!0)}))},KN=function toggleThrobber(e,t,n,o){var i=t.element;if(function toggleEditorTabIndex(e,t){var n="tabindex",o="data-mce-".concat(n);K.from(e.iframeElement).map(nt.fromDom).each((function(e){t?(qt(e,n).each((function(t){return Wt(e,o,t)})),Wt(e,n,-1)):(Yt(e,n),qt(e,o).each((function(t){Wt(e,n,t),Yt(e,o)})))}))}(e,n),n)GN.block(t,function getBusySpec$1(e){return function(t,n){return{dom:{tag:"div",attributes:{"aria-label":e.translate("Loading..."),tabindex:"0"},classes:["tox-throbber__busy-spinner"]},components:[{dom:fv('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}}}(o)),sn(i,"display"),Yt(i,"aria-hidden"),e.hasFocus()&&qN(t);else{var a=zm.getCurrent(t).exists((function(e){return Bs(e.element)}));GN.unblock(t),Qt(i,"display","none"),Wt(i,"aria-hidden","true"),a&&e.focus()}},YN=function setup$7(e,t,n){var o=si(!1),i=nl(),a=function stealFocus(n){o.get()&&!function isPasteBinTarget(e){return!!function isFocusEvent(e){return"focusin"===e.type}(e)&&(e.composed?Se(e.composedPath()):K.from(e.target)).map(nt.fromDom).filter(ft).exists((function(e){return Bu(e,"mce-pastebin")}))}(n)&&(n.preventDefault(),qN(t()),e.editorManager.setActive(e))};e.inline||e.on("PreInit",(function(){e.dom.bind(e.getWin(),"focusin",a),e.on("BeforeExecCommand",(function(e){"mcefocus"===e.command.toLowerCase()&&!0!==e.value&&a(e)}))}));var u=function toggle(i){i!==o.get()&&(o.set(i),KN(e,t(),i,n.providers),function fireAfterProgressState(e,t){e.dispatch("AfterProgressState",{state:t})}(e,i))};e.on("ProgressState",(function(t){if(i.on(clearTimeout),P(t.time)){var n=sv.setEditorTimeout(e,(function(){return u(t.state)}),t.time);i.set(n)}else u(t.state),i.clear()}))},XN=function output(e,t,n){return{within:e,extra:t,withinWidth:n}},JN=function apportion(e,t,n){var o=function generate$1(e,t){var n=fe(e,(function(e,n){return t(n,e.len).fold(z(e),(function(t){return{len:t.finish,list:e.list.concat([t])}}))}),{len:0,list:[]});return n.list}(e,(function(e,t){var o=n(e);return K.some({element:e,start:t,finish:t+o,width:o})})),i=se(o,(function(e){return e.finish<=t})),a=le(i,(function(e,t){return e+t.width}),0);return{within:i,extra:o.slice(i.length),withinWidth:a}},QN=function toUnit(e){return ae(e,(function(e){return e.element}))},eM=function partition(e,t,n,o){var i=function tryFit(e,t,n){var o=JN(t,e,n);return 0===o.extra.length?K.some(o):K.none()}(e,t,n).getOrThunk((function(){return JN(t,e-n(o),n)})),a=i.within,u=i.extra,c=i.withinWidth;return 1===u.length&&u[0].width<=n(o)?function fitLast(e,t,n){var o=QN(e.concat(t));return XN(o,[],n)}(a,u,c):u.length>=1?function overflow(e,t,n,o){var i=QN(e).concat([n]);return XN(i,QN(t),o)}(a,u,o,c):function fitAll(e,t,n){return XN(QN(e),[],n)}(a,0,c)},tM=function setGroups$1(e,t){var n=ae(t,(function(e){return oc(e)}));NR.setGroups(e,n)},nM=function refresh$2(e,t,n){var o=t.builtGroups.get();if(0!==o.length){var i=Sm(e,t,"primary"),a=ZS.getCoupled(e,"overflowGroup");Qt(i.element,"visibility","hidden");var u=o.concat([a]),c=function findFocusedComp(e){return Ee(e,(function(e){return Ps(e.element).bind((function(t){return e.getSystem().getByDom(t).toOptional()}))}))}(u);n([]),tM(i,u);var s=Cn(i.element),l=eM(s,t.builtGroups.get(),(function(e){return Cn(e.element)}),a);0===l.extra.length?(vh.remove(i,a),n([])):(tM(i,l.within),n(l.extra)),sn(i.element,"visibility"),ln(i.element),c.each(Sh.focus)}},rM=z([Nd("splitToolbarBehaviours",[ZS]),Bo("builtGroups",(function(){return si([])}))]),oM=z([Ac(["overflowToggledClass"]),Yo("getOverflowBounds"),Po("lazySink"),Bo("overflowGroups",(function(){return si([])})),Dc("onOpened"),Dc("onClosed")].concat(rM())),iM=z([cm({factory:NR,schema:DR(),name:"primary"}),sm({schema:DR(),name:"overflow"}),sm({name:"overflow-button"}),sm({name:"overflow-group"})]),aM=z((function(e,t){!function setMax(e,t){var n=yn.max(e,t,["margin-left","border-left-width","padding-left","padding-right","border-right-width","margin-right"]);Qt(e,"max-width",n+"px")}(e,Math.floor(t))})),uM=z([Ac(["toggledClass"]),Po("lazySink"),zo("fetch"),Yo("getBounds"),Jo("fireDismissalEventInstead",[ei("event",la())]),Al(),Dc("onToggled")]),cM=z([sm({name:"button",overrides:function overrides(e){return{dom:{attributes:{"aria-haspopup":"true"}},buttonBehaviours:ks([Rh.config({toggleClass:e.markers.toggledClass,aria:{mode:"expanded"},toggleOnExecute:!1,onToggled:e.onToggled})])}}}),sm({factory:NR,schema:DR(),name:"toolbar",overrides:function overrides(e){return{toolbarBehaviours:ks([ch.config({mode:"cyclic",onEscape:function onEscape(t){return xm(t,e,"button").each(Sh.focus),K.none()}})])}}})]),sM=nl(),lM=function toggle(e,t){var n=ZS.getCoupled(e,"toolbarSandbox");fd.isOpen(n)?fd.close(n):fd.open(n,t.toolbar())},fM=function position(e,t,n,o){var i=n.getBounds.map((function(e){return e()})),a=n.lazySink(e).getOrDie();Ff.positionWithinBounds(a,t,{anchor:{type:"hotspot",hotspot:e,layouts:o,overrides:{maxWidthFunction:aM()}}},i)},dM=function setGroups(e,t,n,o,i){NR.setGroups(t,i),fM(e,t,n,o),Rh.on(e)},mM=Lm({name:"FloatingToolbarButton",factory:function factory$c(e,t,n,o){return s(s({},lv.sketch(s(s({},o.button()),{},{action:function action(e){lM(e,o)},buttonBehaviours:Pd({dump:o.button().buttonBehaviours},[ZS.config({others:{toolbarSandbox:function toolbarSandbox(t){return function makeSandbox(e,t,n){var o=gc();return{dom:{tag:"div",attributes:{id:o.id}},behaviours:ks([ch.config({mode:"special",onEscape:function onEscape(e){return fd.close(e),K.some(!0)}}),fd.config({onOpen:function onOpen(i,a){var u=sM.get().getOr(!1);n.fetch().get((function(i){dM(e,a,n,t.layouts,i),o.link(e.element),u||ch.focusIn(a)}))},onClose:function onClose(){Rh.off(e),sM.get().getOr(!1)||Sh.focus(e),o.unlink(e.element)},isPartOf:function isPartOf(t,n,o){return hc(n,o)||hc(e,o)},getAttachPoint:function getAttachPoint(){return n.lazySink(e).getOrDie()}}),Ds.config({channels:s(s({},hd(s({isExtraPart:G},n.fireDismissalEventInstead.map((function(e){return{fireEventInstead:{event:e.event}}})).getOr({})))),bd({doReposition:function doReposition(){fd.getState(ZS.getCoupled(e,"toolbarSandbox")).each((function(o){fM(e,o,n,t.layouts)}))}}))})])}}(t,n,e)}}})])}))),{},{apis:{setGroups:function setGroups(t,o){fd.getState(ZS.getCoupled(t,"toolbarSandbox")).each((function(i){dM(t,i,e,n.layouts,o)}))},reposition:function reposition(t){fd.getState(ZS.getCoupled(t,"toolbarSandbox")).each((function(o){fM(t,o,e,n.layouts)}))},toggle:function toggle(e){lM(e,o)},toggleWithoutFocusing:function toggleWithoutFocusing(e){!function toggleWithoutFocusing(e,t){sM.set(!0),lM(e,t),sM.clear()}(e,o)},getToolbar:function getToolbar(e){return fd.getState(ZS.getCoupled(e,"toolbarSandbox"))},isOpen:function isOpen(e){return fd.isOpen(ZS.getCoupled(e,"toolbarSandbox"))}}})},configFields:uM(),partFields:cM(),apis:{setGroups:function setGroups(e,t,n){e.setGroups(t,n)},reposition:function reposition(e,t){e.reposition(t)},toggle:function toggle(e,t){e.toggle(t)},toggleWithoutFocusing:function toggleWithoutFocusing(e,t){e.toggleWithoutFocusing(t)},getToolbar:function getToolbar(e,t){return e.getToolbar(t)},isOpen:function isOpen(e,t){return e.isOpen(t)}}}),gM=z([Po("items"),Ac(["itemSelector"]),Nd("tgroupBehaviours",[ch])]),pM=z([fm({name:"items",unit:"item"})]),hM=Lm({name:"ToolbarGroup",configFields:gM(),partFields:pM(),factory:function factory$b(e,t,n,o){return{uid:e.uid,dom:e.dom,components:t,behaviours:Bd(e.tgroupBehaviours,[ch.config({mode:"flow",selector:e.markers.itemSelector})]),domModification:{attributes:{role:"toolbar"}}}}}),vM=function buildGroups(e){return ae(e,(function(e){return oc(e)}))},bM=function refresh$1(e,t,n){nM(e,n,(function(o){n.overflowGroups.set(o),t.getOpt(e).each((function(e){mM.setGroups(e,vM(o))}))}))},yM=Lm({name:"SplitFloatingToolbar",configFields:oM(),partFields:iM(),factory:function factory$a(e,t,n,o){var i=dv(mM.sketch({fetch:function fetch(){return KS((function(t){t(vM(e.overflowGroups.get()))}))},layouts:{onLtr:function onLtr(){return[os,rs]},onRtl:function onRtl(){return[rs,os]},onBottomLtr:function onBottomLtr(){return[us,as]},onBottomRtl:function onBottomRtl(){return[as,us]}},getBounds:n.getOverflowBounds,lazySink:e.lazySink,fireDismissalEventInstead:{},markers:{toggledClass:e.markers.overflowToggledClass},parts:{button:o["overflow-button"](),toolbar:o.overflow()},onToggled:function onToggled(t,n){return e[n?"onOpened":"onClosed"](t)}}));return{uid:e.uid,dom:e.dom,components:t,behaviours:Bd(e.splitToolbarBehaviours,[ZS.config({others:{overflowGroup:function overflowGroup(){return hM.sketch(s(s({},o["overflow-group"]()),{},{items:[i.asSpec()]}))}}})]),apis:{setGroups:function setGroups(t,n){e.builtGroups.set(ae(n,t.getSystem().build)),bM(t,i,e)},refresh:function refresh(t){return bM(t,i,e)},toggle:function toggle(e){i.getOpt(e).each((function(e){mM.toggle(e)}))},toggleWithoutFocusing:function toggleWithoutFocusing(e){i.getOpt(e).each(mM.toggleWithoutFocusing)},isOpen:function isOpen(e){return i.getOpt(e).map(mM.isOpen).getOr(!1)},reposition:function reposition(e){i.getOpt(e).each((function(e){mM.reposition(e)}))},getOverflow:function getOverflow(e){return i.getOpt(e).bind(mM.getToolbar)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function setGroups(e,t,n){e.setGroups(t,n)},refresh:function refresh(e,t){e.refresh(t)},reposition:function reposition(e,t){e.reposition(t)},toggle:function toggle(e,t){e.toggle(t)},toggleWithoutFocusing:function toggleWithoutFocusing(e,t){e.toggle(t)},isOpen:function isOpen(e,t){return e.isOpen(t)},getOverflow:function getOverflow(e,t){return e.getOverflow(t)}}}),CM=z([Ac(["closedClass","openClass","shrinkingClass","growingClass","overflowToggledClass"]),Dc("onOpened"),Dc("onClosed")].concat(rM())),wM=z([cm({factory:NR,schema:DR(),name:"primary"}),cm({factory:NR,schema:DR(),name:"overflow",overrides:function overrides(e){return{toolbarBehaviours:ks([c_.config({dimension:{property:"height"},closedClass:e.markers.closedClass,openClass:e.markers.openClass,shrinkingClass:e.markers.shrinkingClass,growingClass:e.markers.growingClass,onShrunk:function onShrunk(t){xm(t,e,"overflow-button").each((function(e){Rh.off(e),Sh.focus(e)})),e.onClosed(t)},onGrown:function onGrown(t){ch.focusIn(t),e.onOpened(t)},onStartGrow:function onStartGrow(t){xm(t,e,"overflow-button").each(Rh.on)}}),ch.config({mode:"acyclic",onEscape:function onEscape(t){return xm(t,e,"overflow-button").each(Sh.focus),K.some(!0)}})])}}}),sm({name:"overflow-button",overrides:function overrides(e){return{buttonBehaviours:ks([Rh.config({toggleClass:e.markers.overflowToggledClass,aria:{mode:"pressed"},toggleOnExecute:!1})])}}}),sm({name:"overflow-group"})]),xM=function toggleToolbar(e,t){xm(e,t,"overflow-button").bind((function(){return xm(e,t,"overflow")})).each((function(n){SM(e,t),c_.toggleGrow(n)}))},SM=function refresh(e,t){xm(e,t,"overflow").each((function(n){nM(e,t,(function(e){var t=ae(e,(function(e){return oc(e)}));NR.setGroups(n,t)})),xm(e,t,"overflow-button").each((function(e){c_.hasGrown(n)&&Rh.on(e)})),c_.refresh(n)}))},kM=Lm({name:"SplitSlidingToolbar",configFields:CM(),partFields:wM(),factory:function factory$9(e,t,n,o){var i="alloy.toolbar.toggle";return{uid:e.uid,dom:e.dom,components:t,behaviours:Bd(e.splitToolbarBehaviours,[ZS.config({others:{overflowGroup:function overflowGroup(e){return hM.sketch(s(s({},o["overflow-group"]()),{},{items:[lv.sketch(s(s({},o["overflow-button"]()),{},{action:function action(t){ya(e,i)}}))]}))}}}),bh("toolbar-toggle-events",[Aa(i,(function(t){xM(t,e)}))])]),apis:{setGroups:function setGroups(t,n){!function doSetGroups(t,n){var o=ae(n,t.getSystem().build);e.builtGroups.set(o)}(t,n),SM(t,e)},refresh:function refresh(t){return SM(t,e)},toggle:function toggle(t){return xM(t,e)},isOpen:function isOpen(t){return function isOpen(e,t){return xm(e,t,"overflow").map(c_.hasGrown).getOr(!1)}(t,e)}},domModification:{attributes:{role:"group"}}}},apis:{setGroups:function setGroups(e,t,n){e.setGroups(t,n)},refresh:function refresh(e,t){e.refresh(t)},toggle:function toggle(e,t){e.toggle(t)},isOpen:function isOpen(e,t){return e.isOpen(t)}}}),TM=function renderToolbarGroupCommon(e){var t=e.title.fold((function(){return{}}),(function(e){return{attributes:{title:e}}}));return{dom:s({tag:"div",classes:["tox-toolbar__group"]},t),components:[hM.parts.items({})],items:e.items,markers:{itemSelector:"*:not(.tox-split-button) > .tox-tbtn:not([disabled]), .tox-split-button:not([disabled]), .tox-toolbar-nav-js:not([disabled]), .tox-number-input:not([disabled])"},tgroupBehaviours:ks([Kk.config({}),Sh.config({})])}},EM=function renderToolbarGroup(e){return hM.sketch(TM(e))},OM=function getToolbarBehaviours(e,t){var n=Pa((function(t){var n=ae(e.initGroups,EM);NR.setGroups(t,n)}));return ks([Ww(e.providers.isDisabled),zw(),ch.config({mode:t,onEscape:e.onEscape,selector:".tox-toolbar__group"}),bh("toolbar-events",[n])])},AM=function renderMoreToolbarCommon(e){var t=e.cyclicKeying?"cyclic":"acyclic";return{uid:e.uid,dom:{tag:"div",classes:["tox-toolbar-overlord"]},parts:{"overflow-group":TM({title:K.none(),items:[]}),"overflow-button":H_({name:"more",icon:K.some("more-drawer"),enabled:!0,tooltip:K.some("Reveal or hide additional toolbar items"),primary:!1,buttonType:K.none(),borderless:!1},K.none(),e.providers)},splitToolbarBehaviours:OM(e,t)}},_M=function renderFloatingMoreToolbar(e){var t=AM(e),n=yM.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}});return yM.sketch(s(s({},t),{},{lazySink:e.getSink,getOverflowBounds:function getOverflowBounds(){var t=e.moreDrawerData.lazyHeader().element,n=wr(t),o=xt(t),i=wr(o),a=Math.max(o.dom.scrollHeight,i.height);return yr(n.x+4,i.y,n.width-8,a)},parts:s(s({},t.parts),{},{overflow:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:e.attributes}}}),components:[n],markers:{overflowToggledClass:"tox-tbtn--enabled"},onOpened:function onOpened(t){return e.onToggled(t,!0)},onClosed:function onClosed(t){return e.onToggled(t,!1)}}))},DM=function renderSlidingMoreToolbar(e){var t=kM.parts.primary({dom:{tag:"div",classes:["tox-toolbar__primary"]}}),n=kM.parts.overflow({dom:{tag:"div",classes:["tox-toolbar__overflow"]}}),o=AM(e);return kM.sketch(s(s({},o),{},{components:[t,n],markers:{openClass:"tox-toolbar__overflow--open",closedClass:"tox-toolbar__overflow--closed",growingClass:"tox-toolbar__overflow--growing",shrinkingClass:"tox-toolbar__overflow--shrinking",overflowToggledClass:"tox-tbtn--enabled"},onOpened:function onOpened(t){t.getSystem().broadcastOn([pN()],{type:"opened"}),e.onToggled(t,!0)},onClosed:function onClosed(t){t.getSystem().broadcastOn([pN()],{type:"closed"}),e.onToggled(t,!1)}}))},RM=function renderToolbar(e){var t=e.cyclicKeying?"cyclic":"acyclic";return NR.sketch({uid:e.uid,dom:{tag:"div",classes:["tox-toolbar"].concat(e.type===rb.scrolling?["tox-toolbar--scrolling"]:[])},components:[NR.parts.groups({})],toolbarBehaviours:OM(e,t)})},NM=[NC,MC,qo("tooltip"),oi("buttonType","secondary",["primary","secondary"]),ii("borderless",!1),zo("onAction")],MM={button:[].concat(NM,[xC,$o("type",["button"])]),togglebutton:[].concat(NM,[ii("active",!1),$o("type",["togglebutton"])])},BM=[$o("type",["group"]),ui("buttons",[],Ro("type",MM))],IM=Ro("type",s(s({},MM),{},{group:BM})),PM=co([ui("buttons",[],IM),zo("onShow"),zo("onHide")]),LM=function renderViewButton(e,t){return function renderButton(e,t){var n,o,i,a,u,c="togglebutton"===e.type,l=e.icon.map((function(e){return CA(e,t.icons)})).map(dv),m=function getAction(){return function(n){var o=function setIcon(e){l.map((function(o){return o.getOpt(n).each((function(n){vh.set(n,[CA(e,t.icons)])}))}))};return c?e.onAction({setIcon:o,setActive:function setActive(e){var t=n.element;e?(Du(t,"tox-button--enabled"),Wt(t,"aria-pressed",!0)):(Nu(t,"tox-button--enabled"),Yt(t,"aria-pressed"))},isActive:function isActive(){return Bu(n.element,"tox-button--enabled")}}):"button"===e.type?e.onAction({setIcon:o}):void 0}}(),g=s(s({},e),{},{name:c?e.text.getOr(e.icon.getOr("")):null!==(a=e.text)&&void 0!==a?a:e.icon.getOr(""),primary:"primary"===e.buttonType,buttonType:K.from(e.buttonType),tooltip:e.tooltip,icon:e.icon,enabled:!0,borderless:e.borderless}),p=$_(null!==(u=e.buttonType)&&void 0!==u?u:"secondary"),h=c?e.text.map(t.translate):K.some(t.translate(e.text)),v=h.map(Ju),b=g.tooltip.or(h).map((function(e){return{"aria-label":t.translate(e),title:t.translate(e)}})).getOr({}),y=l.map((function(e){return e.asSpec()})),C=Xw([y,v]),w=e.icon.isSome()&&v.isSome(),x={tag:"button",classes:(n=(o=(i=p.concat.apply(p,d(e.icon.isSome()&&!w?["tox-button--icon"]:[]))).concat.apply(i,d(w?["tox-button--icon-and-text"]:[]))).concat.apply(o,d(e.borderless?["tox-button--naked"]:[]))).concat.apply(n,d("togglebutton"===e.type&&e.active?["tox-button--enabled"]:[])),attributes:b},S=F_(g,K.some(m),[],x,C,t);return lv.sketch(S)}(e,t)},FM=Xn().deviceType,HM=FM.isPhone(),$M=FM.isTablet(),zM=Lm({name:"silver.View",configFields:[Po("viewConfig")],partFields:[lm({factory:{sketch:function renderViewHeader(e){var t=!1,n=ae(e.buttons,(function(n){return"group"===n.type?(t=!0,function renderButtonsGroup(e,t){return{dom:{tag:"div",classes:["tox-view__toolbar__group"]},components:ae(e.buttons,(function(e){return LM(e,t)}))}}(n,e.providers)):LM(n,e.providers)}));return{uid:e.uid,dom:{tag:"div",classes:[t?"tox-view__toolbar":"tox-view__header"].concat(d(HM||$M?["tox-view--mobile","tox-view--scrolling"]:[]))},behaviours:ks([Sh.config({}),ch.config({mode:"flow",selector:"button, .tox-button",focusInside:tf.OnEnterOrSpaceMode})]),components:t?n:[Vk.sketch({dom:{tag:"div",classes:["tox-view__header-start"]},components:[]}),Vk.sketch({dom:{tag:"div",classes:["tox-view__header-end"]},components:n})]}}},schema:[Po("buttons"),Po("providers")],name:"header"}),lm({factory:{sketch:function renderViewPane(e){return{uid:e.uid,dom:{tag:"div",classes:["tox-view__pane"]}}}},schema:[],name:"pane"})],factory:function factory$8(e,t,n,o){var i={getPane:function getPane(t){return SR.getPart(t,e,"pane")},getOnShow:function getOnShow(t){return e.viewConfig.onShow},getOnHide:function getOnHide(t){return e.viewConfig.onHide}};return{uid:e.uid,dom:e.dom,components:t,apis:i}},apis:{getPane:function getPane(e,t){return e.getPane(t)},getOnShow:function getOnShow(e,t){return e.getOnShow(t)},getOnHide:function getOnHide(e,t){return e.getOnHide(t)}}}),VM=function makeViews(e,t,n){return Ie(t,(function(t,o){var i=Ao(function createView(e){return Oo("view",PM,e)}(t));return e.slot(o,zM.sketch({dom:{tag:"div",classes:["tox-view"]},viewConfig:i,components:[].concat(d(i.buttons.length>0?[zM.parts.header({buttons:i.buttons,providers:n})]:[]),[zM.parts.pane({})])}))}))},UM=function makeSlotContainer(e,t){return PN.sketch((function(n){return{dom:{tag:"div",classes:["tox-view-wrap__slot-container"]},components:VM(n,e,t),slotBehaviours:Ow([Pa((function(e){return PN.hideAllSlots(e)}))])}}))},ZM=function getCurrentName(e){return de(PN.getSlotNames(e),(function(t){return PN.isShowing(e,t)}))},WM=function runOnPaneWithInstanceApi(e,t,n){PN.getSlot(e,t).each((function(e){zM.getPane(e).each((function(t){n(e)(function makeViewInstanceApi(e){return{getContainer:z(e)}}(t.element.dom))}))}))},jM=Pm({factory:function factory$7(e,t){var n={setViews:function setViews(e,n){vh.set(e,[UM(n,t.backstage.shared.providers)])},whichView:function whichView(e){return zm.getCurrent(e).bind(ZM)},toggleView:function toggleView(e,t,n,o){return zm.getCurrent(e).exists((function(i){var a=ZM(i),u=a.exists((function(e){return o===e})),c=PN.getSlot(i,o).isSome();return c&&(PN.hideAllSlots(i),u?(!function hideContainer(e){var t=e.element;Qt(t,"display","none"),Wt(t,"aria-hidden","true")}(e),t()):(n(),function showContainer(e){var t=e.element;sn(t,"display"),Yt(t,"aria-hidden")}(e),PN.showSlot(i,o),function runOnShow(e,t){WM(e,t,zM.getOnShow)}(i,o)),a.each((function(e){return function runOnHide(e,t){return WM(e,t,zM.getOnHide)}(i,e)}))),c}))}};return{uid:e.uid,dom:{tag:"div",classes:["tox-view-wrap"],attributes:{"aria-hidden":"true"},styles:{display:"none"}},components:[],behaviours:ks([vh.config({}),zm.config({find:function find(e){var t=vh.contents(e);return Se(t)}})]),apis:n}},name:"silver.ViewWrapper",configFields:[Po("backstage")],apis:{setViews:function setViews(e,t,n){return e.setViews(t,n)},toggleView:function toggleView(e,t,n,o,i){return e.toggleView(t,n,o,i)},whichView:function whichView(e,t){return e.whichView(t)}}}),GM=kR.optional({factory:DN,name:"menubar",schema:[Po("backstage")]}),qM=kR.optional({factory:{sketch:function sketch(e){return _R.sketch({uid:e.uid,dom:e.dom,listBehaviours:ks([ch.config({mode:"acyclic",selector:".tox-toolbar"})]),makeItem:function makeItem(){return RM({type:e.type,uid:qa("multiple-toolbar-item"),cyclicKeying:!1,initGroups:[],providers:e.providers,onEscape:function onEscape(){return e.onEscape(),K.some(!0)}})},setupItem:function setupItem(e,t,n,o){NR.setGroups(t,n)},shell:!0})}},name:"multiple-toolbar",schema:[Po("dom"),Po("onEscape")]}),KM=kR.optional({factory:{sketch:function sketch(e){var t=function toolbarFactory(e){return e.type===rb.sliding?DM:e.type===rb.floating?_M:RM}(e);return t({type:e.type,uid:e.uid,onEscape:function onEscape(){return e.onEscape(),K.some(!0)},onToggled:function onToggled(t,n){return e.onToolbarToggled(n)},cyclicKeying:!1,initGroups:[],getSink:e.getSink,providers:e.providers,moreDrawerData:{lazyToolbar:e.lazyToolbar,lazyMoreButton:e.lazyMoreButton,lazyHeader:e.lazyHeader},attributes:e.attributes})}},name:"toolbar",schema:[Po("dom"),Po("onEscape"),Po("getSink")]}),YM=kR.optional({factory:{sketch:function renderHeader(e){var t=e.editor,n=e.sticky?SN:IR;return{uid:e.uid,dom:e.dom,components:e.components,behaviours:ks(n(t,e.sharedBackstage))}}},name:"header",schema:[Po("dom")]}),XM=kR.optional({factory:{sketch:function renderPromotion(e){return{uid:e.uid,dom:e.dom,components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/tinymce-self-hosted-premium-features/?utm_campaign=self_hosted_upgrade_promo&utm_source=tiny&utm_medium=referral",rel:"noopener",target:"_blank","aria-hidden":"true"},classes:["tox-promotion-link"],innerHtml:"\u26a1\ufe0fUpgrade"}}]}}},name:"promotion",schema:[Po("dom")]}),JM=kR.optional({name:"socket",schema:[Po("dom")]}),QM=kR.optional({factory:{sketch:function renderSidebar(e){return{uid:e.uid,dom:{tag:"div",classes:["tox-sidebar"],attributes:{role:"presentation"}},components:[{dom:{tag:"div",classes:["tox-sidebar__slider"]},components:[],behaviours:ks([Kk.config({}),Sh.config({}),c_.config({dimension:{property:"width"},closedClass:"tox-sidebar--sliding-closed",openClass:"tox-sidebar--sliding-open",shrinkingClass:"tox-sidebar--sliding-shrinking",growingClass:"tox-sidebar--sliding-growing",onShrunk:function onShrunk(e){zm.getCurrent(e).each(PN.hideAllSlots),ya(e,ZN)},onGrown:function onGrown(e){ya(e,ZN)},onStartGrow:function onStartGrow(e){Ca(e,UN,{width:an(e.element,"width").getOr("")})},onStartShrink:function onStartShrink(e){Ca(e,UN,{width:Cn(e.element)+"px"})}}),vh.config({}),zm.config({find:function find(e){var t=vh.contents(e);return Se(t)}})])}],behaviours:ks([_O(0),bh("sidebar-sliding-events",[Aa(UN,(function(e,t){Qt(e.element,"width",t.event.width)})),Aa(ZN,(function(e,t){sn(e.element,"width")}))])])}}},name:"sidebar",schema:[Po("dom")]}),eB=kR.optional({factory:{sketch:function renderThrobber(e){return{uid:e.uid,dom:{tag:"div",attributes:{"aria-hidden":"true"},classes:["tox-throbber"],styles:{display:"none"}},behaviours:ks([vh.config({}),GN.config({focus:!1}),zm.config({find:function find(e){return Se(e.components())}})]),components:[]}}},name:"throbber",schema:[Po("dom")]}),tB=kR.optional({factory:jM,name:"viewWrapper",schema:[Po("backstage")]}),nB=kR.optional({factory:{sketch:function renderEditorContainer(e){return{uid:e.uid,dom:{tag:"div",classes:["tox-editor-container"]},components:e.components}}},name:"editorContainer",schema:[]}),rB=Lm({name:"OuterContainer",factory:function factory$6(e,t,n){var o=!1,i={getSocket:function getSocket(t){return SR.getPart(t,e,"socket")},setSidebar:function setSidebar(t,n,o){SR.getPart(t,e,"sidebar").each((function(e){return function setSidebar(e,t,n){zm.getCurrent(e).each((function(o){vh.set(o,[$N(t)]);var i=null===n||void 0===n?void 0:n.toLowerCase();T(i)&&He(t,i)&&zm.getCurrent(o).each((function(t){PN.showSlot(t,i),c_.immediateGrow(o),sn(o.element,"width"),zN(e.element,"region")}))}))}(e,n,o)}))},toggleSidebar:function toggleSidebar(t,n){SR.getPart(t,e,"sidebar").each((function(e){return function toggleSidebar(e,t){zm.getCurrent(e).each((function(n){zm.getCurrent(n).each((function(o){c_.hasGrown(n)?PN.isShowing(o,t)?(c_.shrink(n),zN(e.element,"presentation")):(PN.hideAllSlots(o),PN.showSlot(o,t),zN(e.element,"region")):(PN.hideAllSlots(o),PN.showSlot(o,t),c_.grow(n),zN(e.element,"region"))}))}))}(e,n)}))},whichSidebar:function whichSidebar(t){return SR.getPart(t,e,"sidebar").bind(VN).getOrNull()},getHeader:function getHeader(t){return SR.getPart(t,e,"header")},getToolbar:function getToolbar(t){return SR.getPart(t,e,"toolbar")},setToolbar:function setToolbar(t,n){SR.getPart(t,e,"toolbar").each((function(e){var t=ae(n,EM);e.getApis().setGroups(e,t)}))},setToolbars:function setToolbars(t,n){SR.getPart(t,e,"multiple-toolbar").each((function(e){var t=ae(n,(function(e){return ae(e,EM)}));_R.setItems(e,t)}))},refreshToolbar:function refreshToolbar(t){SR.getPart(t,e,"toolbar").each((function(e){return e.getApis().refresh(e)}))},toggleToolbarDrawer:function toggleToolbarDrawer(t){SR.getPart(t,e,"toolbar").each((function(e){Ze(e.getApis().toggle,(function(t){return t(e)}))}))},toggleToolbarDrawerWithoutFocusing:function toggleToolbarDrawerWithoutFocusing(t){SR.getPart(t,e,"toolbar").each((function(e){Ze(e.getApis().toggleWithoutFocusing,(function(t){return t(e)}))}))},isToolbarDrawerToggled:function isToolbarDrawerToggled(t){return SR.getPart(t,e,"toolbar").bind((function(e){return K.from(e.getApis().isOpen).map((function(t){return t(e)}))})).getOr(!1)},getThrobber:function getThrobber(t){return SR.getPart(t,e,"throbber")},focusToolbar:function focusToolbar(t){SR.getPart(t,e,"toolbar").orThunk((function(){return SR.getPart(t,e,"multiple-toolbar")})).each((function(e){ch.focusIn(e)}))},setMenubar:function setMenubar(t,n){SR.getPart(t,e,"menubar").each((function(e){DN.setMenus(e,n)}))},focusMenubar:function focusMenubar(t){SR.getPart(t,e,"menubar").each((function(e){DN.focus(e)}))},setViews:function setViews(t,n){SR.getPart(t,e,"viewWrapper").each((function(e){jM.setViews(e,n)}))},toggleView:function toggleView(t,n){return SR.getPart(t,e,"viewWrapper").exists((function(e){return jM.toggleView(e,(function(){return i.showMainView(t)}),(function(){return i.hideMainView(t)}),n)}))},whichView:function whichView(t){return SR.getPart(t,e,"viewWrapper").bind(jM.whichView).getOrNull()},hideMainView:function hideMainView(t){(o=i.isToolbarDrawerToggled(t))&&i.toggleToolbarDrawer(t),SR.getPart(t,e,"editorContainer").each((function(e){var t=e.element;Qt(t,"display","none"),Wt(t,"aria-hidden","true")}))},showMainView:function showMainView(t){o&&i.toggleToolbarDrawer(t),SR.getPart(t,e,"editorContainer").each((function(e){var t=e.element;sn(t,"display"),Yt(t,"aria-hidden")}))}};return{uid:e.uid,dom:e.dom,components:t,apis:i,behaviours:e.behaviours}},configFields:[Po("dom"),Po("behaviours")],partFields:[YM,GM,KM,qM,JM,QM,XM,eB,tB,nB],apis:{getSocket:function getSocket(e,t){return e.getSocket(t)},setSidebar:function setSidebar(e,t,n,o){e.setSidebar(t,n,o)},toggleSidebar:function toggleSidebar(e,t,n){e.toggleSidebar(t,n)},whichSidebar:function whichSidebar(e,t){return e.whichSidebar(t)},getHeader:function getHeader(e,t){return e.getHeader(t)},getToolbar:function getToolbar(e,t){return e.getToolbar(t)},setToolbar:function setToolbar(e,t,n){e.setToolbar(t,n)},setToolbars:function setToolbars(e,t,n){e.setToolbars(t,n)},refreshToolbar:function refreshToolbar(e,t){return e.refreshToolbar(t)},toggleToolbarDrawer:function toggleToolbarDrawer(e,t){e.toggleToolbarDrawer(t)},toggleToolbarDrawerWithoutFocusing:function toggleToolbarDrawerWithoutFocusing(e,t){e.toggleToolbarDrawerWithoutFocusing(t)},isToolbarDrawerToggled:function isToolbarDrawerToggled(e,t){return e.isToolbarDrawerToggled(t)},getThrobber:function getThrobber(e,t){return e.getThrobber(t)},setMenubar:function setMenubar(e,t,n){e.setMenubar(t,n)},focusMenubar:function focusMenubar(e,t){e.focusMenubar(t)},focusToolbar:function focusToolbar(e,t){e.focusToolbar(t)},setViews:function setViews(e,t,n){e.setViews(t,n)},toggleView:function toggleView(e,t,n){return e.toggleView(t,n)},whichView:function whichView(e,t){return e.whichView(t)}}}),oB={file:{title:"File",items:"newdocument restoredraft | preview | export print | deleteallconversations"},edit:{title:"Edit",items:"undo redo | cut copy paste pastetext | selectall | searchreplace"},view:{title:"View",items:"code | visualaid visualchars visualblocks | spellchecker | preview fullscreen | showcomments"},insert:{title:"Insert",items:"image link media addcomment pageembed template inserttemplate codesample inserttable accordion | charmap emoticons hr | pagebreak nonbreaking anchor tableofcontents footnotes | mergetags | insertdatetime"},format:{title:"Format",items:"bold italic underline strikethrough superscript subscript codeformat | styles blocks fontfamily fontsize align lineheight | forecolor backcolor | language | removeformat"},tools:{title:"Tools",items:"aidialog aishortcuts | spellchecker spellcheckerlanguage | autocorrect capitalization | a11ycheck code typography wordcount addtemplate"},table:{title:"Table",items:"inserttable | cell row column | advtablesort | tableprops deletetable"},help:{title:"Help",items:"help"}},iB=function parseItemsString(e){return e.split(" ")},aB=function identifyMenus(e,t){var n=s(s({},oB),t.menus),o=Oe(t.menus).length>0,i=void 0===t.menubar||!0===t.menubar?iB("file edit view insert format tools table help"):iB(!1===t.menubar?"":t.menubar),a=se(i,(function(e){var n=He(oB,e);return o?n||Fe(t.menus,e).exists((function(e){return He(e,"items")})):n})),u=ae(a,(function(o){var i=n[o];return function make(e,t,n){var o=Lb(n).split(/[ ,]/);return{text:e.title,getItems:function getItems(){return pe(e.items,(function(e){var n=e.toLowerCase();return 0===n.trim().length||re(o,(function(e){return e===n}))?[]:"separator"===n||"|"===n?[{type:"separator"}]:t.menuItems[n]?[t.menuItems[n]]:[]}))}}}({title:i.title,items:iB(i.items)},t,e)}));return se(u,(function(e){return e.getItems().length>0&&re(e.getItems(),(function isNotSeparator(e){return T(e)||"separator"!==e.type}))}))},uB=function loadStylesheet(e,t,n){return e.on("remove",(function(){return n.unload(t)})),n.load(t)},cB=function loadRawCss(e,t,n,o){return e.on("remove",(function(){return o.unloadRawCss(t)})),o.loadRawCss(t,n)},sB=function(){var e=i(o().mark((function _callee(e,t){var n,i,a,u;return o().wrap((function _callee$(o){for(;;)switch(o.prev=o.next){case 0:if(n=my(e).getOr("default"),i="ui/"+n+"/skin.css",a=tinymce.Resource.get(i),!T(a)){o.next=7;break}return o.abrupt("return",Promise.resolve(cB(e,i,a,e.ui.styleSheetLoader)));case 7:return u=t+"/skin.min.css",o.abrupt("return",uB(e,u,e.ui.styleSheetLoader));case 9:case"end":return o.stop()}}),_callee)})));return function loadUiSkins(t,n){return e.apply(this,arguments)}}(),lB=function(){var e=i(o().mark((function _callee2(e,t){var n,i,a,u;return o().wrap((function _callee2$(o){for(;;)switch(o.prev=o.next){case 0:if(!Lt(nt.fromDom(e.getElement()))){o.next=12;break}if(n=my(e).getOr("default"),i="ui/"+n+"/skin.shadowdom.css",a=tinymce.Resource.get(i),!T(a)){o.next=10;break}return cB(e,i,a,yb.DOM.styleSheetLoader),o.abrupt("return",Promise.resolve());case 10:return u=t+"/skin.shadowdom.min.css",o.abrupt("return",uB(e,u,yb.DOM.styleSheetLoader));case 12:case"end":return o.stop()}}),_callee2)})));return function loadShadowDomUiSkins(t,n){return e.apply(this,arguments)}}(),fB=function(){var e=i(o().mark((function _callee3(e,t){var n;return o().wrap((function _callee3$(o){for(;;)switch(o.prev=o.next){case 0:if(my(t).fold((function(){var n=dy(t);n&&t.contentCSS.push(n+(e?"/content.inline":"/content")+".min.css")}),(function(n){var o="ui/"+n+(e?"/content.inline":"/content")+".css",i=tinymce.Resource.get(o);if(T(i))cB(t,o,i,t.ui.styleSheetLoader);else{var a=dy(t);a&&t.contentCSS.push(a+(e?"/content.inline":"/content")+".min.css")}})),n=dy(t),ly(t)||!T(n)){o.next=4;break}return o.abrupt("return",Promise.all([sB(t,n),lB(t,n)]).then());case 4:case"end":return o.stop()}}),_callee3)})));return function loadUrlSkin(t,n){return e.apply(this,arguments)}}(),dB=function loadSkin(e,t){return fB(e,t).then(function fireSkinLoaded(e){var t=function done(){e._skinLoaded=!0,function fireSkinLoaded$1(e){e.dispatch("SkinLoaded")}(e)};return function(){e.initialized?t():e.on("init",t)}}(t),function fireSkinLoadError(e,t){return function(){return function fireSkinLoadError$1(e,t){e.dispatch("SkinLoadError",t)}(e,{message:t})}}(t,"Skin could not be loaded"))},mB=curry(dB,!1),gB=curry(dB,!0),pB=function makeTooltipText(e,t,n){return e.translate([t,e.translate(n)])},hB=function generateSelectItems(e,t){var n=function generateItem(n,i,a,u){var c=e.shared.providers.translate(n.title);if("separator"===n.type)return K.some({type:"separator",text:c});if("submenu"===n.type){var l=pe(n.getStyleItems(),(function(e){return o(e,i,u)}));return 0===i&&l.length<=0?K.none():K.some({type:"nestedmenuitem",text:c,enabled:l.length>0,getSubmenuItems:function getSubmenuItems(){return pe(n.getStyleItems(),(function(e){return o(e,i,u)}))}})}return K.some(s({type:"togglemenuitem",text:c,icon:n.icon,active:n.isSelected(u),enabled:!a,onAction:t.onAction(n)},n.getStylePreview().fold((function(){return{}}),(function(e){return{meta:{style:e}}}))))},o=function validate(e,o,i){var a="formatter"===e.type&&t.isInvalid(e);return 0===o?a?[]:n(e,o,!1,i).toArray():n(e,o,a,i).toArray()},i=function validateItems(e){var n=t.getCurrentValue(),i=t.shouldHide?0:1;return pe(e,(function(e){return o(e,i,n)}))};return{validateItems:i,getFetch:function getFetch(e,t){return function(n,o){var a=t(),u=i(a);o(DA(u,Ny.CLOSE_ON_EXECUTE,e,{isHorizontalMenu:!1,search:K.none()}))}}}},vB=function createMenuItems(e,t,n){var o=n.dataset,i="basic"===o.type?function(){return ae(o.data,(function(e){return GD(e,n.isSelectedFor,n.getPreviewFor)}))}:o.getData;return{items:hB(t,n),getStyleItems:i}},bB=function createSelectButton(e,t,n,o,i){var a=vB(0,t,n),u=a.items,c=a.getStyleItems;return kA({text:n.icon.isSome()?K.none():n.text,icon:n.icon,tooltip:K.from(n.tooltip),role:K.none(),fetch:u.getFetch(t,c),onSetup:function onSetup(t){var a=function handler(n){return t.setTooltip(pB(e,o,n.value))};return e.on(i,a),Fx(zx(e,"NodeChange",(function(t){var o=t.getComponent();n.updateText(o),tg.set(t.getComponent(),!e.selection.isEditable())}))(t),(function(){return e.off(i,a)}))},getApi:function getApi(e){return{getComponent:z(e),setTooltip:function setTooltip(n){var o=t.shared.providers.translate(n);jt(e.element,{"aria-label":o,title:o})}}},columns:1,presets:"normal",classes:n.icon.isSome()?[]:["bespoke"],dropdownBehaviours:[]},"tox-tbtn",t.shared)};!function(e){e[e.SemiColon=0]="SemiColon",e[e.Space=1]="Space"}(bk||(bk={}));var yB,CB=function buildBasicSettingsDataset(e,t,n){var o=function process(e){return ae(e,(function(e){var t=e,n=e,o=e.split("=");return o.length>1&&(t=o[0],n=o[1]),{title:t,format:n}}))}(function split(e,t){return t===bk.SemiColon?e.replace(/;$/,"").split(";"):e.split(" ")}(e.options.get(t),n));return{type:"basic",data:o}},wB="Alignment {0}",xB="left",SB=[{title:"Left",icon:"align-left",format:"alignleft",command:"JustifyLeft"},{title:"Center",icon:"align-center",format:"aligncenter",command:"JustifyCenter"},{title:"Right",icon:"align-right",format:"alignright",command:"JustifyRight"},{title:"Justify",icon:"align-justify",format:"alignjustify",command:"JustifyFull"}],kB=function getSpec$4(e){var t=function buildBasicStaticDataset(e){return{type:"basic",data:e}}(SB);return{tooltip:pB(e,wB,xB),text:K.none(),icon:K.some("align-left"),isSelectedFor:function isSelectedFor(t){return function(){return e.formatter.match(t)}},getCurrentValue:K.none,getPreviewFor:function getPreviewFor(e){return K.none},onAction:function onAction(t){return function(){return de(SB,(function(e){return e.format===t.format})).each((function(t){return e.execCommand(t.command)}))}},updateText:function updateSelectMenuIcon(t){var n=function getMatchingValue(){return de(SB,(function(t){return e.formatter.match(t.format)}))}(),o=n.fold(z(xB),(function(e){return e.title.toLowerCase()}));Ca(t,SA,{icon:"align-".concat(o)}),function fireAlignTextUpdate(e,t){e.dispatch("AlignTextUpdate",t)}(e,{value:o})},dataset:t,shouldHide:!1,isInvalid:function isInvalid(t){return!e.formatter.canApply(t.format)}}},TB=function findNearest(e,t){var n=t(),o=ae(n,(function(e){return e.format}));return K.from(e.formatter.closest(o)).bind((function(e){return de(n,(function(t){return t.format===e}))})).orThunk((function(){return We(e.formatter.match("p"),{title:"Paragraph",format:"p"})}))},EB="Block {0}",OB="Paragraph",AB=function getSpec$3(e){var t=CB(e,"block_formats",bk.SemiColon);return{tooltip:pB(e,EB,OB),text:K.some(OB),icon:K.none(),isSelectedFor:function isSelectedFor(t){return function(){return e.formatter.match(t)}},getCurrentValue:K.none,getPreviewFor:function getPreviewFor(t){return function(){var n=e.formatter.get(t);return n?K.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):K.none()}},onAction:Vx(e),updateText:function updateSelectMenuText(n){var o=TB(e,(function(){return t.data})).fold(z(OB),(function(e){return e.title}));Ca(n,xA,{text:o}),function fireBlocksTextUpdate(e,t){e.dispatch("BlocksTextUpdate",t)}(e,{value:o})},dataset:t,shouldHide:!1,isInvalid:function isInvalid(t){return!e.formatter.canApply(t.format)}}},_B="Font {0}",DB="System Font",RB=["-apple-system","Segoe UI","Roboto","Helvetica Neue","sans-serif"],NB=function splitFonts(e){var t=e.split(/\s*,\s*/);return ae(t,(function(e){return e.replace(/^['"]+|['"]+$/g,"")}))},MB=function matchesStack(e,t){return t.length>0&&he(t,(function(t){return e.indexOf(t.toLowerCase())>-1}))},BB=function getSpec$2(e){var t=function getMatchingValue(){var t=function getFirstFont(e){return e?NB(e)[0]:""},o=e.queryCommandValue("FontName"),i=n.data,a=o?o.toLowerCase():"",u=sy(e),c=de(i,(function(e){var n=e.format;return n.toLowerCase()===a||t(n).toLowerCase()===t(a).toLowerCase()})).orThunk((function(){return We(function isSystemFontStack(e,t){if(0===e.indexOf("-apple-system")||t.length>0){var n=NB(e.toLowerCase());return MB(n,RB)||MB(n,t)}return!1}(a,u),{title:DB,format:a})}));return{matchOpt:c,font:o}},n=CB(e,"font_family_formats",bk.SemiColon);return{tooltip:pB(e,_B,DB),text:K.some(DB),icon:K.none(),isSelectedFor:function isSelectedFor(e){return function(t){return t.exists((function(t){return t.format===e}))}},getCurrentValue:function getCurrentValue(){return t().matchOpt},getPreviewFor:function getPreviewFor(e){return function(){return K.some({tag:"div",styles:-1===e.indexOf("dings")?{"font-family":e}:{}})}},onAction:function onAction(t){return function(){e.undoManager.transact((function(){e.focus(),e.execCommand("FontName",!1,t.format)}))}},updateText:function updateSelectMenuText(n){var o=t(),i=o.matchOpt,a=o.font,u=i.fold(z(a),(function(e){return e.title}));Ca(n,xA,{text:u}),function fireFontFamilyTextUpdate(e,t){e.dispatch("FontFamilyTextUpdate",t)}(e,{value:u})},dataset:n,shouldHide:!1,isInvalid:G}},IB={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},PB=function(){var e="[0-9]+",t="[eE]"+("[+-]?"+e),n=function opt(e){return"(?:".concat(e,")?")},o=["Infinity",e+"\\."+n(e)+n(t),"\\."+e+n(t),e+n(t)].join("|"),i="[+-]?(?:".concat(o,")");return new RegExp("^(".concat(i,")(.*)$"))}(),LB=function parse(e,t){return K.from(PB.exec(e)).bind((function(e){var n=Number(e[1]),o=e[2];return function isUnit(e,t){return re(t,(function(t){return re(IB[t],(function(t){return e===t}))}))}(o,t)?K.some({value:n,unit:o}):K.none()}))},FB={tab:z(9),escape:z(27),enter:z(13),backspace:z(8),delete:z(46),left:z(37),up:z(38),right:z(39),down:z(40),space:z(32),home:z(36),end:z(35),pageUp:z(33),pageDown:z(34)},HB=function createBespokeNumberInput(e,t,n){var o=K.none(),i=zx(e,"NodeChange SwitchMode",(function(t){var i=t.getComponent();o=K.some(i),n.updateInputValue(i),tg.set(i,!e.selection.isEditable())})),a=function getApi(e){return{getComponent:z(e)}},u=si(F),c=qa("custom-number-input-events"),s=function changeValue(e,t,i){var a=function getValueFromCurrentComp(e){return e.map((function(e){return Rd.getValue(e)})).getOr("")}(o),u=n.getNewValue(a,e),c=a.length-"".concat(u).length,s=o.map((function(e){return e.element.dom.selectionStart-c})),l=o.map((function(e){return e.element.dom.selectionEnd-c}));n.onAction(u,i),o.each((function(e){Rd.setValue(e,u),t&&(s.each((function(t){return e.element.dom.selectionStart=t})),l.each((function(t){return e.element.dom.selectionEnd=t})))}))},d=function decrease(e,t){return s((function(e,t){return e-t}),e,t)},m=function increase(e,t){return s((function(e,t){return e+t}),e,t)},g=function goToParent(e){return Tt(e.element).fold(K.none,(function(e){return Ns(e),K.some(!0)}))},p=function focusInput(e){return Bs(e.element)?(_t(e.element).each((function(e){return Ns(e)})),K.some(!0)):K.none()},h=function makeStepperButton(n,o,i,u){var c,s=si(F),d=t.shared.providers.translate(i),m=qa("altExecuting"),g=zx(e,"NodeChange SwitchMode",(function(t){tg.set(t.getComponent(),!e.selection.isEditable())})),p=function onClick(e){tg.isDisabled(e)||n(!0)};return lv.sketch({dom:{tag:"button",attributes:{title:d,"aria-label":d},classes:u.concat(o)},components:[yA(o,t.shared.providers.icons)],buttonBehaviours:ks([tg.config({}),bh(m,[Gw({onSetup:g,getApi:a},s),qw({getApi:a},s),Aa(Pi(),(function(e,t){t.event.raw.keyCode!==FB.space()&&t.event.raw.keyCode!==FB.enter()||tg.isDisabled(e)||n(!1)})),Aa($i(),p),Aa(Oi(),p)])]),eventOrder:(c={},l(c,Pi(),[m,"keying"]),l(c,$i(),[m,"alloy.base.behaviour"]),l(c,Oi(),[m,"alloy.base.behaviour"]),c)})},v=dv(h((function(e){return d(!1,e)}),"minus","Decrease font size",[])),b=dv(h((function(e){return m(!1,e)}),"plus","Increase font size",[])),y=dv({dom:{tag:"div",classes:["tox-input-wrapper"]},components:[tC.sketch({inputBehaviours:ks([tg.config({}),bh(c,[Gw({onSetup:i,getApi:a},u),qw({getApi:a},u)]),bh("input-update-display-text",[Aa(xA,(function(e,t){Rd.setValue(e,t.event.text)})),Aa(Ii(),(function(e){n.onAction(Rd.getValue(e))})),Aa(Hi(),(function(e){n.onAction(Rd.getValue(e))}))]),ch.config({mode:"special",onEnter:function onEnter(e){return s(V,!0,!0),K.some(!0)},onEscape:g,onUp:function onUp(e){return m(!0,!1),K.some(!0)},onDown:function onDown(e){return d(!0,!1),K.some(!0)},onLeft:function onLeft(e,t){return t.cut(),K.none()},onRight:function onRight(e,t){return t.cut(),K.none()}})])})],behaviours:ks([Sh.config({}),ch.config({mode:"special",onEnter:p,onSpace:p,onEscape:g}),bh("input-wrapper-events",[Aa(Mi(),(function(e){ue([v,b],(function(t){var n=nt.fromDom(t.get(e).element.dom);Bs(n)&&Ms(n)}))}))])])});return{dom:{tag:"div",classes:["tox-number-input"]},components:[v.asSpec(),y.asSpec(),b.asSpec()],behaviours:ks([Sh.config({}),ch.config({mode:"flow",focusInside:tf.OnEnterOrSpaceMode,cycles:!1,selector:"button, .tox-input-wrapper",onEscape:function onEscape(e){return Bs(e.element)?K.none():(Ns(e.element),K.some(!0))}})])}},$B="Font size {0}",zB="12pt",VB={"8pt":"1","10pt":"2","12pt":"3","14pt":"4","18pt":"5","24pt":"6","36pt":"7"},UB={"xx-small":"7pt","x-small":"8pt",small:"10pt",medium:"12pt",large:"14pt","x-large":"18pt","xx-large":"24pt"},ZB=function toPt(e,t){return/[0-9.]+px$/.test(e)?function round(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n}(72*parseInt(e,10)/96,t||0)+"pt":Fe(UB,e).getOr(e)},WB=function getSpec$1(e){var t=function getMatchingValue(){var t=K.none(),n=o.data,i=e.queryCommandValue("FontSize");if(i)for(var a=function _loop(){var e=ZB(i,u),o=function toLegacy(e){return Fe(VB,e).getOr("")}(e);t=de(n,(function(t){return t.format===i||t.format===e||t.format===o}))},u=3;t.isNone()&&u>=0;u--)a();return{matchOpt:t,size:i}},n=z(K.none),o=CB(e,"font_size_formats",bk.Space);return{tooltip:pB(e,$B,zB),text:K.some(zB),icon:K.none(),isSelectedFor:function isSelectedFor(e){return function(t){return t.exists((function(t){return t.format===e}))}},getPreviewFor:n,getCurrentValue:function getCurrentValue(){return t().matchOpt},onAction:function onAction(t){return function(){e.undoManager.transact((function(){e.focus(),e.execCommand("FontSize",!1,t.format)}))}},updateText:function updateSelectMenuText(n){var o=t(),i=o.matchOpt,a=o.size,u=i.fold(z(a),(function(e){return e.title}));Ca(n,xA,{text:u}),function fireFontSizeTextUpdate(e,t){e.dispatch("FontSizeTextUpdate",t)}(e,{value:u})},dataset:o,shouldHide:!1,isInvalid:G}},jB="Format {0}",GB=function getSpec(e,t){var n="Paragraph";return{tooltip:pB(e,jB,n),text:K.some(n),icon:K.none(),isSelectedFor:function isSelectedFor(t){return function(){return e.formatter.match(t)}},getCurrentValue:K.none,getPreviewFor:function getPreviewFor(t){return function(){var n=e.formatter.get(t);return void 0!==n?K.some({tag:n.length>0&&(n[0].inline||n[0].block)||"div",styles:e.dom.parseStyle(e.formatter.getCssText(t))}):K.none()}},onAction:Vx(e),updateText:function updateSelectMenuText(t){var o=pe(jD(e),(function getFormatItems(e){return VD(e)?pe(e.items,getFormatItems):UD(e)?[{title:e.title,format:e.format}]:[]})),i=TB(e,z(o)).fold(z(n),(function(e){return e.title}));Ca(t,xA,{text:i}),function fireStylesTextUpdate(e,t){e.dispatch("StylesTextUpdate",t)}(e,{value:i})},shouldHide:Ib(e),isInvalid:function isInvalid(t){return!e.formatter.canApply(t.format)},dataset:t}},qB=z([Po("toggleClass"),Po("fetch"),Nc("onExecute"),ei("getHotspot",K.some),ei("getAnchorOverrides",z({})),Al(),Nc("onItemExecute"),Wo("lazySink"),Po("dom"),Dc("onOpen"),Nd("splitDropdownBehaviours",[ZS,ch,Sh]),ei("matchWidth",!1),ei("useMinWidth",!1),ei("eventOrder",{}),Wo("role")].concat(ck())),KB=cm({factory:lv,schema:[Po("dom")],name:"arrow",defaults:function defaults(){return{buttonBehaviours:ks([Sh.revoke()])}},overrides:function overrides(e){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function action(t){t.getSystem().getByUid(e.uid).each(wa)},buttonBehaviours:ks([Rh.config({toggleOnExecute:!1,toggleClass:e.toggleClass})])}}}),YB=cm({factory:lv,schema:[Po("dom")],name:"button",defaults:function defaults(){return{buttonBehaviours:ks([Sh.revoke()])}},overrides:function overrides(e){return{dom:{tag:"span",attributes:{role:"presentation"}},action:function action(t){t.getSystem().getByUid(e.uid).each((function(n){e.onExecute(n,t)}))}}}}),XB=z([KB,YB,lm({factory:{sketch:function sketch(e){return{uid:e.uid,dom:{tag:"span",styles:{display:"none"},attributes:{"aria-hidden":"true"},innerHtml:e.text}}}},schema:[Po("text")],name:"aria-descriptor"}),sm({schema:[Oc()],name:"menu",defaults:function defaults(e){return{onExecute:function onExecute(t,n){t.getSystem().getByUid(e.uid).each((function(o){e.onItemExecute(o,t,n)}))}}}}),JS()]),JB=Lm({name:"SplitDropdown",configFields:qB(),partFields:XB(),factory:function factory$5(e,t,n,o){var i=function switchToMenu(e){zm.getCurrent(e).each((function(e){dg.highlightFirst(e),ch.focusIn(e)}))},a=function action(t){nk(e,V,t,o,i,Ig.HighlightMenuAndItem).get(F)},u=function executeOnButton(t){var n=Sm(t,e,"button");return wa(n),K.some(!0)},c=s(s({},Ta([Pa((function(t,n){xm(t,e,"aria-descriptor").each((function(e){var n=qa("aria");Wt(e.element,"id",n),Wt(t.element,"aria-describedby",n)}))}))])),Mh(K.some(a))),d={repositionMenus:function repositionMenus(e){Rh.isOn(e)&&uk(e)}};return{uid:e.uid,dom:e.dom,components:t,apis:d,eventOrder:s(s({},e.eventOrder),{},l({},Xi(),["disabling","toggling","alloy.base.behaviour"])),events:c,behaviours:Bd(e.splitDropdownBehaviours,[ZS.config({others:{sandbox:function sandbox(t){var n=Sm(t,e,"arrow");return ak(e,t,{onOpen:function onOpen(){Rh.on(n),Rh.on(t)},onClose:function onClose(){Rh.off(n),Rh.off(t)}})}}}),ch.config({mode:"special",onSpace:u,onEnter:u,onDown:function openMenu(e){return a(e),K.some(!0)}}),Sh.config({}),Rh.config({toggleOnExecute:!1,aria:{mode:"expanded"}})]),domModification:{attributes:{role:e.role.getOr("button"),"aria-haspopup":!0}}}},apis:{repositionMenus:function repositionMenus(e,t){return e.repositionMenus(t)}}}),QB=function getButtonApi(e){return{isEnabled:function isEnabled(){return!tg.isDisabled(e)},setEnabled:function setEnabled(t){return tg.set(e,!t)},setText:function setText(t){return Ca(e,xA,{text:t})},setIcon:function setIcon(t){return Ca(e,SA,{icon:t})}}},eI=function getToggleApi(e){return{setActive:function setActive(t){Rh.set(e,t)},isActive:function isActive(){return Rh.isOn(e)},isEnabled:function isEnabled(){return!tg.isDisabled(e)},setEnabled:function setEnabled(t){return tg.set(e,!t)},setText:function setText(t){return Ca(e,xA,{text:t})},setIcon:function setIcon(t){return Ca(e,SA,{icon:t})}}},tI=function getTooltipAttributes(e,t){return e.map((function(e){return{"aria-label":t.translate(e),title:t.translate(e)}})).getOr({})},nI=qa("focus-button"),rI=function renderCommonStructure(e,t,n,o,i){var a,u=t.map((function(e){return dv(wA(e,"tox-tbtn",i))})),c=e.map((function(e){return dv(CA(e,i.icons))}));return{dom:{tag:"button",classes:["tox-tbtn"].concat(t.isSome()?["tox-tbtn--select"]:[]),attributes:tI(n,i)},components:Xw([c.map((function(e){return e.asSpec()})),u.map((function(e){return e.asSpec()}))]),eventOrder:(a={},l(a,_i(),["focusing","alloy.base.behaviour",pA]),l(a,ca(),[pA,"toolbar-group-button-events"]),a),buttonBehaviours:ks([Ww(i.isDisabled),zw(),bh(pA,[Pa((function(e,t){return vA(e)})),Aa(xA,(function(e,t){u.bind((function(t){return t.getOpt(e)})).each((function(e){vh.set(e,[Ju(i.translate(t.event.text))])}))})),Aa(SA,(function(e,t){c.bind((function(t){return t.getOpt(e)})).each((function(e){vh.set(e,[CA(t.event.icon,i.icons)])}))})),Aa(_i(),(function(e,t){t.event.prevent(),ya(e,nI)}))])].concat(o.getOr([])))}},oI=function renderCommonToolbarButton(e,t,n){var o,i=si(F),a=rI(e.icon,e.text,e.tooltip,K.none(),n);return lv.sketch({dom:a.dom,components:a.components,eventOrder:hA,buttonBehaviours:s(s({},ks([bh("toolbar-button-events",[gA({onAction:e.onAction,getApi:t.getApi}),Gw(t,i),qw(t,i)]),Ww((function(){return!e.enabled||n.isDisabled()})),zw()].concat(t.toolbarButtonBehaviours))),{},l({},pA,null===(o=a.buttonBehaviours)||void 0===o?void 0:o[pA]))})},iI=function renderToolbarButtonWith(e,t,n){return oI(e,{toolbarButtonBehaviours:n.length>0?[bh("toolbarButtonWith",n)]:[],getApi:QB,onSetup:e.onSetup},t)},aI=function renderToolbarToggleButtonWith(e,t,n){return oI(e,{toolbarButtonBehaviours:[vh.config({}),Rh.config({toggleClass:"tox-tbtn--enabled",aria:{mode:"pressed"},toggleOnExecute:!1})].concat(n.length>0?[bh("toolbarToggleButtonWith",n)]:[]),getApi:eI,onSetup:e.onSetup},t)},uI=function fetchChoices(e,t,n){return function(o){return KS((function(e){return t.fetch(e)})).map((function(i){return K.from(xk(Zr(SS(qa("menu-value"),i,(function(n){t.onItemAction(e(o),n)}),t.columns,t.presets,Ny.CLOSE_ON_EXECUTE,t.select.getOr(G),n),{movement:TS(t.columns,t.presets),menuBehaviours:Ow("auto"!==t.columns?[]:[Pa((function(e,n){Tw(e,4,Zy(t.presets)).each((function(t){var n=t.numRows,o=t.numColumns;ch.setGridSize(e,n,o)}))}))])})))}))}},cI=[{name:"history",items:["undo","redo"]},{name:"ai",items:["aidialog","aishortcuts"]},{name:"styles",items:["styles"]},{name:"formatting",items:["bold","italic"]},{name:"alignment",items:["alignleft","aligncenter","alignright","alignjustify"]},{name:"indentation",items:["outdent","indent"]},{name:"permanent pen",items:["permanentpen"]},{name:"comments",items:["addcomment"]}],sI=function renderFromBridge(e,t){return function(n,o,i){var a=e(n).mapError((function(e){return Do(e)})).getOrDie();return t(a,o,i)}},lI={button:sI(XC,(function(e,t){return function renderToolbarButton(e,t){return iI(e,t,[])}(e,t.shared.providers)})),togglebutton:sI(ew,(function(e,t){return function renderToolbarToggleButton(e,t){return aI(e,t,[])}(e,t.shared.providers)})),menubutton:sI(AN,(function(e,t){return l_(e,"tox-tbtn",t,K.none(),!1)})),splitbutton:sI((function createSplitButton(e){return Oo("SplitButton",_N,e)}),(function(e,t){return function renderSplitButton(e,t){var n=function getApi(e){return{isEnabled:function isEnabled(){return!tg.isDisabled(e)},setEnabled:function setEnabled(t){return tg.set(e,!t)},setIconFill:function setIconFill(t,n){fc(e.element,'svg path[class="'.concat(t,'"], rect[class="').concat(t,'"]')).each((function(e){Wt(e,"fill",n)}))},setActive:function setActive(t){Wt(e.element,"aria-pressed",t),fc(e.element,"span").each((function(n){e.getSystem().getByDom(n).each((function(e){return Rh.set(e,t)}))}))},isActive:function isActive(){return fc(e.element,"span").exists((function(t){return e.getSystem().getByDom(t).exists(Rh.isOn)}))},setText:function setText(t){return fc(e.element,"span").each((function(n){return e.getSystem().getByDom(n).each((function(e){return Ca(e,xA,{text:t})}))}))},setIcon:function setIcon(t){return fc(e.element,"span").each((function(n){return e.getSystem().getByDom(n).each((function(e){return Ca(e,SA,{icon:t})}))}))},setTooltip:function setTooltip(n){var o=t.providers.translate(n);jt(e.element,{"aria-label":o,title:o})}}},o=si(F),i={getApi:n,onSetup:e.onSetup};return JB.sketch({dom:{tag:"div",classes:["tox-split-button"],attributes:s({"aria-pressed":!1},tI(e.tooltip,t.providers))},onExecute:function onExecute(t){var o=n(t);o.isEnabled()&&e.onAction(o)},onItemExecute:function onItemExecute(e,t,n){},splitDropdownBehaviours:ks([Zw(t.providers.isDisabled),zw(),bh("split-dropdown-events",[Pa((function(e,t){return vA(e)})),Aa(nI,Sh.focus),Gw(i,o),qw(i,o)]),ST.config({})]),eventOrder:l({},ca(),["alloy.base.behaviour","split-dropdown-events"]),toggleClass:"tox-tbtn--enabled",lazySink:t.getSink,fetch:uI(n,e,t.providers),parts:{menu:Yy(0,e.columns,e.presets)},components:[JB.parts.button(rI(e.icon,e.text,K.none(),K.some([Rh.config({toggleClass:"tox-tbtn--enabled",toggleOnExecute:!1})]),t.providers)),JB.parts.arrow({dom:{tag:"button",classes:["tox-tbtn","tox-split-button__chevron"],innerHtml:mb("chevron-down",t.providers.icons)},buttonBehaviours:ks([Zw(t.providers.isDisabled),zw(),gb()])}),JB.parts["aria-descriptor"]({text:t.providers.translate("To open the popup, press Shift+Enter")})]})}(e,t.shared)})),grouptoolbarbutton:sI((function createGroupToolbarButton(e){return Oo("GroupToolbarButton",TN,e)}),(function(e,t,n){var o=n.ui.registry.getAll().buttons,i=l({},El,t.shared.header.isPositionedAtTop()?js.TopToBottom:js.BottomToTop);if(Fb(n)===rb.floating)return function renderFloatingToolbarButton(e,t,n,o){var i=t.shared,a=si(F),u={toolbarButtonBehaviours:[],getApi:QB,onSetup:e.onSetup},c=[bh("toolbar-group-button-events",[Gw(u,a),qw(u,a)])];return mM.sketch({lazySink:i.getSink,fetch:function fetch(){return KS((function(t){t(ae(n(e.items),EM))}))},markers:{toggledClass:"tox-tbtn--enabled"},parts:{button:rI(e.icon,e.text,e.tooltip,K.some(c),i.providers),toolbar:{dom:{tag:"div",classes:["tox-toolbar__overflow"],attributes:o}}}})}(e,t,(function identify(e){return gI(n,{buttons:o,toolbar:e,allowToolbarGroups:!1},t,K.none())}),i);throw new Error("Toolbar groups are only supported when using floating toolbar mode")}))},fI={styles:function createStylesButton(e,t){var n=s({type:"advanced"},t.styles);return bB(e,t,GB(e,n),jB,"StylesTextUpdate")},fontsize:function createFontSizeButton(e,t){return bB(e,t,WB(e),$B,"FontSizeTextUpdate")},fontsizeinput:function createFontSizeInputButton(e,t){return HB(e,t,function getNumberInputSpec(e){var t=function getCurrentValue(){return e.queryCommandValue("FontSize")};return{updateInputValue:function updateInputValue(e){return Ca(e,xA,{text:t()})},onAction:function onAction(t,n){return e.execCommand("FontSize",!1,t,{skip_focus:!n})},getNewValue:function getNewValue(n,o){LB(n,["unsupportedLength","empty"]);var i=t(),a=LB(n,["unsupportedLength","empty"]).or(LB(i,["unsupportedLength","empty"])),u=a.map((function(e){return e.value})).getOr(16),c=Kb(e),s=a.map((function(e){return e.unit})).filter((function(e){return""!==e})).getOr(c),l=o(u,function getConfigFromUnit(e){var t;return null!==(t={em:{step:.1},cm:{step:.1},in:{step:.1},pc:{step:.1},ch:{step:.1},rem:{step:.1}}[e])&&void 0!==t?t:{step:1}}(s).step),d="".concat(function isValidValue(e){return e>=0}(l)?l:u).concat(s);return d!==i&&function fireFontSizeInputTextUpdate(e,t){e.dispatch("FontSizeInputTextUpdate",t)}(e,{value:d}),d}}}(e))},fontfamily:function createFontFamilyButton(e,t){return bB(e,t,BB(e),_B,"FontFamilyTextUpdate")},blocks:function createBlocksButton(e,t){return bB(e,t,AB(e),EB,"BlocksTextUpdate")},align:function createAlignButton(e,t){return bB(e,t,kB(e),wB,"AlignTextUpdate")}},dI=function createToolbar(e){var t=e.toolbar,n=e.buttons;return!1===t?[]:void 0===t||!0===t?function removeUnusedDefaults(e){var t=ae(cI,(function(t){var n=se(t.items,(function(t){return He(e,t)||He(fI,t)}));return{name:t.name,items:n}}));return se(t,(function(e){return e.items.length>0}))}(n):T(t)?function convertStringToolbar(e){var t=e.split("|");return ae(t,(function(e){return{items:e.trim().split(" ")}}))}(t):function isToolbarGroupSettingArray(e){return L(e,(function(e){return He(e,"name")&&He(e,"items")}))}(t)?t:(console.error("Toolbar type should be string, string[], boolean or ToolbarGroup[]"),[])},mI=function lookupButton(e,t,n,o,i,a){return Fe(t,n.toLowerCase()).orThunk((function(){return a.bind((function(e){return Ee(e,(function(e){return Fe(t,e+n.toLowerCase())}))}))})).fold((function(){return Fe(fI,n.toLowerCase()).map((function(t){return t(e,i)}))}),(function(t){return"grouptoolbarbutton"!==t.type||o?function extractFrom(e,t,n){return Fe(lI,e.type).fold((function(){return console.error("skipping button defined by",e),K.none()}),(function(o){return K.some(o(e,t,n))}))}(t,i,e):(console.warn("Ignoring the '".concat(n,"' toolbar button. Group toolbar buttons are only supported when using floating toolbar mode and cannot be nested.")),K.none())}))},gI=function identifyButtons(e,t,n,o){var i=dI(t),a=ae(i,(function(i){var a=pe(i.items,(function(i){return 0===i.trim().length?[]:mI(e,t.buttons,i,t.allowToolbarGroups,n,o).toArray()}));return{title:K.from(e.translate(i.name)),items:a}}));return se(a,(function(e){return e.items.length>0}))},pI=function setToolbar(e,t,n,o){var i=t.mainUi.outerContainer,a=n.toolbar,u=n.buttons;if(L(a,T)){var c=a.map((function(t){var i={toolbar:t,buttons:u,allowToolbarGroups:n.allowToolbarGroups};return gI(e,i,o,K.none())}));rB.setToolbars(i,c)}else rB.setToolbar(i,gI(e,n,o,K.none()))},hI=Xn(),vI=hI.os.isiOS()&&hI.os.version.major<=12,bI=Object.freeze({__proto__:null,render:function render$1(e,t,n,o,i){var a=t.mainUi,u=t.uiMotherships,c=si(0),s=a.outerContainer;mB(e);var l=nt.fromDom(i.targetNode),d=Pt(It(l));Jf(l,a.mothership),function attachUiMotherships(e,t,n){Ty(e)&&Jf(n.mainUi.mothership.element,n.popupUi.mothership),Xf(t,n.dialogUi.mothership)}(e,d,t),e.on("SkinLoaded",(function(){rB.setSidebar(s,n.sidebar,ay(e)),pI(e,t,n,o),c.set(e.getWin().innerWidth),rB.setMenubar(s,aB(e,n)),rB.setViews(s,n.views),function setupEvents$1(e,t){var n=t.uiMotherships,o=e.dom,i=e.getWin(),a=e.getDoc().documentElement,u=si(pn(i.innerWidth,i.innerHeight)),c=si(pn(a.offsetWidth,a.offsetHeight)),s=function resizeWindow(){var t=u.get();t.left===i.innerWidth&&t.top===i.innerHeight||(u.set(pn(i.innerWidth,i.innerHeight)),Ix(e))},l=function resizeDocument(){var t=e.getDoc().documentElement,n=c.get();n.left===t.offsetWidth&&n.top===t.offsetHeight||(c.set(pn(t.offsetWidth,t.offsetHeight)),Ix(e))},d=function scroll(t){!function fireScrollContent(e,t){e.dispatch("ScrollContent",t)}(e,t)};o.bind(i,"resize",s),o.bind(i,"scroll",d);var m=il(nt.fromDom(e.getBody()),"load",l);e.on("hide",(function(){ue(n,(function(e){Qt(e.element,"display","none")}))})),e.on("show",(function(){ue(n,(function(e){sn(e.element,"display")}))})),e.on("NodeChange",l),e.on("remove",(function(){m.unbind(),o.unbind(i,"resize",s),o.unbind(i,"scroll",d),i=null}))}(e,t)}));var m=rB.getSocket(s).getOrDie("Could not find expected socket element");if(vI){en(m.element,{overflow:"scroll","-webkit-overflow-scrolling":"touch"});var g=function first(e,t){var n=null;return{cancel:function cancel(){D(n)||(clearTimeout(n),n=null)},throttle:function throttle(){for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];D(n)&&(n=setTimeout((function(){n=null,e.apply(null,i)}),t))}}}((function(){e.dispatch("ScrollContent")}),20),p=ol(m.element,"scroll",g.throttle);e.on("remove",p.unbind)}$w(e,t),e.addCommand("ToggleSidebar",(function(t,n){rB.toggleSidebar(s,n),e.dispatch("ToggleSidebar")})),e.addQueryValueHandler("ToggleSidebar",(function(){var e;return null!==(e=rB.whichSidebar(s))&&void 0!==e?e:""})),e.addCommand("ToggleView",(function(t,n){if(rB.toggleView(s,n)){var o=s.element;a.mothership.broadcastOn([dd()],{target:o}),ue(u,(function(e){e.broadcastOn([dd()],{target:o})})),D(rB.whichView(s))&&(e.focus(),e.nodeChanged(),rB.refreshToolbar(s))}})),e.addQueryValueHandler("ToggleView",(function(){var e;return null!==(e=rB.whichView(s))&&void 0!==e?e:""}));var h=Fb(e);h!==rb.sliding&&h!==rb.floating||e.on("ResizeWindow ResizeEditor ResizeContent",(function(){var n=e.getWin().innerWidth;n!==c.get()&&(!function refreshDrawer(){rB.refreshToolbar(t.mainUi.outerContainer)}(),c.set(n))}));var v={setEnabled:function setEnabled(e){Hw(t,!e)},isEnabled:function isEnabled(){return!tg.isDisabled(s)}};return{iframeContainer:m.element.dom,editorContainer:s.element.dom,api:v}}}),yI=function parseToInt(e){return/^[0-9\.]+(|px)$/i.test(""+e)?K.some(parseInt(""+e,10)):K.none()},CI=function numToPx(e){return P(e)?e+"px":e},wI=function calcCappedSize(e,t,n){var o=t.filter((function(t){return e<t})),i=n.filter((function(t){return e>t}));return o.or(i).getOr(e)},xI=function getHeightWithFallback(e){var t=function getHeight(e){var t=Ob(e),n=Db(e),o=Nb(e);return yI(t).map((function(e){return wI(e,n,o)}))}(e);return t.getOr(Ob(e))},SI=function getWidth(e){var t=Ab(e),n=_b(e),o=Rb(e);return yI(t).map((function(e){return wI(e,n,o)}))},kI=Oy.ToolbarLocation,TI=Oy.ToolbarMode,EI=function InlineHeader(e,t,n,o,i){var a=n.mainUi,u=n.uiMotherships,c=yb.DOM,l=wy(e),d=ky(e),m=Rb(e).or(SI(e)),g=o.shared.header,p=g.isPositionedAtTop,h=Fb(e),v=h===TI.sliding||h===TI.floating,b=si(!1),y=function isVisible(){return b.get()&&!e.removed},C=function calcToolbarOffset(e){return v?e.fold(z(0),(function(e){return e.components().length>1?mn(e.components()[1].element):0})):0},w=function getOffsetParent$1(e,t){return Ty(e)?LR(t):K.none()},x=function repositionPopups$1(){ue(u,(function(e){e.broadcastOn([md()],{})}))},S=function update(n){if(y()){l||function updateChromeWidth(){i.on((function(e){var n=m.getOrThunk((function(){var e=yI(nn(Vt(),"margin-left")).getOr(0);return Cn(Vt())-vn(t).left+e}));Qt(e.element,"max-width",n+"px")}))}();var o=l?K.none():function restoreAndGetCompleteOuterContainerWidth(){if(l)return K.none();if(vn(a.outerContainer.element).left+wn(a.outerContainer.element)>=window.innerWidth-40||an(a.outerContainer.element,"width").isSome()){Qt(a.outerContainer.element,"position","absolute"),Qt(a.outerContainer.element,"left","0px"),sn(a.outerContainer.element,"width");var e=wn(a.outerContainer.element);return K.some(e)}return K.none()}();v&&rB.refreshToolbar(a.outerContainer),l||function updateChromePosition(n){i.on((function(o){var i=rB.getToolbar(a.outerContainer),u=C(i),c=Cr(t),l=w(e,a.outerContainer.element).fold((function(){return{top:p()?Math.max(c.y-mn(o.element)+u,0):c.bottom,left:c.x}}),(function(e){var t,n=Cr(e),i=null!==(t=e.dom.scrollTop)&&void 0!==t?t:0,a=bt(e,Vt()),s=a?Math.max(c.y-mn(o.element)+u,0):c.y-n.y+i-mn(o.element)+u;return{top:p()?s:c.bottom,left:a?c.x:c.x-n.x}})),d=l.top,m=l.left,g={position:"absolute",left:Math.round(m)+"px",top:Math.round(d)+"px"},h=n.map((function(e){var t=sr(),n=window.innerWidth-(m-t.left);return{width:Math.max(Math.min(e,n),150)+"px"}})).getOr({});en(a.outerContainer.element,s(s({},g),h))}))}(o),d&&i.on(n),x()}},k=function doUpdateMode(){return!(l||!d||!y())&&i.get().exists((function(n){var o=g.getDockingMode(),u=function calcMode(n){switch($b(e)){case kI.auto:var o=rB.getToolbar(a.outerContainer),i=C(o),u=mn(n.element)-i,c=Cr(t);if(c.y>u)return"top";var s=xt(t),l=Math.max(s.dom.scrollHeight,mn(s));return c.bottom<l-u||Sr().bottom<c.bottom-u?"bottom":"top";case kI.bottom:return"bottom";case kI.top:default:return"top"}}(n);return u!==o&&(function setupMode(e){i.on((function(t){gN.setModes(t,[e]),g.setDockingMode(e);var n=p()?js.TopToBottom:js.BottomToTop;Wt(t.element,El,n)}))}(u),!0)}))};return{isVisible:y,isPositionedAtTop:p,show:function show(){b.set(!0),Qt(a.outerContainer.element,"display","flex"),c.addClass(e.getBody(),"mce-edit-focus"),ue(u,(function(e){sn(e.element,"display")})),k(),Ty(e)?S((function(e){return gN.isDocked(e)?gN.reset(e):gN.refresh(e)})):S(gN.refresh)},hide:function hide(){b.set(!1),Qt(a.outerContainer.element,"display","none"),c.removeClass(e.getBody(),"mce-edit-focus"),ue(u,(function(e){Qt(e.element,"display","none")}))},update:S,updateMode:function updateMode(){k()&&S(gN.reset)},repositionPopups:x}},OI=function getTargetPosAndBounds(e,t){var n=Cr(e);return{pos:t?n.y:n.bottom,bounds:n}},AI=Object.freeze({__proto__:null,render:function render(e,t,n,o,i){var a=t.mainUi,u=nl(),c=nt.fromDom(i.targetNode),s=EI(e,c,t,o,u),l=Ub(e);gB(e);var render=function render(){if(u.isSet())s.show();else{u.set(rB.getHeader(a.outerContainer).getOrDie());var i=xy(e);Ty(e)?(Jf(c,a.mothership),Jf(c,t.popupUi.mothership)):Xf(i,a.mothership),Xf(i,t.dialogUi.mothership),pI(e,t,n,o),rB.setMenubar(a.outerContainer,aB(e,n)),s.show(),function setupEvents(e,t,n,o){var i=si(OI(t,n.isPositionedAtTop())),a=function resizeContent(o){var a=OI(t,n.isPositionedAtTop()),u=a.pos,c=a.bounds,s=i.get(),l=s.pos,d=s.bounds,m=c.height!==d.height||c.width!==d.width;i.set({pos:u,bounds:c}),m&&Ix(e,o),n.isVisible()&&(l!==u?n.update(gN.reset):m&&(n.updateMode(),n.repositionPopups()))};o||(e.on("activate",n.show),e.on("deactivate",n.hide)),e.on("SkinLoaded ResizeWindow",(function(){return n.update(gN.reset)})),e.on("NodeChange keydown",(function(e){requestAnimationFrame((function(){return a(e)}))}));var u=0,c=zO((function(){return n.update(gN.refresh)}),33);e.on("ScrollWindow",(function(){var e=sr().left;e!==u&&(u=e,c.throttle()),n.updateMode()})),Ty(e)&&e.on("ElementScroll",(function(e){n.update(gN.refresh)}));var s=tl();s.set(il(nt.fromDom(e.getBody()),"load",(function(e){return a(e.raw)}))),e.on("remove",(function(){s.clear()}))}(e,c,s,l),e.nodeChanged()}};e.on("show",render),e.on("hide",s.hide),l||(e.on("focus",render),e.on("blur",s.hide)),e.on("init",(function(){(e.hasFocus()||l)&&render()})),$w(e,t);var d={show:render,hide:s.hide,setEnabled:function setEnabled(e){Hw(t,!e)},isEnabled:function isEnabled(){return!tg.isDisabled(a.outerContainer)}};return{editorContainer:a.outerContainer.element.dom,api:d}}}),_I="contexttoolbar-hide",DI=function runOnExecute(e,t){return Aa(mA,(function(n,o){var i=function getFormApi(e){return{hide:function hide(){return ya(e,ta())},getValue:function getValue(){return Rd.getValue(e)}}}(e.get(n));t.onAction(i,o.event.buttonApi)}))},RI=function generateOne(e,t,n){return function isToggleButton(e){return"contextformtogglebutton"===e.type}(t)?function renderContextToggleButton(e,t,n){var o=t.original,i=(o.primary,c(o,C)),a=Ao(ew(s(s({},i),{},{type:"togglebutton",onAction:F})));return aI(a,n,[DI(e,t)])}(e,t,n):function renderContextButton(e,t,n){var o=t.original,i=(o.primary,c(o,y)),a=Ao(XC(s(s({},i),{},{type:"button",onAction:F})));return iI(a,n,[DI(e,t)])}(e,t,n)},NI=function buildInitGroups(e,t){var n=e.label.fold((function(){return{}}),(function(e){return{"aria-label":e}})),o=dv(tC.sketch({inputClasses:["tox-toolbar-textfield","tox-toolbar-nav-js"],data:e.initValue(),inputAttributes:n,selectOnFocus:!0,inputBehaviours:ks([ch.config({mode:"special",onEnter:function onEnter(e){return i.findPrimary(e).map((function(e){return wa(e),!0}))},onLeft:function onLeft(e,t){return t.cut(),K.none()},onRight:function onRight(e,t){return t.cut(),K.none()}})])})),i=function generate(e,t,n){var o=ae(t,(function(t){return dv(RI(e,t,n))}));return{asSpecs:function asSpecs(){return ae(o,(function(e){return e.asSpec()}))},findPrimary:function findPrimary(e){return Ee(t,(function(t,n){return t.primary?K.from(o[n]).bind((function(t){return t.getOpt(e)})).filter(Z(tg.isDisabled)):K.none()}))}}}(o,e.commands,t);return[{title:K.none(),items:[o.asSpec()]},{title:K.none(),items:i.asSpecs()}]},MI=NI,BI=function isVerticalOverlap(e,t,n){return t.bottom-e.y>=n&&e.bottom-t.y>=n},II=function getSelectionBounds(e){var t=function getRangeRect(e){var t=e.getBoundingClientRect();if(t.height<=0&&t.width<=0){var n=Rt(nt.fromDom(e.startContainer),e.startOffset).element;return(dt(n)?kt(n):K.some(n)).filter(ft).map((function(e){return e.dom.getBoundingClientRect()})).getOr(t)}return t}(e.selection.getRng());if(e.inline){var n=sr();return yr(n.left+t.left,n.top+t.top,t.width,t.height)}var o=wr(nt.fromDom(e.getBody()));return yr(o.x+t.left,o.y+t.top,t.width,t.height)},PI=function getContextToolbarBounds(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,i=dr(window),a=Cr(nt.fromDom(e.getContentAreaContainer())),u=fy(e)||py(e)||vy(e),c=function getHorizontalBounds(e,t,n){var o=Math.max(e.x+n,t.x);return{x:o,width:Math.min(e.right-n,t.right)-o}}(a,i,o),s=c.x,l=c.width;if(e.inline&&!u)return yr(s,i.y,l,i.height);var d=function getVerticalBounds(e,t,n,o,i,a){var u=nt.fromDom(e.getContainer()),c=fc(u,".tox-editor-header").getOr(u),s=Cr(c),l=s.y>=t.bottom,d=o&&!l;if(e.inline&&d)return{y:Math.max(s.bottom+a,n.y),bottom:n.bottom};if(e.inline&&!d)return{y:n.y,bottom:Math.min(s.y-a,n.bottom)};var m="line"===i?Cr(u):t;return d?{y:Math.max(s.bottom+a,n.y),bottom:Math.min(m.bottom-a,n.bottom)}:{y:Math.max(m.y+a,n.y),bottom:Math.min(s.y-a,n.bottom)}}(e,a,i,t.header.isPositionedAtTop(),n,o),m=d.y,g=d.bottom;return yr(s,m,l,g-m)},LI={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"],inset:["tox-pop--inset"]},FI={maxHeightFunction:vl(),maxWidthFunction:aM()},HI=function shouldUseInsetLayouts(e){return"node"===e},$I=function determineInsetLayout(e,t,n,o,i){var a=II(e),u=o.lastElement().exists((function(e){return bt(n,e)}));return function isEntireElementSelected(e,t){var n=e.selection.getRng(),o=Rt(nt.fromDom(n.startContainer),n.startOffset);return n.startContainer===n.endContainer&&n.startOffset===n.endOffset-1&&bt(o.element,t)}(e,n)?u?OD:xD:u?function preservePosition(e,t,n){var o=an(e,"position");Qt(e,"position",t);var i=n(e);return o.each((function(t){return Qt(e,"position",t)})),i}(t,o.getMode(),(function(){return BI(a,Cr(t),-20)&&!o.isReposition()?_D:OD})):("fixed"===o.getMode()?i.y+sr().top:i.y)+(mn(t)+12)<=a.y?xD:SD},zI=function getAnchorSpec$2(e,t,n,o){var i=function smartInsetLayout(t){return function(o,i,a,u,c){var l=$I(e,u,t,n,c),d=s(s({},o),{},{y:c.y,height:c.height});return s(s({},l(d,i,a,u,c)),{},{alwaysFit:!0})}},a=function getInsetLayouts(e){return HI(o)?[i(e)]:[]};return t?{onLtr:function onLtr(e){return[ss,rs,os,as,us,cs].concat(a(e))},onRtl:function onRtl(e){return[ss,os,rs,us,as,cs].concat(a(e))}}:{onLtr:function onLtr(e){return[cs,ss,as,rs,us,os].concat(a(e))},onRtl:function onRtl(e){return[cs,ss,us,os,as,rs].concat(a(e))}}},VI=function matchTargetWith(e,t){var n=se(t,(function(t){return t.predicate(e.dom)})),o=ce(n,(function(e){return"contexttoolbar"===e.type}));return{contextToolbars:o.pass,contextForms:o.fail}},UI=function matchStartNode(e,t,n){var o=VI(e,t);if(o.contextForms.length>0)return K.some({elem:e,toolbars:[o.contextForms[0]]});var i=VI(e,n);if(i.contextForms.length>0)return K.some({elem:e,toolbars:[i.contextForms[0]]});if(o.contextToolbars.length>0||i.contextToolbars.length>0){var a=function filterByPositionForStartNode(e){if(e.length<=1)return e;var t=function doesPositionExist(t){return re(e,(function(e){return e.position===t}))},n=function filterToolbarsByPosition(t){return se(e,(function(e){return e.position===t}))},o=t("selection"),i=t("node");if(o||i){if(i&&o){var a=n("node"),u=ae(n("selection"),(function(e){return s(s({},e),{},{position:"node"})}));return a.concat(u)}return n(o?"selection":"node")}return n("line")}(o.contextToolbars.concat(i.contextToolbars));return K.some({elem:e,toolbars:a})}return K.none()},ZI=function matchAncestor(e,t,n){return e(t)?K.none():bi(t,(function(e){if(ft(e)){var t=VI(e,n.inNodeScope),o=t.contextToolbars,i=t.contextForms,a=i.length>0?i:function filterByPositionForAncestorNode(e){if(e.length<=1)return e;var t=function findPosition(t){return de(e,(function(e){return e.position===t}))},n=t("selection").orThunk((function(){return t("node")})).orThunk((function(){return t("line")})).map((function(e){return e.position}));return n.fold((function(){return[]}),(function(t){return se(e,(function(e){return e.position===t}))}))}(o);return a.length>0?K.some({elem:e,toolbars:a}):K.none()}return K.none()}),e)},WI=function categorise(e,t){var n={},o=[],i=[],a={},u={},c=function registerForm(e,c){var l=Ao(function createContextForm(e){return Oo("ContextForm",uw,e)}(c));n[e]=l,l.launch.map((function(n){a["form:"+e]=s(s({},c.launch),{},{type:"contextformtogglebutton"===n.type?"togglebutton":"button",onAction:function onAction(){t(l)}})})),"editor"===l.scope?i.push(l):o.push(l),u[e]=l},l=function registerToolbar(e,t){(function createContextToolbar(e){return Oo("ContextToolbar",cw,e)})(t).each((function(n){"editor"===t.scope?i.push(n):o.push(n),u[e]=n}))},d=Oe(e);return ue(d,(function(t){var n=e[t];"contextform"===n.type?c(t,n):"contexttoolbar"===n.type&&l(t,n)})),{forms:n,inNodeScope:o,inEditorScope:i,lookupTable:u,formNavigators:a}},jI=qa("forward-slide"),GI=qa("backward-slide"),qI=qa("change-slide-event"),KI="tox-pop--resizing",YI="tox-pop--transition",XI=function register$9(e,t,n,o){var i=o.backstage,a=i.shared,u=Xn().deviceType.isTouch,c=nl(),l=nl(),d=nl(),m=nc(function renderContextToolbar(e){var t=si([]);return cv.sketch({dom:{tag:"div",classes:["tox-pop"]},fireDismissalEventInstead:{event:"doNotDismissYet"},onShow:function onShow(e){t.set([]),cv.getContent(e).each((function(e){sn(e.element,"visibility")})),Nu(e.element,KI),sn(e.element,"width")},inlineBehaviours:ks([bh("context-toolbar-events",[Ia(Vi(),(function(e,t){"width"===t.event.raw.propertyName&&(Nu(e.element,KI),sn(e.element,"width"))})),Aa(qI,(function(e,t){var n=e.element;sn(n,"width");var o=Cn(n);cv.setContent(e,t.event.contents),Du(n,KI);var i=Cn(n);Qt(n,"width",o+"px"),cv.getContent(e).each((function(e){t.event.focus.bind((function(e){return Ns(e),Ps(n)})).orThunk((function(){return ch.focusIn(e),Is(It(n))}))})),setTimeout((function(){Qt(e.element,"width",i+"px")}),0)})),Aa(jI,(function(e,n){cv.getContent(e).each((function(n){t.set(t.get().concat([{bar:n,focus:Is(It(e.element))}]))})),Ca(e,qI,{contents:n.event.forwardContents,focus:K.none()})})),Aa(GI,(function(e,n){ke(t.get()).each((function(n){t.set(t.get().slice(0,t.get().length-1)),Ca(e,qI,{contents:oc(n.bar),focus:n.focus})}))}))]),ch.config({mode:"special",onEscape:function onEscape(n){return ke(t.get()).fold((function(){return e.onEscape()}),(function(e){return ya(n,GI),K.some(!0)}))}})]),lazySink:function lazySink(){return Or.value(e.sink)}})}({sink:n,onEscape:function onEscape(){return e.focus(),K.some(!0)}})),g=function getBounds(){var t=d.get().getOr("node"),n=HI(t)?1:0;return PI(e,a,t,n)},p=function canLaunchToolbar(){return!e.removed&&!(u()&&i.isContextMenuOpen())},h=function shouldContextToolbarHide(){if(p()){var t=g(),n=ze(d.get(),"node")?function getAnchorElementBounds(e,t){return t.filter((function(e){return zt(e)&&lt(e)})).map(wr).getOrThunk((function(){return II(e)}))}(e,c.get()):II(e);return t.height<=0||!BI(n,t,.01)}return!0},v=function close(){c.clear(),l.clear(),d.clear(),cv.hide(m)},b=function hideOrRepositionIfNecessary(){if(cv.isOpen(m)){var e=m.element;sn(e,"display"),h()?Qt(e,"display","none"):(l.set(0),cv.reposition(m))}},y=function wrapInPopDialog(t){return{dom:{tag:"div",classes:["tox-pop__dialog"]},components:[t],behaviours:ks([ch.config({mode:"acyclic"}),bh("pop-dialog-wrap-events",[Pa((function(t){e.shortcuts.add("ctrl+F9","focus statusbar",(function(){return ch.focusIn(t)}))})),La((function(t){e.shortcuts.remove("ctrl+F9")}))])])}},C=xn((function(){return WI(t,(function(e){var t=w([e]);Ca(m,jI,{forwardContents:y(t)})}))})),w=function buildToolbar(t){var n=e.ui.registry.getAll().buttons,i=C(),u=s(s({},n),i.formNavigators),c=Fb(e)===rb.scrolling?rb.scrolling:rb.default,l=ge(ae(t,(function(t){return"contexttoolbar"===t.type?function buildContextToolbarGroups(t,n){return gI(e,{buttons:t,toolbar:n.items,allowToolbarGroups:!1},o.backstage,K.some(["form:"]))}(u,t):function buildContextFormGroups(e,t){return MI(e,t)}(t,a.providers)})));return RM({type:c,uid:qa("context-toolbar"),initGroups:l,onEscape:K.none,cyclicKeying:!0,providers:a.providers})},x=function getAnchor(t,o){var i="node"===t?a.anchors.node(o):a.anchors.cursor(),s=function getAnchorLayout(e,t,n,o){return"line"===t?{bubble:wl(12,0,LI),layouts:{onLtr:function onLtr(){return[ls]},onRtl:function onRtl(){return[fs]}},overrides:FI}:{bubble:wl(0,12,LI,1/12),layouts:zI(e,n,o,t),overrides:FI}}(e,t,u(),{lastElement:c.get,isReposition:function isReposition(){return ze(l.get(),0)},getMode:function getMode(){return Ff.getMode(n)}});return Zr(i,s)},S=function launchContext(e,t){if(T.cancel(),p()){var o=w(e),i=e[0].position,a=x(i,t);d.set(i),l.set(1);var u=m.element;sn(u,"display"),function isSameLaunchElement(e){return ze(Ue(e,c.get(),bt),!0)}(t)||(Nu(u,YI),Ff.reset(n,m)),cv.showWithinBounds(m,y(o),{anchor:a,transition:{classes:[YI],mode:"placement"}},(function(){return K.some(g())})),t.fold(c.clear,c.set),h()&&Qt(u,"display","none")}},k=!1,T=zO((function(){!e.hasFocus()||e.removed||k||(Bu(m.element,YI)?T.throttle():function lookup$1(e,t){var n=nt.fromDom(t.getBody()),o=function isRoot(e){return bt(e,n)},i=nt.fromDom(t.selection.getNode());return function isOutsideRoot(e){return!o(e)&&!yt(n,e)}(i)?K.none():UI(i,e.inNodeScope,e.inEditorScope).orThunk((function(){return ZI(o,i,e)}))}(C(),e).fold(v,(function(e){S(e.toolbars,K.some(e.elem))})))}),17);e.on("init",(function(){e.on("remove",v),e.on("ScrollContent ScrollWindow ObjectResized ResizeEditor longpress",b),e.on("click keyup focus SetContent",T.throttle),e.on(_I,v),e.on("contexttoolbar-show",(function(t){var n=C();Fe(n.lookupTable,t.toolbarKey).each((function(n){S([n],We(t.target!==e,t.target)),cv.getContent(m).each(ch.focusIn)}))})),e.on("focusout",(function(t){sv.setEditorTimeout(e,(function(){Ps(n.element).isNone()&&Ps(m.element).isNone()&&v()}),0)})),e.on("SwitchMode",(function(){e.mode.isReadOnly()&&v()})),e.on("AfterProgressState",(function(t){t.state?v():e.hasFocus()&&T.throttle()})),e.on("dragstart",(function(){k=!0})),e.on("dragend drop",(function(){k=!1})),e.on("NodeChange",(function(e){Ps(m.element).fold(T.throttle,F)}))}))},JI=function registerController(e,t){var n=function getMenuItems(){var n=t.getOptions(e),o=t.getCurrent(e).map(t.hash),i=nl();return ae(n,(function(n){return{type:"togglemenuitem",text:t.display(n),onSetup:function onSetup(a){var u=function setActive(e){e&&(i.on((function(e){return e.setActive(!1)})),i.set(a)),a.setActive(e)};u(ze(o,t.hash(n)));var c=t.watcher(e,n,u);return function(){i.clear(),c()}},onAction:function onAction(){return t.setCurrent(e,n)}}}))};e.ui.registry.addMenuButton(t.name,{tooltip:t.text,icon:t.icon,fetch:function fetch(e){return e(n())},onSetup:t.onToolbarSetup}),e.ui.registry.addNestedMenuItem(t.name,{type:"nestedmenuitem",text:t.text,getSubmenuItems:n,onSetup:t.onMenuSetup})},QI=function lineHeightSpec(e){return{name:"lineheight",text:"Line height",icon:"line-height",getOptions:gy,hash:function hash(e){return function normalise(e,t){return LB(e,t).map((function(e){return e.value+e.unit}))}(e,["fixed","relative","empty"]).getOr(e)},display:V,watcher:function watcher(e,t,n){return e.formatter.formatChanged("lineheight",n,!1,{value:t}).unbind},getCurrent:function getCurrent(e){return K.from(e.queryCommandValue("LineHeight"))},setCurrent:function setCurrent(e,t){return e.execCommand("LineHeight",!1,t)},onToolbarSetup:Hx(e),onMenuSetup:Hx(e)}},eP=function register$7(e){JI(e,QI(e)),function languageSpec(e){return K.from(Pb(e)).map((function(t){return{name:"language",text:"Language",icon:"language",getOptions:z(t),hash:function hash(e){return N(e.customCode)?e.code:"".concat(e.code,"/").concat(e.customCode)},display:function display(e){return e.title},watcher:function watcher(e,t,n){var o;return e.formatter.formatChanged("lang",n,!1,{value:t.code,customValue:null!==(o=t.customCode)&&void 0!==o?o:null}).unbind},getCurrent:function getCurrent(e){var t=nt.fromDom(e.selection.getNode());return yi(t,(function(e){return K.some(e).filter(ft).bind((function(e){return qt(e,"lang").map((function(t){return{code:t,customCode:qt(e,"data-mce-lang").getOrUndefined(),title:""}}))}))}))},setCurrent:function setCurrent(e,t){return e.execCommand("Lang",!1,t)},onToolbarSetup:function onToolbarSetup(t){var n=tl();return t.setActive(e.formatter.match("lang",{},void 0,!0)),n.set(e.formatter.formatChanged("lang",t.setActive,!0)),Fx(n.clear,Hx(e)(t))},onMenuSetup:Hx(e)}}))}(e).each((function(t){return JI(e,t)}))},tP=function register$6(e,t){!function createAlignMenu(e,t){var n=vB(0,t,kB(e));e.ui.registry.addNestedMenuItem("align",{text:t.shared.providers.translate("Align"),onSetup:Hx(e),getSubmenuItems:function getSubmenuItems(){return n.items.validateItems(n.getStyleItems())}})}(e,t),function createFontFamilyMenu(e,t){var n=vB(0,t,BB(e));e.ui.registry.addNestedMenuItem("fontfamily",{text:t.shared.providers.translate("Fonts"),onSetup:Hx(e),getSubmenuItems:function getSubmenuItems(){return n.items.validateItems(n.getStyleItems())}})}(e,t),function createStylesMenu(e,t){var n=s({type:"advanced"},t.styles),o=vB(0,t,GB(e,n));e.ui.registry.addNestedMenuItem("styles",{text:"Formats",onSetup:Hx(e),getSubmenuItems:function getSubmenuItems(){return o.items.validateItems(o.getStyleItems())}})}(e,t),function createBlocksMenu(e,t){var n=vB(0,t,AB(e));e.ui.registry.addNestedMenuItem("blocks",{text:"Blocks",onSetup:Hx(e),getSubmenuItems:function getSubmenuItems(){return n.items.validateItems(n.getStyleItems())}})}(e,t),function createFontSizeMenu(e,t){var n=vB(0,t,WB(e));e.ui.registry.addNestedMenuItem("fontsize",{text:"Font sizes",onSetup:Hx(e),getSubmenuItems:function getSubmenuItems(){return n.items.validateItems(n.getStyleItems())}})}(e,t)},nP=function onSetupOutdentState(e){return zx(e,"NodeChange",(function(t){t.setEnabled(e.queryCommandState("outdent")&&e.selection.isEditable())}))},rP=function register$5(e){!function registerButtons$2(e){e.ui.registry.addButton("outdent",{tooltip:"Decrease indent",icon:"outdent",onSetup:nP(e),onAction:Ux(e,"outdent")}),e.ui.registry.addButton("indent",{tooltip:"Increase indent",icon:"indent",onSetup:Hx(e),onAction:Ux(e,"indent")})}(e)},oP=function makeSetupHandler(e,t){return function(n){n.setActive(t.get());var o=function pastePlainTextToggleHandler(e){t.set(e.state),n.setActive(e.state)};return e.on("PastePlainTextToggle",o),Fx((function(){return e.off("PastePlainTextToggle",o)}),Hx(e)(n))}},iP=function onActionToggleFormat(e,t){return function(){e.execCommand("mceToggleFormat",!1,t)}},aP=function registerButtons$1(e){!function registerFormatButtons(e){HO.each([{name:"bold",text:"Bold",icon:"bold"},{name:"italic",text:"Italic",icon:"italic"},{name:"underline",text:"Underline",icon:"underline"},{name:"strikethrough",text:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",icon:"superscript"}],(function(t,n){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:$x(e,t.name),onAction:iP(e,t.name)})}));for(var t=1;t<=6;t++){var n="h"+t;e.ui.registry.addToggleButton(n,{text:n.toUpperCase(),tooltip:"Heading "+t,onSetup:$x(e,n),onAction:iP(e,n)})}}(e),function registerCommandButtons(e){HO.each([{name:"copy",text:"Copy",action:"Copy",icon:"copy"},{name:"help",text:"Help",action:"mceHelp",icon:"help"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all"},{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"print",text:"Print",action:"mcePrint",icon:"print"}],(function(t){e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onAction:Ux(e,t.action)})})),HO.each([{name:"cut",text:"Cut",action:"Cut",icon:"cut"},{name:"paste",text:"Paste",action:"Paste",icon:"paste"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"remove",text:"Remove",action:"Delete",icon:"remove"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],(function(t){e.ui.registry.addButton(t.name,{tooltip:t.text,icon:t.icon,onSetup:Hx(e),onAction:Ux(e,t.action)})}))}(e),function registerCommandToggleButtons(e){HO.each([{name:"blockquote",text:"Blockquote",action:"mceBlockQuote",icon:"quote"}],(function(t){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:Ux(e,t.action),onSetup:$x(e,t.name)})}))}(e)},uP=function register$3(e){aP(e),function registerMenuItems$2(e){HO.each([{name:"newdocument",text:"New document",action:"mceNewDocument",icon:"new-document"},{name:"copy",text:"Copy",action:"Copy",icon:"copy",shortcut:"Meta+C"},{name:"selectall",text:"Select all",action:"SelectAll",icon:"select-all",shortcut:"Meta+A"},{name:"print",text:"Print...",action:"mcePrint",icon:"print",shortcut:"Meta+P"}],(function(t){e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onAction:Ux(e,t.action)})})),HO.each([{name:"bold",text:"Bold",action:"Bold",icon:"bold",shortcut:"Meta+B"},{name:"italic",text:"Italic",action:"Italic",icon:"italic",shortcut:"Meta+I"},{name:"underline",text:"Underline",action:"Underline",icon:"underline",shortcut:"Meta+U"},{name:"strikethrough",text:"Strikethrough",action:"Strikethrough",icon:"strike-through"},{name:"subscript",text:"Subscript",action:"Subscript",icon:"subscript"},{name:"superscript",text:"Superscript",action:"Superscript",icon:"superscript"},{name:"removeformat",text:"Clear formatting",action:"RemoveFormat",icon:"remove-formatting"},{name:"cut",text:"Cut",action:"Cut",icon:"cut",shortcut:"Meta+X"},{name:"paste",text:"Paste",action:"Paste",icon:"paste",shortcut:"Meta+V"},{name:"hr",text:"Horizontal line",action:"InsertHorizontalRule",icon:"horizontal-rule"}],(function(t){e.ui.registry.addMenuItem(t.name,{text:t.text,icon:t.icon,shortcut:t.shortcut,onSetup:Hx(e),onAction:Ux(e,t.action)})})),e.ui.registry.addMenuItem("codeformat",{text:"Code",icon:"sourcecode",onSetup:Hx(e),onAction:iP(e,"code")})}(e)},cP=function onSetupUndoRedoState(e,t){return zx(e,"Undo Redo AddUndo TypingUndo ClearUndos SwitchMode",(function(n){n.setEnabled(!e.mode.isReadOnly()&&e.undoManager[t]())}))},sP=function register$2(e){!function registerMenuItems$1(e){e.ui.registry.addMenuItem("undo",{text:"Undo",icon:"undo",shortcut:"Meta+Z",onSetup:cP(e,"hasUndo"),onAction:Ux(e,"undo")}),e.ui.registry.addMenuItem("redo",{text:"Redo",icon:"redo",shortcut:"Meta+Y",onSetup:cP(e,"hasRedo"),onAction:Ux(e,"redo")})}(e),function registerButtons(e){e.ui.registry.addButton("undo",{tooltip:"Undo",icon:"undo",enabled:!1,onSetup:cP(e,"hasUndo"),onAction:Ux(e,"undo")}),e.ui.registry.addButton("redo",{tooltip:"Redo",icon:"redo",enabled:!1,onSetup:cP(e,"hasRedo"),onAction:Ux(e,"redo")})}(e)},lP=function onSetupVisualAidState(e){return zx(e,"VisualAid",(function(t){t.setActive(e.hasVisual)}))},fP=function register$1(e){!function registerToolbarButton(e){e.ui.registry.addButton("visualaid",{tooltip:"Visual aids",text:"Visual aids",onAction:Ux(e,"mceToggleVisualAid")})}(e),function registerMenuItems(e){e.ui.registry.addToggleMenuItem("visualaid",{text:"Visual aids",onSetup:lP(e),onAction:Ux(e,"mceToggleVisualAid")})}(e)},dP=function setup$6(e,t){!function register$8(e){ue([{name:"alignleft",text:"Align left",cmd:"JustifyLeft",icon:"align-left"},{name:"aligncenter",text:"Align center",cmd:"JustifyCenter",icon:"align-center"},{name:"alignright",text:"Align right",cmd:"JustifyRight",icon:"align-right"},{name:"alignjustify",text:"Justify",cmd:"JustifyFull",icon:"align-justify"}],(function(t){e.ui.registry.addToggleButton(t.name,{tooltip:t.text,icon:t.icon,onAction:Ux(e,t.cmd),onSetup:$x(e,t.name)})})),e.ui.registry.addButton("alignnone",{tooltip:"No alignment",icon:"align-none",onSetup:Hx(e),onAction:Ux(e,"JustifyNone")})}(e),uP(e),tP(e,t),sP(e),function register$c(e){!function registerCommands(e){e.addCommand("mceApplyTextcolor",(function(t,n){!function applyFormat(e,t,n){e.undoManager.transact((function(){e.focus(),e.formatter.apply(t,{value:n}),e.nodeChanged()}))}(e,t,n)})),e.addCommand("mceRemoveTextcolor",(function(t){!function removeFormat(e,t){e.undoManager.transact((function(){e.focus(),e.formatter.remove(t,{value:null},void 0,!0),e.nodeChanged()}))}(e,t)}))}(e);var t=cS(e),n=sS(e),o=si(t),i=si(n);CS(e,"forecolor","forecolor",o),CS(e,"backcolor","hilitecolor",i),wS(e,"forecolor","forecolor","Text color",o),wS(e,"backcolor","hilitecolor","Background color",i)}(e),fP(e),rP(e),eP(e),function register$4(e){var t=si(iy(e)),n=function onAction(){return e.execCommand("mceTogglePlainTextPaste")};e.ui.registry.addToggleButton("pastetext",{active:!1,icon:"paste-text",tooltip:"Paste as text",onAction:n,onSetup:oP(e,t)}),e.ui.registry.addToggleMenuItem("pastetext",{text:"Paste as text",icon:"paste-text",onAction:n,onSetup:oP(e,t)})}(e)},mP=function patchPipeConfig(e){return T(e)?e.split(/[ ,]/):e},gP=function option(e){return function(t){return t.options.get(e)}},pP=gP("contextmenu_never_use_native"),hP=gP("contextmenu_avoid_overlap"),vP=function getContextMenu(e){var t=e.ui.registry.getAll().contextMenus,n=e.options.get("contextmenu");return e.options.isSet("contextmenu")?n:se(n,(function(e){return He(t,e)}))},bP=function nu(e,t){return{type:"makeshift",x:e,y:t}},yP=function isTouchEvent$1(e){return"longpress"===e.type||0===e.type.indexOf("touch")},CP=function transposeContentAreaContainer(e,t){var n=yb.DOM.getPos(e);return function transpose(e,t,n){return bP(e.x+t,e.y+n)}(t,n.x,n.y)},wP=function getPointAnchor(e,t){return"contextmenu"===t.type||"longpress"===t.type?e.inline?function fromPageXY(e){if(yP(e)){var t=e.touches[0];return bP(t.pageX,t.pageY)}return bP(e.pageX,e.pageY)}(t):CP(e.getContentAreaContainer(),function fromClientXY(e){if(yP(e)){var t=e.touches[0];return bP(t.clientX,t.clientY)}return bP(e.clientX,e.clientY)}(t)):xP(e)},xP=function getSelectionAnchor(e){return{type:"selection",root:nt.fromDom(e.selection.getNode())}},SP=function getAnchorSpec$1(e,t,n){switch(n){case"node":return function getNodeAnchor(e){return{type:"node",node:K.some(nt.fromDom(e.selection.getNode())),root:nt.fromDom(e.getBody())}}(e);case"point":return wP(e,t);case"selection":return xP(e)}},kP=function initAndShow$1(e,t,n,o,i,a){var u=n(),c=SP(e,t,a);DA(u,Ny.CLOSE_ON_EXECUTE,o,{isHorizontalMenu:!1,search:K.none()}).map((function(e){t.preventDefault(),cv.showMenuAt(i,{anchor:c},{menu:{markers:Gy("normal")},data:e})}))},TP={onLtr:function onLtr(){return[ss,rs,os,as,us,cs,xD,SD,wD,yD,CD,bD]},onRtl:function onRtl(){return[ss,os,rs,us,as,cs,xD,SD,CD,bD,wD,yD]}},EP={valignCentre:[],alignCentre:[],alignLeft:["tox-pop--align-left"],alignRight:["tox-pop--align-right"],right:["tox-pop--right"],left:["tox-pop--left"],bottom:["tox-pop--bottom"],top:["tox-pop--top"]},OP=function show(e,t,n,o,i,a,u){var c=function getAnchorSpec(e,t,n){var o=SP(e,t,n);return s({bubble:wl(0,"point"===n?12:0,EP),layouts:TP,overrides:{maxWidthFunction:aM(),maxHeightFunction:vl()}},o)}(e,t,a);DA(n,Ny.CLOSE_ON_EXECUTE,o,{isHorizontalMenu:!0,search:K.none()}).map((function(n){t.preventDefault();var s=u?Ig.HighlightMenuAndItem:Ig.HighlightNone;cv.showMenuWithinBounds(i,{anchor:c},{menu:{markers:Gy("normal"),highlightOnOpen:s},data:n,type:"horizontal"},(function(){return K.some(PI(e,o.shared,"node"===a?"node":"selection"))})),e.dispatch(_I)}))},AP=function initAndShow(e,t,n,o,i,a){var u=Xn(),c=u.os.isiOS(),s=u.os.isMacOS(),l=u.os.isAndroid(),d=u.deviceType.isTouch(),m=function open(){var u=n();OP(e,t,u,o,i,a,function shouldHighlightImmediately(){return!(l||c||s&&d)}())};if((s||c)&&"node"!==a){var g=function openiOS(){!function setupiOSOverrides(e){var t=e.selection.getRng(),n=function selectionReset(){sv.setEditorTimeout(e,(function(){e.selection.setRng(t)}),10),a()};e.once("touchend",n);var o=function preventMousedown(e){e.preventDefault(),e.stopImmediatePropagation()};e.on("mousedown",o,!0);var i=function clearSelectionReset(){return a()};e.once("longpresscancel",i);var a=function unbindEventListeners(){e.off("touchend",n),e.off("longpresscancel",i),e.off("mousedown",o)}}(e),m()};!function isTouchWithinSelection(e,t){var n=e.selection;if(n.isCollapsed()||t.touches.length<1)return!1;var o=t.touches[0],i=n.getRng();return sf(e.getWin(),Gl.domRange(i)).exists((function(e){return e.left<=o.clientX&&e.right>=o.clientX&&e.top<=o.clientY&&e.bottom>=o.clientY}))}(e,t)?(e.once("selectionchange",g),e.once("touchend",(function(){return e.off("selectionchange",g)}))):g()}else m()},_P=function isSeparator(e){return T(e)?"|"===e:"separator"===e.type},DP={type:"separator"},RP=function makeContextItem(e){var t=function commonMenuItem(e){return{text:e.text,icon:e.icon,enabled:e.enabled,shortcut:e.shortcut}};if(T(e))return e;switch(e.type){case"separator":return DP;case"submenu":return s(s({type:"nestedmenuitem"},t(e)),{},{getSubmenuItems:function getSubmenuItems(){var t=e.getSubmenuItems();return T(t)?t:ae(t,makeContextItem)}});default:var n=e;return s(s({type:"menuitem"},t(n)),{},{onAction:H(n.onAction)})}},NP=function addContextMenuGroup(e,t){if(0===t.length)return e;var n=ke(e).filter((function(e){return!_P(e)})),o=n.fold((function(){return[]}),(function(e){return[DP]}));return e.concat(o).concat(t).concat([DP])},MP=function isTriggeredByKeyboard(e,t){return!function isTouchEvent(e){return"longpress"===e.type||He(e,"touches")}(t)&&(2!==t.button||t.target===e.getBody()&&""===t.pointerType)},BP=function getSelectedElement(e,t){return MP(e,t)?e.selection.getStart(!0):t.target},IP=function setup$5(e,t,n){var o=Xn().deviceType.isTouch,i=nc(cv.sketch({dom:{tag:"div"},lazySink:t,onEscape:function onEscape(){return e.focus()},onShow:function onShow(){return n.setContextMenuState(!0)},onHide:function onHide(){return n.setContextMenuState(!1)},fireDismissalEventInstead:{},inlineBehaviours:ks([bh("dismissContextMenu",[Aa(la(),(function(t,n){fd.close(t),e.focus()}))])])})),a=function hideContextMenu(){return cv.hide(i)},u=function showContextMenu(t){if(pP(e)&&t.preventDefault(),!function isNativeOverrideKeyEvent(e,t){return t.ctrlKey&&!pP(e)}(e,t)&&!function isContextMenuDisabled(e){return 0===vP(e).length}(e)){var a=function getAnchorType(e,t){var n=hP(e),o=MP(e,t)?"selection":"point";if(Je(n)){var i=BP(e,t);return _k(nt.fromDom(i),n)?"node":o}return o}(e,t);(o()?AP:kP)(e,t,(function buildMenu(){var n=BP(e,t),o=e.ui.registry.getAll(),i=vP(e);return function generateContextMenu(e,t,n){var o=fe(t,(function(t,o){return Fe(e,o.toLowerCase()).map((function(e){var o=e.update(n);if(T(o)&&Je(Xe(o)))return NP(t,o.split(" "));if(A(o)&&o.length>0){var i=ae(o,RP);return NP(t,i)}return t})).getOrThunk((function(){return t.concat([o])}))}),[]);return o.length>0&&_P(o[o.length-1])&&o.pop(),o}(o.contextMenus,i,n)}),n,i,a)}};e.on("init",(function(){var t="ResizeEditor ScrollContent ScrollWindow longpresscancel"+(o()?"":" ResizeWindow");e.on(t,a),e.on("longpress contextmenu",u)}))},PP=li([{offset:["x","y"]},{absolute:["x","y"]},{fixed:["x","y"]}]),LP=function subtract(e){return function(t){return t.translate(-e.left,-e.top)}},FP=function add(e){return function(t){return t.translate(e.left,e.top)}},HP=function transform(e){return function(t,n){return fe(e,(function(e,t){return t(e)}),pn(t,n))}},$P=function asFixed(e,t,n){return e.fold(HP([FP(n),LP(t)]),HP([LP(t)]),HP([]))},zP=function asAbsolute(e,t,n){return e.fold(HP([FP(n)]),HP([]),HP([FP(t)]))},VP=function asOffset(e,t,n){return e.fold(HP([]),HP([LP(n)]),HP([FP(t),LP(n)]))},UP=function toStyles(e,t,n){var o=e.fold((function(e,t){return{position:K.some("absolute"),left:K.some(e+"px"),top:K.some(t+"px")}}),(function(e,t){return{position:K.some("absolute"),left:K.some(e-n.left+"px"),top:K.some(t-n.top+"px")}}),(function(e,t){return{position:K.some("fixed"),left:K.some(e+"px"),top:K.some(t+"px")}}));return s({right:K.none(),bottom:K.none()},o)},ZP=function absorb(e,t,n,o){var i=function absorbOne(e,i){return function(a,u){var c=e(t,n,o);return i(a.getOr(c.left),u.getOr(c.top))}};return e.fold(i(VP,WP),i(zP,jP),i($P,GP))},WP=PP.offset,jP=PP.absolute,GP=PP.fixed,qP=function parseAttrToInt(e,t){var n=Gt(e,t);return N(n)?NaN:parseInt(n,10)},KP=function getCoords(e,t,n,o){return function get(e,t){var n=e.element,o=qP(n,t.leftAttr),i=qP(n,t.topAttr);return isNaN(o)||isNaN(i)?K.none():K.some(pn(o,i))}(e,t).fold((function(){return n}),(function(e){return GP(e.left+o.left,e.top+o.top)}))},YP=function moveOrSnap(e,t,n,o,i,a){var u=KP(e,t,n,o),c=t.mustSnap?QP(e,t,u,i,a):eL(e,t,u,i,a),s=$P(u,i,a);return function set(e,t,n){var o=e.element;Wt(o,t.leftAttr,n.left+"px"),Wt(o,t.topAttr,n.top+"px")}(e,t,s),c.fold((function(){return{coord:GP(s.left,s.top),extra:K.none()}}),(function(e){return{coord:e.output,extra:e.extra}}))},XP=function stopDrag(e,t){!function clear(e,t){var n=e.element;Yt(n,t.leftAttr),Yt(n,t.topAttr)}(e,t)},JP=function findMatchingSnap(e,t,n,o){return Ee(e,(function(e){var i=e.sensor,a=function withinRange(e,t,n,o,i,a){var u=zP(e,i,a),c=zP(t,i,a);return Math.abs(u.left-c.left)<=n&&Math.abs(u.top-c.top)<=o}(t,i,e.range.left,e.range.top,n,o);return a?K.some({output:ZP(e.output,t,n,o),extra:e.extra}):K.none()}))},QP=function findClosestSnap(e,t,n,o,i){var a=t.getSnapPoints(e);return JP(a,n,o,i).orThunk((function(){var e=fe(a,(function(e,t){var a=t.sensor,u=function getDeltas(e,t,n,o,i,a){var u=zP(e,i,a),c=zP(t,i,a),s=Math.abs(u.left-c.left),l=Math.abs(u.top-c.top);return pn(s,l)}(n,a,t.range.left,t.range.top,o,i);return e.deltas.fold((function(){return{deltas:K.some(u),snap:K.some(t)}}),(function(n){return(u.left+u.top)/2<=(n.left+n.top)/2?{deltas:K.some(u),snap:K.some(t)}:e}))}),{deltas:K.none(),snap:K.none()});return e.snap.map((function(e){return{output:ZP(e.output,n,o,i),extra:e.extra}}))}))},eL=function findSnap(e,t,n,o,i){var a=t.getSnapPoints(e);return JP(a,n,o,i)},tL=Object.freeze({__proto__:null,snapTo:function snapTo(e,t,n,o){var i=t.getTarget(e.element);if(t.repositionTarget){var a=Ct(e.element),u=sr(a),c=FR(i),s=function snapTo$1(e,t,n){return{coord:ZP(e.output,e.output,t,n),extra:e.extra}}(o,u,c),l=UP(s.coord,0,c);tn(i,l)}}}),nL="data-initial-z-index",rL=function instigate(e,t){e.getSystem().addToGui(t),function changeZIndex(e){kt(e.element).filter(ft).each((function(t){an(t,"z-index").each((function(e){Wt(t,nL,e)})),Qt(t,"z-index",nn(e.element,"z-index"))}))}(t)},oL=function discard(e){!function resetZIndex(e){kt(e.element).filter(ft).each((function(e){qt(e,nL).fold((function(){return sn(e,"z-index")}),(function(t){return Qt(e,"z-index",t)})),Yt(e,nL)}))}(e),e.getSystem().removeFromGui(e)},iL=function createComponent(e,t,n){return e.getSystem().build(Vk.sketch({dom:{styles:{left:"0px",top:"0px",width:"100%",height:"100%",position:"fixed","z-index":"1000000000000000"},classes:[t]},events:n}))},aL=Jo("snaps",[Po("getSnapPoints"),Dc("onSensor"),Po("leftAttr"),Po("topAttr"),ei("lazyViewport",Sr),ei("mustSnap",!1)]),uL=[ei("useFixed",G),Po("blockerClass"),ei("getTarget",V),ei("onDrag",F),ei("repositionTarget",!0),ei("onDrop",F),ai("getBounds",Sr),aL],cL=function getCurrentCoord(e){return function lift3(e,t,n,o){return e.isSome()&&t.isSome()&&n.isSome()?K.some(o(e.getOrDie(),t.getOrDie(),n.getOrDie())):K.none()}(an(e,"left"),an(e,"top"),an(e,"position"),(function(e,t,n){return("fixed"===n?GP:WP)(parseInt(e,10),parseInt(t,10))})).getOrThunk((function(){var t=vn(e);return jP(t.left,t.top)}))},sL=function calcNewCoord(e,t,n,o,i,a,u){return function clampCoords(e,t,n,o,i){var a=i.bounds,u=zP(t,n,o),c=qc(u.left,a.x,a.x+a.width-i.width),s=qc(u.top,a.y,a.y+a.height-i.height),l=jP(c,s);return t.fold((function(){var e=VP(l,n,o);return WP(e.left,e.top)}),z(l),(function(){var e=$P(l,n,o);return GP(e.left,e.top)}))}(0,t.fold((function(){var e=function translate(e,t,n){return e.fold((function(e,o){return WP(e+t,o+n)}),(function(e,o){return jP(e+t,o+n)}),(function(e,o){return GP(e+t,o+n)}))}(n,a.left,a.top),t=$P(e,o,i);return GP(t.left,t.top)}),(function(t){var u=YP(e,t,n,a,o,i);return u.extra.each((function(n){t.onSensor(e,n)})),u.coord})),o,i,u)},lL=function calcStartData(e,t){return{bounds:e.getBounds(),height:gn(t.element),width:wn(t.element)}},fL=function move(e,t,n,o,i){var a=n.update(o,i),u=n.getStartData().getOrThunk((function(){return lL(t,e)}));a.each((function(n){!function dragBy(e,t,n,o){var i=t.getTarget(e.element);if(t.repositionTarget){var a=Ct(e.element),u=sr(a),c=FR(i),s=cL(i),l=sL(e,t.snaps,s,u,c,o,n),d=UP(l,0,c);tn(i,d)}t.onDrag(e,i,o)}(e,t,u,n)}))},dL=function stop(e,t,n,o){t.each(oL),n.snaps.each((function(t){XP(e,t)}));var i=n.getTarget(e.element);o.reset(),n.onDrop(e,i)},mL=function handlers(e){return function(t,n){var o=function updateStartState(e){n.setStartData(lL(t,e))};return Ta([Aa(aa(),(function(e){n.getStartData().each((function(){return o(e)}))}))].concat(d(e(t,n,o))))}},gL=Object.freeze({__proto__:null,getData:function getData$1(e){return K.from(pn(e.x,e.y))},getDelta:function getDelta$1(e,t){return pn(t.left-e.left,t.top-e.top)}}),pL=function events$3(e,t,n){return[Aa(_i(),(function(o,i){if(0===i.event.raw.button){i.stop();var a=function stop$1(){return dL(o,K.some(s),e,t)},u=Dk(a,200),c={drop:a,delayDrop:u.schedule,forceDrop:a,move:function move(n){u.cancel(),fL(o,e,t,gL,n)}},s=iL(o,e.blockerClass,function init$3(e){return Ta([Aa(_i(),e.forceDrop),Aa(Ni(),e.drop),Aa(Di(),(function(t,n){e.move(n.event)})),Aa(Ri(),e.delayDrop)])}(c));!function start(){n(o),rL(o,s)}()}}))]},hL=[].concat(uL,[Bc("dragger",{handlers:mL(pL)})]),vL=Object.freeze({__proto__:null,getData:function getData(e){var t=e.raw.touches;return 1===t.length?function getDataFrom(e){var t=e[0];return K.some(pn(t.clientX,t.clientY))}(t):K.none()},getDelta:function getDelta(e,t){return pn(t.left-e.left,t.top-e.top)}}),bL=function events$2(e,t,n){var o=nl(),i=function stopBlocking(n){dL(n,o.get(),e,t),o.clear()};return[Aa(Ti(),(function(a,u){u.stop();var c=function stop(){return i(a)},s={drop:c,delayDrop:F,forceDrop:c,move:function move(n){fL(a,e,t,vL,n)}},l=iL(a,e.blockerClass,function init$2(e){return Ta([Aa(Ti(),e.forceDrop),Aa(Oi(),e.drop),Aa(Ai(),e.drop),Aa(Ei(),(function(t,n){e.move(n.event)}))])}(s));o.set(l);!function start(){n(a),rL(a,l)}()})),Aa(Ei(),(function(n,o){o.stop(),fL(n,e,t,vL,o.event)})),Aa(Oi(),(function(e,t){t.stop(),i(e)})),Aa(Ai(),i)]},yL=hL,CL=[].concat(uL,[Bc("dragger",{handlers:mL(bL)})]),wL=[].concat(uL,[Bc("dragger",{handlers:mL((function events$1(e,t,n){return[].concat(d(pL(e,t,n)),d(bL(e,t,n)))}))})]),xL=Object.freeze({__proto__:null,mouse:yL,touch:CL,mouseOrTouch:wL}),SL=Object.freeze({__proto__:null,init:function init$1(){var e=K.none(),t=K.none(),n=z({});return mu({readState:n,reset:function reset(){e=K.none(),t=K.none()},update:function update(t,n){return t.getData(n).bind((function(n){return function calculateDelta(t,n){var o=e.map((function(e){return t.getDelta(e,n)}));return e=K.some(n),o}(t,n)}))},getStartData:function getStartData(){return t},setStartData:function setStartData(e){t=K.some(e)}})}}),kL=As({branchKey:"mode",branches:xL,name:"dragging",active:{events:function events(e,t){return e.dragger.handlers(e,t)}},extra:{snap:function snap(e){return{sensor:e.sensor,range:e.range,output:e.output,extra:K.from(e.extra)}}},state:SL,apis:tL}),TL=function calcSnap(e,t,n,o,i,a){return e.fold((function(){return kL.snap({sensor:jP(n-20,o-20),range:pn(i,a),output:jP(K.some(n),K.some(o)),extra:{td:t}})}),(function(e){var i=n-20,a=o-20,u=e.element.dom.getBoundingClientRect();return kL.snap({sensor:jP(i,a),range:pn(40,40),output:jP(K.some(n-u.width/2),K.some(o-u.height/2)),extra:{td:t}})}))},EL=function getSnapsConfig(e,t,n){return{getSnapPoints:e,leftAttr:"data-drag-left",topAttr:"data-drag-top",onSensor:function onSensor(e,o){var i=o.td;(function isSameCell(e,t){return e.exists((function(e){return bt(e,t)}))})(t.get(),i)||(t.set(i),n(i))},mustSnap:!0}},OL=function createSelector(e){return dv(lv.sketch({dom:{tag:"div",classes:["tox-selector"]},buttonBehaviours:ks([kL.config({mode:"mouseOrTouch",blockerClass:"blocker",snaps:e}),ST.config({})]),eventOrder:{mousedown:["dragging","alloy.base.behaviour"],touchstart:["dragging","alloy.base.behaviour"]}}))},AL=function setup$4(e,t){var n=si([]),o=si([]),i=si(!1),a=nl(),u=nl(),c=function getTopLeftSnap(e){var n=wr(e);return TL(m.getOpt(t),e,n.x,n.y,n.width,n.height)},s=function getBottomRightSnap(e){var n=wr(e);return TL(g.getOpt(t),e,n.right,n.bottom,n.width,n.height)},l=EL((function getTopLeftSnaps(){return ae(n.get(),(function(e){return c(e)}))}),a,(function(t){u.get().each((function(n){e.dispatch("TableSelectorChange",{start:t,finish:n})}))})),d=EL((function getBottomRightSnaps(){return ae(o.get(),(function(e){return s(e)}))}),u,(function(t){a.get().each((function(n){e.dispatch("TableSelectorChange",{start:n,finish:t})}))})),m=OL(l),g=OL(d),p=nc(m.asSpec()),h=nc(g.asSpec()),v=function snapTo(t,n,o,i){var a=o(n);kL.snapTo(t,a);!function showOrHideHandle(t,n,o,i){var a=n.dom.getBoundingClientRect();sn(t.element,"display");var u=St(nt.fromDom(e.getBody())).dom.innerHeight,c=o(a),s=i(a,u);(c||s)&&Qt(t.element,"display","none")}(t,n,(function isAbove(e){return e[i]<0}),(function isBelow(e,t){return e[i]>t}))},b=function snapTopLeft(e){return v(p,e,c,"top")},y=function snapBottomRight(e){return v(h,e,s,"bottom")};Xn().deviceType.isTouch()&&(e.on("TableSelectionChange",(function(e){i.get()||(jf(t,p),jf(t,h),i.set(!0)),a.set(e.start),u.set(e.finish),e.otherCells.each((function(t){n.set(t.upOrLeftCells),o.set(t.downOrRightCells),b(e.start),y(e.finish)}))})),e.on("ResizeEditor ResizeWindow ScrollContent",(function(){!function snapLastTopLeft(){a.get().each(b)}(),function snapLastBottomRight(){u.get().each(y)}()})),e.on("TableSelectionClear",(function(){i.get()&&(Kf(p),Kf(h),i.set(!1)),a.clear(),u.clear()})))},_L=function isHidden(e){return"BR"===e.nodeName||!!e.getAttribute("data-mce-bogus")||"bookmark"===e.getAttribute("data-mce-type")},DL=function renderElementPath(e,t,n){var o,i=null!==(o=t.delimiter)&&void 0!==o?o:"\u203a",a=function renderDivider(){return{dom:{tag:"div",classes:["tox-statusbar__path-divider"],attributes:{"aria-hidden":!0}},components:[Ju(" ".concat(i," "))]}},u=function renderPathData(t){return fe(t,(function(t,o,i){var u=function renderElement(t,o,i){return lv.sketch({dom:{tag:"div",classes:["tox-statusbar__path-item"],attributes:{"data-index":i,"aria-level":i+1}},components:[Ju(t)],action:function action(t){e.focus(),e.selection.select(o),e.nodeChanged()},buttonBehaviours:ks([Uw(n.isDisabled),zw()])})}(o.name,o.element,i);return 0===i?t.concat([u]):t.concat([a(),u])}),[])};return{dom:{tag:"div",classes:["tox-statusbar__path"],attributes:{role:"navigation"}},behaviours:ks([ch.config({mode:"flow",selector:"div[role=button]"}),tg.config({disabled:n.isDisabled}),zw(),Kk.config({}),vh.config({}),bh("elementPathEvents",[Pa((function(t,n){e.shortcuts.add("alt+F11","focus statusbar elementpath",(function(){return ch.focusIn(t)})),e.on("NodeChange",(function(n){var o=function updatePath(t){for(var n=[],o=t.length;o-- >0;){var i=t[o];if(1===i.nodeType&&!_L(i)){var a=Lx(e,i);if(a.isDefaultPrevented()||n.push({name:a.name,element:i}),a.isPropagationStopped())break}}return n}(n.parents),i=o.length>0?u(o):[];vh.set(t,i)}))}))])]),components:[]}};!function(e){e[e.None=0]="None",e[e.Both=1]="Both",e[e.Vertical=2]="Vertical"}(yB||(yB={}));var RL=function resize(e,t,n){var o=nt.fromDom(e.getContainer()),i=function getDimensions(e,t,n,o,i){var a={height:wI(o+t.top,Db(e),Nb(e))};return n===yB.Both&&(a.width=wI(i+t.left,_b(e),Rb(e))),a}(e,t,n,mn(o),Cn(o));_e(i,(function(e,t){P(e)&&Qt(o,t,CI(e))})),function fireResizeEditor(e){e.dispatch("ResizeEditor")}(e)},NL=function keyboardHandler(e,t,n,o){var i=pn(20*n,20*o);return RL(e,i,t),K.some(!0)},ML=function renderResizeHandler(e,t){var n=function getResizeType(e){var t=oy(e);return!1===t?yB.None:"both"===t?yB.Both:yB.Vertical}(e);if(n===yB.None)return K.none();var o=n===yB.Both?"Press the arrow keys to resize the editor.":"Press the Up and Down arrow keys to resize the editor.";return K.some(hb("resize-handle",{tag:"div",classes:["tox-statusbar__resize-handle"],attributes:{title:t.translate("Resize"),"aria-label":t.translate(o)},behaviours:[kL.config({mode:"mouse",repositionTarget:!1,onDrag:function onDrag(t,o,i){return RL(e,i,n)},blockerClass:"tox-blocker"}),ch.config({mode:"special",onLeft:function onLeft(){return NL(e,n,-1,0)},onRight:function onRight(){return NL(e,n,1,0)},onUp:function onUp(){return NL(e,n,0,-1)},onDown:function onDown(){return NL(e,n,0,1)}}),Kk.config({}),Sh.config({})]},t.icons))},BL=function renderStatusbar(e,t){var n=function renderRightContainer(){var n=[];return e.hasPlugin("wordcount")&&n.push(function renderWordCount(e,t){var n=function replaceCountText(e,n,o){return vh.set(e,[Ju(t.translate(["{0} "+o,n[o]]))])};return lv.sketch({dom:{tag:"button",classes:["tox-statusbar__wordcount"]},components:[],buttonBehaviours:ks([Uw(t.isDisabled),zw(),Kk.config({}),vh.config({}),Rd.config({store:{mode:"memory",initialValue:{mode:"words",count:{words:0,characters:0}}}}),bh("wordcount-events",[Ha((function(e){var t=Rd.getValue(e),o="words"===t.mode?"characters":"words";Rd.setValue(e,{mode:o,count:t.count}),n(e,t.count,o)})),Pa((function(t){e.on("wordCountUpdate",(function(e){var o=Rd.getValue(t).mode;Rd.setValue(t,{mode:o,count:e.wordCount}),n(t,e.wordCount,o)}))}))])]),eventOrder:l({},Xi(),["disabling","alloy.base.behaviour","wordcount-events"])})}(e,t)),ry(e)&&n.push(function renderBranding(){return{dom:{tag:"span",classes:["tox-statusbar__branding"]},components:[{dom:{tag:"a",attributes:{href:"https://www.tiny.cloud/powered-by-tiny?utm_campaign=poweredby&utm_source=tiny&utm_medium=referral&utm_content=v6",rel:"noopener",target:"_blank","aria-label":ub.translate(["Powered by {0}","Tiny"])},innerHtml:'<svg width="50px" height="16px" viewBox="0 0 50 16" xmlns="http://www.w3.org/2000/svg">\n  <path fill-rule="evenodd" clip-rule="evenodd" d="M10.143 0c2.608.015 5.186 2.178 5.186 5.331 0 0 .077 3.812-.084 4.87-.361 2.41-2.164 4.074-4.65 4.496-1.453.284-2.523.49-3.212.623-.373.071-.634.122-.785.152-.184.038-.997.145-1.35.145-2.732 0-5.21-2.04-5.248-5.33 0 0 0-3.514.03-4.442.093-2.4 1.758-4.342 4.926-4.963 0 0 3.875-.752 4.036-.782.368-.07.775-.1 1.15-.1Zm1.826 2.8L5.83 3.989v2.393l-2.455.475v5.968l6.137-1.189V9.243l2.456-.476V2.8ZM5.83 6.382l3.682-.713v3.574l-3.682.713V6.382Zm27.173-1.64-.084-1.066h-2.226v9.132h2.456V7.743c-.008-1.151.998-2.064 2.149-2.072 1.15-.008 1.987.92 1.995 2.072v5.065h2.455V7.359c-.015-2.18-1.657-3.929-3.837-3.913a3.993 3.993 0 0 0-2.908 1.296Zm-6.3-4.266L29.16 0v2.387l-2.456.475V.476Zm0 3.2v9.132h2.456V3.676h-2.456Zm18.179 11.787L49.11 3.676H46.58l-1.612 4.527-.46 1.382-.384-1.382-1.611-4.527H39.98l3.3 9.132L42.15 16l2.732-.537ZM22.867 9.738c0 .752.568 1.075.921 1.075.353 0 .668-.047.998-.154l.537 1.765c-.23.154-.92.537-2.225.537-1.305 0-2.655-.997-2.686-2.686a136.877 136.877 0 0 1 0-4.374H18.8V3.676h1.612v-1.98l2.455-.476v2.456h2.302V5.9h-2.302v3.837Z"/>\n</svg>\n'.trim()},behaviours:ks([Sh.config({})])}]}}()),{dom:{tag:"div",classes:["tox-statusbar__right-container"]},components:n}},o=function getTextComponents(){var o=[],i=cy(e),a=ny(e),u=ry(e)||e.hasPlugin("wordcount");return a&&o.push(DL(e,{},t)),i&&o.push(function renderHelpAccessibility(){var e=ex("Alt+0");return{dom:{tag:"div",classes:["tox-statusbar__help-text"]},components:[Ju(ub.translate(["Press {0} for help",e]))]}}()),u&&o.push(n()),o.length>0?[{dom:{tag:"div",classes:["tox-statusbar__text-container"].concat(d(function getTextComponentClasses(){var e="tox-statusbar__text-container--flex-start",t="tox-statusbar__text-container--flex-end";if(i){var n="tox-statusbar__text-container-3-cols";return u||a?u&&!a?[n,t]:[n,e]:[n,"tox-statusbar__text-container--space-around"]}return[u&&!a?t:e]}()))},components:o}]:[]};return{dom:{tag:"div",classes:["tox-statusbar"]},components:function getComponents(){var n=o(),i=ML(e,t);return n.concat(i.toArray())}()}},IL=function getLazyMothership(e,t){return t.get().getOrDie("UI for ".concat(e," has not been rendered"))},PL=function setup$3(e,t){var n=e.inline,o=n?AI:bI,i=ky(e)?kN:PR,a=function LazyUiReferences(){var e=nl(),t=nl(),n=nl();return{dialogUi:e,popupUi:t,mainUi:n,getUiMotherships:function getUiMotherships(){var n=e.get().map((function(e){return e.mothership})),o=t.get().map((function(e){return e.mothership}));return n.fold((function(){return o.toArray()}),(function(e){return o.fold((function(){return[e]}),(function(t){return bt(e.element,t.element)?[e]:[e,t]}))}))},lazyGetInOuterOrDie:function lazyGetInOuterOrDie(e,t){return function(){return n.get().bind((function(e){return t(e.outerContainer)})).getOrDie("Could not find ".concat(e," element in OuterContainer"))}}}}(),u=nl(),c=nl(),m=nl(),g=Xn().deviceType.isTouch()?["tox-platform-touch"]:[],p=yy(e),h=Fb(e),v=dv({dom:{tag:"div",classes:["tox-anchorbar"]}}),b=dv({dom:{tag:"div",classes:["tox-bottom-anchorbar"]}}),y=function lazyHeader(){return a.mainUi.get().map((function(e){return e.outerContainer})).bind(rB.getHeader)},C=a.lazyGetInOuterOrDie("anchor bar",v.getOpt),w=a.lazyGetInOuterOrDie("bottom anchor bar",b.getOpt),x=a.lazyGetInOuterOrDie("toolbar",rB.getToolbar),S=a.lazyGetInOuterOrDie("throbber",rB.getThrobber),k=xR({popup:function lazyPopupSinkResult(){return Or.fromOption(a.popupUi.get().map((function(e){return e.sink})),"(popup) UI has not been rendered")},dialog:function lazyDialogSinkResult(){return Or.fromOption(a.dialogUi.get().map((function(e){return e.sink})),"UI has not been rendered")}},e,C,w),T=function makePromotion(){return rB.parts.promotion({dom:{tag:"div",classes:["tox-promotion"]}})},E=function renderMainUi(){var t=function makeHeaderPart(){var t={attributes:l({},El,p?js.BottomToTop:js.TopToBottom)},n=rB.parts.menubar({dom:{tag:"div",classes:["tox-menubar"]},backstage:k.popup,onEscape:function onEscape(){e.focus()}}),o=rB.parts.toolbar(s({dom:{tag:"div",classes:["tox-toolbar"]},getSink:k.popup.shared.getSink,providers:k.popup.shared.providers,onEscape:function onEscape(){e.focus()},onToolbarToggled:function onToolbarToggled(t){!function fireToggleToolbarDrawer(e,t){e.dispatch("ToggleToolbarDrawer",{state:t})}(e,t)},type:h,lazyToolbar:x,lazyHeader:function lazyHeader(){return y().getOrDie("Could not find header element")}},t)),i=rB.parts["multiple-toolbar"]({dom:{tag:"div",classes:["tox-toolbar-overlord"]},providers:k.popup.shared.providers,onEscape:function onEscape(){e.focus()},type:h}),a=vy(e),u=py(e),c=fy(e),d=uy(e),m=T(),g=a||u||c,b=d?[m,n]:[n];return rB.parts.header({dom:s({tag:"div",classes:["tox-editor-header"].concat(g?[]:["tox-editor-header--empty"])},t),components:ge([c?b:[],function getPartToolbar(){return a?[i]:u?[o]:[]}(),wy(e)?[]:[v.asSpec()]]),sticky:ky(e),editor:e,sharedBackstage:k.popup.shared})}(),o=function makeSidebarDefinition(){return{dom:{tag:"div",classes:["tox-sidebar-wrap"]},components:[rB.parts.socket({dom:{tag:"div",classes:["tox-edit-area"]}}),rB.parts.sidebar({dom:{tag:"div",classes:["tox-sidebar"]}})]}}(),i=rB.parts.throbber({dom:{tag:"div",classes:["tox-throbber"]},backstage:k.popup}),a=rB.parts.viewWrapper({backstage:k.popup}),c=ty(e)&&!n?K.some(BL(e,k.popup.shared.providers)):K.none(),m=ge([p?[]:[t],n?[]:[o],p?[t]:[]]),C=rB.parts.editorContainer({components:ge([m,n?[]:[b.asSpec()].concat(d(c.toArray()))])}),w=Sy(e),S=s(s({role:"application"},ub.isRtl()?{dir:"rtl"}:{}),w?{"aria-hidden":"true"}:{}),E=nc(rB.sketch({dom:{tag:"div",classes:["tox","tox-tinymce"].concat(n?["tox-tinymce-inline"]:[]).concat(p?["tox-tinymce--toolbar-bottom"]:[]).concat(g),styles:s({visibility:"hidden"},w?{opacity:"0",border:"0"}:{}),attributes:S},components:[C].concat(d(n?[]:[a]),[i]),behaviours:ks([zw(),tg.config({disableClass:"tox-tinymce--disabled"}),ch.config({mode:"cyclic",selector:".tox-menubar, .tox-toolbar, .tox-toolbar__primary, .tox-toolbar__overflow--open, .tox-sidebar__overflow--open, .tox-statusbar__path, .tox-statusbar__wordcount, .tox-statusbar__branding a, .tox-statusbar__resize-handle"})])})),O=Uk(E);return u.set(O),{mothership:O,outerContainer:E}},O=function setEditorSize(t){var n=CI(xI(e)),o=CI(function getWidthWithFallback(e){return SI(e).getOr(Ab(e))}(e));return e.inline||(cn("div","width",o)&&Qt(t.element,"width",o),cn("div","height",n)?Qt(t.element,"height",n):Qt(t.element,"height","400px")),n},A=function renderUIWithRefs(t){var n=t.mainUi,a=t.popupUi,u=t.uiMotherships;De(Hb(e),(function(t,n){e.ui.registry.addGroupToolbarButton(n,t)}));var c=e.ui.registry.getAll(),s=c.buttons,l=c.menuItems,m=c.contextToolbars,g=c.sidebars,p=c.views,v=hy(e),b={menuItems:l,menus:Ey(e),menubar:Wb(e),toolbar:v.getOrThunk((function(){return jb(e)})),allowToolbarGroups:h===rb.floating,buttons:s,sidebar:g,views:p};!function setupShortcutsAndCommands(t){e.addShortcut("alt+F9","focus menubar",(function(){rB.focusMenubar(t)})),e.addShortcut("alt+F10","focus toolbar",(function(){rB.focusToolbar(t)})),e.addCommand("ToggleToolbarDrawer",(function(e,n){(null===n||void 0===n?void 0:n.skipFocus)?rB.toggleToolbarDrawerWithoutFocusing(t):rB.toggleToolbarDrawer(t)})),e.addQueryStateHandler("ToggleToolbarDrawer",(function(){return rB.isToolbarDrawerToggled(t)}))}(n.outerContainer),function setup$b(e,t,n){var o=function broadcastEvent(e,o){ue([t].concat(d(n)),(function(t){t.broadcastEvent(e,o)}))},i=function broadcastOn(e,o){ue([t].concat(d(n)),(function(t){t.broadcastOn([e],o)}))},a=function fireDismissPopups(e){return i(dd(),{target:e.target})},u=mr(),c=ol(u,"touchstart",a),s=ol(u,"touchmove",(function(e){return o(oa(),e)})),l=ol(u,"touchend",(function(e){return o(ia(),e)})),m=ol(u,"mousedown",a),g=ol(u,"mouseup",(function(e){0===e.raw.button&&i(gd(),{target:e.target})})),p=function onContentClick(e){return i(dd(),{target:nt.fromDom(e.target)})},h=function onContentMouseup(e){0===e.button&&i(gd(),{target:nt.fromDom(e.target)})},v=function onContentMousedown(){ue(e.editorManager.get(),(function(t){e!==t&&t.dispatch("DismissPopups",{relatedTarget:e})}))},b=function onWindowScroll(e){return o(aa(),al(e))},y=function onWindowResize(e){i(md(),{}),o(ua(),al(e))},C=It(nt.fromDom(e.getElement())),w=il(C,"scroll",(function(n){requestAnimationFrame((function(){var i=e.getContainer();if(void 0!==i&&null!==i){var a=Ok(e,t.element).map((function(e){return[e.element].concat(d(e.others))})).getOr([]);re(a,(function(e){return bt(e,n.target)}))&&(e.dispatch("ElementScroll",{target:n.target.dom}),o(ga(),n))}}))})),x=function onEditorResize(){return i(md(),{})},S=function onEditorProgress(t){t.state&&i(dd(),{target:nt.fromDom(e.getContainer())})},k=function onDismissPopups(e){i(dd(),{target:nt.fromDom(e.relatedTarget.getContainer())})};e.on("PostRender",(function(){e.on("click",p),e.on("tap",p),e.on("mouseup",h),e.on("mousedown",v),e.on("ScrollWindow",b),e.on("ResizeWindow",y),e.on("ResizeEditor",x),e.on("AfterProgressState",S),e.on("DismissPopups",k)})),e.on("remove",(function(){e.off("click",p),e.off("tap",p),e.off("mouseup",h),e.off("mousedown",v),e.off("ScrollWindow",b),e.off("ResizeWindow",y),e.off("ResizeEditor",x),e.off("AfterProgressState",S),e.off("DismissPopups",k),m.unbind(),c.unbind(),s.unbind(),l.unbind(),g.unbind(),w.unbind()})),e.on("detach",(function(){ue([t].concat(d(n)),ed),ue([t].concat(d(n)),(function(e){return e.destroy()}))}))}(e,n.mothership,u),i.setup(e,k.popup.shared,y),dP(e,k.popup),IP(e,k.popup.shared.getSink,k.popup),function setup$8(e){var t=e.ui.registry.getAll().sidebars;ue(Oe(t),(function(n){var o=t[n],i=function isActive(){return ze(K.from(e.queryCommandValue("ToggleSidebar")),n)};e.ui.registry.addToggleButton(n,{icon:o.icon,tooltip:o.tooltip,onAction:function onAction(t){e.execCommand("ToggleSidebar",!1,n),t.setActive(i())},onSetup:function onSetup(t){t.setActive(i());var n=function handleToggle(){return t.setActive(i())};return e.on("ToggleSidebar",n),function(){e.off("ToggleSidebar",n)}}})}))}(e),YN(e,S,k.popup.shared),XI(e,m,a.sink,{backstage:k.popup}),AL(e,a.sink);var C={targetNode:e.getElement(),height:O(n.outerContainer)};return o.render(e,t,b,k.popup,C)};return{popups:{backstage:k.popup,getMothership:function getMothership(){return IL("popups",m)}},dialogs:{backstage:k.dialog,getMothership:function getMothership(){return IL("dialogs",c)}},renderUI:function renderUI(){var n=E(),o=function renderDialogUi(){var t=xy(e),n=bt(Vt(),t)&&"grid"===nn(t,"display"),o={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-tinymce-aux"].concat(g),attributes:s({},ub.isRtl()?{dir:"rtl"}:{})},behaviours:ks([Ff.config({useFixed:function useFixed(){return i.isDocked(y)}})])},a={dom:{styles:{width:document.body.clientWidth+"px"}},events:Ta([Aa(ua(),(function(e){Qt(e.element,"width",document.body.clientWidth+"px")}))])},u=nc(Zr(o,n?a:{})),l=Uk(u);return c.set(l),{sink:u,mothership:l}}(),u=Ty(e)?function renderPopupUi(){var e={dom:{tag:"div",classes:["tox","tox-silver-sink","tox-silver-popup-sink","tox-tinymce-aux"].concat(g),attributes:s({},ub.isRtl()?{dir:"rtl"}:{})},behaviours:ks([Ff.config({useFixed:function useFixed(){return i.isDocked(y)},getBounds:function getBounds(){return t.getPopupSinkBounds()}})])},n=nc(e),o=Uk(n);return m.set(o),{sink:n,mothership:o}}():function reuseDialogUiForPopuUi(e){return m.set(e.mothership),e}(o);a.dialogUi.set(o),a.popupUi.set(u),a.mainUi.set(n);var l={popupUi:u,dialogUi:o,mainUi:n,uiMotherships:a.getUiMotherships()};return A(l)}}},LL=z([Po("lazySink"),Wo("dragBlockClass"),ai("getBounds",Sr),ei("useTabstopAt",q),ei("firstTabstop",0),ei("eventOrder",{}),Nd("modalBehaviours",[ch]),Rc("onExecute"),Mc("onEscape")]),FL={sketch:V},HL=z([lm({name:"draghandle",overrides:function overrides(e,t){return{behaviours:ks([kL.config({mode:"mouse",getTarget:function getTarget(e){return sc(e,'[role="dialog"]').getOr(e)},blockerClass:e.dragBlockClass.getOrDie(new Error("The drag blocker class was not specified for a dialog with a drag handle: \n"+JSON.stringify(t,null,2)).message),getBounds:e.getDragBounds})])}}}),cm({schema:[Po("dom")],name:"title"}),cm({factory:FL,schema:[Po("dom")],name:"close"}),cm({factory:FL,schema:[Po("dom")],name:"body"}),lm({factory:FL,schema:[Po("dom")],name:"footer"}),sm({factory:{sketch:function sketch(e,t){return s(s({},e),{},{dom:t.dom,components:t.components})}},schema:[ei("dom",{tag:"div",styles:{position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px"}}),ei("components",[])],name:"blocker"})]),$L=Lm({name:"ModalDialog",configFields:LL(),partFields:HL(),factory:function factory$4(e,t,n,o){var i=nl(),a=qa("modal-events"),u=s(s({},e.eventOrder),{},l({},ca(),[a].concat(e.eventOrder["alloy.system.attached"]||[])));return{uid:e.uid,dom:e.dom,components:t,apis:{show:function showDialog(t){i.set(t);var n=e.lazySink(t).getOrDie(),a=o.blocker(),u=n.getSystem().build(s(s({},a),{},{components:a.components.concat([oc(t)]),behaviours:ks([Sh.config({}),bh("dialog-blocker-events",[Ia(Bi(),(function(){GN.isBlocked(t)||ch.focusIn(t)}))])])}));jf(n,u),ch.focusIn(t)},hide:function hideDialog(e){i.clear(),kt(e.element).each((function(t){e.getSystem().getByDom(t).each((function(e){Kf(e)}))}))},getBody:function getDialogBody(t){return Sm(t,e,"body")},getFooter:function getDialogFooter(t){return xm(t,e,"footer")},setIdle:function setIdle(e){GN.unblock(e)},setBusy:function setBusy(e,t){GN.block(e,t)}},eventOrder:u,domModification:{attributes:{role:"dialog","aria-modal":"true"}},behaviours:Bd(e.modalBehaviours,[vh.config({}),ch.config({mode:"cyclic",onEnter:e.onExecute,onEscape:e.onEscape,useTabstopAt:e.useTabstopAt,firstTabstop:e.firstTabstop}),GN.config({getRoot:i.get}),bh(a,[Pa((function(t){!function labelledBy(e,t){var n=qt(e,"id").fold((function(){var e=qa("dialog-label");return Wt(t,"id",e),e}),V);Wt(e,"aria-labelledby",n)}(t.element,Sm(t,e,"title").element)}))])])}},apis:{show:function show(e,t){e.show(t)},hide:function hide(e,t){e.hide(t)},getBody:function getBody(e,t){return e.getBody(t)},getFooter:function getFooter(e,t){return e.getFooter(t)},setBusy:function setBusy(e,t,n){e.setBusy(t,n)},setIdle:function setIdle(e,t){e.setIdle(t)}}}),zL=co([yC,CC].concat(pw)),VL=yo,UL=[jC("button"),MC,oi("align","end",["start","end"]),zC,$C,Ko("buttonType",["primary","secondary"])],ZL=[].concat(UL,[xC]),WL=[$o("type",["submit","cancel","custom"])].concat(d(ZL)),jL=[$o("type",["menu"]),NC,BC,MC,Zo("items",zL)].concat(UL),GL=[].concat(UL,[$o("type",["togglebutton"]),Ho("tooltip"),MC,NC,ii("active",!1)]),qL=Ro("type",{submit:WL,cancel:WL,custom:WL,menu:jL,togglebutton:GL}),KL=[yC,xC,$o("level",["info","warn","error","success"]),kC,ei("url","")],YL=co(KL),XL=function createBarFields(e){return[yC,e]},JL=[yC,xC,$C,jC("button"),MC,HC,Ko("buttonType",["primary","secondary","toolbar"]),zC],QL=co(JL),eF=[yC,CC],tF=eF.concat([IC]),nF=eF.concat([wC,$C]),rF=co(nF),oF=yo,iF=tF.concat([VC("auto")]),aF=co(iF),uF=mo([TC,xC,kC]),cF=tF.concat([ri("storageKey","default")]),sF=co(cF),lF=bo,fF=co(tF),dF=bo,mF=eF.concat([ri("tag","textarea"),Ho("scriptId"),Ho("scriptUrl"),function defaultedPostMsg(e,t){return ti(e,t,xo)}("settings",void 0)]),gF=eF.concat([ri("tag","textarea"),zo("init")]),pF=To((function(e){return Oo("customeditor.old",uo(gF),e).orThunk((function(){return Oo("customeditor.new",uo(mF),e)}))})),hF=bo,vF=co(tF),bF=function arrOfVal(){return so(eo)}(),yF=function createGridFields(e){return[yC,Fo("columns"),e]},CF=[yC,Ho("html"),oi("presets","presentation",["presentation","document"])],wF=co(CF),xF=tF.concat([ii("border",!1),ii("sandboxed",!0),ii("streamContent",!1),ii("transparent",!0)]),SF=co(xF),kF=bo,TF=co(eF.concat([qo("height")])),EF=co([Ho("url"),Go("zoom"),Go("cachedWidth"),Go("cachedHeight")]),OF=tF.concat([qo("inputMode"),qo("placeholder"),ii("maximized",!1),$C]),AF=co(OF),_F=bo,DF=function createLabelFields(e){return[yC,wC,e,oi("align","start",["start","center","end"])]},RF=[xC,TC],NF=[xC,Zo("items",No(0,(function(){return MF})))],MF=lo([co(RF),co(NF)]),BF=tF.concat([Zo("items",MF),$C]),IF=co(BF),PF=bo,LF=tF.concat([Uo("items",[xC,TC]),ni("size",1),$C]),FF=co(LF),HF=bo,$F=tF.concat([ii("constrain",!0),$C]),zF=co($F),VF=co([Ho("width"),Ho("height")]),UF=eF.concat([wC,ni("min",0),ni("max",0)]),ZF=co(UF),WF=vo,jF=[yC,Zo("header",bo),Zo("cells",so(bo))],GF=co(jF),qF=tF.concat([qo("placeholder"),ii("maximized",!1),$C]),KF=co(qF),YF=bo,XF=[$o("type",["directory","leaf"]),SC,Ho("id"),jo("menu",ON)],JF=co(XF),QF=XF.concat([Zo("children",No(0,(function(){return ko("type",{directory:eH,leaf:JF})})))]),eH=co(QF),tH=ko("type",{directory:eH,leaf:JF}),nH=[yC,Zo("items",tH),Yo("onLeafAction"),Yo("onToggleExpand"),ui("defaultExpandedIds",[],bo),qo("defaultSelectedId")],rH=co(nH),oH=tF.concat([oi("filetype","file",["image","media","file"]),$C,qo("picker_text")]),iH=co(oH),aH=co([TC,UC]),uH=function createItemsField(e){return Mo("items","items",{tag:"required",process:{}},so(To((function(t){return Oo("Checking item of ".concat(e),cH,t).fold((function(e){return Or.error(Do(e))}),(function(e){return Or.value(e)}))}))))},cH=io((function(){return ko("type",{alertbanner:YL,bar:co(XL(uH("bar"))),button:QL,checkbox:rF,colorinput:sF,colorpicker:fF,dropzone:vF,grid:co(yF(uH("grid"))),iframe:SF,input:AF,listbox:IF,selectbox:FF,sizeinput:zF,slider:ZF,textarea:KF,urlinput:iH,customeditor:pF,htmlpanel:wF,imagepreview:TF,collection:aF,label:co(DF(uH("label"))),table:GF,tree:rH,panel:lH})})),sH=[yC,ei("classes",[]),Zo("items",cH)],lH=co(sH),fH=[jC("tab"),SC,Zo("items",cH)],dH=[yC,Uo("tabs",fH)],mH=co(dH),gH=ZL,pH=qL,hH=co([Ho("title"),Lo("body",ko("type",{panel:lH,tabpanel:mH})),ri("size","normal"),ui("buttons",[],pH),ei("initialData",{}),ai("onAction",F),ai("onChange",F),ai("onSubmit",F),ai("onClose",F),ai("onCancel",F),ai("onTabChange",F)]),vH=co([$o("type",["cancel","custom"])].concat(d(gH))),bH=co([Ho("title"),Ho("url"),Go("height"),Go("width"),Xo("buttons",vH),ai("onAction",F),ai("onCancel",F),ai("onClose",F),ai("onMessage",F)]),yH=function getAllObjects(e){return E(e)?[e].concat(pe(Le(e),getAllObjects)):A(e)?pe(e,getAllObjects):[]},CH=function isNamedItem(e){return T(e.type)&&T(e.name)},wH={checkbox:oF,colorinput:lF,colorpicker:dF,dropzone:bF,input:_F,iframe:kF,imagepreview:EF,selectbox:HF,sizeinput:VF,slider:WF,listbox:PF,size:VF,textarea:YF,urlinput:aH,customeditor:hF,collection:uF,togglemenuitem:VL},xH=function getNamedItems(e){return se(yH(e),CH)},SH=function createDataValidator(e){var t=xH(e),n=pe(t,(function(e){return function getDataProcessor(e){return K.from(wH[e.type])}(e).fold((function(){return[]}),(function(t){return[Lo(e.name,t)]}))}));return co(n)},kH=function extract(e){var t;return{internalDialog:Ao(function createDialog(e){return Oo("dialog",hH,e)}(e)),dataValidator:SH(e),initialData:null!==(t=e.initialData)&&void 0!==t?t:{}}},TH={open:function open(e,t){var n=kH(t);return e(n.internalDialog,n.initialData,n.dataValidator)},openUrl:function openUrl(e,t){return e(Ao(function createUrlDialog(e){return Oo("dialog",bH,e)}(t)))},redial:function redial(e){return kH(e)}},EH=Object.freeze({__proto__:null,events:function events(e,t){var n=function update(n,o){e.updateState.each((function(e){var i=e(n,o);t.set(i)})),e.renderComponents.each((function(i){var a=i(o,t.get());(e.reuseDom?lh:sh)(n,a)}))};return Ta([Aa(Yi(),(function(t,o){var i=o;if(!i.universal){var a=e.channel;ne(i.channels,a)&&n(t,i.data)}})),Pa((function(t,o){e.initialData.each((function(e){n(t,e)}))}))])}}),OH=Object.freeze({__proto__:null,getState:function getState(e,t,n){return n}}),AH=[Po("channel"),Wo("renderComponents"),Wo("updateState"),Wo("initialData"),ii("reuseDom",!0)],_H=Es({fields:AH,name:"reflecting",active:EH,apis:OH,state:Object.freeze({__proto__:null,init:function init(){var e=si(K.none());return{readState:function readState(){return e.get().getOr("none")},get:e.get,set:e.set,clear:function clear(){return e.set(K.none())}}}})}),DH=function toValidValues(e){var t=[],n={};return _e(e,(function(e,o){e.fold((function(){t.push(o)}),(function(e){n[o]=e}))})),t.length>0?Or.error(t):Or.value(n)},RH=function renderBodyPanel(e,t,n){var o=dv(yO.sketch((function(o){return{dom:{tag:"div",classes:["tox-form"].concat(e.classes)},components:ae(e.items,(function(e){return cD(o,e,t,n)}))}})));return{dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[o.asSpec()]}],behaviours:ks([ch.config({mode:"acyclic",useTabstopAt:Z(qO)}),AO(o),RO(o,{postprocess:function postprocess(e){return DH(e).fold((function(e){return console.error(e),{}}),V)}}),bh("dialog-body-panel",[Aa(Bi(),(function(e,t){e.getSystem().broadcastOn([eA],{newFocus:K.some(t.event.target)})}))])])}},NH=Pm({name:"TabButton",configFields:[ei("uid",void 0),Po("value"),Mo("dom","dom",qr((function(){return{attributes:{role:"tab",id:qa("aria"),"aria-selected":"false"}}})),po()),Wo("action"),ei("domModification",{}),Nd("tabButtonBehaviours",[Sh,ch,Rd]),Po("view")],factory:function factory$3(e,t){return{uid:e.uid,dom:e.dom,components:e.components,events:Mh(e.action),behaviours:Bd(e.tabButtonBehaviours,[Sh.config({}),ch.config({mode:"execution",useSpace:!0,useEnter:!0}),Rd.config({store:{mode:"memory",initialValue:e.value}})]),domModification:e.domModification}}}),MH=z([Po("tabs"),Po("dom"),ei("clickToDismiss",!1),Nd("tabbarBehaviours",[dg,ch]),Ac(["tabClass","selectedClass"])]),BH=fm({factory:NH,name:"tabs",unit:"tab",overrides:function overrides(e){var t=function dismissTab$1(e,t){dg.dehighlight(e,t),Ca(e,ha(),{tabbar:e,button:t})},n=function changeTab$1(e,t){dg.highlight(e,t),Ca(e,pa(),{tabbar:e,button:t})};return{action:function action(o){var i=o.getSystem().getByUid(e.uid).getOrDie(),a=dg.isHighlighted(i,o);(a&&e.clickToDismiss?t:a?F:n)(i,o)},domModification:{classes:[e.markers.tabClass]}}}}),IH=z([BH]),PH=Lm({name:"Tabbar",configFields:MH(),partFields:IH(),factory:function factory$2(e,t,n,o){return{uid:e.uid,dom:e.dom,components:t,"debug.sketcher":"Tabbar",domModification:{attributes:{role:"tablist"}},behaviours:Bd(e.tabbarBehaviours,[dg.config({highlightClass:e.markers.selectedClass,itemClass:e.markers.tabClass,onHighlight:function onHighlight(e,t){Wt(t.element,"aria-selected","true")},onDehighlight:function onDehighlight(e,t){Wt(t.element,"aria-selected","false")}}),ch.config({mode:"flow",getInitial:function getInitial(e){return dg.getHighlighted(e).map((function(e){return e.element}))},selector:"."+e.markers.tabClass,executeOnMove:!0})])}}}),LH=Pm({name:"Tabview",configFields:[Nd("tabviewBehaviours",[vh])],factory:function factory$1(e,t){return{uid:e.uid,dom:e.dom,behaviours:Bd(e.tabviewBehaviours,[vh.config({})]),domModification:{attributes:{role:"tabpanel"}}}}}),FH=z([ei("selectFirst",!0),Dc("onChangeTab"),Dc("onDismissTab"),ei("tabs",[]),Nd("tabSectionBehaviours",[])]),HH=cm({factory:PH,schema:[Po("dom"),Vo("markers",[Po("tabClass"),Po("selectedClass")])],name:"tabbar",defaults:function defaults(e){return{tabs:e.tabs}}}),$H=cm({factory:LH,name:"tabview"}),zH=z([HH,$H]),VH=Lm({name:"TabSection",configFields:FH(),partFields:zH(),factory:function factory(e,t,n,o){var i=function changeTabBy(t,n){xm(t,e,"tabbar").each((function(e){n(e).each(wa)}))};return{uid:e.uid,dom:e.dom,components:t,behaviours:Md(e.tabSectionBehaviours),events:Ta(ge([e.selectFirst?[Pa((function(e,t){i(e,dg.getFirst)}))]:[],[Aa(pa(),(function(t,n){!function changeTab$1(t){var n=Rd.getValue(t);xm(t,e,"tabview").each((function(o){var i=de(e.tabs,(function(e){return e.value===n}));i.each((function(n){var i=n.view();qt(t.element,"id").each((function(e){Wt(o.element,"aria-labelledby",e)})),vh.set(o,i),e.onChangeTab(o,t,i)}))}))}(n.event.button)})),Aa(ha(),(function(t,n){var o=n.event.button;e.onDismissTab(t,o)}))]])),apis:{getViewItems:function getViewItems(t){return xm(t,e,"tabview").map((function(e){return vh.contents(e)})).getOr([])},showTab:function showTab(e,t){i(e,(function getTabIfNotActive(e){var n=dg.getCandidates(e);return de(n,(function(e){return Rd.getValue(e)===t})).filter((function(t){return!dg.isHighlighted(e,t)}))}))}}}},apis:{getViewItems:function getViewItems(e,t){return e.getViewItems(t)},showTab:function showTab(e,t,n){e.showTab(t,n)}}}),UH=function setTabviewHeight(e,t){Qt(e,"height",t+"px"),Qt(e,"flex-basis",t+"px")},ZH=function updateTabviewHeight(e,t,n){sc(e,'[role="dialog"]').each((function(e){fc(e,'[role="tablist"]').each((function(o){n.get().map((function(n){return Qt(t,"height","0"),Qt(t,"flex-basis","0"),Math.min(n,function getMaxTabviewHeight(e,t,n){var o,i=xt(e).dom,a=sc(e,".tox-dialog-wrap").getOr(e);o="fixed"===nn(a,"position")?Math.max(i.clientHeight,window.innerHeight):Math.max(i.offsetHeight,i.scrollHeight);var u=mn(t),c=t.dom.offsetLeft>=n.dom.offsetLeft+Cn(n)?Math.max(mn(n),u):u,s=parseInt(nn(e,"margin-top"),10)||0,l=parseInt(nn(e,"margin-bottom"),10)||0;return o-(mn(e)+s+l-c)}(e,t,o))})).each((function(e){UH(t,e)}))}))}))},WH=function getTabview(e){return fc(e,'[role="tabpanel"]')},jH=function smartMode(e){var t=nl(),n=[Pa((function(n){var o=n.element;WH(o).each((function(i){Qt(i,"visibility","hidden"),n.getSystem().getByDom(i).toOptional().each((function(n){var o=function measureHeights(e,t,n){return ae(e,(function(o,i){vh.set(n,e[i].view());var a=t.dom.getBoundingClientRect();return vh.set(n,[]),a.height}))}(e,i,n),a=function getMaxHeight(e){return Se(we(e,(function(e,t){return e>t?-1:e<t?1:0})))}(o);a.fold(t.clear,t.set)})),ZH(o,i,t),sn(i,"visibility"),function showTab(e,t){Se(e).each((function(e){return VH.showTab(t,e.value)}))}(e,n),requestAnimationFrame((function(){ZH(o,i,t)}))}))})),Aa(ua(),(function(e){var n=e.element;WH(n).each((function(e){ZH(n,e,t)}))})),Aa(lT,(function(e,n){var o=e.element;WH(o).each((function(e){var n=Is(It(e));Qt(e,"visibility","hidden");var i=an(e,"height").map((function(e){return parseInt(e,10)}));sn(e,"height"),sn(e,"flex-basis");var a=e.dom.getBoundingClientRect().height;i.forall((function(e){return a>e}))?(t.set(a),ZH(o,e,t)):i.each((function(t){UH(e,t)})),sn(e,"visibility"),n.each(Ns)}))}))];return{extraEvents:n,selectFirst:!1}},GH="send-data-to-section",qH="send-data-to-view",KH=function renderTabPanel(e,t,n){var o=si({}),i=function updateDataWithForm(e){var t=Rd.getValue(e),n=DH(t).getOr({}),i=o.get(),a=Zr(i,n);o.set(a)},a=function setDataOnForm(e){var t=o.get();Rd.setValue(e,t)},u=si(null),c=ae(e.tabs,(function(e){return{value:e.name,dom:{tag:"div",classes:["tox-dialog__body-nav-item"]},components:[Ju(n.shared.providers.translate(e.title))],view:function view(){return[yO.sketch((function(o){return{dom:{tag:"div",classes:["tox-form"]},components:ae(e.items,(function(e){return cD(o,e,t,n)})),formBehaviours:ks([ch.config({mode:"acyclic",useTabstopAt:Z(qO)}),bh("TabView.form.events",[Pa(a),La(i)]),Ds.config({channels:gi([{key:GH,value:{onReceive:i}},{key:qH,value:{onReceive:a}}])})])}}))]}}})),s=jH(c);return VH.sketch({dom:{tag:"div",classes:["tox-dialog__body"]},onChangeTab:function onChangeTab(e,t,n){var o=Rd.getValue(t);Ca(e,sT,{name:o,oldName:u.get()}),u.set(o)},tabs:c,components:[VH.parts.tabbar({dom:{tag:"div",classes:["tox-dialog__body-nav"]},components:[PH.parts.tabs({})],markers:{tabClass:"tox-tab",selectedClass:"tox-dialog__body-nav-item--active"},tabbarBehaviours:ks([Kk.config({})])}),VH.parts.tabview({dom:{tag:"div",classes:["tox-dialog__body-content"]}})],selectFirst:s.selectFirst,tabSectionBehaviours:ks([bh("tabpanel",s.extraEvents),ch.config({mode:"acyclic"}),zm.config({find:function find(e){return Se(VH.getViewItems(e))}}),NO(K.none(),(function(e){return e.getSystem().broadcastOn([GH],{}),o.get()}),(function(e,t){o.set(t),e.getSystem().broadcastOn([qH],{})}))])})},YH=function renderBody(e,t,n,o,i){return{dom:{tag:"div",classes:["tox-dialog__content-js"],attributes:s(s({},n.map((function(e){return{id:e}})).getOr({})),i?{"aria-live":"polite"}:{})},components:[],behaviours:ks([_O(0),_H.config({channel:"".concat(XO,"-").concat(t),updateState:function updateState(e,t){return K.some({isTabPanel:function isTabPanel(){return"tabpanel"===t.body.type}})},renderComponents:function renderComponents(e){var t=e.body;return"tabpanel"===t.type?[KH(t,e.initialData,o)]:[RH(t,e.initialData,o)]},initialData:e})])}},XH=wb.deviceType.isTouch(),JH=function hiddenHeader(e,t){return{dom:{tag:"div",styles:{display:"none"},classes:["tox-dialog__header"]},components:[e,t]}},QH=function pClose(e,t){return $L.parts.close(lv.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":t.translate("Close")}},action:e,buttonBehaviours:ks([Kk.config({})])}))},e$=function pUntitled(){return $L.parts.title({dom:{tag:"div",classes:["tox-dialog__title"],innerHtml:"",styles:{display:"none"}}})},t$=function pBodyMessage(e,t){return $L.parts.body({dom:{tag:"div",classes:["tox-dialog__body"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-content"]},components:[{dom:fv("<p>".concat(ab(t.translate(e)),"</p>"))}]}]})},n$=function pFooter(e){return $L.parts.footer({dom:{tag:"div",classes:["tox-dialog__footer"]},components:e})},r$=function pFooterGroup(e,t){return[Vk.sketch({dom:{tag:"div",classes:["tox-dialog__footer-start"]},components:e}),Vk.sketch({dom:{tag:"div",classes:["tox-dialog__footer-end"]},components:t})]},o$=function renderDialog$1(e){var t,n="tox-dialog",o=n+"-wrap",i=o+"__backdrop",a=n+"__disable-scroll";return $L.sketch({lazySink:e.lazySink,onEscape:function onEscape(t){return e.onEscape(t),K.some(!0)},useTabstopAt:function useTabstopAt(e){return!qO(e)},firstTabstop:e.firstTabstop,dom:{tag:"div",classes:[n].concat(e.extraClasses),styles:s({position:"relative"},e.extraStyles)},components:[e.header,e.body].concat(d(e.footer.toArray())),parts:{blocker:{dom:fv('<div class="'.concat(o,'"></div>')),components:[{dom:{tag:"div",classes:XH?[i,i+"--opaque"]:[i]}}]}},dragBlockClass:o,modalBehaviours:ks([Sh.config({}),bh("dialog-events",e.dialogEvents.concat([Ia(Bi(),(function(e,t){GN.isBlocked(e)||ch.focusIn(e)})),Aa(da(),(function(e,t){e.getSystem().broadcastOn([eA],{newFocus:t.event.newFocus})}))])),bh("scroll-lock",[Pa((function(){Du(Vt(),a)})),La((function(){Nu(Vt(),a)}))])].concat(d(e.extraBehaviours))),eventOrder:s((t={},l(t,Xi(),["dialog-events"]),l(t,ca(),["scroll-lock","dialog-events","alloy.base.behaviour"]),l(t,sa(),["alloy.base.behaviour","dialog-events","scroll-lock"]),t),e.eventOrder)})},i$=function renderClose(e){return lv.sketch({dom:{tag:"button",classes:["tox-button","tox-button--icon","tox-button--naked"],attributes:{type:"button","aria-label":e.translate("Close"),title:e.translate("Close")}},buttonBehaviours:ks([Kk.config({})]),components:[hb("close",{tag:"span",classes:["tox-icon"]},e.icons)],action:function action(e){ya(e,oT)}})},a$=function renderTitle(e,t,n,o){return{dom:{tag:"div",classes:["tox-dialog__title"],attributes:s({},n.map((function(e){return{id:e}})).getOr({}))},components:[],behaviours:ks([_H.config({channel:"".concat(YO,"-").concat(t),initialData:e,renderComponents:function renderComponents(e){return[Ju(o.translate(e.title))]}})])}},u$=function renderDragHandle(){return{dom:fv('<div class="tox-dialog__draghandle"></div>')}},c$=function getHeader(e,t,n){return function renderModalHeader(e,t,n){var o=$L.parts.title(a$(e,t,K.none(),n)),i=$L.parts.draghandle(u$()),a=$L.parts.close(i$(n)),u=[o].concat(e.draggable?[i]:[]).concat([a]);return Vk.sketch({dom:fv('<div class="tox-dialog__header"></div>'),components:u})}({title:n.shared.providers.translate(e),draggable:n.dialog.isDraggableModal()},t,n.shared.providers)},s$=function getBusySpec(e,t,n,o){return{dom:{tag:"div",classes:["tox-dialog__busy-spinner"],attributes:{"aria-label":n.translate(e)},styles:{left:"0px",right:"0px",bottom:"0px",top:"".concat(o.getOr(0),"px"),position:"absolute"}},behaviours:t,components:[{dom:fv('<div class="tox-spinner"><div></div><div></div><div></div></div>')}]}},l$=function getEventExtras(e,t,n){return{onClose:function onClose(){return n.closeWindow()},onBlock:function onBlock(n){var o=fc(e().element,".tox-dialog__header").map((function(e){return mn(e)}));$L.setBusy(e(),(function(e,i){return s$(n.message,i,t,o)}))},onUnblock:function onUnblock(){$L.setIdle(e())}}},f$="tox-dialog--fullscreen",d$="tox-dialog--width-lg",m$="tox-dialog--width-md",g$=function getDialogSizeClass(e){switch(e){case"large":return K.some(d$);case"medium":return K.some(m$);default:return K.none()}},p$=function updateDialogSizeClass(e,t){var n=nt.fromDom(t.element.dom);Bu(n,f$)||(Pu(n,[d$,m$]),g$(e).each((function(e){return Du(n,e)})))},h$=function toggleFullscreen(e,t){var n=nt.fromDom(e.element.dom),o=Lu(n),i=de(o,(function(e){return e===d$||e===m$})).or(g$(t));!function toggle$3(e,t){ue(t,(function(t){Mu(e,t)}))}(n,[f$].concat(d(i.toArray())))},v$=function renderModalDialog(e,t,n){var o;return nc(o$(s(s({},e),{},{firstTabstop:1,lazySink:n.shared.getSink,extraBehaviours:[IO({})].concat(d(e.extraBehaviours)),onEscape:function onEscape(e){ya(e,oT)},dialogEvents:t,eventOrder:(o={},l(o,Yi(),[_H.name(),Ds.name()]),l(o,ca(),["scroll-lock",_H.name(),"messages","dialog-events","alloy.base.behaviour"]),l(o,sa(),["alloy.base.behaviour","dialog-events","messages",_H.name(),"scroll-lock"]),o)})))},b$=function mapMenuButtons(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return ae(e,(function(e){return"menu"===e.type?function mapItems(e){var n=ae(e.items,(function(e){var n=Fe(t,e.name).getOr(si(!1));return s(s({},e),{},{storage:n})}));return s(s({},e),{},{items:n})}(e):e}))},y$=function extractCellsToObject(e){return fe(e,(function(e,t){return"menu"===t.type?fe(t.items,(function(e,t){return e[t.name]=t.storage,e}),e):e}),{})},C$=function initCommonEvents(e,t){return[Na(Bi(),GO),e(rT,(function(e,n,o,i){Is(It(i.element)).fold(F,Ms),t.onClose(),n.onClose()})),e(oT,(function(e,t,n,o){t.onCancel(e),ya(o,rT)})),Aa(cT,(function(e,n){return t.onUnblock()})),Aa(uT,(function(e,n){return t.onBlock(n.event)}))]},w$=function initDialog(e,t,n){var o=function fireApiEvent(t,n){return Aa(t,(function(t,o){i(t,(function(i,a){n(e(),i,o.event,t)}))}))},i=function withSpec(e,t){_H.getState(e).get().each((function(n){t(n.internalDialog,e)}))};return[].concat(d(C$(o,t)),[o(aT,(function(e,t){return t.onSubmit(e)})),o(nT,(function(e,t,n){t.onChange(e,{name:n.name})})),o(iT,(function(e,t,o,i){var a=function focusIn(){return i.getSystem().isConnected()?ch.focusIn(i):void 0},u=function isDisabled(e){return Kt(e,"disabled")||qt(e,"aria-disabled").exists((function(e){return"true"===e}))},c=It(i.element),s=Is(c);t.onAction(e,{name:o.name,value:o.value}),Is(c).fold(a,(function(e){u(e)||s.exists((function(t){return yt(e,t)&&u(t)}))?a():n().toOptional().filter((function(t){return!yt(t.element,e)})).each(a)}))})),o(sT,(function(e,t,n){t.onTabChange(e,{newTabName:n.name,oldTabName:n.oldName})})),La((function(t){var n=e();Rd.setValue(t,n.getData())}))])},x$=function renderComponents(e,t){var n=t.map((function(e){return e.footerButtons})).getOr([]),o=ce(n,(function(e){return"start"===e.align})),i=function makeGroup(e,t){return Vk.sketch({dom:{tag:"div",classes:["tox-dialog__footer-".concat(e)]},components:ae(t,(function(e){return e.memento.asSpec()}))})};return[i("start",o.pass),i("end",o.fail)]},S$=function renderFooter(e,t,n){return{dom:fv('<div class="tox-dialog__footer"></div>'),components:[],behaviours:ks([_H.config({channel:"".concat(JO,"-").concat(t),initialData:e,updateState:function updateState(e,t){var o=ae(t.buttons,(function(e){var t=dv(function makeButton(e,t){return Z_(e,e.type,t)}(e,n));return{name:e.name,align:e.align,memento:t}}));return K.some({lookupByName:function lookupByName(t){return function lookup(e,t,n){return de(t,(function(e){return e.name===n})).bind((function(t){return t.memento.getOpt(e)}))}(e,o,t)},footerButtons:o})},renderComponents:x$})])}},k$=function renderModalFooter(e,t,n){return $L.parts.footer(S$(e,t,n))},T$=function getCompByName(e,t){if(e.getRoot().getSystem().isConnected()){var n=zm.getCurrent(e.getFormWrapper()).getOr(e.getFormWrapper());return yO.getField(n,t).orThunk((function(){var n=e.getFooter().bind((function(e){return _H.getState(e).get()}));return n.bind((function(e){return e.lookupByName(t)}))}))}return K.none()},E$=function getDialogApi(e,t,n){var o=function withRoot(t){var n=e.getRoot();n.getSystem().isConnected()&&t(n)},i={getData:function getData(){var t=e.getRoot(),o=t.getSystem().isConnected()?e.getFormWrapper():t,i=Rd.getValue(o),a=De(n,(function(e){return e.get()}));return s(s({},i),a)},setData:function setData(t){o((function(o){var a=i.getData(),u=Zr(a,t),c=function validateData$1(e,t){var n=e.getRoot();return _H.getState(n).get().map((function(e){return Ao(Oo("data",e.dataValidator,t))})).getOr(t)}(e,u),s=e.getFormWrapper();Rd.setValue(s,c),_e(n,(function(e,t){He(u,t)&&e.set(u[t])}))}))},setEnabled:function setEnabled(t,n){T$(e,t).each(n?tg.enable:tg.disable)},focus:function focus(t){T$(e,t).each(Sh.focus)},block:function block(e){if(!T(e))throw new Error("The dialogInstanceAPI.block function should be passed a blocking message of type string as an argument");o((function(t){Ca(t,uT,{message:e})}))},unblock:function unblock(){o((function(e){ya(e,cT)}))},showTab:function showTab(t){o((function(n){var o=e.getBody();_H.getState(o).get().exists((function(e){return e.isTabPanel()}))&&zm.getCurrent(o).each((function(e){VH.showTab(e,t)}))}))},redial:function redial(a){o((function(o){var u=e.getId(),c=t(a),l=b$(c.internalDialog.buttons,n);o.getSystem().broadcastOn(["".concat(KO,"-").concat(u)],c),o.getSystem().broadcastOn(["".concat(YO,"-").concat(u)],c.internalDialog),o.getSystem().broadcastOn(["".concat(XO,"-").concat(u)],c.internalDialog),o.getSystem().broadcastOn(["".concat(JO,"-").concat(u)],s(s({},c.internalDialog),{},{buttons:l})),i.setData(c.initialData)}))},close:function close(){o((function(e){ya(e,rT)}))},toggleFullscreen:e.toggleFullscreen};return i},O$=function renderDialog(e,t,n){var o=qa("dialog"),i=e.internalDialog,a=c$(i.title,o,n),u=si(i.size),c=g$(u.get()).toArray(),s=function renderModalBody(e,t,n){var o=YH(e,t,K.none(),n,!1);return $L.parts.body(o)}({body:i.body,initialData:i.initialData},o,n),l=b$(i.buttons),d=y$(l),m=We(0!==l.length,k$({buttons:l},o,n)),g=w$((function(){return b}),l$((function(){return h}),n.shared.providers,t),n.shared.getSink),p={id:o,header:a,body:s,footer:m,extraClasses:c,extraBehaviours:[_H.config({channel:"".concat(KO,"-").concat(o),updateState:function updateState(e,t){return u.set(t.internalDialog.size),p$(t.internalDialog.size,e),K.some(t)},initialData:e})],extraStyles:{}},h=v$(p,g,n),v={getId:z(o),getRoot:z(h),getBody:function getBody(){return $L.getBody(h)},getFooter:function getFooter(){return $L.getFooter(h)},getFormWrapper:function getForm(){var e=$L.getBody(h);return zm.getCurrent(e).getOr(e)},toggleFullscreen:function toggleFullscreen$1(){h$(h,u.get())}},b=E$(v,t.redial,d);return{dialog:h,instanceApi:b}},A$=function renderInlineDialog(e,t,n){var o,i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=arguments.length>4?arguments[4]:void 0,u=qa("dialog"),c=qa("dialog-label"),s=qa("dialog-content"),m=e.internalDialog,g=si(m.size),p=g$(g.get()).toArray(),h=dv(function renderInlineHeader(e,t,n,o){return Vk.sketch({dom:fv('<div class="tox-dialog__header"></div>'),components:[a$(e,t,K.some(n),o),u$(),i$(o)],containerBehaviours:ks([kL.config({mode:"mouse",blockerClass:"blocker",getTarget:function getTarget(e){return dc(e,'[role="dialog"]').getOrDie()},snaps:{getSnapPoints:function getSnapPoints(){return[]},leftAttr:"data-drag-left",topAttr:"data-drag-top"}})])})}({title:m.title,draggable:!0},u,c,n.shared.providers)),v=dv(function renderInlineBody(e,t,n,o,i){return YH(e,t,K.some(n),o,i)}({body:m.body,initialData:m.initialData},u,s,n,i)),b=b$(m.buttons),y=y$(b),C=We(0!==b.length,dv(function renderInlineFooter(e,t,n){return S$(e,t,n)}({buttons:b},u,n))),w=w$((function(){return S}),{onBlock:function onBlock(e){GN.block(x,(function(t,o){var i=h.getOpt(x).map((function(e){return mn(e.element)}));return s$(e.message,o,n.shared.providers,i)}))},onUnblock:function onUnblock(){GN.unblock(x)},onClose:function onClose(){return t.closeWindow()}},n.shared.getSink),x=nc({dom:{tag:"div",classes:["tox-dialog","tox-dialog-inline"].concat(d(p)),attributes:l({role:"dialog"},"aria-labelledby",c)},eventOrder:(o={},l(o,Yi(),[_H.name(),Ds.name()]),l(o,Xi(),["execute-on-form"]),l(o,ca(),["reflecting","execute-on-form"]),o),behaviours:ks([ch.config({mode:"cyclic",onEscape:function onEscape(e){return ya(e,rT),K.some(!0)},useTabstopAt:function useTabstopAt(e){return!qO(e)&&("button"!==ct(e)||"disabled"!==Gt(e,"disabled"))},firstTabstop:1}),_H.config({channel:"".concat(KO,"-").concat(u),updateState:function updateState(e,t){return g.set(t.internalDialog.size),p$(t.internalDialog.size,e),a(),K.some(t)},initialData:e}),Sh.config({}),bh("execute-on-form",w.concat([Ia(Bi(),(function(e,t){ch.focusIn(e)})),Aa(da(),(function(e,t){e.getSystem().broadcastOn([eA],{newFocus:t.event.newFocus})}))])),GN.config({getRoot:function getRoot(){return K.some(x)}}),vh.config({}),IO({})]),components:[h.asSpec(),v.asSpec()].concat(d(C.map((function(e){return e.asSpec()})).toArray()))}),S=E$({getId:z(u),getRoot:z(x),getFooter:function getFooter(){return C.map((function(e){return e.get(x)}))},getBody:function getBody(){return v.get(x)},getFormWrapper:function getFormWrapper(){var e=v.get(x);return zm.getCurrent(e).getOr(e)},toggleFullscreen:function toggleFullscreen$1(){h$(x,g.get())}},t.redial,y);return{dialog:x,instanceApi:S}},_$=tinymce.util.Tools.resolve("tinymce.util.URI"),D$=["insertContent","setContent","execCommand","close","block","unblock"],R$=function isSupportedMessage(e){return E(e)&&-1!==D$.indexOf(e.mceAction)},N$=function renderUrlDialog(e,t,n,o){var i=qa("dialog"),a=c$(e.title,i,o),u=function renderIframeBody(e){var t={dom:{tag:"div",classes:["tox-dialog__content-js"]},components:[{dom:{tag:"div",classes:["tox-dialog__body-iframe"]},components:[WO(K.none(),{dom:{tag:"iframe",attributes:{src:e.url}},behaviours:ks([Kk.config({}),Sh.config({})])})]}],behaviours:ks([ch.config({mode:"acyclic",useTabstopAt:Z(qO)})])};return $L.parts.body(t)}(e),c=e.buttons.bind((function(e){return 0===e.length?K.none():K.some(k$({buttons:e},i,o))})),m=function initUrlDialog(e,t){var n=function fireApiEvent(t,n){return Aa(t,(function(t,i){o(t,(function(o,a){n(e(),o,i.event,t)}))}))},o=function withSpec(e,t){_H.getState(e).get().each((function(n){t(n,e)}))};return[].concat(d(C$(n,t)),[n(iT,(function(e,t,n){t.onAction(e,{name:n.name})}))])}((function(){return w}),l$((function(){return C}),o.shared.providers,t)),g=s(s({},e.height.fold((function(){return{}}),(function(e){return{height:e+"px","max-height":e+"px"}}))),e.width.fold((function(){return{}}),(function(e){return{width:e+"px","max-width":e+"px"}}))),p=e.width.isNone()&&e.height.isNone()?["tox-dialog--width-lg"]:[],h=new _$(e.url,{base_uri:new _$(window.location.href)}),v="".concat(h.protocol,"://").concat(h.host).concat(h.port?":"+h.port:""),b=tl(),y=[_H.config({channel:"".concat(KO,"-").concat(i),updateState:function updateState(e,t){return K.some(t)},initialData:e}),bh("messages",[Pa((function(){var t=ol(nt.fromDom(window),"message",(function(t){if(h.isSameOrigin(new _$(t.raw.origin))){var o=t.raw.data;R$(o)?function handleMessage(e,t,n){switch(n.mceAction){case"insertContent":e.insertContent(n.content);break;case"setContent":e.setContent(n.content);break;case"execCommand":var o=!!R(n.ui)&&n.ui;e.execCommand(n.cmd,o,n.value);break;case"close":t.close();break;case"block":t.block(n.message);break;case"unblock":t.unblock()}}(n,w,o):function isCustomMessage(e){return!R$(e)&&E(e)&&He(e,"mceAction")}(o)&&e.onMessage(w,o)}}));b.set(t)})),La(b.clear)]),Ds.config({channels:l({},QO,{onReceive:function onReceive(e,t){fc(e.element,"iframe").each((function(e){var n=e.dom.contentWindow;B(n)&&n.postMessage(t,v)}))}})})],C=v$({id:i,header:a,body:u,footer:c,extraClasses:p,extraBehaviours:y,extraStyles:g},m,o),w=function getUrlDialogApi(e){var t=function withRoot(t){e.getSystem().isConnected()&&t(e)};return{block:function block(e){if(!T(e))throw new Error("The urlDialogInstanceAPI.block function should be passed a blocking message of type string as an argument");t((function(t){Ca(t,uT,{message:e})}))},unblock:function unblock(){t((function(e){ya(e,cT)}))},close:function close(){t((function(e){ya(e,rT)}))},sendMessage:function sendMessage(e){t((function(t){t.getSystem().broadcastOn([QO],e)}))}}}(C);return{dialog:C,instanceApi:w}},M$=function validateData(e,t){return Ao(Oo("data",t,e))},B$=function isAlertOrConfirmDialog(e){return _k(e,".tox-alert-dialog")||_k(e,".tox-confirm-dialog")},I$=function inlineAdditionalBehaviours(e,t,n){return t&&n?[]:[gN.config({contextual:{lazyContext:function lazyContext(){return K.some(Cr(nt.fromDom(e.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top"],lazyViewport:function lazyViewport(t){return Ok(e,t.element).map((function(e){return{bounds:Ak(e),optScrollEnv:K.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:vn(e.element).top})}})).getOrThunk((function(){return{bounds:Sr(),optScrollEnv:K.none()}}))}})]},P$=function setup(e){var t=e.editor,n=ky(t),o=function setup$2(e){var t=e.shared;return{open:function open(n,o){var i=function closeDialog(){$L.hide(s),o()},a=dv(Z_({name:"close-alert",text:"OK",primary:!0,buttonType:K.some("primary"),align:"end",enabled:!0,icon:K.none()},"cancel",e)),u=e$(),c=QH(i,t.providers),s=nc(o$({lazySink:function lazySink(){return t.getSink()},header:JH(u,c),body:t$(n,t.providers),footer:K.some(n$(r$([],[a.asSpec()]))),onEscape:i,extraClasses:["tox-alert-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Aa(oT,i)],eventOrder:{}}));$L.show(s);var l=a.get(s);Sh.focus(l)}}}(e.backstages.dialog),i=function setup$1(e){var t=e.shared;return{open:function open(n,o){var i=function closeDialog(e){$L.hide(l),o(e)},a=dv(Z_({name:"yes",text:"Yes",primary:!0,buttonType:K.some("primary"),align:"end",enabled:!0,icon:K.none()},"submit",e)),u=Z_({name:"no",text:"No",primary:!1,buttonType:K.some("secondary"),align:"end",enabled:!0,icon:K.none()},"cancel",e),c=e$(),s=QH((function(){return i(!1)}),t.providers),l=nc(o$({lazySink:function lazySink(){return t.getSink()},header:JH(c,s),body:t$(n,t.providers),footer:K.some(n$(r$([],[u,a.asSpec()]))),onEscape:function onEscape(){return i(!1)},extraClasses:["tox-confirm-dialog"],extraBehaviours:[],extraStyles:{},dialogEvents:[Aa(oT,(function(){return i(!1)})),Aa(aT,(function(){return i(!0)}))],eventOrder:{}}));$L.show(l);var d=a.get(l);Sh.focus(d)}}}(e.backstages.dialog),a=function openModalUrlDialog(n,o){return TH.openUrl((function factory(n){var i=N$(n,{closeWindow:function closeWindow(){$L.hide(i.dialog),o(i.instanceApi)}},t,e.backstages.dialog);return $L.show(i.dialog),i.instanceApi}),n)},u=function openModalDialog(t,n){return TH.open((function factory(t,o,i){var a=o,u=O$({dataValidator:i,initialData:a,internalDialog:t},{redial:TH.redial,closeWindow:function closeWindow(){$L.hide(u.dialog),n(u.instanceApi)}},e.backstages.dialog);return $L.show(u.dialog),u.instanceApi.setData(a),u.instanceApi}),t)},c=function openInlineDialog(o,i,a,u){return TH.open((function factory(o,c,l){var m=M$(c,l),g=nl(),p=e.backstages.popup.shared.header.isPositionedAtTop(),h=function refreshDocking(){return g.on((function(e){cv.reposition(e),n&&p||gN.refresh(e)}))},v=A$({dataValidator:l,initialData:m,internalDialog:o},{redial:TH.redial,closeWindow:function closeWindow(){g.on(cv.hide),t.off("ResizeEditor",h),g.clear(),a(v.instanceApi)}},e.backstages.popup,u.ariaAttrs,h),b=nc(cv.sketch(s(s({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:u.persistent?{event:"doNotDismissYet"}:{}},p?{}:{fireRepositionEventInstead:{}}),{},{inlineBehaviours:ks([bh("window-manager-inline-events",[Aa(la(),(function(e,t){ya(v.dialog,oT)}))])].concat(d(I$(t,n,p)))),isExtraPart:function isExtraPart(e,t){return B$(t)}})));g.set(b);return cv.showWithinBounds(b,oc(v.dialog),{anchor:i},(function getInlineDialogBounds(){var e=t.inline?Vt():nt.fromDom(t.getContainer()),n=Cr(e);return K.some(n)})),n&&p||(gN.refresh(b),t.on("ResizeEditor",h)),v.instanceApi.setData(m),ch.focusIn(v.dialog),v.instanceApi}),o)},l=function openBottomInlineDialog(n,o,i,a){return TH.open((function factory(n,u,c){var l=M$(u,c),d=nl(),m=e.backstages.popup.shared.header.isPositionedAtTop(),g=function refreshDocking(){return d.on((function(e){cv.reposition(e),gN.refresh(e)}))},p=A$({dataValidator:c,initialData:l,internalDialog:n},{redial:TH.redial,closeWindow:function closeWindow(){d.on(cv.hide),t.off("ResizeEditor ScrollWindow ElementScroll",g),d.clear(),i(p.instanceApi)}},e.backstages.popup,a.ariaAttrs,g),h=nc(cv.sketch(s(s({lazySink:e.backstages.popup.shared.getSink,dom:{tag:"div",classes:[]},fireDismissalEventInstead:a.persistent?{event:"doNotDismissYet"}:{}},m?{}:{fireRepositionEventInstead:{}}),{},{inlineBehaviours:ks([bh("window-manager-inline-events",[Aa(la(),(function(e,t){ya(p.dialog,oT)}))]),gN.config({contextual:{lazyContext:function lazyContext(){return K.some(Cr(nt.fromDom(t.getContentAreaContainer())))},fadeInClass:"tox-dialog-dock-fadein",fadeOutClass:"tox-dialog-dock-fadeout",transitionClass:"tox-dialog-dock-transition"},modes:["top","bottom"],lazyViewport:function lazyViewport(e){return Ok(t,e.element).map((function(e){return{bounds:Ak(e),optScrollEnv:K.some({currentScrollTop:e.element.dom.scrollTop,scrollElmTop:vn(e.element).top})}})).getOrThunk((function(){return{bounds:Sr(),optScrollEnv:K.none()}}))}})]),isExtraPart:function isExtraPart(e,t){return B$(t)}})));d.set(h);return cv.showWithinBounds(h,oc(p.dialog),{anchor:o},(function getInlineDialogBounds(){return e.backstages.popup.shared.getSink().toOptional().bind((function(e){var n=Ok(t,e.element).map((function(e){return Ak(e)})).getOr(Sr()),o=Cr(nt.fromDom(t.getContentAreaContainer())),i=xr(o,n);return K.some(yr(i.x,i.y,i.width,i.height-15))}))})),gN.refresh(h),t.on("ResizeEditor ScrollWindow ElementScroll ResizeWindow",g),p.instanceApi.setData(l),ch.focusIn(p.dialog),p.instanceApi}),n)};return{open:function open(t,n,o){if(!N(n)){if("toolbar"===n.inline)return c(t,e.backstages.popup.shared.anchors.inlineDialog(),o,n);if("bottom"===n.inline)return l(t,e.backstages.popup.shared.anchors.inlineBottomDialog(),o,n);if("cursor"===n.inline)return c(t,e.backstages.popup.shared.anchors.cursor(),o,n)}return u(t,o)},openUrl:function openUrl(e,t){return a(e,t)},alert:function alert(e,t){o.open(e,t)},close:function close(e){e.close()},confirm:function confirm(e,t){i.open(e,t)}}},L$=function registerOptions(e){Tb(e),function register$d(e){var t=e.options.register,n=function colorProcessor(e){return L(e,T)?{value:eS(e),valid:!0}:{valid:!1,message:"Must be an array of strings."}},o=function colorColsProcessor(e){return P(e)&&e>0?{value:e,valid:!0}:{valid:!1,message:"Must be a positive number."}};t("color_map",{processor:n,default:["#BFEDD2","Light Green","#FBEEB8","Light Yellow","#F8CAC6","Light Red","#ECCAFA","Light Purple","#C2E0F4","Light Blue","#2DC26B","Green","#F1C40F","Yellow","#E03E2D","Red","#B96AD9","Purple","#3598DB","Blue","#169179","Dark Turquoise","#E67E23","Orange","#BA372A","Dark Red","#843FA1","Dark Purple","#236FA1","Dark Blue","#ECF0F1","Light Gray","#CED4D9","Medium Gray","#95A5A6","Gray","#7E8C8D","Dark Gray","#34495E","Navy Blue","#000000","Black","#ffffff","White"]}),t("color_map_background",{processor:n}),t("color_map_foreground",{processor:n}),t("color_cols",{processor:o,default:oS(e)}),t("color_cols_foreground",{processor:o,default:iS(e,Jx)}),t("color_cols_background",{processor:o,default:iS(e,Qx)}),t("custom_colors",{processor:"boolean",default:!0}),t("color_default_foreground",{processor:"string",default:nS}),t("color_default_background",{processor:"string",default:nS})}(e),function register(e){var t=e.options.register;t("contextmenu_avoid_overlap",{processor:"string",default:""}),t("contextmenu_never_use_native",{processor:"boolean",default:!1}),t("contextmenu",{processor:function processor(e){return!1===e?{value:[],valid:!0}:T(e)||L(e,T)?{value:mP(e),valid:!0}:{valid:!1,message:"Must be false or a string."}},default:"link linkchecker image editimage table spellchecker configurepermanentpen"})}(e)};!function Theme(){kr.add("silver",(function(e){L$(e);var t=function popupSinkBounds(){return Sr()},n=PL(e,{getPopupSinkBounds:function getPopupSinkBounds(){return t()}}),o=n.dialogs,i=n.popups,a=n.renderUI;Sk(e,i.backstage.shared);var u=P$({editor:e,backstages:{popup:i.backstage,dialog:o.backstage}});return{renderUI:function renderUI(){var n=a();return Ok(e,i.getMothership().element).each((function(e){t=function popupSinkBounds(){return Ak(e)}})),n},getWindowManagerImpl:z(u),getNotificationManagerImpl:function getNotificationManagerImpl(){return function NotificationManagerImpl(e,t,n){var o=t.backstage.shared,i=function getBounds(){var t=Cr(nt.fromDom(e.getContentAreaContainer())),n=Sr(),o=qc(n.x,t.x,t.right),i=qc(n.y,t.y,t.bottom),a=Math.max(t.right,n.right),u=Math.max(t.bottom,n.bottom);return K.some(yr(o,i,a-o,u-i))};return{open:function open(t,a){var u=function close(){a(),cv.hide(l)},c=nc(bb.sketch({text:t.text,level:ne(["success","error","warning","warn","info"],t.type)?t.type:void 0,progress:!0===t.progressBar,icon:t.icon,closeButton:t.closeButton,onAction:u,iconProvider:o.providers.icons,translationProvider:o.providers.translate})),l=nc(cv.sketch(s({dom:{tag:"div",classes:["tox-notifications-container"]},lazySink:o.getSink,fireDismissalEventInstead:{}},o.header.isPositionedAtTop()?{}:{fireRepositionEventInstead:{}})));n.add(l),P(t.timeout)&&t.timeout>0&&sv.setEditorTimeout(e,(function(){u()}),t.timeout);var d={close:u,reposition:function reposition(){var t=oc(c),n={maxHeightFunction:vl()},a=e.notificationManager.getNotifications();if(a[0]===d){var u=s(s({},o.anchors.banner()),{},{overrides:n});cv.showWithinBounds(l,t,{anchor:u},i)}else te(a,d).each((function(e){var o=a[e-1].getEl(),u={type:"node",root:Vt(),node:K.some(nt.fromDom(o)),overrides:n,layouts:{onRtl:function onRtl(){return[ss]},onLtr:function onLtr(){return[ss]}}};cv.showWithinBounds(l,t,{anchor:u},i)}))},text:function text(e){bb.updateText(c,e)},settings:t,getEl:function getEl(){return c.element.dom},progressBar:{value:function value(e){bb.updateProgress(c,e)}}};return d},close:function close(e){e.close()},getArgs:function getArgs(e){return e.settings}}}(e,{backstage:i.backstage},i.getMothership())}}}))}()}()},2936:function(e,t,n){n(2937)},2937:function(e,t,n){var o=n(5).default,i=n(95).default,a=n(22).default,u=n(12).default,c=n(13).default;!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.ModelManager"),t=function isType$1(e){return function(t){return function typeOf(e){var t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&function hasProto(e,t,n){var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name}(e,String,(function(e,t){return t.isPrototypeOf(e)}))?"string":t}(t)===e}},n=function isSimpleType(e){return function(t){return typeof t===e}},s=function eq$2(e){return function(t){return e===t}},l=t("string"),d=t("object"),m=t("array"),g=s(null),p=n("boolean"),h=s(void 0),v=function isNonNullable(e){return!function isNullable(e){return null===e||void 0===e}(e)},b=n("function"),y=n("number"),C=function noop(){},w=function constant(e){return function(){return e}},x=function identity(e){return e},S=function tripleEquals(e,t){return e===t};function curry(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];var a=n.concat(o);return e.apply(null,a)}}var k=function not(e){return function(t){return!e(t)}},T=function die(e){return function(){throw new Error(e)}},E=function apply(e){return e()},O=w(!1),A=w(!0),D=function(){function Optional(e,t){u(this,Optional),this.tag=e,this.value=t}return c(Optional,[{key:"fold",value:function fold(e,t){return this.tag?t(this.value):e()}},{key:"isSome",value:function isSome(){return this.tag}},{key:"isNone",value:function isNone(){return!this.tag}},{key:"map",value:function map(e){return this.tag?Optional.some(e(this.value)):Optional.none()}},{key:"bind",value:function bind(e){return this.tag?e(this.value):Optional.none()}},{key:"exists",value:function exists(e){return this.tag&&e(this.value)}},{key:"forall",value:function forall(e){return!this.tag||e(this.value)}},{key:"filter",value:function filter(e){return!this.tag||e(this.value)?this:Optional.none()}},{key:"getOr",value:function getOr(e){return this.tag?this.value:e}},{key:"or",value:function or(e){return this.tag?this:e}},{key:"getOrThunk",value:function getOrThunk(e){return this.tag?this.value:e()}},{key:"orThunk",value:function orThunk(e){return this.tag?this:e()}},{key:"getOrDie",value:function getOrDie(e){if(this.tag)return this.value;throw new Error(null!==e&&void 0!==e?e:"Called getOrDie on None")}},{key:"getOrNull",value:function getOrNull(){return this.tag?this.value:null}},{key:"getOrUndefined",value:function getOrUndefined(){return this.value}},{key:"each",value:function each(e){this.tag&&e(this.value)}},{key:"toArray",value:function toArray(){return this.tag?[this.value]:[]}},{key:"toString",value:function toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}],[{key:"some",value:function some(e){return new Optional(!0,e)}},{key:"none",value:function none(){return Optional.singletonNone}},{key:"from",value:function from(e){return v(e)?Optional.some(e):Optional.none()}}]),Optional}();D.singletonNone=new D(!1);var R=Array.prototype.slice,N=Array.prototype.indexOf,M=Array.prototype.push,B=function contains$2(e,t){return function rawIndexOf(e,t){return N.call(e,t)}(e,t)>-1},I=function exists(e,t){for(var n=0,o=e.length;n<o;n++){if(t(e[n],n))return!0}return!1},P=function range$1(e,t){for(var n=[],o=0;o<e;o++)n.push(t(o));return n},L=function map$1(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;i++){var a=e[i];o[i]=t(a,i)}return o},F=function each$2(e,t){for(var n=0,o=e.length;n<o;n++){t(e[n],n)}},H=function partition(e,t){for(var n=[],o=[],i=0,a=e.length;i<a;i++){var u=e[i];(t(u,i)?n:o).push(u)}return{pass:n,fail:o}},$=function filter$2(e,t){for(var n=[],o=0,i=e.length;o<i;o++){var a=e[o];t(a,o)&&n.push(a)}return n},z=function foldr(e,t,n){return function eachr(e,t){for(var n=e.length-1;n>=0;n--)t(e[n],n)}(e,(function(e,o){n=t(n,e,o)})),n},V=function foldl(e,t,n){return F(e,(function(e,o){n=t(n,e,o)})),n},U=function find$1(e,t){return function findUntil(e,t,n){for(var o=0,i=e.length;o<i;o++){var a=e[o];if(t(a,o))return D.some(a);if(n(a,o))break}return D.none()}(e,t,O)},Z=function findIndex(e,t){for(var n=0,o=e.length;n<o;n++){if(t(e[n],n))return D.some(n)}return D.none()},W=function flatten(e){for(var t=[],n=0,o=e.length;n<o;++n){if(!m(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);M.apply(t,e[n])}return t},j=function bind$2(e,t){return W(L(e,t))},G=function forall(e,t){for(var n=0,o=e.length;n<o;++n){if(!0!==t(e[n],n))return!1}return!0},q=function mapToObject(e,t){for(var n={},o=0,i=e.length;o<i;o++){var a=e[o];n[String(a)]=t(a,o)}return n},K=function get$d(e,t){return t>=0&&t<e.length?D.some(e[t]):D.none()},Y=function head(e){return K(e,0)},X=function last$2(e){return K(e,e.length-1)},J=function findMap(e,t){for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o.isSome())return o}return D.none()},Q=Object.keys,ee=Object.hasOwnProperty,te=function each$1(e,t){for(var n=Q(e),o=0,i=n.length;o<i;o++){var a=n[o];t(e[a],a)}},ne=function map(e,t){return re(e,(function(e,n){return{k:n,v:t(e,n)}}))},re=function tupleMap(e,t){var n={};return te(e,(function(e,o){var i=t(e,o);n[i.k]=i.v})),n},oe=function filter$1(e,t){var n={};return function internalFilter(e,t,n,o){te(e,(function(e,i){(t(e,i)?n:o)(e,i)}))}(e,t,function objAcc(e){return function(t,n){e[n]=t}}(n),C),n},ie=function mapToArray(e,t){var n=[];return te(e,(function(e,o){n.push(t(e,o))})),n},ae=function values(e){return ie(e,x)},ue=function has$1(e,t){return ee.call(e,t)},ce="undefined"!==typeof window?window:Function("return this;")(),se=function resolve$2(e,t){return function path(e,t){for(var n=void 0!==t&&null!==t?t:ce,o=0;o<e.length&&void 0!==n&&null!==n;++o)n=n[e[o]];return n}(e.split("."),t)},le=function getOrDie(e,t){var n=function unsafe(e,t){return se(e,t)}(e,t);if(void 0===n||null===n)throw new Error(e+" not available on this browser");return n},fe=Object.getPrototypeOf,de=function isPrototypeOf(e){var t=se("ownerDocument.defaultView",e);return d(e)&&(function sandHTMLElement(e){return le("HTMLElement",e)}(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(fe(e).constructor.name))},me=function name(e){return e.dom.nodeName.toLowerCase()},ge=function type(e){return e.dom.nodeType},pe=function isType(e){return function(t){return ge(t)===e}},he=function isComment(e){return 8===ge(e)||"#comment"===me(e)},ve=function isHTMLElement(e){return be(e)&&de(e.dom)},be=pe(1),ye=pe(3),Ce=pe(9),we=pe(11),xe=function isTag(e){return function(t){return be(t)&&me(t)===e}},Se=function rawSet(e,t,n){if(!(l(n)||p(n)||y(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")},ke=function set$2(e,t,n){Se(e.dom,t,n)},Te=function setAll$1(e,t){var n=e.dom;te(t,(function(e,t){Se(n,t,e)}))},Ee=function get$b(e,t){var n=e.dom.getAttribute(t);return null===n?void 0:n},Oe=function getOpt(e,t){return D.from(Ee(e,t))},Ae=function remove$7(e,t){e.dom.removeAttribute(t)},_e=function clone$2(e){return V(e.dom.attributes,(function(e,t){return e[t.name]=t.value,e}),{})},De=function fromDom$1(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:e}},Re={fromHtml:function fromHtml$1(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){var o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return De(n.childNodes[0])},fromTag:function fromTag(e,t){var n=(t||document).createElement(e);return De(n)},fromText:function fromText(e,t){var n=(t||document).createTextNode(e);return De(n)},fromDom:De,fromPoint:function fromPoint$1(e,t,n){return D.from(e.dom.elementFromPoint(t,n)).map(De)}},Ne=function is$2(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},Me=function bypassSelector(e){return 1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType||0===e.childElementCount},Be=function one(e,t){var n=void 0===t?document:t.dom;return Me(n)?D.none():D.from(n.querySelector(e)).map(Re.fromDom)},Ie=function eq$1(e,t){return e.dom===t.dom},Pe=function contains$1(e,t){var n=e.dom,o=t.dom;return n!==o&&n.contains(o)},Le=Ne,Fe=function owner(e){return Re.fromDom(e.dom.ownerDocument)},He=function documentOrOwner(e){return Ce(e)?e:Fe(e)},$e=function parent(e){return D.from(e.dom.parentNode).map(Re.fromDom)},ze=function parentElement(e){return D.from(e.dom.parentElement).map(Re.fromDom)},Ve=function parents(e,t){for(var n=b(t)?t:O,o=e.dom,i=[];null!==o.parentNode&&void 0!==o.parentNode;){var a=o.parentNode,u=Re.fromDom(a);if(i.push(u),!0===n(u))break;o=a}return i},Ue=function prevSibling(e){return D.from(e.dom.previousSibling).map(Re.fromDom)},Ze=function nextSibling(e){return D.from(e.dom.nextSibling).map(Re.fromDom)},We=function children$2(e){return L(e.dom.childNodes,Re.fromDom)},je=function child$2(e,t){var n=e.dom.childNodes;return D.from(n[t]).map(Re.fromDom)},Ge=function before$3(e,t){$e(e).each((function(n){n.dom.insertBefore(t.dom,e.dom)}))},qe=function after$5(e,t){Ze(e).fold((function(){$e(e).each((function(e){Ye(e,t)}))}),(function(e){Ge(e,t)}))},Ke=function prepend(e,t){var n=function firstChild(e){return je(e,0)}(e);n.fold((function(){Ye(e,t)}),(function(n){e.dom.insertBefore(t.dom,n.dom)}))},Ye=function append$1(e,t){e.dom.appendChild(t.dom)},Xe=function wrap(e,t){Ge(e,t),Ye(t,e)},Je=function after$4(e,t){F(t,(function(n,o){var i=0===o?e:t[o-1];qe(i,n)}))},Qe=function append(e,t){F(t,(function(t){Ye(e,t)}))},et=function empty(e){e.dom.textContent="",F(We(e),(function(e){tt(e)}))},tt=function remove$6(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},nt=function unwrap(e){var t=We(e);t.length>0&&Je(e,t),tt(e)},rt=function clone$1(e,t){return Re.fromDom(e.dom.cloneNode(t))},ot=function shallow(e){return rt(e,!1)},it=function deep(e){return rt(e,!0)},at=function shallowAs(e,t){var n=Re.fromTag(t),o=_e(e);return Te(n,o),n},ut=["tfoot","thead","tbody","colgroup"],ct=function detail(e,t,n){return{element:e,rowspan:t,colspan:n}},st=function detailnew(e,t,n,o){return{element:e,rowspan:t,colspan:n,isNew:o}},lt=function rowdetail(e,t,n){return{element:e,cells:t,section:n}},ft=function elementnew(e,t,n){return{element:e,isNew:t,isLocked:n}},dt=function rowcells(e,t,n,o){return{element:e,cells:t,section:n,isNew:o}},mt=b(Element.prototype.attachShadow)&&b(Node.prototype.getRootNode),gt=w(mt),pt=mt?function(e){return Re.fromDom(e.dom.getRootNode())}:He,ht=function getShadowRoot(e){var t=pt(e);return function isShadowRoot(e){return we(e)&&v(e.dom.host)}(t)?D.some(t):D.none()},vt=function getShadowHost(e){return Re.fromDom(e.dom.host)},bt=function isOpenShadowHost(e){return v(e.dom.shadowRoot)},yt=function inBody(e){var t=ye(e)?e.dom.parentNode:e.dom;if(void 0===t||null===t||null===t.ownerDocument)return!1;var n=t.ownerDocument;return ht(Re.fromDom(t)).fold((function(){return n.body.contains(t)}),function compose1(e,t){return function(n){return e(t(n))}}(inBody,vt))},Ct=function getBody$1(e){var t=e.dom.body;if(null===t||void 0===t)throw new Error("Body is not available yet");return Re.fromDom(t)},wt=function descendants$1(e,t){var n=[];return F(We(e),(function(e){t(e)&&(n=n.concat([e])),n=n.concat(descendants$1(e,t))})),n},xt=function ancestors$3(e,t,n){return function ancestors$4(e,t,n){return $(Ve(e,n),t)}(e,(function(e){return Ne(e,t)}),n)},St=function children(e,t){return function children$1(e,t){return $(We(e),t)}(e,(function(e){return Ne(e,t)}))},kt=function descendants(e,t){return function all$1(e,t){var n=void 0===t?document:t.dom;return Me(n)?[]:L(n.querySelectorAll(e),Re.fromDom)}(t,e)},Tt=function ClosestOrAncestor(e,t,n,o,i){return e(n,o)?D.some(n):b(i)&&i(n)?D.none():t(n,o,i)},Et=function ancestor$2(e,t,n){for(var o=e.dom,i=b(n)?n:O;o.parentNode;){o=o.parentNode;var a=Re.fromDom(o);if(t(a))return D.some(a);if(i(a))break}return D.none()},Ot=function closest$2(e,t,n){return Tt((function is(e,t){return t(e)}),Et,e,t,n)},At=function ancestor$1(e,t,n){return Et(e,(function(e){return Ne(e,t)}),n)},_t=function child(e,t){return function child$1(e,t){return U(e.dom.childNodes,(function pred(e){return t(Re.fromDom(e))})).map(Re.fromDom)}(e,(function(e){return Ne(e,t)}))},Dt=function descendant(e,t){return Be(t,e)},Rt=function closest$1(e,t,n){return Tt((function is(e,t){return Ne(e,t)}),At,e,t,n)},Nt=function is(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:S;return e.exists((function(e){return n(e,t)}))},Mt=function cat(e){for(var t=[],n=function push(e){t.push(e)},o=0;o<e.length;o++)e[o].each(n);return t},Bt=function someIf(e,t){return e?D.some(t):D.none()},It=function checkRange(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t},Pt=function contains(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3?arguments[3]:void 0,i=e.indexOf(t,n);return-1!==i&&(!!h(o)||i+t.length<=o)},Lt=function startsWith(e,t){return It(e,t,0)},Ft=function endsWith(e,t){return It(e,t,e.length-t.length)},Ht=function blank(e){return function(t){return t.replace(e,"")}}(/^\s+|\s+$/g),$t=function isNotEmpty(e){return e.length>0},zt=function isSupported(e){return void 0!==e.style&&b(e.style.getPropertyValue)},Vt=function internalSet(e,t,n){if(!l(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);zt(e)&&e.style.setProperty(t,n)},Ut=function set$1(e,t,n){var o=e.dom;Vt(o,t,n)},Zt=function setAll(e,t){var n=e.dom;te(t,(function(e,t){Vt(n,t,e)}))},Wt=function get$a(e,t){var n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return""!==o||yt(e)?o:jt(n,t)},jt=function getUnsafeProperty(e,t){return zt(e)?e.style.getPropertyValue(t):""},Gt=function getRaw$2(e,t){var n=e.dom,o=jt(n,t);return D.from(o).filter((function(e){return e.length>0}))},qt=function remove$5(e,t){!function internalRemove(e,t){zt(e)&&e.style.removeProperty(t)}(e.dom,t),Nt(Oe(e,"style").map(Ht),"")&&Ae(e,"style")},Kt=function getAttrValue(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return Oe(e,t).map((function(e){return parseInt(e,10)})).getOr(n)},Yt=function getSpan(e,t){return Kt(e,t,1)},Xt=function hasColspan(e){return xe("col")(e)?Kt(e,"span",1)>1:Yt(e,"colspan")>1},Jt=function hasRowspan(e){return Yt(e,"rowspan")>1},Qt=function getCssValue(e,t){return parseInt(Wt(e,t),10)},en=w(10),tn=w(10),nn=function firstLayer(e,t){return rn(e,t,A)},rn=function filterFirstLayer(e,t,n){return j(We(e),(function(e){return Ne(e,t)?n(e)?[e]:[]:filterFirstLayer(e,t,n)}))},an=function cell(e,t){return function lookup(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:O;return n(t)?D.none():B(e,me(t))?D.some(t):At(t,e.join(","),(function isRootOrUpperTable(e){return Ne(e,"table")||n(e)}))}(["td","th"],e,t)},un=function cells$1(e){return nn(e,"th,td")},cn=function columns$1(e){return Ne(e,"colgroup")?St(e,"col"):j(fn(e),(function(e){return St(e,"col")}))},sn=function table(e,t){return Rt(e,"table",t)},ln=function rows$1(e){return nn(e,"tr")},fn=function columnGroups(e){return sn(e).fold(w([]),(function(e){return St(e,"colgroup")}))},dn=function fromRowsOrColGroups(e,t){return L(e,(function(e){if("colgroup"===me(e)){var n=L(cn(e),(function(e){var t=Kt(e,"span",1);return ct(e,1,t)}));return lt(e,n,"colgroup")}var o=L(un(e),(function(e){var t=Kt(e,"rowspan",1),n=Kt(e,"colspan",1);return ct(e,t,n)}));return lt(e,o,t(e))}))},mn=function getParentSection(e){return $e(e).map((function(e){var t=me(e);return function isValidSection(e){return B(ut,e)}(t)?t:"tbody"})).getOr("tbody")},gn=function fromTable$1(e){var t=ln(e),n=fn(e),o=[].concat(a(n),a(t));return dn(o,mn)},pn=function cached(e){var t,n=!1;return function(){if(!n){n=!0;for(var o=arguments.length,i=new Array(o),a=0;a<o;a++)i[a]=arguments[a];t=e.apply(null,i)}return t}},hn=function unknown$2(){return vn(0,0)},vn=function nu$2(e,t){return{major:e,minor:t}},bn={nu:vn,detect:function detect$5(e,t){var n=String(t).toLowerCase();return 0===e.length?hn():function find(e,t){var n=function firstMatch(e,t){for(var n=0;n<e.length;n++){var o=e[n];if(o.test(t))return o}}(e,t);if(!n)return{major:0,minor:0};var o=function group(e){return Number(t.replace(n,"$"+e))};return vn(o(1),o(2))}(e,n)},unknown:hn},yn=function detect$4(e,t){var n=String(t).toLowerCase();return U(e,(function(e){return e.search(n)}))},Cn=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,wn=function checkContains(e){return function(t){return Pt(t,e)}},xn=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:function search(e){return Pt(e,"edge/")&&Pt(e,"chrome")&&Pt(e,"safari")&&Pt(e,"applewebkit")}},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Cn],search:function search(e){return Pt(e,"chrome")&&!Pt(e,"chromeframe")}},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:function search(e){return Pt(e,"msie")||Pt(e,"trident")}},{name:"Opera",versionRegexes:[Cn,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:wn("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:wn("firefox")},{name:"Safari",versionRegexes:[Cn,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:function search(e){return(Pt(e,"safari")||Pt(e,"mobile/"))&&Pt(e,"applewebkit")}}],Sn=[{name:"Windows",search:wn("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:function search(e){return Pt(e,"iphone")||Pt(e,"ipad")},versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:wn("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:wn("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:wn("linux"),versionRegexes:[]},{name:"Solaris",search:wn("sunos"),versionRegexes:[]},{name:"FreeBSD",search:wn("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:wn("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],kn={browsers:w(xn),oses:w(Sn)},Tn="Edge",En="Chromium",On="Opera",An="Firefox",_n="Safari",Dn=function nu$1(e){var t=e.current,n=e.version,o=function isBrowser(e){return function(){return t===e}};return{current:t,version:n,isEdge:o(Tn),isChromium:o(En),isIE:o("IE"),isOpera:o(On),isFirefox:o(An),isSafari:o(_n)}},Rn={unknown:function unknown$1(){return Dn({current:void 0,version:bn.unknown()})},nu:Dn,edge:w(Tn),chromium:w(En),ie:w("IE"),opera:w(On),firefox:w(An),safari:w(_n)},Nn="Windows",Mn="Android",Bn="Linux",In="macOS",Pn="Solaris",Ln="FreeBSD",Fn="ChromeOS",Hn=function nu(e){var t=e.current,n=e.version,o=function isOS(e){return function(){return t===e}};return{current:t,version:n,isWindows:o(Nn),isiOS:o("iOS"),isAndroid:o(Mn),isMacOS:o(In),isLinux:o(Bn),isSolaris:o(Pn),isFreeBSD:o(Ln),isChromeOS:o(Fn)}},$n={unknown:function unknown(){return Hn({current:void 0,version:bn.unknown()})},nu:Hn,windows:w(Nn),ios:w("iOS"),android:w(Mn),linux:w(Bn),macos:w(In),solaris:w(Pn),freebsd:w(Ln),chromeos:w(Fn)},zn=function detect$3(e,t,n){var o=kn.browsers(),i=kn.oses(),a=t.bind((function(e){return function detectBrowser$1(e,t){return J(t.brands,(function(t){var n=t.brand.toLowerCase();return U(e,(function(e){var t;return n===(null===(t=e.brand)||void 0===t?void 0:t.toLowerCase())})).map((function(e){return{current:e.name,version:bn.nu(parseInt(t.version,10),0)}}))}))}(o,e)})).orThunk((function(){return function detectBrowser(e,t){return yn(e,t).map((function(e){var n=bn.detect(e.versionRegexes,t);return{current:e.name,version:n}}))}(o,e)})).fold(Rn.unknown,Rn.nu),u=function detectOs(e,t){return yn(e,t).map((function(e){var n=bn.detect(e.versionRegexes,t);return{current:e.name,version:n}}))}(i,e).fold($n.unknown,$n.nu),c=function DeviceType(e,t,n,o){var i=e.isiOS()&&!0===/ipad/i.test(n),a=e.isiOS()&&!i,u=e.isiOS()||e.isAndroid(),c=u||o("(pointer:coarse)"),s=i||!a&&u&&o("(min-device-width:768px)"),l=a||u&&!s,d=t.isSafari()&&e.isiOS()&&!1===/safari/i.test(n),m=!l&&!s&&!d;return{isiPad:w(i),isiPhone:w(a),isTablet:w(s),isPhone:w(l),isTouch:w(c),isAndroid:e.isAndroid,isiOS:e.isiOS,isWebView:w(d),isDesktop:w(m)}}(u,a,e,n);return{browser:a,os:u,deviceType:c}},Vn=function mediaMatch(e){return window.matchMedia(e).matches},Un=pn((function(){return zn(navigator.userAgent,D.from(navigator.userAgentData),Vn)})),Zn=function detect$2(){return Un()},Wn=function Dimension(e,t){var n=function get(n){var o=t(n);if(o<=0||null===o){var i=Wt(n,e);return parseFloat(i)||0}return o},o=function aggregate(e,t){return V(t,(function(t,n){var o=Wt(e,n),i=void 0===o?0:parseInt(o,10);return isNaN(i)?t:t+i}),0)};return{set:function set(t,n){if(!y(n)&&!n.match(/^[0-9]+$/))throw new Error(e+".set accepts only positive integer values. Value was "+n);var o=t.dom;zt(o)&&(o.style[e]=n+"px")},get:n,getOuter:n,aggregate:o,max:function max(e,t,n){var i=o(e,n);return t>i?t-i:0}}},jn=function toNumber(e,t){return function toFloat(e){var t=parseFloat(e);return isNaN(t)?D.none():D.some(t)}(e).getOr(t)},Gn=function getProp(e,t,n){return jn(Wt(e,t),n)},qn=function getCalculatedWidth(e,t){var n=e.dom,o=n.getBoundingClientRect().width||n.offsetWidth;return"border-box"===t?o:function calcContentBoxSize(e,t,n,o){return t-Gn(e,"padding-".concat(n),0)-Gn(e,"padding-".concat(o),0)-Gn(e,"border-".concat(n,"-width"),0)-Gn(e,"border-".concat(o,"-width"),0)}(e,o,"left","right")},Kn=Wn("width",(function(e){return e.dom.offsetWidth})),Yn=function get$9(e){return Kn.get(e)},Xn=function getOuter$2(e){return Kn.getOuter(e)},Jn=function getInnerWidth(e){return qn(e,"content-box")},Qn=function getWidth(e){return Gn(e,"width",e.dom.offsetWidth)},er=function addCells(e,t,n){var o=e.cells,i=o.slice(0,t),a=o.slice(t),u=i.concat(n).concat(a);return rr(e,u)},tr=function addCell(e,t,n){return er(e,t,[n])},nr=function mutateCell(e,t,n){e.cells[t]=n},rr=function setCells(e,t){return dt(e.element,t,e.section,e.isNew)},ir=function getCell(e,t){return e.cells[t]},ar=function getCellElement(e,t){return ir(e,t).element},ur=function cellLength(e){return e.cells.length},cr=function extractGridDetails(e){var t=H(e,(function(e){return"colgroup"===e.section}));return{rows:t.fail,cols:t.pass}},sr=function clone(e,t,n){var o=L(e.cells,n);return dt(t(e.element),o,e.section,!0)},lr="data-snooker-locked-cols",fr=function getLockedColumnsFromTable(e){return Oe(e,lr).bind((function(e){return D.from(e.match(/\d+/g))})).map((function(e){return q(e,A)}))},dr=function getLockedColumnsFromGrid(e){var t=V(cr(e).rows,(function(e,t){return F(t.cells,(function(t,n){t.isLocked&&(e[n]=!0)})),e}),{}),n=ie(t,(function(e,t){return parseInt(t,10)}));return function sort$1(e,t){var n=R.call(e,0);return n.sort(t),n}(n)},mr=function key(e,t){return e+","+t},gr=function filterItems(e,t){var n=j(e.all,(function(e){return e.cells}));return $(n,t)},pr=function generate$1(e){var t={},n=[],o=Y(e).map((function(e){return e.element})).bind(sn).bind(fr).getOr({}),i=0,a=0,u=0,c=H(e,(function(e){return"colgroup"===e.section})),s=c.pass,l=c.fail;F(l,(function(e){var c=[];F(e.cells,(function(e){for(var n=0;void 0!==t[mr(u,n)];)n++;for(var i=function hasNonNullableKey(e,t){return ue(e,t)&&void 0!==e[t]&&null!==e[t]}(o,n.toString()),s=function extended(e,t,n,o,i,a){return{element:e,rowspan:t,colspan:n,row:o,column:i,isLocked:a}}(e.element,e.rowspan,e.colspan,u,n,i),l=0;l<e.colspan;l++)for(var d=0;d<e.rowspan;d++){var m=n+l,g=mr(u+d,m);t[g]=s,a=Math.max(a,m+1)}c.push(s)})),i++,n.push(lt(e.element,c,e.section)),u++}));var d=X(s).map((function(e){var t=function generateColumns(e){var t={},n=0;return F(e.cells,(function(e){var o=e.colspan;P(o,(function(i){var a=n+i;t[a]=function columnext(e,t,n){return{element:e,colspan:t,column:n}}(e.element,o,a)})),n+=o})),t}(e),n=function colgroup(e,t){return{element:e,columns:t}}(e.element,ae(t));return{colgroups:[n],columns:t}})).getOrThunk((function(){return{colgroups:[],columns:{}}})),m=d.columns,g=d.colgroups,p=function grid(e,t){return{rows:e,columns:t}}(i,a);return{grid:p,access:t,all:n,columns:m,colgroups:g}},hr={fromTable:function fromTable(e){var t=gn(e);return pr(t)},generate:pr,getAt:function getAt(e,t,n){return D.from(e.access[mr(t,n)])},findItem:function findItem(e,t,n){var o=gr(e,(function(e){return n(t,e.element)}));return o.length>0?D.some(o[0]):D.none()},filterItems:gr,justCells:function justCells(e){return j(e.all,(function(e){return e.cells}))},justColumns:function justColumns(e){return ae(e.columns)},hasColumns:function hasColumns(e){return Q(e.columns).length>0},getColumnAt:function getColumnAt(e,t){return D.from(e.columns[t])}},vr=function columns(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:A,n=e.grid,o=P(n.columns,x),i=P(n.rows,x);return L(o,(function(n){return yr((function getBlock(){return j(i,(function(t){return hr.getAt(e,t,n).filter((function(e){return e.column===n})).toArray()}))}),(function isValid(e){return 1===e.colspan&&t(e.element)}),(function getFallback(){return hr.getAt(e,0,n)}))}))},yr=function decide(e,t,n){var o=e();return U(o,t).orThunk((function(){return D.from(o[0]).orThunk(n)})).map((function(e){return e.element}))},Cr=function rows(e){var t=e.grid,n=P(t.rows,x),o=P(t.columns,x);return L(n,(function(t){return yr((function getBlock(){return j(o,(function(n){return hr.getAt(e,t,n).filter((function(e){return e.row===t})).fold(w([]),(function(e){return[e]}))}))}),(function isSingle(e){return 1===e.rowspan}),(function getFallback(){return hr.getAt(e,t,0)}))}))},wr=function deduce(e,t){if(t<0||t>=e.length-1)return D.none();var n=e[t].fold((function(){var n=function reverse(e){var t=R.call(e,0);return t.reverse(),t}(e.slice(0,t));return J(n,(function(e,t){return e.map((function(e){return{value:e,delta:t+1}}))}))}),(function(e){return D.some({value:e,delta:0})})),o=e[t+1].fold((function(){var n=e.slice(t+1);return J(n,(function(e,t){return e.map((function(e){return{value:e,delta:t+1}}))}))}),(function(e){return D.some({value:e,delta:1})}));return n.bind((function(e){return o.map((function(t){var n=t.delta+e.delta;return Math.abs(t.value-e.value)/n}))}))},xr=function onDirection(e,t){return function(n){return"rtl"===Sr(n)?t:e}},Sr=function getDirection(e){return"rtl"===Wt(e,"direction")?"rtl":"ltr"},kr=Wn("height",(function(e){var t=e.dom;return yt(e)?t.getBoundingClientRect().height:t.offsetHeight})),Tr=function get$8(e){return kr.get(e)},Er=function getOuter$1(e){return kr.getOuter(e)},Or=function getHeight$1(e){return Gn(e,"height",e.dom.offsetHeight)},Ar=function r(e,t){return{left:e,top:t,translate:function translate(n,o){return r(e+n,t+o)}}},_r=function firstDefinedOrZero(e,t){return void 0!==e?e:void 0!==t?t:0},Dr=function absolute(e){var t=e.dom.ownerDocument,n=t.body,o=t.defaultView,i=t.documentElement;if(n===e.dom)return Ar(n.offsetLeft,n.offsetTop);var a=_r(null===o||void 0===o?void 0:o.pageYOffset,i.scrollTop),u=_r(null===o||void 0===o?void 0:o.pageXOffset,i.scrollLeft),c=_r(i.clientTop,n.clientTop),s=_r(i.clientLeft,n.clientLeft);return Rr(e).translate(u-s,a-c)},Rr=function viewport(e){var t=e.dom,n=t.ownerDocument.body;return n===t?Ar(n.offsetLeft,n.offsetTop):yt(e)?function boxPosition(e){var t=e.getBoundingClientRect();return Ar(t.left,t.top)}(t):Ar(0,0)},Nr=function rowInfo(e,t){return{row:e,y:t}},Mr=function colInfo(e,t){return{col:e,x:t}},Br=function rtlEdge(e){return Dr(e).left+Xn(e)},Ir=function ltrEdge(e){return Dr(e).left},Pr=function getLeftEdge(e,t){return Mr(e,Ir(t))},Lr=function getRightEdge(e,t){return Mr(e,Br(t))},Fr=function getTop$1(e){return Dr(e).top},Hr=function getTopEdge(e,t){return Nr(e,Fr(t))},$r=function getBottomEdge(e,t){return Nr(e,Fr(t)+Er(t))},zr=function findPositions(e,t,n){if(0===n.length)return[];var o=L(n.slice(1),(function(t,n){return t.map((function(t){return e(n,t)}))})),i=n[n.length-1].map((function(e){return t(n.length-1,e)}));return o.concat([i])},Vr={delta:x,positions:function positions(e){return zr(Hr,$r,e)},edge:Fr},Ur={delta:x,edge:Ir,positions:function positions(e){return zr(Pr,Lr,e)}},Zr={delta:function negate(e){return-e},edge:Br,positions:function positions(e){return zr(Lr,Pr,e)}},Wr=xr(Ur,Zr),jr={delta:function delta(e,t){return Wr(t).delta(e,t)},positions:function positions(e,t){return Wr(t).positions(e,t)},edge:function edge(e){return Wr(e).edge(e)}},Gr={unsupportedLength:["em","ex","cap","ch","ic","rem","lh","rlh","vw","vh","vi","vb","vmin","vmax","cm","mm","Q","in","pc","pt","px"],fixed:["px","pt"],relative:["%"],empty:[""]},qr=function(){var e="[0-9]+",t="[eE]"+("[+-]?"+e),n=function opt(e){return"(?:".concat(e,")?")},o=["Infinity",e+"\\."+n(e)+n(t),"\\."+e+n(t),e+n(t)].join("|"),i="[+-]?(?:".concat(o,")");return new RegExp("^(".concat(i,")(.*)$"))}(),Kr=function parse(e,t){return D.from(qr.exec(e)).bind((function(e){var n=Number(e[1]),o=e[2];return function isUnit(e,t){return I(t,(function(t){return I(Gr[t],(function(t){return e===t}))}))}(o,t)?D.some({value:n,unit:o}):D.none()}))},Yr=/(\d+(\.\d+)?)%/,Xr=/(\d+(\.\d+)?)px|em/,Jr=xe("col"),Qr=function getPercentSize(e,t,n){var o=ze(e).getOrThunk((function(){return Ct(Fe(e))}));return t(e)/n(o)*100},eo=function setPixelWidth(e,t){Ut(e,"width",t+"px")},no=function setPercentageWidth(e,t){Ut(e,"width",t+"%")},ro=function setHeight(e,t){Ut(e,"height",t+"px")},oo=function normalizePixelSize(e,t,n,o){var i=parseFloat(e);return Ft(e,"%")&&"table"!==me(t)?function convert(e,t,n,o){var i=sn(e).map((function(e){var o=n(e);return Math.floor(t/100*o)})).getOr(t);return o(e,i),i}(t,i,n,o):i},io=function getTotalHeight(e){var t=function getHeightValue(e){return Or(e)+"px"}(e);return t?oo(t,e,Tr,ro):Tr(e)},ao=function getRaw$1(e,t){return Gt(e,t).orThunk((function(){return Oe(e,t).map((function(e){return e+"px"}))}))},uo=function getRawWidth$1(e){return ao(e,"width")},co=function getPercentageWidth(e){return Qr(e,Yn,Jn)},so=function getPixelWidth$1(e){return Jr(e)?Yn(e):Qn(e)},lo=function getHeight(e){return function get$7(e,t,n){return n(e)/Yt(e,t)}(e,"rowspan",io)},fo=function setGenericWidth(e,t,n){Ut(e,"width",t+n)},mo=function getPercentTableWidth(e){return Qr(e,Yn,Jn)+"%"},po=w(Yr),ho=xe("col"),vo=function getRawW(e){return uo(e).getOrThunk((function(){return so(e)+"px"}))},bo=function getRawH(e){return function getRawHeight(e){return ao(e,"height")}(e).getOrThunk((function(){return lo(e)+"px"}))},yo=function getDimension(e,t,n,o,i,a){return e.filter(o).fold((function(){return a(wr(n,t))}),(function(e){return i(e)}))},Co=function getWidthFrom(e,t,n,o){var i=vr(e),a=hr.hasColumns(e)?function justCols(e){return L(hr.justColumns(e),(function(e){return D.from(e.element)}))}(e):i,u=[D.some(jr.edge(t))].concat(L(jr.positions(i,t),(function(e){return e.map((function(e){return e.x}))}))),c=k(Xt);return L(a,(function(e,t){return yo(e,t,u,c,(function(e){if(function isValidColumn(e){var t=Zn().browser,n=t.isChromium()||t.isFirefox();return!ho(e)||n}(e))return n(e);var a=function bindFrom(e,t){return void 0!==e&&null!==e?t(e):D.none()}(i[t],x);return yo(a,t,u,c,(function(e){return o(D.some(Yn(e)))}),o)}),o)}))},wo=function getDeduced(e){return e.map((function(e){return e+"px"})).getOr("")},xo=function getPixelWidths(e,t,n){return Co(e,t,so,(function(e){return e.getOrThunk(n.minCellWidth)}))},So=function getHeightFrom(e,t,n,o,i){var a=Cr(e),u=[D.some(n.edge(t))].concat(L(n.positions(a,t),(function(e){return e.map((function(e){return e.y}))})));return L(a,(function(e,t){return yo(e,t,u,k(Jt),o,i)}))},ko=function widthLookup(e,t){return function(){return yt(e)?t(e):parseFloat(Gt(e,"width").getOr("0"))}},To=function noneSize(e){var t=ko(e,Yn),n=w(0);return{width:t,pixelWidth:t,getWidths:function getWidths(t,n){return xo(t,e,n)},getCellDelta:n,singleColumnWidth:w([0]),minCellWidth:n,setElementWidth:C,adjustTableWidth:C,isRelative:!0,label:"none"}},Eo=function percentageSize(e){var t=ko(e,(function(e){return parseFloat(mo(e))})),n=ko(e,Yn);return{width:t,pixelWidth:n,getWidths:function getWidths(t,n){return function getPercentageWidths(e,t,n){return Co(e,t,co,(function(e){return e.fold((function(){return n.minCellWidth()}),(function(e){return e/n.pixelWidth()*100}))}))}(t,e,n)},getCellDelta:function getCellDelta(e){return e/n()*100},singleColumnWidth:function singleColumnWidth(e,t){return[100-e]},minCellWidth:function minCellWidth(){return en()/n()*100},setElementWidth:no,adjustTableWidth:function adjustTableWidth(n){var o=t();no(e,o+n/100*o)},isRelative:!0,label:"percent"}},Oo=function pixelSize(e){var t=ko(e,Yn);return{width:t,pixelWidth:t,getWidths:function getWidths(t,n){return xo(t,e,n)},getCellDelta:x,singleColumnWidth:function singleColumnWidth(e,t){return[Math.max(en(),e+t)-e]},minCellWidth:en,setElementWidth:eo,adjustTableWidth:function adjustTableWidth(n){var o=t()+n;eo(e,o)},isRelative:!1,label:"pixel"}},Ao=function getTableSize(e){return uo(e).fold((function(){return To(e)}),(function(t){return function chooseSize(e,t){return null!==po().exec(t)?Eo(e):Oo(e)}(e,t)}))},_o=Oo,Do=Eo,Ro=function makeCell(e,t,n){var o=e[n].element,i=Re.fromTag("td");Ye(i,Re.fromTag("br")),(t?Ye:Ke)(o,i)},No=function extract$1(e,t){var n=function isSelected(e){return Ne(e.element,t)},o=it(e),i=gn(o),a=Ao(e),u=hr.generate(i),c=function findSelectedStats(e,t){var n=e.grid.columns,o=e.grid.rows,i=n,a=0,u=0,c=[],s=[];return te(e.access,(function(e){if(c.push(e),t(e)){s.push(e);var n=e.row,l=n+e.rowspan-1,d=e.column,m=d+e.colspan-1;n<o?o=n:l>a&&(a=l),d<i?i=d:m>u&&(u=m)}})),function statsStruct(e,t,n,o,i,a){return{minRow:e,minCol:t,maxRow:n,maxCol:o,allCells:i,selectedCells:a}}(o,i,a,u,c,s)}(u,n),s="th:not("+t+"),td:not("+t+")",l=rn(o,"th,td",(function(e){return Ne(e,s)}));F(l,tt),function fillInGaps(e,t,n,o){for(var i=$(e,(function(e){return"colgroup"!==e.section})),a=t.grid.columns,u=t.grid.rows,c=0;c<u;c++)for(var s=!1,l=0;l<a;l++)c<n.minRow||c>n.maxRow||l<n.minCol||l>n.maxCol||(hr.getAt(t,c,l).filter(o).isNone()?Ro(i,s,c):s=!0)}(i,u,c,n);var d=function getTableWidthDelta(e,t,n,o){if(0===o.minCol&&t.grid.columns===o.maxCol+1)return 0;var i=xo(t,e,n),a=V(i,(function(e,t){return e+t}),0),u=V(i.slice(o.minCol,o.maxCol+1),(function(e,t){return e+t}),0),c=u/a*n.pixelWidth()-n.pixelWidth();return n.getCellDelta(c)}(e,hr.fromTable(e),a,c);return function clean(e,t,n,o){te(n.columns,(function(e){(e.column<t.minCol||e.column>t.maxCol)&&tt(e.element)}));var i=$(nn(e,"tr"),(function(e){return 0===e.dom.childElementCount}));F(i,tt),t.minCol!==t.maxCol&&t.minRow!==t.maxRow||F(nn(e,"th,td"),(function(e){Ae(e,"rowspan"),Ae(e,"colspan")})),Ae(e,lr),Ae(e,"data-snooker-col-series"),Ao(e).adjustTableWidth(o)}(o,c,u,d),o},Mo=function NodeValue(e,t){var n=function getOption(t){return e(t)?D.from(t.dom.nodeValue):D.none()};return{get:function get(o){if(!e(o))throw new Error("Can only get "+t+" value of a "+t+" node");return n(o).getOr("")},getOption:n,set:function set(n,o){if(!e(n))throw new Error("Can only set raw "+t+" value of a "+t+" node");n.dom.nodeValue=o}}}(ye,"text"),Bo=function get$6(e){return Mo.get(e)},Io=function getOption(e){return Mo.getOption(e)},Po=function set(e,t){return Mo.set(e,t)},Lo=function getEnd(e){return"img"===me(e)?1:Io(e).fold((function(){return We(e).length}),(function(e){return e.length}))},Fo=["img","br"],Ho=function isCursorPosition(e){return function isTextNodeWithCursorPosition(e){return Io(e).filter((function(e){return 0!==e.trim().length||e.indexOf("\xa0")>-1})).isSome()}(e)||B(Fo,me(e))||function isContentEditableFalse(e){return ve(e)&&"false"===Ee(e,"contenteditable")}(e)},$o=function first(e){return function descendant$1(e,t){return function descend(e){for(var n=0;n<e.childNodes.length;n++){var o=Re.fromDom(e.childNodes[n]);if(t(o))return D.some(o);var i=descend(e.childNodes[n]);if(i.isSome())return i}return D.none()}(e.dom)}(e,Ho)},zo=function last$1(e){return Vo(e,Ho)},Vo=function descendantRtl(e,t){return function descend(e){for(var n=We(e),o=n.length-1;o>=0;o--){var i=n[o];if(t(i))return D.some(i);var a=descend(i);if(a.isSome())return a}return D.none()}(e)},Uo={scope:["row","col"]},Zo=function createCell(e){return function(){var t=Re.fromTag("td",e.dom);return Ye(t,Re.fromTag("br",e.dom)),t}},Wo=function createCol(e){return function(){return Re.fromTag("col",e.dom)}},jo=function createColgroup(e){return function(){return Re.fromTag("colgroup",e.dom)}},Go=function createRow$1(e){return function(){return Re.fromTag("tr",e.dom)}},qo=function replace$1(e,t,n){var o=function copy$2(e,t){var n=at(e,t),o=We(it(e));return Qe(n,o),n}(e,t);return te(n,(function(e,t){null===e?Ae(o,t):ke(o,t,e)})),o},Ko=function pasteReplace(e){return e},Yo=function cellOperations(e,t,n){var o=function cloneCss(e,t){!function copy$1(e,t){var n=e.dom,o=t.dom;zt(n)&&zt(o)&&(o.style.cssText=n.style.cssText)}(e.element,t),qt(t,"height"),1!==e.colspan&&qt(t,"width")};return{col:function newCol(n){var i=Re.fromTag(me(n.element),t.dom);return o(n,i),e(n.element,i),i},colgroup:jo(t),row:Go(t),cell:function newCell(i){var a=Re.fromTag(me(i.element),t.dom),u=n.getOr(["strong","em","b","i","span","font","h1","h2","h3","h4","h5","h6","p","div"]),c=u.length>0?function cloneFormats(e,t,n){return $o(e).map((function(o){var i=n.join(","),a=xt(o,i,(function(t){return Ie(t,e)}));return z(a,(function(e,t){var n=ot(t);return Ye(e,n),n}),t)})).getOr(t)}(i.element,a,u):a;return Ye(c,Re.fromTag("br")),o(i,a),function cloneAppropriateAttributes(e,t){te(Uo,(function(n,o){return Oe(e,o).filter((function(e){return B(n,e)})).each((function(e){return ke(t,o,e)}))}))}(i.element,a),e(i.element,a),a},replace:qo,colGap:Wo(t),gap:Zo(t)}},Xo=function paste$1(e){return{col:Wo(e),colgroup:jo(e),row:Go(e),cell:Zo(e),replace:Ko,colGap:Wo(e),gap:Zo(e)}},Jo=function option(e){return function(t){return t.options.get(e)}},Qo="100%",ei=function getPixelForcedWidth(e){var t,n=e.dom,o=null!==(t=n.getParent(e.selection.getStart(),n.isBlock))&&void 0!==t?t:e.getBody();return Jn(Re.fromDom(o))+"px"},ti=function getTableCloneElements(e){return D.from(e.options.get("table_clone_elements"))},ni=Jo("table_header_type"),ri=Jo("table_column_resizing"),oi=function isPreserveTableColumnResizing(e){return"preservetable"===ri(e)},ii=function isResizeTableColumnResizing(e){return"resizetable"===ri(e)},ai=Jo("table_sizing_mode"),ui=function isTablePercentagesForced(e){return"relative"===ai(e)},ci=function isTablePixelsForced(e){return"fixed"===ai(e)},si=function isTableResponsiveForced(e){return"responsive"===ai(e)},li=Jo("table_resize_bars"),fi=Jo("table_style_by_css"),di=Jo("table_merge_content_on_paste"),mi=function getTableDefaultAttributes(e){var t=e.options,n=t.get("table_default_attributes");return t.isSet("table_default_attributes")?n:function determineDefaultTableAttributes(e,t){return si(e)||fi(e)?t:ci(e)?i(i({},t),{},{width:ei(e)}):i(i({},t),{},{width:Qo})}(e,n)},gi=function getTableDefaultStyles(e){var t=e.options,n=t.get("table_default_styles");return t.isSet("table_default_styles")?n:function determineDefaultTableStyles(e,t){return si(e)||!fi(e)?t:ci(e)?i(i({},t),{},{width:ei(e)}):i(i({},t),{},{width:Qo})}(e,n)},hi=Jo("table_use_colgroups"),vi=function closest(e){return Rt(e,"[contenteditable]")},bi=function isEditable$1(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return yt(e)?e.dom.isContentEditable:vi(e).fold(w(t),(function(e){return"true"===yi(e)}))},yi=function getRaw(e){return e.dom.contentEditable},Ci=function getBody(e){return Re.fromDom(e.getBody())},wi=function getIsRoot(e){return function(t){return Ie(t,Ci(e))}},xi=function removeDataStyle(e){Ae(e,"data-mce-style");var t=function removeStyleAttribute(e){return Ae(e,"data-mce-style")};F(un(e),t),F(cn(e),t),F(ln(e),t)},Si=function getSelectionStart(e){return Re.fromDom(e.selection.getStart())},ki=function getPixelWidth(e){return e.getBoundingClientRect().width},Ti=function getPixelHeight(e){return e.getBoundingClientRect().height},Ei=function isInEditableContext$1(e){return Ot(e,xe("table")).exists(bi)},Oi=function inSelection(e,t){var n=t.column,o=t.column+t.colspan-1,i=t.row,a=t.row+t.rowspan-1;return n<=e.finishCol&&o>=e.startCol&&i<=e.finishRow&&a>=e.startRow},Ai=function isWithin(e,t){return t.column>=e.startCol&&t.column+t.colspan-1<=e.finishCol&&t.row>=e.startRow&&t.row+t.rowspan-1<=e.finishRow},_i=function getAnyBox(e,t,n){var o=hr.findItem(e,t,Ie),i=hr.findItem(e,n,Ie);return o.bind((function(e){return i.map((function(t){return function getBounds(e,t){return function bounds(e,t,n,o){return{startRow:e,startCol:t,finishRow:n,finishCol:o}}(Math.min(e.row,t.row),Math.min(e.column,t.column),Math.max(e.row+e.rowspan-1,t.row+t.rowspan-1),Math.max(e.column+e.colspan-1,t.column+t.colspan-1))}(e,t)}))}))},Di=function getBox$1(e,t,n){return _i(e,t,n).bind((function(t){return function isRectangular(e,t){for(var n=!0,o=curry(Ai,t),i=t.startRow;i<=t.finishRow;i++)for(var a=t.startCol;a<=t.finishCol;a++)n=n&&hr.getAt(e,i,a).exists(o);return n?D.some(t):D.none()}(e,t)}))},Ri=function intercepts$1(e,t,n){return _i(e,t,n).map((function(t){var n=hr.filterItems(e,curry(Oi,t));return L(n,(function(e){return e.element}))}))},Ni=function parentCell(e,t){return hr.findItem(e,t,(function isContainedBy(e,t){return Pe(t,e)})).map((function(e){return e.element}))},Mi=function moveBy(e,t,n){return sn(e).bind((function(o){return function moveBy$1(e,t,n,o){return hr.findItem(e,t,Ie).bind((function(t){var i=n>0?t.row+t.rowspan-1:t.row,a=o>0?t.column+t.colspan-1:t.column;return hr.getAt(e,i+n,a+o).map((function(e){return e.element}))}))}(Pi(o),e,t,n)}))},Bi=function intercepts(e,t,n){var o=Pi(e);return Ri(o,t,n)},Ii=function nestedIntercepts(e,t,n,o,i){var a=Pi(e),u=Ie(e,n)?D.some(t):Ni(a,t),c=Ie(e,i)?D.some(o):Ni(a,o);return u.bind((function(e){return c.bind((function(t){return Ri(a,e,t)}))}))},Pi=hr.fromTable,Li=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","li","table","thead","tbody","tfoot","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Fi=function DomUniverse(){return{up:w({selector:At,closest:Rt,predicate:Et,all:Ve}),down:w({selector:kt,predicate:wt}),styles:w({get:Wt,getRaw:Gt,set:Ut,remove:qt}),attrs:w({get:Ee,set:ke,remove:Ae,copyTo:function copyAttributesTo(e,t){var n=_e(e);Te(t,n)}}),insert:w({before:Ge,after:qe,afterAll:Je,append:Ye,appendAll:Qe,prepend:Ke,wrap:Xe}),remove:w({unwrap:nt,remove:tt}),create:w({nu:Re.fromTag,clone:function clone(e){return Re.fromDom(e.dom.cloneNode(!1))},text:Re.fromText}),query:w({comparePosition:function comparePosition(e,t){return e.dom.compareDocumentPosition(t.dom)},prevSibling:Ue,nextSibling:Ze}),property:w({children:We,name:me,parent:$e,document:function document(e){return He(e).dom},isText:ye,isComment:he,isElement:be,isSpecial:function isSpecial(e){var t=me(e);return B(["script","noscript","iframe","noframes","noembed","title","style","textarea","xmp"],t)},getLanguage:function getLanguage(e){return be(e)?Oe(e,"lang"):D.none()},getText:Bo,setText:Po,isBoundary:function isBoundary(e){return!!be(e)&&("body"===me(e)||B(Li,me(e)))},isEmptyTag:function isEmptyTag(e){return!!be(e)&&B(["br","img","hr","input"],me(e))},isNonEditable:function isNonEditable(e){return be(e)&&"false"===Ee(e,"contenteditable")}}),eq:Ie,is:Le}},Hi=function unsafeOne(e,t,n,o){var i=t(e,n);return z(o,(function(n,o){var i=t(e,o);return $i(e,n,i)}),i)},$i=function commonElement(e,t,n){return t.bind((function(t){return n.filter(curry(e.eq,t))}))},zi=function oneAll(e,t,n){return n.length>0?function all(e,t,n,o){return o(e,t,n[0],n.slice(1))}(e,t,n,Hi):D.none()},Vi=function ancestors$2(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:O,i=[t].concat(e.up().all(t)),a=[n].concat(e.up().all(n)),u=function prune(e){return Z(e,o).fold((function(){return e}),(function(t){return e.slice(0,t+1)}))},c=u(i),s=u(a),l=U(c,(function(t){return I(s,function eq(e,t){return curry(e.eq,t)}(e,t))}));return{firstpath:c,secondpath:s,shared:l}},Ui=Fi(),Zi=function sharedOne(e,t){return zi(Ui,(function(t,n){return e(n)}),t)},Wi=function lookupTable(e){return At(e,"table")},ji=function identify(e,t,n){var o=function getIsRoot(e){return function(t){return void 0!==n&&n(t)||Ie(t,e)}};return Ie(e,t)?D.some({boxes:D.some([e]),start:e,finish:t}):Wi(e).bind((function(i){return Wi(t).bind((function(a){if(Ie(i,a))return D.some({boxes:Bi(i,e,t),start:e,finish:t});if(Pe(i,a)){var u=xt(t,"td,th",o(i)),c=u.length>0?u[u.length-1]:t;return D.some({boxes:Ii(i,e,i,t,a),start:e,finish:c})}if(Pe(a,i)){var s=xt(e,"td,th",o(a)),l=s.length>0?s[s.length-1]:e;return D.some({boxes:Ii(a,e,i,t,a),start:e,finish:l})}return function ancestors(e,t,n){return Vi(Ui,e,t,n)}(e,t).shared.bind((function(u){return Rt(u,"table",n).bind((function(n){var u=xt(t,"td,th",o(n)),c=u.length>0?u[u.length-1]:t,s=xt(e,"td,th",o(n)),l=s.length>0?s[s.length-1]:e;return D.some({boxes:Ii(n,e,i,t,a),start:l,finish:c})}))}))}))}))},Gi=function retrieve$1(e,t){var n=kt(e,t);return n.length>0?D.some(n):D.none()},qi=function getEdges(e,t,n){return Dt(e,t).bind((function(t){return Dt(e,n).bind((function(e){return Zi(Wi,[t,e]).map((function(n){return{first:t,last:e,table:n}}))}))}))},Ki=function shiftSelection(e,t,n,o,i){return function getLast(e,t){return U(e,(function(e){return Ne(e,t)}))}(e,i).bind((function(e){return Mi(e,t,n).bind((function(e){return function expandTo(e,t){return At(e,"table").bind((function(n){return Dt(n,t).bind((function(t){return ji(t,e).bind((function(e){return e.boxes.map((function(t){return{boxes:t,start:e.start,finish:e.finish}}))}))}))}))}(e,o)}))}))},Yi=function retrieve(e,t){return Gi(e,t)},Xi=function retrieveBox(e,t,n){return qi(e,t,n).bind((function(t){var n=function isRoot(t){return Ie(e,t)},o="thead,tfoot,tbody,table",i=At(t.first,o,n),a=At(t.last,o,n);return i.bind((function(e){return a.bind((function(n){return Ie(e,n)?function getBox(e,t,n){var o=Pi(e);return Di(o,t,n)}(t.table,t.first,t.last):D.none()}))}))}))},Ji=x,Qi=function unmergable(e){var t=function hasSpan(e,t){return Oe(e,t).exists((function(e){return parseInt(e,10)>1}))};return e.length>0&&G(e,(function hasRowOrColSpan(e){return t(e,"rowspan")||t(e,"colspan")}))?D.some(e):D.none()},ea=function mergable(e,t,n){return t.length<=1?D.none():Xi(e,n.firstSelectedSelector,n.lastSelectedSelector).map((function(e){return{bounds:e,cells:t}}))},ta="data-mce-selected",na="td["+ta+"],th["+ta+"]",ra="["+ta+"]",oa="data-mce-first-selected",ia="td["+oa+"],th["+oa+"]",aa="data-mce-last-selected",ua="td["+aa+"],th["+aa+"]",ca=ra,sa={selected:ta,selectedSelector:na,firstSelected:oa,firstSelectedSelector:ia,lastSelected:aa,lastSelectedSelector:ua},la=function forMenu(e,t,n){return{element:n,mergable:ea(t,e,sa),unmergable:Qi(e),selection:Ji(e)}},fa=function getSelectionFromSelector(e){return function(t,n){var o=me(t),i="col"===o||"colgroup"===o?function getSelectionCellFallback(e){return sn(e).bind((function(e){return Yi(e,sa.firstSelectedSelector)})).fold(w(e),(function(e){return e[0]}))}(t):t;return Rt(i,e,n)}},da=fa("th,td,caption"),ma=fa("th,td"),ga=function getCellsFromSelection(e){return function fromDom(e){return L(e,Re.fromDom)}(e.model.table.getSelectedCells())},pa=function registerEvents(e,t){e.on("BeforeGetContent",(function(t){if(!0===t.selection){var n=function getCellsFromFakeSelection(e){return $(ga(e),(function(e){return Ne(e,sa.selectedSelector)}))}(e);n.length>=1&&function multiCellContext(n){t.preventDefault(),function extractSelected(e){return sn(e[0]).map((function(e){var t=No(e,ca);return xi(t),[t]}))}(n).each((function(n){t.content="text"===t.format?function getTextContent(e){return L(e,(function(e){return e.dom.innerText})).join("")}(n):function serializeElements(e,t){return L(t,(function(t){return e.selection.serializer.serialize(t.dom,{})})).join("")}(e,n)}))}(n)}})),e.on("BeforeSetContent",(function(n){if(!0===n.selection&&!0===n.paste){var o=ga(e);Y(o).each((function(o){sn(o).each((function(i){var a=$(function fromHtml(e,t){var n=(t||document).createElement("div");return n.innerHTML=e,We(Re.fromDom(n))}(n.content),(function(e){return"meta"!==me(e)})),u=xe("table");if(di(e)&&1===a.length&&u(a[0])){n.preventDefault();var c=Re.fromDom(e.getDoc()),s=Xo(c),l=function paste(e,t,n){return{element:e,clipboard:t,generators:n}}(o,a[0],s);t.pasteCells(i,l).each((function(){e.focus()}))}}))}))}}))},ha=function point(e,t){return{element:e,offset:t}},va=function scan$1(e,t,n){return e.property().isText(t)&&0===e.property().getText(t).trim().length||e.property().isComment(t)?n(t).bind((function(t){return scan$1(e,t,n).orThunk((function(){return D.some(t)}))})):D.none()},ba=function toEnd(e,t){return e.property().isText(t)?e.property().getText(t).length:e.property().children(t).length},ya=function freefallRtl$2(e,t){var n=va(e,t,e.query().prevSibling).getOr(t);if(e.property().isText(n))return ha(n,ba(e,n));var o=e.property().children(n);return o.length>0?freefallRtl$2(e,o[o.length-1]):ha(n,ba(e,n))},Ca=Fi(),wa=function halve(e,t){if(!Xt(e)){var n=function getGenericWidth(e){return uo(e).bind((function(e){return Kr(e,["fixed","relative","empty"])}))}(e);n.each((function(n){var o=n.value/2;fo(e,o,n.unit),fo(t,o,n.unit)}))}},xa=function zero(e){return L(e,w(0))},Sa=function surround(e,t,n,o,i){return i(e.slice(0,t)).concat(o).concat(i(e.slice(n)))},ka=function clampDeltaHelper(e){return function(t,n,o,i){if(e(o)){var a=Math.max(i,t[n]-Math.abs(o)),u=Math.abs(a-t[n]);return o>=0?u:-u}return o}},Ta=ka((function(e){return e<0})),Ea=ka(A),Oa=function resizeTable(){var e=function calcRelativeDeltas(e,t,n,o){var i=(100+n)/100,a=Math.max(o,(e[t]+n)/i);return L(e,(function(e,n){return(n===t?a:e/i)-e}))},t=function calcLeftEdgeDeltas(t,n,o,i,a,u){return u?e(t,n,i,a):function calcFixedDeltas(e,t,n,o,i){var a=Ta(e,t,o,i);return Sa(e,t,n+1,[a,0],xa)}(t,n,o,i,a)},resizeTable=function resizeTable(e,t){return e(t)};return{resizeTable:resizeTable,clampTableDelta:Ta,calcLeftEdgeDeltas:t,calcMiddleDeltas:function calcMiddleDeltas(e,n,o,i,a,u,c){return t(e,o,i,a,u,c)},calcRightEdgeDeltas:function calcRightEdgeDeltas(t,n,o,i,a,u){if(u)return e(t,o,i,a);var c=Ta(t,o,i,a);return xa(t.slice(0,o)).concat([c])},calcRedestributedWidths:function calcRedestributedWidths(e,t,n,o){if(o){var i=(t+n)/t,a=L(e,(function(e){return e/i}));return{delta:100*i-100,newSizes:a}}return{delta:n,newSizes:e}}}},Aa=function preserveTable(){var e=function calcLeftEdgeDeltas(e,t,n,o,i){var a=Ea(e,o>=0?n:t,o,i);return Sa(e,t,n+1,[a,-a],xa)};return{resizeTable:function resizeTable(e,t,n){n&&e(t)},clampTableDelta:function clampTableDelta(e,t,n,o,i){if(i){if(n>=0)return n;var a=V(e,(function(e,t){return e+t-o}),0);return Math.max(-a,n)}return Ta(e,t,n,o)},calcLeftEdgeDeltas:e,calcMiddleDeltas:function calcMiddleDeltas(t,n,o,i,a,u){return e(t,o,i,a,u)},calcRightEdgeDeltas:function calcRightEdgeDeltas(e,t,n,o,i,a){if(a)return xa(e);var u=o/e.length;return L(e,w(u))},calcRedestributedWidths:function calcRedestributedWidths(e,t,n,o){return{delta:0,newSizes:e}}}},_a=function getGridSize(e){return hr.fromTable(e).grid},Da=xe("th"),Ra=function isHeaderCells(e){return G(e,(function(e){return Da(e.element)}))},Na=function getRowHeaderType(e,t){return e&&t?"sectionCells":e?"section":"cells"},Ma=function getRowType(e){var t="thead"===e.section,n=Nt(Ba(e.cells),"th");return"tfoot"===e.section?{type:"footer"}:t||n?{type:"header",subType:Na(t,n)}:{type:"body"}},Ba=function findCommonCellType(e){var t=$(e,(function(e){return Da(e.element)}));return 0===t.length?D.some("td"):t.length===e.length?D.some("th"):D.none()},Ia=function transformCell(e,t,n){return ft(n(e.element,t),!0,e.isLocked)},Pa=function transformRow(e,t){return e.section!==t?dt(e.element,e.cells,t,e.isNew):e},La=function section(){return{transformRow:Pa,transformCell:function transformCell(e,t,n){var o=n(e.element,t),i="td"!==me(o)?function mutate$1(e,t){var n=at(e,t);qe(e,n);var o=We(e);return Qe(n,o),tt(e),n}(o,"td"):o;return ft(i,e.isNew,e.isLocked)}}},Fa=function sectionCells(){return{transformRow:Pa,transformCell:Ia}},Ha=function cells(){return{transformRow:function transformRow(e,t){return Pa(e,"thead"===t?"tbody":t)},transformCell:Ia}},$a=function getTableSectionType(e,t){var n=function findTableRowHeaderType(e){return J(e.all,(function(e){var t=Ma(e);return"header"===t.type?D.from(t.subType):D.none()}))}(hr.fromTable(e)).getOr(t);switch(n){case"section":return La();case"sectionCells":return Fa();case"cells":return Ha()}},za=La,Va=Fa,Ua=Ha,Za=function fallback(){return{transformRow:x,transformCell:Ia}},Wa=function setIfNot(e,t,n,o){n===o?Ae(e,t):ke(e,t,n)},ja=function insert$1(e,t,n){X(St(e,t)).fold((function(){return Ke(e,n)}),(function(e){return qe(e,n)}))},Ga=function render$1(e,t){var n=[],o=[],i=function syncRows(e){return L(e,(function(e){e.isNew&&n.push(e.element);var t=e.element;return et(t),F(e.cells,(function(e){e.isNew&&o.push(e.element),Wa(e.element,"colspan",e.colspan,1),Wa(e.element,"rowspan",e.rowspan,1),Ye(t,e.element)})),t}))},a=function syncColGroup(e){return j(e,(function(e){return L(e.cells,(function(e){return Wa(e.element,"span",e.colspan,1),e.element}))}))},u=function renderSection(t,n){var o=function generateSection(e,t){var n=_t(e,t).getOrThunk((function(){var n=Re.fromTag(t,Fe(e).dom);return"thead"===t?ja(e,"caption,colgroup",n):"colgroup"===t?ja(e,"caption",n):Ye(e,n),n}));return et(n),n}(e,n),u=("colgroup"===n?a:i)(t);Qe(o,u)},c=function renderOrRemoveSection(t,n){t.length>0?u(t,n):function removeSection(t){_t(e,t).each(tt)}(n)},s=[],l=[],d=[],m=[];return F(t,(function(e){switch(e.section){case"thead":s.push(e);break;case"tbody":l.push(e);break;case"tfoot":d.push(e);break;case"colgroup":m.push(e)}})),c(m,"colgroup"),c(s,"thead"),c(l,"tbody"),c(d,"tfoot"),{newRows:n,newCells:o}},qa=function findDiff(e,t){if(0===e.length)return 0;var n=e[0];return Z(e,(function(e){return!t(n.element,e.element)})).getOr(e.length)},Ka=function subgrid(e,t,n,o){var i=function getRow(e,t){return e[t]}(e,t),a="colgroup"===i.section,u=qa(i.cells.slice(n),o),c=a?1:qa(function getColumn(e,t){return L(e,(function(e){return ir(e,t)}))}(e.slice(t),n),o);return{colspan:u,rowspan:c}},Ya=function toDetails(e,t){var n=L(e,(function(e){return L(e.cells,O)}));return L(e,(function(o,i){var a=j(o.cells,(function(o,a){if(!1===n[i][a]){var u=Ka(e,i,a,t);return function updateSeen(e,t,o,i){for(var a=e;a<e+o;a++)for(var u=t;u<t+i;u++)n[a][u]=!0}(i,a,u.rowspan,u.colspan),[st(o.element,u.rowspan,u.colspan,o.isNew)]}return[]}));return function rowdetailnew(e,t,n,o){return{element:e,cells:t,section:n,isNew:o}}(o.element,a,o.section,o.isNew)}))},Xa=function toGrid(e,t,n){var o=[];F(e.colgroups,(function(i){for(var a=[],u=0;u<e.grid.columns;u++){var c=hr.getColumnAt(e,u).map((function(e){return ft(e.element,n,!1)})).getOrThunk((function(){return ft(t.colGap(),!0,!1)}));a.push(c)}o.push(dt(i.element,a,"colgroup",n))}));for(var i=0;i<e.grid.rows;i++){for(var a=[],u=0;u<e.grid.columns;u++){var c=hr.getAt(e,i,u).map((function(e){return ft(e.element,n,e.isLocked)})).getOrThunk((function(){return ft(t.gap(),!0,!1)}));a.push(c)}var s=e.all[i],l=dt(s.element,a,s.section,n);o.push(l)}return o},Ja=function toDetailList(e){return Ya(e,Ie)},Qa=function findInWarehouse(e,t){return J(e.all,(function(e){return U(e.cells,(function(e){return Ie(t,e.element)}))}))},eu=function extractCells(e,t,n){var o=L(t.selection,(function(t){return an(t).bind((function(t){return Qa(e,t)})).filter(n)})),i=Mt(o);return Bt(i.length>0,i)},tu=function run(e,t,n,o,i){return function(a,u,c,s){var l=hr.fromTable(a),d=D.from(null===s||void 0===s?void 0:s.section).getOrThunk(Za);return t(l,u).map((function(t){var n=function fromWarehouse(e,t){return Xa(e,t,!1)}(l,c),o=e(n,t,Ie,i(c),d),a=dr(o.grid);return{info:t,grid:Ja(o.grid),cursor:o.cursor,lockedColumns:a}})).bind((function(e){var t=Ga(a,e.grid),i=D.from(null===s||void 0===s?void 0:s.sizing).getOrThunk((function(){return Ao(a)})),u=D.from(null===s||void 0===s?void 0:s.resize).getOrThunk(Aa);return n(a,e.grid,e.info,{sizing:i,resize:u,section:d}),o(a),Ae(a,lr),e.lockedColumns.length>0&&ke(a,lr,e.lockedColumns.join(",")),D.some({cursor:e.cursor,newRows:t.newRows,newCells:t.newCells})}))}},ru=function onPasteByEditor(e,t){return eu(e,t,A).map((function(e){return{cells:e,generators:t.generators,clipboard:t.clipboard}}))},ou=function onCells(e,t){return eu(e,t,A)},iu=function onUnlockedCells(e,t){return eu(e,t,(function(e){return!e.isLocked}))},au=function allUnlocked(e,t){return G(t,(function(t){return function isUnlockedTableCell(e,t){return Qa(e,t).exists((function(e){return!e.isLocked}))}(e,t)}))},uu=function unmerge(e,t,n,o){for(var i=cr(e).rows,a=!0,u=0;u<i.length;u++)for(var c=0;c<ur(i[0]);c++){var s=i[u],l=ir(s,c),d=n(l.element,t);d&&!a?nr(s,c,ft(o(),!0,l.isLocked)):d&&(a=!1)}return e},cu=function splitRows(e,t,n,o){var i=cr(e).rows;if(t>0&&t<i.length){var a=function uniqueCells(e,t){return V(e,(function(e,n){return I(e,(function(e){return t(e.element,n.element)}))?e:e.concat([n])}),[])}(i[t-1].cells,n);F(a,(function(e){for(var a=D.none(),u=t;u<i.length;u++)for(var c=function _loop(t){var c=i[u],s=ir(c,t);n(s.element,e.element)&&(a.isNone()&&(a=D.some(o())),a.each((function(e){nr(c,t,ft(e,!0,s.isLocked))})))},s=0;s<ur(i[0]);s++)c(s)}))}return e},su=function value$1(e){var t=function applyHelper(t){return t(e)},n=w(e),o=function outputHelper(){return i},i={tag:!0,inner:e,fold:function fold(t,n){return n(e)},isValue:A,isError:O,map:function map(t){return fu.value(t(e))},mapError:o,bind:t,exists:t,forall:t,getOr:n,or:o,getOrThunk:n,orThunk:o,getOrDie:n,each:function each(t){t(e)},toOptional:function toOptional(){return D.some(e)}};return i},lu=function error(e){var t=function outputHelper(){return n},n={tag:!1,inner:e,fold:function fold(t,n){return t(e)},isValue:O,isError:A,map:t,mapError:function mapError(t){return fu.error(t(e))},bind:t,exists:O,forall:A,getOr:x,or:x,getOrThunk:E,orThunk:E,getOrDie:T(String(e)),each:C,toOptional:D.none};return n},fu={value:su,error:lu,fromOption:function fromOption(e,t){return e.fold((function(){return lu(t)}),su)}},du=function measureWidth(e,t){return{rowDelta:0,colDelta:ur(e[0])-ur(t[0])}},mu=function measureHeight(e,t){return{rowDelta:e.length-t.length,colDelta:0}},gu=function generateElements(e,t,n,o){var i="colgroup"===t.section?n.col:n.cell;return P(e,(function(e){return ft(i(),!0,o(e))}))},pu=function rowFill(e,t,n,o){var i=e[e.length-1];return e.concat(P(t,(function(){var e="colgroup"===i.section?n.colgroup:n.row,t=sr(i,e,x),a=gu(t.cells.length,t,n,(function(e){return ue(o,e.toString())}));return rr(t,a)})))},hu=function colFill(e,t,n,o){return L(e,(function(e){var i=gu(t,e,n,O);return er(e,o,i)}))},vu=function tailor(e,t,n){var o=t.colDelta<0?hu:x,i=t.rowDelta<0?pu:x,a=dr(e),u=ur(e[0]),c=I(a,(function(e){return e===u-1})),s=o(e,Math.abs(t.colDelta),n,c?u-1:u),l=dr(s);return i(s,Math.abs(t.rowDelta),n,q(l,A))},bu=function isSpanning(e,t,n,o){var i=curry(o,ir(e[t],n).element),a=e[t];return e.length>1&&ur(a)>1&&(n>0&&i(ar(a,n-1))||n<a.cells.length-1&&i(ar(a,n+1))||t>0&&i(ar(e[t-1],n))||t<e.length-1&&i(ar(e[t+1],n)))},yu=function getLockedColumnsWithinBounds(e,t,n){return $(n,(function(n){return n>=e.column&&n<=ur(t[0])+e.column}))},Cu=function merge$1(e,t,n,o,a){var u=dr(t),c=function getValidStartAddress(e,t,n){var o=ur(t[0]),i=cr(t).cols.length+e.row,a=P(o-e.column,(function(t){return t+e.column})),u=U(a,(function(e){return G(n,(function(t){return t!==e}))})).getOr(o-1);return{row:i,column:u}}(e,t,u),s=cr(n).rows,l=yu(c,s,u),d=function measure(e,t,n){if(e.row>=t.length||e.column>ur(t[0]))return fu.error("invalid start address out of table bounds, row: "+e.row+", column: "+e.column);var o=t.slice(e.row),i=o[0].cells.slice(e.column),a=ur(n[0]),u=n.length;return fu.value({rowDelta:o.length-u,colDelta:i.length-a})}(c,t,s);return d.map((function(e){var n=i(i({},e),{},{colDelta:e.colDelta-l.length}),u=vu(t,n,o),d=dr(u),m=yu(c,s,d);return function mergeTables(e,t,n,o,i,a){for(var u=e.row,c=e.column,s=u+n.length,l=c+ur(n[0])+a.length,d=q(a,A),m=u;m<s;m++)for(var g=0,p=c;p<l;p++)if(d[p])g++;else{bu(t,m,p,i)&&uu(t,ar(t[m],p),i,o.cell);var h=p-c-g,v=ir(n[m-u],h),b=v.element,y=o.replace(b);nr(t[m],p,ft(y,!0,v.isLocked))}return t}(c,u,s,o,a,m)}))},wu=function insertCols(e,t,n,o,i){!function splitCols(e,t,n,o){t>0&&t<e[0].cells.length&&F(e,(function(e){for(var i=e.cells[t-1],a=0,u=o();e.cells.length>t+a&&n(i.element,e.cells[t+a].element);)nr(e,t+a,ft(u,!0,e.cells[t+a].isLocked)),a++}))}(t,e,i,o.cell);var a=mu(n,t),u=vu(n,a,o),c=mu(t,u),s=vu(t,c,o);return L(s,(function(t,n){return er(t,e,u[n].cells)}))},xu=function insertRows(e,t,n,o,u){cu(t,e,u,o.cell);var c=dr(t),s=du(t,n),l=i(i({},s),{},{colDelta:s.colDelta-c.length}),d=vu(t,l,o),m=cr(d),g=m.cols,p=m.rows,h=dr(d),v=du(n,t),b=i(i({},v),{},{colDelta:v.colDelta+h.length}),y=function lockedColFill(e,t,n){return L(e,(function(e){return V(n,(function(n,o){var i=gu(1,e,t,A)[0];return tr(n,o,i)}),e)}))}(n,o,h),C=vu(y,b,o);return[].concat(a(g),a(p.slice(0,e)),a(C),a(p.slice(e,p.length)))},Su=function insertRowAt(e,t,n,o,i){var u=cr(e),c=u.rows,s=u.cols,l=c.slice(0,t),d=c.slice(t),m=function cloneRow(e,t,n,o){return sr(e,(function(e){return o(e,n)}),t)}(c[n],(function(e,n){return t>0&&t<c.length&&o(ar(c[t-1],n),ar(c[t],n))?ir(c[t],n):ft(i(e.element,o),!0,e.isLocked)}),o,i);return[].concat(a(s),a(l),[m],a(d))},ku=function insertColumnAt(e,t,n,o,i){return L(e,(function(e){var a=t>0&&t<ur(e)&&o(ar(e,t-1),ar(e,t)),u=function getElementFor(e,t,n,o,i,a,u){if("colgroup"!==n&&o)return ir(e,t);var c=ir(e,i);return ft(u(c.element,a),!0,!1)}(e,t,e.section,a,n,o,i);return tr(e,t,u)}))},Tu=function isDuplicatedCell(e,t,n,o){return function notInStartRow(e,t,n,o){return void 0!==ar(e[t],n)&&t>0&&o(ar(e[t-1],n),ar(e[t],n))}(e,t,n,o)||function notInStartColumn(e,t,n){return t>0&&n(ar(e,t-1),ar(e,t))}(e[t],n,o)},Eu=function determineScope(e,t,n,o){var i=function getScope(e){return function hasSpan(e){return"row"===e?Jt(t):Xt(t)}(e)?"".concat(e,"group"):e};return e?Da(t)?i(n):null:o&&Da(t)?i("row"===n?"col":"row"):null},Ou=function replace(e,t,n){return ft(n(e.element,t),!0,e.isLocked)},Au=function replaceIn(e,t,n,o,i,a,u){return L(e,(function(e,c){return function mapCells(e,t){var n=e.cells,o=L(n,t);return dt(e.element,o,e.section,e.isNew)}(e,(function(e,s){if(function isTarget(e){return I(t,(function(t){return n(e.element,t.element)}))}(e)){var l=u(e,c,s)?i(e,n,o):e;return a(l,c,s).each((function(e){!function setOptions(e,t){te(t,(function(t,n){t.fold((function(){Ae(e,n)}),(function(t){Se(e.dom,n,t)}))}))}(l.element,{scope:D.from(e)})})),l}return e}))}))},_u=function getColumnCells(e,t,n){return j(e,(function(o,i){return Tu(e,i,t,n)?[]:[ir(o,t)]}))},Du=function replaceColumns(e,t,n,o,i){var a=cr(e).rows,u=j(t,(function(e){return _u(a,e,o)})),c=L(a,(function(e){return Ra(e.cells)})),s=function columnReplacePredicate(e,t){return G(t,x)&&Ra(e)?A:function(e,n,o){return!("th"===me(e.element)&&t[n])}}(u,c),l=function columnScopeGenerator(e,t){return function(n,o){return D.some(Eu(e,n.element,"row",t[o]))}}(n,c);return Au(e,u,o,i,Ou,l,s)},Ru=function replaceRows(e,t,n,o,i,u,c){var s=cr(e),l=s.cols,d=s.rows,m=d[t[0]],g=j(t,(function(e){return function getRowCells(e,t,n){var o=e[t];return j(o.cells,(function(o,i){return Tu(e,t,i,n)?[]:[o]}))}(d,e,i)})),p=L(m.cells,(function(e,t){return Ra(_u(d,t,i))})),h=a(d);F(t,(function(e){h[e]=c.transformRow(d[e],n)}));var v=[].concat(a(l),a(h)),b=function rowReplacerPredicate(e,t){return G(t,x)&&Ra(e.cells)?A:function(e,n,o){return!("th"===me(e.element)&&t[o])}}(m,p),y=function rowScopeGenerator(e,t){return function(n,o,i){return D.some(Eu(e,n.element,"col",t[i]))}}(o,p);return Au(v,g,i,u,c.transformCell,y,b)},Nu=function replaceCells(e,t,n,o){var i=cr(e).rows,a=L(t,(function(e){return ir(i[e.row],e.column)}));return Au(e,a,n,o,Ou,D.none,A)},Mu=function generate(e){if(!m(e))throw new Error("cases must be an array");if(0===e.length)throw new Error("there must be at least one case");var t=[],n={};return F(e,(function(o,i){var a=Q(o);if(1!==a.length)throw new Error("one and only one name per case");var u=a[0],c=o[u];if(void 0!==n[u])throw new Error("duplicate key detected:"+u);if("cata"===u)throw new Error("cannot have a case named cata (sorry)");if(!m(c))throw new Error("case arguments must be an array");t.push(u),n[u]=function(){for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];var s=o.length;if(s!==c.length)throw new Error("Wrong number of arguments to case "+u+". Expected "+c.length+" ("+c+"), got "+s);return{fold:function fold(){for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];if(n.length!==e.length)throw new Error("Wrong number of arguments to fold. Expected "+e.length+", got "+n.length);return n[i].apply(null,o)},match:function match(e){var n=Q(e);if(t.length!==n.length)throw new Error("Wrong number of arguments to match. Expected: "+t.join(",")+"\nActual: "+n.join(","));if(!G(t,(function(e){return B(n,e)})))throw new Error("Not all branches were specified when using match. Specified: "+n.join(", ")+"\nRequired: "+t.join(", "));return e[u].apply(null,o)},log:function log(e){console.log(e,{constructors:t,constructor:u,params:o})}}}})),n},Bu=Mu([{none:[]},{only:["index"]},{left:["index","next"]},{middle:["prev","index","next"]},{right:["prev","index"]}]),Iu=i({},Bu),Pu=function determine(e,t,n,o,i){var a=e.slice(0),u=function neighbours(e,t){return 0===e.length?Iu.none():1===e.length?Iu.only(0):0===t?Iu.left(0,1):t===e.length-1?Iu.right(t-1,t):t>0&&t<e.length-1?Iu.middle(t-1,t,t+1):Iu.none()}(e,t),c=w(L(a,w(0)));return u.fold(c,(function onOnly(e){return o.singleColumnWidth(a[e],n)}),(function onLeft(e,t){return i.calcLeftEdgeDeltas(a,e,t,n,o.minCellWidth(),o.isRelative)}),(function onMiddle(e,t,u){return i.calcMiddleDeltas(a,e,t,u,n,o.minCellWidth(),o.isRelative)}),(function onRight(e,t){return i.calcRightEdgeDeltas(a,e,t,n,o.minCellWidth(),o.isRelative)}))},Lu=function total(e,t,n){for(var o=0,i=e;i<t;i++)o+=void 0!==n[i]?n[i]:0;return o},Fu=function recalculateHeightForCells(e,t){var n=hr.justCells(e);return L(n,(function(e){var n=Lu(e.row,e.row+e.rowspan,t);return{element:e.element,height:n,rowspan:e.rowspan}}))},Hu=function recalculate(e,t){return hr.hasColumns(e)?function recalculateWidthForColumns(e,t){var n=hr.justColumns(e);return L(n,(function(e,n){return{element:e.element,width:t[n],colspan:e.colspan}}))}(e,t):function recalculateWidthForCells(e,t){var n=hr.justCells(e);return L(n,(function(e){var n=Lu(e.column,e.column+e.colspan,t);return{element:e.element,width:n,colspan:e.colspan}}))}(e,t)},$u=function recalculateAndApply(e,t,n){var o=Hu(e,t);F(o,(function(e){n.setElementWidth(e.element,e.width)}))},zu=function adjustWidth(e,t,n,o,i){var a=hr.fromTable(e),u=i.getCellDelta(t),c=i.getWidths(a,i),s=n===a.grid.columns-1,l=o.clampTableDelta(c,n,u,i.minCellWidth(),s),d=Pu(c,n,l,i,o),m=L(d,(function(e,t){return e+c[t]}));$u(a,m,i),o.resizeTable(i.adjustTableWidth,l,s)},Vu=function adjustHeight(e,t,n,o){var i=hr.fromTable(e),a=function getPixelHeights(e,t,n){return So(e,t,n,lo,(function(e){return e.getOrThunk(tn)}))}(i,e,o),u=L(a,(function(e,o){return n===o?Math.max(t+e,tn()):e})),c=Fu(i,u),s=function matchRowHeight(e,t){return L(e.all,(function(e,n){return{element:e.element,height:t[n]}}))}(i,u);F(s,(function(e){ro(e.element,e.height)})),F(c,(function(e){ro(e.element,e.height)}));var l=function sumUp(e){return z(e,(function(e,t){return e+t}),0)}(u);ro(e,l)},Uu=function uniqueColumns(e){return V(e,(function uniqueCheck(e,t){return I(e,(function(e){return e.column===t.column}))?e:e.concat([t])}),[]).sort((function(e,t){return e.column-t.column}))},Zu=xe("col"),Wu=xe("colgroup"),ju=function isRow$1(e){return"tr"===me(e)||Wu(e)},Gu=function elementToData(e){return{element:e,colspan:Kt(e,"colspan",1),rowspan:Kt(e,"rowspan",1)}},qu=function getScopeAttribute(e){return Oe(e,"scope").map((function(e){return e.substr(0,3)}))},Ku=function modification(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Gu,n=function add(n){if(ju(n))return function nuRow(t){return Wu(t.element)?e.colgroup(t):e.row(t)}({element:n});var i=n,a=function nuCell(t){return Zu(t.element)?e.col(t):e.cell(t)}(t(i));return o=D.some({item:i,replacement:a}),a},o=D.none();return{getOrInit:function getOrInit(e,t){return o.fold((function(){return n(e)}),(function(o){return t(e,o.item)?o.replacement:n(e)}))}}},Yu=function transform$1(e){return function(t){var n=[],o=function makeNew(o){var i="td"===e?{scope:null}:{},a=t.replace(o,e,i);return n.push({item:o,sub:a}),a};return{replaceOrInit:function replaceOrInit(e,t){if(ju(e)||Zu(e))return e;var i=e;return function find(e,t){return U(n,(function(n){return t(n.item,e)}))}(i,t).fold((function(){return o(i)}),(function(n){return t(e,n.item)?n.sub:o(i)}))}}}},Xu=function merging(e){return{unmerge:function unmerge(t){var n=qu(t);return n.each((function(e){return ke(t,"scope",e)})),function(){var o=e.cell({element:t,colspan:1,rowspan:1});return qt(o,"width"),qt(t,"width"),n.each((function(e){return ke(o,"scope",e)})),o}},merge:function merge(e){return qt(e[0],"width"),function getScopeProperty(){var t=Mt(L(e,qu));if(0===t.length)return D.none();var n=t[0],o=["row","col"];return I(t,(function(e){return e!==n&&B(o,e)}))?D.none():D.from(n)}().fold((function(){return Ae(e[0],"scope")}),(function(t){return ke(e[0],"scope",t+"group")})),w(e[0])}}},Ju=["body","p","div","article","aside","figcaption","figure","footer","header","nav","section","ol","ul","table","thead","tfoot","tbody","caption","tr","td","th","h1","h2","h3","h4","h5","h6","blockquote","pre","address"],Qu=Fi(),ec=function isBlock(e){return function isBlock$1(e,t){var n=e.property().name(t);return B(Ju,n)}(Qu,e)},tc=function isList(e){return function isList$1(e,t){var n=e.property().name(t);return B(["ol","ul"],n)}(Qu,e)},nc=function isEmptyTag(e){return function isEmptyTag$1(e,t){return B(["br","img","hr","input"],e.property().name(t))}(Qu,e)},oc=function merge(e){var t=xe("br"),n=function markCell(e){return zo(e).bind((function(n){var o=function siblingIsBlock(e){return Ze(e).map((function(e){return!!ec(e)||!!nc(e)&&"img"!==me(e)})).getOr(!1)}(n);return $e(n).map((function(i){return!0===o||function isListItem(e){return"li"===me(e)||Et(e,tc).isSome()}(i)||t(n)||ec(i)&&!Ie(e,i)?[]:[Re.fromTag("br")]}))})).getOr([])},o=function markContent(){var o=j(e,(function(e){var o=We(e);return function advancedBr(e){return G(e,(function(e){return t(e)||ye(e)&&0===Bo(e).trim().length}))}(o)?[]:o.concat(n(e))}));return 0===o.length?[Re.fromTag("br")]:o}();et(e[0]),Qe(e[0],o)},ic=function isEditable(e){return bi(e,!0)},ac=function prune(e){0===un(e).length&&tt(e)},uc=function outcome(e,t){return{grid:e,cursor:t}},cc=function elementFromGrid(e,t,n){var o,i,a=cr(e).rows;return D.from(null===(i=null===(o=a[t])||void 0===o?void 0:o.cells[n])||void 0===i?void 0:i.element).filter(ic).orThunk((function(){return function findEditableCursorPosition(e){return J(e,(function(e){return J(e.cells,(function(e){var t=e.element;return Bt(ic(t),t)}))}))}(a)}))},sc=function bundle(e,t,n){var o=cc(e,t,n);return uc(e,o)},lc=function uniqueRows(e){return V(e,(function rowCompilation(e,t){return I(e,(function(e){return e.row===t.row}))?e:e.concat([t])}),[]).sort((function(e,t){return e.row-t.row}))},fc=function makeRowsSection(e,t){return function(n,o,i,a,u){var c=lc(o),s=L(c,(function(e){return e.row})),l=Ru(n,s,e,t,i,a.replaceOrInit,u);return sc(l,o[0].row,o[0].column)}},dc=fc("thead",!0),mc=fc("tbody",!1),gc=fc("tfoot",!1),pc=function gridifyRows(e,t,n){var o=function fromPastedRows(e,t){return dn(e,(function(){return t}))}(e,n.section),i=hr.generate(o);return Xa(i,t,!0)},hc=function resize(e,t,n,o){return function adjustWidthTo(e,t,n,o){var i=hr.generate(t),a=o.getWidths(i,o);$u(i,a,o)}(0,t,0,o.sizing)},vc=function adjustAndRedistributeWidths(e,t,n,o){return function adjustAndRedistributeWidths$1(e,t,n,o,i){var a=hr.generate(t),u=o.getWidths(a,o),c=o.pixelWidth(),s=i.calcRedestributedWidths(u,c,n.pixelDelta,o.isRelative),l=s.newSizes,d=s.delta;$u(a,l,o),o.adjustTableWidth(d)}(0,t,n,o.sizing,o.resize)},bc=function firstColumnIsLocked(e,t){return I(t,(function(e){return 0===e.column&&e.isLocked}))},yc=function lastColumnIsLocked(e,t){return I(t,(function(t){return t.column+t.colspan>=e.grid.columns&&t.isLocked}))},Cc=function getColumnsWidth(e,t){var n=vr(e),o=Uu(t);return V(o,(function(e,t){return e+n[t.column].map(Xn).getOr(0)}),0)},wc=function insertColumnsExtractor(e){return function(t,n){return ou(t,n).filter((function(n){return!(e?bc:yc)(t,n)})).map((function(e){return{details:e,pixelDelta:Cc(t,e)}}))}},xc=function pasteColumnsExtractor(e){return function(t,n){return ru(t,n).filter((function(n){return!(e?bc:yc)(t,n.cells)}))}},Sc=Yu("th"),kc=Yu("td"),Tc=tu((function opInsertRowsBefore(e,t,n,o){var i=t[0].row,a=lc(t),u=z(a,(function(e,t){return{grid:Su(e.grid,i,t.row+e.delta,n,o.getOrInit),delta:e.delta+1}}),{grid:e,delta:0}).grid;return sc(u,i,t[0].column)}),ou,C,C,Ku),Ec=tu((function opInsertRowsAfter(e,t,n,o){var i=lc(t),a=i[i.length-1],u=a.row+a.rowspan,c=z(i,(function(e,t){return Su(e,u,t.row,n,o.getOrInit)}),e);return sc(c,u,t[0].column)}),ou,C,C,Ku),Oc=tu((function opInsertColumnsBefore(e,t,n,o){var i=t.details,a=Uu(i),u=a[0].column,c=z(a,(function(e,t){return{grid:ku(e.grid,u,t.column+e.delta,n,o.getOrInit),delta:e.delta+1}}),{grid:e,delta:0}).grid;return sc(c,i[0].row,u)}),wc(!0),vc,C,Ku),Ac=tu((function opInsertColumnsAfter(e,t,n,o){var i=t.details,a=i[i.length-1],u=a.column+a.colspan,c=Uu(i),s=z(c,(function(e,t){return ku(e,u,t.column,n,o.getOrInit)}),e);return sc(s,i[0].row,u)}),wc(!1),vc,C,Ku),_c=tu((function opEraseColumns(e,t,n,o){var i=Uu(t.details),a=function deleteColumnsAt(e,t){return j(e,(function(e){var n=e.cells,o=z(t,(function(e,t){return t>=0&&t<e.length?e.slice(0,t).concat(e.slice(t+1)):e}),n);return o.length>0?[dt(e.element,o,e.section,e.isNew)]:[]}))}(e,L(i,(function(e){return e.column}))),u=a.length>0?a[0].cells.length-1:0;return sc(a,i[0].row,Math.min(i[0].column,u))}),(function eraseColumnsExtractor(e,t){return iu(e,t).map((function(t){return{details:t,pixelDelta:-Cc(e,t)}}))}),vc,ac,Ku),Dc=tu((function opEraseRows(e,t,n,o){var i=lc(t),u=function deleteRowsAt(e,t,n){var o=cr(e),i=o.rows,u=o.cols;return[].concat(a(u),a(i.slice(0,t)),a(i.slice(n+1)))}(e,i[0].row,i[i.length-1].row),c=u.length>0?u.length-1:0;return sc(u,Math.min(t[0].row,c),t[0].column)}),ou,C,ac,Ku),Rc=tu((function opMakeColumnsHeader(e,t,n,o){var i=Uu(t),a=L(i,(function(e){return e.column})),u=Du(e,a,!0,n,o.replaceOrInit);return sc(u,t[0].row,t[0].column)}),iu,C,C,Sc),Nc=tu((function opUnmakeColumnsHeader(e,t,n,o){var i=Uu(t),a=L(i,(function(e){return e.column})),u=Du(e,a,!1,n,o.replaceOrInit);return sc(u,t[0].row,t[0].column)}),iu,C,C,kc),Mc=tu(dc,iu,C,C,Sc),Bc=tu(mc,iu,C,C,kc),Ic=tu(gc,iu,C,C,kc),Pc=tu((function opMakeCellsHeader(e,t,n,o){var i=Nu(e,t,n,o.replaceOrInit);return sc(i,t[0].row,t[0].column)}),iu,C,C,Sc),Lc=tu((function opUnmakeCellsHeader(e,t,n,o){var i=Nu(e,t,n,o.replaceOrInit);return sc(i,t[0].row,t[0].column)}),iu,C,C,kc),Fc=tu((function opMergeCells(e,t,n,o){var i=t.cells;oc(i);var a=function merge$2(e,t,n,o){var i=cr(e).rows;if(0===i.length)return e;for(var a=t.startRow;a<=t.finishRow;a++)for(var u=t.startCol;u<=t.finishCol;u++){var c=i[a],s=ir(c,u).isLocked;nr(c,u,ft(o(),!1,s))}return e}(e,t.bounds,0,o.merge(i));return uc(a,D.from(i[0]))}),(function onUnlockedMergable(e,t){return function onMergable(e,t){return t.mergable}(0,t).filter((function(t){return au(e,t.cells)}))}),hc,C,Xu),Hc=tu((function opUnmergeCells(e,t,n,o){var i=z(t,(function unmerge$1(e,t){return uu(e,t,n,o.unmerge(t))}),e);return uc(i,D.from(t[0]))}),(function onUnlockedUnmergable(e,t){return function onUnmergable(e,t){return t.unmergable}(0,t).filter((function(t){return au(e,t)}))}),hc,C,Xu),$c=tu((function opPasteCells(e,t,n,o){var i=function gridify(e,t){var n=hr.fromTable(e);return Xa(n,t,!0)}(t.clipboard,t.generators),a=function address(e,t){return{row:e,column:t}}(t.row,t.column);return Cu(a,e,i,t.generators,n).fold((function(){return uc(e,D.some(t.element))}),(function(e){return sc(e,t.row,t.column)}))}),(function onPaste(e,t){return an(t.element).bind((function(n){return Qa(e,n).map((function(e){return i(i({},e),{},{generators:t.generators,clipboard:t.clipboard})}))}))}),hc,C,Ku),zc=tu((function opPasteColsBefore(e,t,n,o){var i=cr(e).rows,a=t.cells[0].column,u=i[t.cells[0].row],c=pc(t.clipboard,t.generators,u),s=wu(a,e,c,t.generators,n);return sc(s,t.cells[0].row,t.cells[0].column)}),xc(!0),C,C,Ku),Vc=tu((function opPasteColsAfter(e,t,n,o){var i=cr(e).rows,a=t.cells[t.cells.length-1].column+t.cells[t.cells.length-1].colspan,u=i[t.cells[0].row],c=pc(t.clipboard,t.generators,u),s=wu(a,e,c,t.generators,n);return sc(s,t.cells[0].row,t.cells[0].column)}),xc(!1),C,C,Ku),Uc=tu((function opPasteRowsBefore(e,t,n,o){var i=cr(e).rows,a=t.cells[0].row,u=i[a],c=pc(t.clipboard,t.generators,u),s=xu(a,e,c,t.generators,n);return sc(s,t.cells[0].row,t.cells[0].column)}),ru,C,C,Ku),Zc=tu((function opPasteRowsAfter(e,t,n,o){var i=cr(e).rows,a=t.cells[t.cells.length-1].row+t.cells[t.cells.length-1].rowspan,u=i[t.cells[0].row],c=pc(t.clipboard,t.generators,u),s=xu(a,e,c,t.generators,n);return sc(s,t.cells[0].row,t.cells[0].column)}),ru,C,C,Ku),Wc=function opGetColumnsType(e,t){var n=hr.fromTable(e);return ou(n,t).bind((function(e){var t=e[e.length-1],o=e[0].column,i=t.column+t.colspan,a=W(L(n.all,(function(e){return $(e.cells,(function(e){return e.column>=o&&e.column<i}))})));return Ba(a)})).getOr("")},jc=function opGetCellsType(e,t){var n=hr.fromTable(e);return ou(n,t).bind(Ba).getOr("")},Gc=function opGetRowsType(e,t){var n=hr.fromTable(e);return ou(n,t).bind((function(e){var t=e[e.length-1],o=e[0].row,i=t.row+t.rowspan;return function findCommonRowType(e){var t=L(e,(function(e){return Ma(e).type})),n=B(t,"header"),o=B(t,"footer");if(n||o){var i=B(t,"body");return!n||i||o?n||i||!o?D.none():D.some("footer"):D.some("header")}return D.some("body")}(n.all.slice(o,i))})).getOr("")},qc=function fireNewRow(e,t){return e.dispatch("NewRow",{node:t})},Kc=function fireNewCell(e,t){return e.dispatch("NewCell",{node:t})},Yc=function fireTableModified(e,t,n){e.dispatch("TableModified",i(i({},n),{},{table:t}))},Xc={structure:!1,style:!0},Jc={structure:!0,style:!1},Qc={structure:!0,style:!0},es=function get$5(e,t){return ui(e)?Do(t):ci(e)?_o(t):Ao(t)},ts=function TableActions(e,t,n){var o=function isTableBody(e){return"table"===me(Ci(e))},i=ti(e),a=ii(e)?C:wa,u=function getTableSectionType(t){switch(ni(e)){case"section":return za();case"sectionCells":return Va();case"cells":return Ua();default:return $a(t,"section")}},c=function setSelectionFromAction(t,o){return o.cursor.fold((function(){var o=un(t);return Y(o).filter(yt).map((function(o){n.clearSelectedCells(t.dom);var i=e.dom.createRng();return i.selectNode(o.dom),e.selection.setRng(i),ke(o,"data-mce-selected","1"),i}))}),(function(o){var i=function freefallRtl(e){return ya(Ca,e)}(o),a=e.dom.createRng();return a.setStart(i.element.dom,i.offset),a.setEnd(i.element.dom,i.offset),e.selection.setRng(a),n.clearSelectedCells(t.dom),D.some(a)}))},s=function execute(n,o,a,s){return function(l,d){var m=arguments.length>2&&void 0!==arguments[2]&&arguments[2];xi(l);var g=Re.fromDom(e.getDoc()),p=Yo(a,g,i),h={sizing:es(e,l),resize:ii(e)?Oa():Aa(),section:u(l)};return o(l)?n(l,d,p,h).bind((function(n){t.refresh(l.dom),F(n.newRows,(function(t){qc(e,t.dom)})),F(n.newCells,(function(t){Kc(e,t.dom)}));var o=c(l,n);return yt(l)&&(xi(l),m||Yc(e,l.dom,s)),o.map((function(e){return{rng:e,effect:s}}))})):D.none()}},l=s(Dc,(function lastRowGuard(t){return!o(e)||_a(t).rows>1}),C,Jc),d=s(_c,(function lastColumnGuard(t){return!o(e)||_a(t).columns>1}),C,Jc);return{deleteRow:l,deleteColumn:d,insertRowsBefore:s(Tc,A,C,Jc),insertRowsAfter:s(Ec,A,C,Jc),insertColumnsBefore:s(Oc,A,a,Jc),insertColumnsAfter:s(Ac,A,a,Jc),mergeCells:s(Fc,A,C,Jc),unmergeCells:s(Hc,A,C,Jc),pasteColsBefore:s(zc,A,C,Jc),pasteColsAfter:s(Vc,A,C,Jc),pasteRowsBefore:s(Uc,A,C,Jc),pasteRowsAfter:s(Zc,A,C,Jc),pasteCells:s($c,A,C,Qc),makeCellsHeader:s(Pc,A,C,Jc),unmakeCellsHeader:s(Lc,A,C,Jc),makeColumnsHeader:s(Rc,A,C,Jc),unmakeColumnsHeader:s(Nc,A,C,Jc),makeRowsHeader:s(Mc,A,C,Jc),makeRowsBody:s(Bc,A,C,Jc),makeRowsFooter:s(Ic,A,C,Jc),getTableRowType:Gc,getTableCellType:jc,getTableColType:Wc}},ns=function constrainSpan(e,t,n){var o=Kt(e,t,1);1===n||o<=1?Ae(e,t):ke(e,t,Math.min(n,o))},rs=function isColInRange(e,t){return function(n){var o=n.column+n.colspan-1,i=n.column;return o>=e&&i<t}},os=function copyCols(e,t){var n=hr.fromTable(e);return iu(n,t).map((function(e){var t=e[e.length-1],o=e[0].column,i=t.column+t.colspan,u=function generateColGroup(e,t,n){if(hr.hasColumns(e)){var o=$(hr.justColumns(e),rs(t,n)),i=L(o,(function(e){var o=it(e.element);return ns(o,"span",n-t),o})),a=Re.fromTag("colgroup");return Qe(a,i),[a]}return[]}(n,o,i),c=function generateRows(e,t,n){return L(e.all,(function(e){var o=$(e.cells,rs(t,n)),i=L(o,(function(e){var o=it(e.element);return ns(o,"colspan",n-t),o})),a=Re.fromTag("tr");return Qe(a,i),a}))}(n,o,i);return[].concat(a(u),a(c))}))},as=function copyRows(e,t,n){var o=hr.fromTable(e);return ou(o,t).bind((function(e){var t=Xa(o,n,!1),a=cr(t).rows.slice(e[0].row,e[e.length-1].row+e[e.length-1].rowspan),u=j(a,(function(e){var t=$(e.cells,(function(e){return!e.isLocked}));return t.length>0?[i(i({},e),{},{cells:t})]:[]})),c=Ja(u);return Bt(c.length>0,c)})).map((function(e){return function copy(e){return L(e,(function(e){var t=ot(e.element);return F(e.cells,(function(e){var n=it(e.element);Wa(n,"colspan",e.colspan,1),Wa(n,"rowspan",e.rowspan,1),Ye(t,n)})),t}))}(e)}))},us=Mu([{invalid:["raw"]},{pixels:["value"]},{percent:["value"]}]),cs=function validateFor(e,t,n){var o=n.substring(0,n.length-e.length),i=parseFloat(o);return o===i.toString()?t(i):us.invalid(n)},ss=i(i({},us),{},{from:function from(e){return Ft(e,"%")?cs("%",us.percent,e):Ft(e,"px")?cs("px",us.pixels,e):us.invalid(e)}}),ls=function redistributeValues(e,t,n){return e.fold((function(){return t}),(function(e){return function redistributeToPx(e,t,n){var o=n/t;return L(e,(function(e){return ss.from(e).fold((function(){return e}),(function(e){return e*o+"px"}),(function(e){return e/100*n+"px"}))}))}(t,n,e)}),(function(e){return function redistributeToPercent(e,t){return L(e,(function(e){return ss.from(e).fold((function(){return e}),(function(e){return e/t*100+"%"}),(function(e){return e+"%"}))}))}(t,n)}))},fs=function redistribute$1(e,t,n){var o=ss.from(n),i=G(e,(function(e){return"0px"===e}))?function redistributeEmpty(e,t){var n=e.fold((function(){return w("")}),(function(e){return w(e/t+"px")}),(function(){return w(100/t+"%")}));return P(t,n)}(o,e.length):ls(o,e,t);return gs(i)},ds=function sum(e,t){return 0===e.length?t:z(e,(function(e,t){return ss.from(t).fold(w(0),x,x)+e}),0)},ms=function add$3(e,t){return ss.from(e).fold(w(e),(function(e){return e+t+"px"}),(function(e){return e+t+"%"}))},gs=function normalize(e){if(0===e.length)return e;var t=z(e,(function(e,t){var n=ss.from(t).fold((function(){return{value:t,remainder:0}}),(function(e){return function roundDown(e,t){var n=Math.floor(e);return{value:n+t,remainder:e-n}}(e,"px")}),(function(e){return{value:e+"%",remainder:0}}));return{output:[n.value].concat(e.output),remainder:e.remainder+n.remainder}}),{output:[],remainder:0}),n=t.output;return n.slice(0,n.length-1).concat([ms(n[n.length-1],Math.round(t.remainder))])},ps=ss.from,hs=function getUnit(e){return ps(e).fold(w("px"),w("px"),w("%"))},vs=function redistribute(e,t,n){var o=hr.fromTable(e),i=o.all,a=hr.justCells(o),u=hr.justColumns(o);t.each((function(t){var n=hs(t),i=Yn(e),c=function getRawWidths(e,t){return Co(e,t,vo,wo)}(o,e),s=fs(c,i,t);hr.hasColumns(o)?function redistributeToColumns(e,t,n){F(t,(function(t,o){var i=ds([e[o]],en());Ut(t.element,"width",i+n)}))}(s,u,n):function redistributeToW(e,t,n){F(t,(function(t){var o=e.slice(t.column,t.colspan+t.column),i=ds(o,en());Ut(t.element,"width",i+n)}))}(s,a,n),Ut(e,"width",t)})),n.each((function(t){var n=hs(t),u=Tr(e),c=function getRawHeights(e,t,n){return So(e,t,n,bo,wo)}(o,e,Vr);!function redistributeToH(e,t,n,o){F(n,(function(t){var n=e.slice(t.row,t.rowspan+t.row),i=ds(n,tn());Ut(t.element,"height",i+o)})),F(t,(function(t,n){Ut(t.element,"height",e[n])}))}(fs(c,u,t),i,a,n),Ut(e,"height",t)}))},bs=function isPercentSizing$1(e){return uo(e).exists((function(e){return Yr.test(e)}))},ys=function isPixelSizing$1(e){return uo(e).exists((function(e){return Xr.test(e)}))},Cs=function isNoneSizing$1(e){return uo(e).isNone()},ws=function cleanupLegacyAttributes(e){Ae(e,"width")},xs=function convertToPercentSize(e){var t=mo(e);vs(e,D.some(t),D.none()),ws(e)},Ss=function convertToPixelSize(e){var t=function getPixelTableWidth(e){return Yn(e)+"px"}(e);vs(e,D.some(t),D.none()),ws(e)},ks=function convertToNoneSize(e){qt(e,"width");var t=cn(e),n=t.length>0?t:un(e);F(n,(function(e){qt(e,"width"),ws(e)})),ws(e)},Ts={styles:{"border-collapse":"collapse",width:"100%"},attributes:{border:"1"},colGroups:!1},Es=function tableHeaderCell(){return Re.fromTag("th")},Os=function tableCell(){return Re.fromTag("td")},As=function createGroupRow(e){var t=Re.fromTag("colgroup");return P(e,(function(){return Ye(t,function tableColumn(){return Re.fromTag("col")}())})),t},_s=function createRows(e,t,n,o){return P(e,(function(e){return function createRow(e,t,n,o){for(var i=Re.fromTag("tr"),a=0;a<e;a++){var u=o<t||a<n?Es():Os();a<n&&ke(u,"scope","row"),o<t&&ke(u,"scope","col"),Ye(u,Re.fromTag("br")),Ye(i,u)}return i}(t,n,o,e)}))},Ds=function placeCaretInCell(e,t){e.selection.select(t.dom,!0),e.selection.collapse(!0)},Rs=function insert(e,t,n,o,i){var a=gi(e),u={styles:a,attributes:mi(e),colGroups:hi(e)};return e.undoManager.ignore((function(){var a=function render(e,t,n,o,i){var a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:Ts,u=Re.fromTag("table"),c="cells"!==i;Zt(u,a.styles),Te(u,a.attributes),a.colGroups&&Ye(u,As(t));var s=Math.min(e,n);if(c&&n>0){var l=Re.fromTag("thead");Ye(u,l);var d=_s(n,t,"sectionCells"===i?s:0,o);Qe(l,d)}var m=Re.fromTag("tbody");Ye(u,m);var g=_s(c?e-s:e,t,c?0:n,o);return Qe(m,g),u}(n,t,i,o,ni(e),u);ke(a,"data-mce-id","__mce");var c=function getOuter(e){var t=Re.fromTag("div"),n=Re.fromDom(e.dom.cloneNode(!0));return Ye(t,n),function get$4(e){return e.dom.innerHTML}(t)}(a);e.insertContent(c),e.addVisual()})),Dt(Ci(e),'table[data-mce-id="__mce"]').map((function(t){return ci(e)?Ss(t):si(e)?ks(t):(ui(e)||function isPercentage(e){return l(e)&&-1!==e.indexOf("%")}(a.width))&&xs(t),xi(t),Ae(t,"data-mce-id"),function fireEvents(e,t){F(kt(t,"tr"),(function(t){qc(e,t.dom),F(kt(t,"th,td"),(function(t){Kc(e,t.dom)}))}))}(e,t),function selectFirstCellInTable(e,t){Dt(t,"td,th").each(curry(Ds,e))}(e,t),t.dom})).getOrNull()},Ns=tinymce.util.Tools.resolve("tinymce.FakeClipboard"),Ms="x-tinymce/dom-table-",Bs=Ms+"rows",Is=Ms+"columns",Ps=function setData(e){var t=Ns.FakeClipboardItem(e);Ns.write([t])},Ls=function getData(e){var t,n=null!==(t=Ns.read())&&void 0!==t?t:[];return J(n,(function(t){return D.from(t.getType(e))}))},Fs=function clearData(e){Ls(e).isSome()&&Ns.clear()},Hs=function setRows(e){e.fold(zs,(function(e){return Ps(o({},Bs,e))}))},$s=function getRows(){return Ls(Bs)},zs=function clearRows(){return Fs(Bs)},Vs=function setColumns(e){e.fold(Zs,(function(e){return Ps(o({},Is,e))}))},Us=function getColumns(){return Ls(Is)},Zs=function clearColumns(){return Fs(Is)},Ws=function getSelectionStartCellOrCaption(e){return da(Si(e),wi(e)).filter(Ei)},js=function registerCommands(e,t){var n=wi(e),o=function getTableFromCell(e){return sn(e,n)},i=function performActionOnSelection(t){return function getSelectionStartCell(e){return ma(Si(e),wi(e)).filter(Ei)}(e).bind((function(e){return o(e).map((function(n){return t(n,e)}))}))},a=function postExecute(t){e.focus()},u=function actOnSelection(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return i((function(o,i){var u=la(ga(e),o,i);t(o,u,n).each(a)}))},c=function copyRowSelection(){return i((function(t,n){var o=la(ga(e),t,n),i=Yo(C,Re.fromDom(e.getDoc()),D.none());return as(t,o,i)}))},s=function copyColSelection(){return i((function(t,n){var o=la(ga(e),t,n);return os(t,o)}))},m=function pasteOnSelection(t,n){return n().each((function(n){var o=L(n,(function(e){return it(e)}));i((function(n,i){var u=Xo(Re.fromDom(e.getDoc())),c=function pasteRows(e,t,n,o){return{selection:Ji(e),clipboard:n,generators:o}}(ga(e),0,o,u);t(n,c).each(a)}))}))},g=function actOnType(e){return function(t,n){return function get$c(e,t){return ue(e,t)?D.from(e[t]):D.none()}(n,"type").each((function(t){u(e(t),n.no_events)}))}};te({mceTableSplitCells:function mceTableSplitCells(){return u(t.unmergeCells)},mceTableMergeCells:function mceTableMergeCells(){return u(t.mergeCells)},mceTableInsertRowBefore:function mceTableInsertRowBefore(){return u(t.insertRowsBefore)},mceTableInsertRowAfter:function mceTableInsertRowAfter(){return u(t.insertRowsAfter)},mceTableInsertColBefore:function mceTableInsertColBefore(){return u(t.insertColumnsBefore)},mceTableInsertColAfter:function mceTableInsertColAfter(){return u(t.insertColumnsAfter)},mceTableDeleteCol:function mceTableDeleteCol(){return u(t.deleteColumn)},mceTableDeleteRow:function mceTableDeleteRow(){return u(t.deleteRow)},mceTableCutCol:function mceTableCutCol(){return s().each((function(e){Vs(e),u(t.deleteColumn)}))},mceTableCutRow:function mceTableCutRow(){return c().each((function(e){Hs(e),u(t.deleteRow)}))},mceTableCopyCol:function mceTableCopyCol(){return s().each((function(e){return Vs(e)}))},mceTableCopyRow:function mceTableCopyRow(){return c().each((function(e){return Hs(e)}))},mceTablePasteColBefore:function mceTablePasteColBefore(){return m(t.pasteColsBefore,Us)},mceTablePasteColAfter:function mceTablePasteColAfter(){return m(t.pasteColsAfter,Us)},mceTablePasteRowBefore:function mceTablePasteRowBefore(){return m(t.pasteRowsBefore,$s)},mceTablePasteRowAfter:function mceTablePasteRowAfter(){return m(t.pasteRowsAfter,$s)},mceTableDelete:function eraseTable(){return Ws(e).each((function(t){sn(t,n).filter(k(n)).each((function(t){var n=Re.fromText("");if(qe(t,n),tt(t),e.dom.isEmpty(e.getBody()))e.setContent(""),e.selection.setCursorLocation();else{var o=e.dom.createRng();o.setStart(n.dom,0),o.setEnd(n.dom,0),e.selection.setRng(o),e.nodeChanged()}}))}))},mceTableCellToggleClass:function toggleTableCellClass(t,n){i((function(t){var o=ga(e),i=G(o,(function(t){return e.formatter.match("tablecellclass",{value:n},t.dom)})),a=i?e.formatter.remove:e.formatter.apply;F(o,(function(e){return a("tablecellclass",{value:n},e.dom)})),Yc(e,t.dom,Xc)}))},mceTableToggleClass:function toggleTableClass(t,n){i((function(t){e.formatter.toggle("tableclass",{value:n},t.dom),Yc(e,t.dom,Xc)}))},mceTableToggleCaption:function toggleCaption(){Ws(e).each((function(t){sn(t,n).each((function(n){_t(n,"caption").fold((function(){var t=Re.fromTag("caption");Ye(t,Re.fromText("Caption")),function appendAt(e,t,n){je(e,n).fold((function(){Ye(e,t)}),(function(e){Ge(e,t)}))}(n,t,0),e.selection.setCursorLocation(t.dom,0)}),(function(o){xe("caption")(t)&&Be("td",n).each((function(t){return e.selection.setCursorLocation(t.dom,0)})),tt(o)})),Yc(e,n.dom,Jc)}))}))},mceTableSizingMode:function mceTableSizingMode(t,o){return function setSizingMode(t){return Ws(e).each((function(o){si(e)||ci(e)||ui(e)||sn(o,n).each((function(n){"relative"!==t||bs(n)?"fixed"!==t||ys(n)?"responsive"!==t||Cs(n)||ks(n):Ss(n):xs(n),xi(n),Yc(e,n.dom,Jc)}))}))}(o)},mceTableCellType:g((function(e){return"th"===e?t.makeCellsHeader:t.unmakeCellsHeader})),mceTableColType:g((function(e){return"th"===e?t.makeColumnsHeader:t.unmakeColumnsHeader})),mceTableRowType:g((function(e){switch(e){case"header":return t.makeRowsHeader;case"footer":return t.makeRowsFooter;default:return t.makeRowsBody}}))},(function(t,n){return e.addCommand(n,t)})),e.addCommand("mceInsertTable",(function(t,n){!function insertTable(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},i=function checkInput(e){return y(e)&&e>0};if(i(t)&&i(n)){var a=o.headerRows||0,u=o.headerColumns||0;return Rs(e,n,t,u,a)}console.error("Invalid values for mceInsertTable - rows and columns values are required to insert a table.")}(e,n.rows,n.columns,n.options)})),e.addCommand("mceTableApplyCellStyle",(function(t,n){var i=function getFormatName(e){return"tablecell"+e.toLowerCase().replace("-","")};if(d(n)){var a=$(ga(e),Ei);if(0!==a.length){var u=oe(n,(function(t,n){return e.formatter.has(i(n))&&l(t)}));(function isEmpty(e){for(var t in e)if(ee.call(e,t))return!1;return!0})(u)||(te(u,(function(t,n){var o=i(n);F(a,(function(n){""===t?e.formatter.remove(o,{value:null},n.dom,!0):e.formatter.apply(o,{value:t},n.dom)}))})),o(a[0]).each((function(t){return Yc(e,t.dom,Xc)})))}}}))},Gs=Mu([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),qs={before:Gs.before,on:Gs.on,after:Gs.after,cata:function cata$1(e,t,n,o){return e.fold(t,n,o)},getStart:function getStart$1(e){return e.fold(x,x,x)}},Ks=function create$4(e,t){return{selection:e,kill:t}},Ys=function selectNode(e,t){var n=e.document.createRange();return n.selectNode(t.dom),n},Xs=function selectNodeContents(e,t){var n=e.document.createRange();return Js(n,t),n},Js=function selectNodeContentsUsing(e,t){return e.selectNodeContents(t.dom)},Qs=function relativeToNative(e,t,n){var o=e.document.createRange();return function setStart(e,t){t.fold((function(t){e.setStartBefore(t.dom)}),(function(t,n){e.setStart(t.dom,n)}),(function(t){e.setStartAfter(t.dom)}))}(o,t),function setFinish(e,t){t.fold((function(t){e.setEndBefore(t.dom)}),(function(t,n){e.setEnd(t.dom,n)}),(function(t){e.setEndAfter(t.dom)}))}(o,n),o},el=function exactToNative(e,t,n,o,i){var a=e.document.createRange();return a.setStart(t.dom,n),a.setEnd(o.dom,i),a},tl=function toRect(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom,width:e.width,height:e.height}},nl=Mu([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),rl=function fromRange(e,t,n){return t(Re.fromDom(n.startContainer),n.startOffset,Re.fromDom(n.endContainer),n.endOffset)},ol=function diagnose(e,t){var n=function getRanges(e,t){return t.match({domRange:function domRange(e){return{ltr:w(e),rtl:D.none}},relative:function relative(t,n){return{ltr:pn((function(){return Qs(e,t,n)})),rtl:pn((function(){return D.some(Qs(e,n,t))}))}},exact:function exact(t,n,o,i){return{ltr:pn((function(){return el(e,t,n,o,i)})),rtl:pn((function(){return D.some(el(e,o,i,t,n))}))}}})}(e,t);return function doDiagnose(e,t){var n=t.ltr();return n.collapsed?t.rtl().filter((function(e){return!1===e.collapsed})).map((function(e){return nl.rtl(Re.fromDom(e.endContainer),e.endOffset,Re.fromDom(e.startContainer),e.startOffset)})).getOrThunk((function(){return rl(0,nl.ltr,n)})):rl(0,nl.ltr,n)}(0,n)},il=function asLtrRange(e,t){return ol(e,t).match({ltr:function ltr(t,n,o,i){var a=e.document.createRange();return a.setStart(t.dom,n),a.setEnd(o.dom,i),a},rtl:function rtl(t,n,o,i){var a=e.document.createRange();return a.setStart(o.dom,i),a.setEnd(t.dom,n),a}})};nl.ltr,nl.rtl;var al=function create$3(e,t,n,o){return{start:e,soffset:t,finish:n,foffset:o}},ul=function create$2(e,t,n,o){return{start:qs.on(e,t),finish:qs.on(n,o)}},cl=function convertToRange(e,t){var n=il(e,t);return al(Re.fromDom(n.startContainer),n.startOffset,Re.fromDom(n.endContainer),n.endOffset)},sl=ul,ll=function detect(e,t,n,o,i){return Ie(n,o)?D.none():ji(n,o,t).bind((function(t){var o=t.boxes.getOr([]);return o.length>1?(i(e,o,t.start,t.finish),D.some(Ks(D.some(sl(n,0,n,Lo(n))),!0))):D.none()}))},fl=function traverse(e,t){return{item:e,mode:t}},dl=function backtrack(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:ml;return e.property().parent(t).map((function(e){return fl(e,o)}))},ml=function sidestep(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:gl;return n.sibling(e,t).map((function(e){return fl(e,o)}))},gl=function advance(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:advance,i=e.property().children(t);return n.first(i).map((function(e){return fl(e,o)}))},pl=[{current:dl,next:ml,fallback:D.none()},{current:ml,next:gl,fallback:D.some(dl)},{current:gl,next:gl,fallback:D.some(ml)}],hl=function go(e,t,n,o){return U(arguments.length>4&&void 0!==arguments[4]?arguments[4]:pl,(function(e){return e.current===n})).bind((function(n){return n.current(e,t,o,n.next).orThunk((function(){return n.fallback.bind((function(n){return go(e,t,n,o)}))}))}))},vl=function left$1(){return{sibling:function sibling(e,t){return e.query().prevSibling(t)},first:function first(e){return e.length>0?D.some(e[e.length-1]):D.none()}}},bl=function right$1(){return{sibling:function sibling(e,t){return e.query().nextSibling(t)},first:function first(e){return e.length>0?D.some(e[0]):D.none()}}},yl=function hone(e,t,n,o,i,a){return hl(e,t,o,i).bind((function(t){return a(t.item)?D.none():n(t.item)?D.some(t.item):hone(e,t.item,n,t.mode,i,a)}))},Cl=function isLeaf(e){return function(t){return 0===e.property().children(t).length}},wl=function left(e,t,n,o){return yl(e,t,n,ml,vl(),o)},xl=function right(e,t,n,o){return yl(e,t,n,ml,bl(),o)},Sl=Fi(),kl=function before(e,t){return function before$1(e,t,n){return wl(e,t,Cl(e),n)}(Sl,e,t)},Tl=function after$1(e,t){return function after$2(e,t,n){return xl(e,t,Cl(e),n)}(Sl,e,t)},El=Mu([{none:["message"]},{success:[]},{failedUp:["cell"]},{failedDown:["cell"]}]),Ol=function isRow(e){return Rt(e,"tr")},Al=i(i({},El),{},{verify:function verify(e,t,n,o,i,a,u){return Rt(o,"td,th",u).bind((function(n){return Rt(t,"td,th",u).map((function(t){return Ie(n,t)?Ie(o,n)&&Lo(n)===i?a(t):El.none("in same cell"):Zi(Ol,[n,t]).fold((function(){return function isOverlapping(e,t,n){var o=e.getRect(t),i=e.getRect(n);return i.right>o.left&&i.left<o.right}(e,t,n)?El.success():a(t)}),(function(e){return a(t)}))}))})).getOr(El.none("default"))},cata:function cata(e,t,n,o,i){return e.fold(t,n,o,i)}}),_l=function indexOf(e,t){return Z(e,curry(Ie,t))},Dl=xe("br"),Rl=function gatherer(e,t,n){return t(e,n).bind((function(e){return ye(e)&&0===Bo(e).trim().length?gatherer(e,t,n):D.some(e)}))},Nl=function handleParent(e,t,n,o){return function findBr(e,t){return je(e,t).filter(Dl).orThunk((function(){return je(e,t-1).filter(Dl)}))}(t,n).bind((function(t){return o.traverse(t).fold((function(){return Rl(t,o.gather,e).map(o.relative)}),(function(e){return function indexInParent(e){return $e(e).bind((function(t){var n=We(t);return _l(n,e).map((function(o){return function inParent(e,t,n,o){return{parent:e,children:t,element:n,index:o}}(t,n,e,o)}))}))}(e).map((function(e){return qs.on(e.parent,e.index)}))}))}))},Ml=function tryBr(e,t,n,o){var i=Dl(t)?function handleBr(e,t,n){return n.traverse(t).orThunk((function(){return Rl(t,n.gather,e)})).map(n.relative)}(e,t,o):Nl(e,t,n,o);return i.map((function(e){return{start:e,finish:e}}))},Bl=function moveDown(e,t){return{left:e.left,top:e.top+t,right:e.right,bottom:e.bottom+t}},Il=function moveUp(e,t){return{left:e.left,top:e.top-t,right:e.right,bottom:e.bottom-t}},Pl=function translate(e,t,n){return{left:e.left+t,top:e.top+n,right:e.right+t,bottom:e.bottom+n}},Ll=function toCaret(e){return{left:e.left,top:e.top,right:e.right,bottom:e.bottom}},Fl=function getElemBox(e,t){return D.some(e.getRect(t))},Hl=function getBoxAt(e,t,n){return be(t)?Fl(e,t).map(Ll):ye(t)?function getPartialBox(e,t,n){return n>=0&&n<Lo(t)?e.getRangedRect(t,n,t,n+1):n>0?e.getRangedRect(t,n-1,t,n):D.none()}(e,t,n).map(Ll):D.none()},$l=function getEntireBox(e,t){return be(t)?Fl(e,t).map(Ll):ye(t)?e.getRangedRect(t,0,t,Lo(t)).map(Ll):D.none()},zl=Mu([{none:[]},{retry:["caret"]}]),Vl=function inOutsideBlock(e,t,n){return Ot(t,ec).fold(O,(function(t){return $l(e,t).exists((function(e){return function isOutside(e,t){return e.left<t.left||Math.abs(t.right-e.left)<1||e.left>t.right}(n,e)}))}))},Ul={point:function getBottom(e){return e.bottom},adjuster:function adjustDown(e,t,n,o,i){var a=Bl(i,5);return Math.abs(n.bottom-o.bottom)<1||n.top>i.bottom?zl.retry(a):n.top===i.bottom?zl.retry(Bl(i,1)):Vl(e,t,i)?zl.retry(Pl(a,5,0)):zl.none()},move:Bl,gather:Tl},Zl=function adjustForTable(e,t,n,o,i){return Wl(e,t,n,t.move(o,5),i)},Wl=function adjustTil(e,t,n,o,i){return 0===i?D.some(o):function isAtTable(e,t,n){return e.elementFromPoint(t,n).filter((function(e){return"table"===me(e)})).isSome()}(e,o.left,t.point(o))?Zl(e,t,n,o,i-1):e.situsFromPoint(o.left,t.point(o)).bind((function(a){return a.start.fold(D.none,(function(a){return $l(e,a).bind((function(u){return t.adjuster(e,a,u,n,o).fold(D.none,(function(o){return adjustTil(e,t,n,o,i-1)}))})).orThunk((function(){return D.some(o)}))}),D.none)}))},jl=function retry(e,t,n){var o=e.move(n,5),i=Wl(t,e,n,o,100).getOr(o);return function checkScroll(e,t,n){return e.point(t)>n.getInnerHeight()?D.some(e.point(t)-n.getInnerHeight()):e.point(t)<0?D.some(-e.point(t)):D.none()}(e,i,t).fold((function(){return t.situsFromPoint(i.left,e.point(i))}),(function(n){return t.scrollBy(0,n),t.situsFromPoint(i.left,e.point(i)-n)}))},Gl={tryUp:curry(jl,{point:function getTop(e){return e.top},adjuster:function adjustUp(e,t,n,o,i){var a=Il(i,5);return Math.abs(n.top-o.top)<1||n.bottom<i.top?zl.retry(a):n.bottom===i.top?zl.retry(Il(i,1)):Vl(e,t,i)?zl.retry(Pl(a,5,0)):zl.none()},move:Il,gather:kl}),tryDown:curry(jl,Ul),getJumpSize:w(5)},ql=function findSpot(e,t,n){return e.getSelection().bind((function(o){return Ml(t,o.finish,o.foffset,n).fold((function(){return D.some(ha(o.finish,o.foffset))}),(function(i){var a=e.fromSitus(i);return function process(e){return Al.cata(e,(function(e){return D.none()}),(function(){return D.none()}),(function(e){return D.some(ha(e,0))}),(function(e){return D.some(ha(e,Lo(e)))}))}(Al.verify(e,o.finish,o.foffset,a.finish,a.foffset,n.failure,t))}))}))},Kl=function scan(e,t,n,o,i,a){return 0===a?D.none():Jl(e,t,n,o,i).bind((function(u){var c=e.fromSitus(u),s=Al.verify(e,n,o,c.finish,c.foffset,i.failure,t);return Al.cata(s,(function(){return D.none()}),(function(){return D.some(u)}),(function(u){return Ie(n,u)&&0===o?Yl(e,n,o,Il,i):scan(e,t,u,0,i,a-1)}),(function(u){return Ie(n,u)&&o===Lo(u)?Yl(e,n,o,Bl,i):scan(e,t,u,Lo(u),i,a-1)}))}))},Yl=function tryAgain(e,t,n,o,i){return Hl(e,t,n).bind((function(t){return Xl(e,i,o(t,Gl.getJumpSize()))}))},Xl=function tryAt(e,t,n){var o=Zn().browser;return o.isChromium()||o.isSafari()||o.isFirefox()?t.retry(e,n):D.none()},Jl=function tryCursor(e,t,n,o,i){return Hl(e,n,o).bind((function(t){return Xl(e,i,t)}))},Ql=function handle$1(e,t,n){return ql(e,t,n).bind((function(o){return Kl(e,t,o.element,o.offset,n,20).map(e.fromSitus)}))},ef=function inSameTable(e,t){return function ancestor(e,t,n){return Et(e,t,n).isSome()}(e,(function(e){return $e(e).exists((function(e){return Ie(e,t)}))}))},tf=function simulate(e,t,n,o,i){return Rt(o,"td,th",t).bind((function(o){return Rt(o,"table",t).bind((function(a){return ef(i,a)?Ql(e,t,n).bind((function(e){return Rt(e.finish,"td,th",t).map((function(t){return{start:o,finish:t,range:e}}))})):D.none()}))}))},nf=function navigate(e,t,n,o,i,a){return a(o,t).orThunk((function(){return tf(e,t,n,o,i).map((function(e){var t=e.range;return Ks(D.some(sl(t.start,t.soffset,t.finish,t.foffset)),!0)}))}))},rf=function firstUpCheck(e,t){return Rt(e,"tr",t).bind((function(e){return Rt(e,"table",t).bind((function(n){var o=kt(n,"tr");return Ie(e,o[0])?function seekLeft(e,t,n){return wl(Sl,e,t,n)}(n,(function(e){return zo(e).isSome()}),t).map((function(e){var t=Lo(e);return Ks(D.some(sl(e,t,e,t)),!0)})):D.none()}))}))},of=function lastDownCheck(e,t){return Rt(e,"tr",t).bind((function(e){return Rt(e,"table",t).bind((function(n){var o=kt(n,"tr");return Ie(e,o[o.length-1])?function seekRight(e,t,n){return xl(Sl,e,t,n)}(n,(function(e){return $o(e).isSome()}),t).map((function(e){return Ks(D.some(sl(e,0,e,0)),!0)})):D.none()}))}))},af=function select(e,t,n,o,i,a,u){return tf(e,n,o,i,a).bind((function(e){return ll(t,n,e.start,e.finish,u)}))},uf=function Cell(e){var t=e;return{get:function get(){return t},set:function set(e){t=e}}},cf=function value(){var e=function singleton(e){var t=uf(D.none()),n=function revoke(){return t.get().each(e)};return{clear:function clear(){n(),t.set(D.none())},isSet:function isSet(){return t.get().isSome()},get:function get(){return t.get()},set:function set(e){n(),t.set(D.some(e))}}}(C);return i(i({},e),{},{on:function on(t){return e.get().each(t)}})},sf=function findCell(e,t){return Rt(e,"td,th",t)},lf=function isInEditableContext(e){return ze(e).exists(bi)},ff={traverse:Ze,gather:Tl,relative:qs.before,retry:Gl.tryDown,failure:Al.failedDown},df={traverse:Ue,gather:kl,relative:qs.before,retry:Gl.tryUp,failure:Al.failedUp},mf=function isKey(e){return function(t){return t===e}},gf=mf(38),pf=mf(40),hf=function isNavigation(e){return e>=37&&e<=40},vf={isBackward:mf(37),isForward:mf(39)},bf={isBackward:mf(39),isForward:mf(37)},yf=Mu([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Cf={domRange:yf.domRange,relative:yf.relative,exact:yf.exact,exactFromRange:function exactFromRange(e){return yf.exact(e.start,e.soffset,e.finish,e.foffset)},getWin:function getWin(e){var t=function getStart(e){return e.match({domRange:function domRange(e){return Re.fromDom(e.startContainer)},relative:function relative(e,t){return qs.getStart(e)},exact:function exact(e,t,n,o){return e}})}(e);return function defaultView(e){return Re.fromDom(He(e).dom.defaultView)}(t)},range:al},wf=function caretPositionFromPoint(e,t,n){var o,i;return D.from(null===(i=(o=e.dom).caretPositionFromPoint)||void 0===i?void 0:i.call(o,t,n)).bind((function(t){if(null===t.offsetNode)return D.none();var n=e.dom.createRange();return n.setStart(t.offsetNode,t.offset),n.collapse(),D.some(n)}))},xf=function caretRangeFromPoint(e,t,n){var o,i;return D.from(null===(i=(o=e.dom).caretRangeFromPoint)||void 0===i?void 0:i.call(o,t,n))},Sf=document.caretPositionFromPoint?wf:document.caretRangeFromPoint?xf:D.none,kf=function beforeSpecial(e,t){var n=me(e);return"input"===n?qs.after(e):B(["br","img"],n)?0===t?qs.before(e):qs.after(e):qs.on(e,t)},Tf=function after(e,t,n,o){var i=function makeRange(e,t,n,o){var i=Fe(e).dom.createRange();return i.setStart(e.dom,t),i.setEnd(n.dom,o),i}(e,t,n,o),a=Ie(e,n)&&t===o;return i.collapsed&&!a},Ef=function getNativeSelection(e){return D.from(e.getSelection())},Of=function doSetNativeRange(e,t){Ef(e).each((function(e){e.removeAllRanges(),e.addRange(t)}))},Af=function doSetRange(e,t,n,o,i){var a=el(e,t,n,o,i);Of(e,a)},_f=function setRangeFromRelative(e,t){return ol(e,t).match({ltr:function ltr(t,n,o,i){Af(e,t,n,o,i)},rtl:function rtl(t,n,o,i){Ef(e).each((function(a){if(a.setBaseAndExtent)a.setBaseAndExtent(t.dom,n,o.dom,i);else if(a.extend)try{!function setLegacyRtlRange(e,t,n,o,i,a){t.collapse(n.dom,o),t.extend(i.dom,a)}(0,a,t,n,o,i)}catch(u){Af(e,o,i,t,n)}else Af(e,o,i,t,n)}))}})},Df=function setExact(e,t,n,o,i){var a=function preprocessExact(e,t,n,o){var i=kf(e,t),a=kf(n,o);return Cf.relative(i,a)}(t,n,o,i);_f(e,a)},Rf=function setRelative(e,t,n){var o=function preprocessRelative(e,t){var n=e.fold(qs.before,kf,qs.after),o=t.fold(qs.before,kf,qs.after);return Cf.relative(n,o)}(t,n);_f(e,o)},Nf=function readRange(e){if(e.rangeCount>0){var t=e.getRangeAt(0),n=e.getRangeAt(e.rangeCount-1);return D.some(al(Re.fromDom(t.startContainer),t.startOffset,Re.fromDom(n.endContainer),n.endOffset))}return D.none()},Mf=function doGetExact(e){if(null===e.anchorNode||null===e.focusNode)return Nf(e);var t=Re.fromDom(e.anchorNode),n=Re.fromDom(e.focusNode);return Tf(t,e.anchorOffset,n,e.focusOffset)?D.some(al(t,e.anchorOffset,n,e.focusOffset)):Nf(e)},Bf=function setToElement(e,t){var n=(!(arguments.length>2&&void 0!==arguments[2])||arguments[2]?Xs:Ys)(e,t);Of(e,n)},If=function get$2(e){return function getExact(e){return Ef(e).filter((function(e){return e.rangeCount>0})).bind(Mf)}(e).map((function(e){return Cf.exact(e.start,e.soffset,e.finish,e.foffset)}))},Pf=function getFirstRect(e,t){return function getFirstRect$1(e){var t=e.getClientRects(),n=t.length>0?t[0]:e.getBoundingClientRect();return n.width>0||n.height>0?D.some(n).map(tl):D.none()}(il(e,t))},Lf=function getAtPoint(e,t,n){return function fromPoint(e,t,n){var o=Re.fromDom(e.document);return Sf(o,t,n).map((function(e){return al(Re.fromDom(e.startContainer),e.startOffset,Re.fromDom(e.endContainer),e.endOffset)}))}(e,t,n)},Ff=function WindowBridge(e){return{elementFromPoint:function elementFromPoint(t,n){return Re.fromPoint(Re.fromDom(e.document),t,n)},getRect:function getRect(e){return e.dom.getBoundingClientRect()},getRangedRect:function getRangedRect(t,n,o,i){var a=Cf.exact(t,n,o,i);return Pf(e,a)},getSelection:function getSelection(){return If(e).map((function(t){return cl(e,t)}))},fromSitus:function fromSitus(t){var n=Cf.relative(t.start,t.finish);return cl(e,n)},situsFromPoint:function situsFromPoint(t,n){return Lf(e,t,n).map((function(e){return ul(e.start,e.soffset,e.finish,e.foffset)}))},clearSelection:function clearSelection(){!function clear(e){Ef(e).each((function(e){return e.removeAllRanges()}))}(e)},collapseSelection:function collapseSelection(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];If(e).each((function(n){return n.fold((function(e){return e.collapse(t)}),(function(n,o){var i=t?n:o;Rf(e,i,i)}),(function(n,o,i,a){var u=t?n:i,c=t?o:a;Df(e,u,c,u,c)}))}))},setSelection:function setSelection(t){Df(e,t.start,t.soffset,t.finish,t.foffset)},setRelativeSelection:function setRelativeSelection(t,n){Rf(e,t,n)},selectNode:function selectNode(t){Bf(e,t,!1)},selectContents:function selectContents(t){Bf(e,t)},getInnerHeight:function getInnerHeight(){return e.innerHeight},getScrollY:function getScrollY(){return function get$3(e){var t=void 0!==e?e.dom:document,n=t.body.scrollLeft||t.documentElement.scrollLeft,o=t.body.scrollTop||t.documentElement.scrollTop;return Ar(n,o)}(Re.fromDom(e.document)).top},scrollBy:function scrollBy(t,n){!function by(e,t,n){var o=(void 0!==n?n.dom:document).defaultView;o&&o.scrollBy(e,t)}(t,n,Re.fromDom(e.document))}}},Hf=function rc(e,t){return{rows:e,cols:t}},$f=function mouse(e,t,n,o){var i=function MouseSelection(e,t,n,o){var i=cf(),a=i.clear,u=function applySelection(a){i.on((function(i){o.clearBeforeUpdate(t),sf(a.target,n).each((function(u){ji(i,u,n).each((function(n){var i=n.boxes.getOr([]);if(1===i.length){var c=i[0],s="false"===yi(c),l=Nt(vi(a.target),c,Ie);s&&l&&(o.selectRange(t,i,c,c),e.selectContents(c))}else i.length>1&&(o.selectRange(t,i,n.start,n.finish),e.selectContents(u))}))}))}))};return{clearstate:a,mousedown:function mousedown(e){o.clear(t),sf(e.target,n).filter(lf).each(i.set)},mouseover:function mouseover(e){u(e)},mouseup:function mouseup(e){u(e),a()}}}(Ff(e),t,n,o);return{clearstate:i.clearstate,mousedown:i.mousedown,mouseover:i.mouseover,mouseup:i.mouseup}},zf=function isEditableNode(e){return Ot(e,ve).exists(bi)},Vf=function isEditableSelection(e,t){return zf(e)||zf(t)},Uf=function keyboard(e,t,n,o){var i=Ff(e),a=function clearToNavigate(){return o.clear(t),D.none()};return{keydown:function keydown(e,u,c,s,l,d){var m=e.raw,g=m.which,p=!0===m.shiftKey,h=Gi(t,o.selectedSelector).fold((function(){return hf(g)&&!p&&o.clearBeforeUpdate(t),hf(g)&&p&&!Vf(u,s)?D.none:pf(g)&&p?curry(af,i,t,n,ff,s,u,o.selectRange):gf(g)&&p?curry(af,i,t,n,df,s,u,o.selectRange):pf(g)?curry(nf,i,n,ff,s,u,of):gf(g)?curry(nf,i,n,df,s,u,rf):D.none}),(function(e){var n=function update$1(n){return function(){var a=J(n,(function(n){return function update(e,t,n,o,i){return Ki(o,e,t,i.firstSelectedSelector,i.lastSelectedSelector).map((function updateSelection(e){return i.clearBeforeUpdate(n),i.selectRange(n,e.boxes,e.start,e.finish),e.boxes}))}(n.rows,n.cols,t,e,o)}));return a.fold((function(){return qi(t,o.firstSelectedSelector,o.lastSelectedSelector).map((function(e){var n=pf(g)||d.isForward(g)?qs.after:qs.before;return i.setRelativeSelection(qs.on(e.first,0),n(e.table)),o.clear(t),Ks(D.none(),!0)}))}),(function(e){return D.some(Ks(D.none(),!0))}))}};return hf(g)&&p&&!Vf(u,s)?D.none:pf(g)&&p?n([Hf(1,0)]):gf(g)&&p?n([Hf(-1,0)]):d.isBackward(g)&&p?n([Hf(0,-1),Hf(-1,0)]):d.isForward(g)&&p?n([Hf(0,1),Hf(1,0)]):hf(g)&&!p?a:D.none}));return h()},keyup:function keyup(e,i,a,u,c){return Gi(t,o.selectedSelector).fold((function(){var s=e.raw,l=s.which;return!0===s.shiftKey&&hf(l)&&Vf(i,u)?function sync(e,t,n,o,i,a,u){return Ie(n,i)&&o===a?D.none():Rt(n,"td,th",t).bind((function(n){return Rt(i,"td,th",t).bind((function(o){return ll(e,t,n,o,u)}))}))}(t,n,i,a,u,c,o.selectRange):D.none()}),D.none)}}},Zf=function read(e,t){var n=Ee(e,t);return void 0===n||""===n?[]:n.split(" ")},Wf=function supports(e){return void 0!==e.dom.classList},jf=function add$1(e,t){return function add$2(e,t,n){var o=Zf(e,t).concat([n]);return ke(e,t,o.join(" ")),!0}(e,"class",t)},Gf=function add(e,t){Wf(e)?e.dom.classList.add(t):jf(e,t)},qf=function has(e,t){return Wf(e)&&e.dom.classList.contains(t)},Kf=function byAttr(e,t,n){var o=function removeSelectionAttributes(t){Ae(t,e.selected),Ae(t,e.firstSelected),Ae(t,e.lastSelected)},i=function addSelectionAttribute(t){ke(t,e.selected,"1")},a=function clear(e){u(e),n()},u=function clearBeforeUpdate(t){var n=kt(t,"".concat(e.selectedSelector,",").concat(e.firstSelectedSelector,",").concat(e.lastSelectedSelector));F(n,o)};return{clearBeforeUpdate:u,clear:a,selectRange:function selectRange(n,o,u,c){a(n),F(o,i),ke(u,e.firstSelected,"1"),ke(c,e.lastSelected,"1"),t(o,u,c)},selectedSelector:e.selectedSelector,firstSelectedSelector:e.firstSelectedSelector,lastSelectedSelector:e.lastSelectedSelector}},Yf=function none(){return{tag:"none"}},Xf=function multiple(e){return{tag:"multiple",elements:e}},Jf=function single(e){return{tag:"single",element:e}},Qf=function getOtherCells(e,t,n){var o=hr.fromTable(e);return ou(o,t).map((function(e){var t=Xa(o,n,!1),i=cr(t).rows,a=function getUpOrLeftCells(e,t){var n=e.slice(0,t[t.length-1].row+1),o=Ja(n);return j(o,(function(e){var n=e.cells.slice(0,t[t.length-1].column+1);return L(n,(function(e){return e.element}))}))}(i,e),u=function getDownOrRightCells(e,t){var n=e.slice(t[0].row+t[0].rowspan-1,e.length),o=Ja(n);return j(o,(function(e){var n=e.cells.slice(t[0].column+t[0].colspan-1,e.cells.length);return L(n,(function(e){return e.element}))}))}(i,e);return{upOrLeftCells:a,downOrRightCells:u}}))},ed=function fromRawEvent$1(e){var t=Re.fromDom(function getOriginalEventTarget(e){if(gt()&&v(e.target)){var t=Re.fromDom(e.target);if(be(t)&&bt(t)&&e.composed&&e.composedPath){var n=e.composedPath();if(n)return Y(n)}}return D.from(e.target)}(e).getOr(e.target)),n=function stop(){return e.stopPropagation()},o=function prevent(){return e.preventDefault()},i=function compose(e,t){return function(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return e(t.apply(null,o))}}(o,n);return function mkEvent(e,t,n,o,i,a,u){return{target:e,x:t,y:n,stop:o,prevent:i,kill:a,raw:u}}(t,e.clientX,e.clientY,n,o,i,e)},td=function binder(e,t,n,o,i){var a=function handle(e,t){return function(n){e(n)&&t(ed(n))}}(n,o);return e.dom.addEventListener(t,a,i),{unbind:curry(nd,e,t,a,i)}},nd=function unbind(e,t,n,o){e.dom.removeEventListener(t,n,o)},rd=A,od=function bind(e,t,n){return function bind$1(e,t,n,o){return td(e,t,n,o,!1)}(e,t,rd,n)},id=ed,ad=function hasInternalTarget(e){return!qf(Re.fromDom(e.target),"ephox-snooker-resizer-bar")},ud=function TableCellSelectionHandler(e,t){var n=function Selections(e,t,n){return{get:function get(){return Yi(e(),n).fold((function(){return t().fold(Yf,Jf)}),Xf)}}}((function(){return Re.fromDom(e.getBody())}),(function(){return ma(Si(e),wi(e))}),sa.selectedSelector),o=Kf(sa,(function onSelection(t,n,o){sn(n).each((function(i){var a=ti(e),u=Yo(C,Re.fromDom(e.getDoc()),a),c=ga(e),s=Qf(i,{selection:c},u);!function fireTableSelectionChange(e,t,n,o,i){e.dispatch("TableSelectionChange",{cells:t,start:n,finish:o,otherCells:i})}(e,t,n,o,s)}))}),(function onClear(){return function fireTableSelectionClear(e){e.dispatch("TableSelectionClear")}(e)}));e.on("init",(function(n){var i=e.getWin(),a=Ci(e),u=wi(e),c=$f(i,a,u,o),s=Uf(i,a,u,o),l=function external(e,t,n,o){var i=Ff(e);return function(e,a){o.clearBeforeUpdate(t),ji(e,a,n).each((function(e){var n=e.boxes.getOr([]);o.selectRange(t,n,e.start,e.finish),i.selectContents(a),i.collapseSelection()}))}}(i,a,u,o);e.on("TableSelectorChange",(function(e){return l(e.start,e.finish)}));var d=function handleResponse(t,n){(function hasShiftKey(e){return!0===e.raw.shiftKey})(t)&&(n.kill&&t.kill(),n.selection.each((function(t){var n=Cf.relative(t.start,t.finish),o=il(i,n);e.selection.setRng(o)})))},m=function isLeftMouse(e){return 0===e.button},g=function getDoubleTap(){var e=uf(Re.fromDom(a)),t=uf(0);return{touchEnd:function touchEnd(n){var o=Re.fromDom(n.target);if(xe("td")(o)||xe("th")(o)){var i=e.get(),a=t.get();Ie(i,o)&&n.timeStamp-a<300&&(n.preventDefault(),l(o,o))}e.set(o),t.set(n.timeStamp)}}}();e.on("dragstart",(function dragStart(e){c.clearstate()})),e.on("mousedown",(function mouseDown(e){m(e)&&ad(e)&&c.mousedown(id(e))})),e.on("mouseover",(function mouseOver(e){(function isLeftButtonPressed(e){return void 0===e.buttons||0!==(1&e.buttons)})(e)&&ad(e)&&c.mouseover(id(e))})),e.on("mouseup",(function mouseUp(e){m(e)&&ad(e)&&c.mouseup(id(e))})),e.on("touchend",g.touchEnd),e.on("keyup",(function keyup(t){var n=id(t);if(n.raw.shiftKey&&hf(n.raw.which)){var o=e.selection.getRng(),i=Re.fromDom(o.startContainer),a=Re.fromDom(o.endContainer);s.keyup(n,i,o.startOffset,a,o.endOffset).each((function(e){d(n,e)}))}})),e.on("keydown",(function keydown(n){var o=id(n);t.hide();var i=e.selection.getRng(),a=Re.fromDom(i.startContainer),u=Re.fromDom(i.endContainer),c=xr(vf,bf)(Re.fromDom(e.selection.getStart()));s.keydown(o,a,i.startOffset,u,i.endOffset,c).each((function(e){d(o,e)})),t.show()})),e.on("NodeChange",(function syncSelection(){var t=e.selection,n=Re.fromDom(t.getStart()),i=Re.fromDom(t.getEnd());Zi(sn,[n,i]).fold((function(){return o.clear(a)}),C)}))})),e.on("PreInit",(function(){e.serializer.addTempAttr(sa.firstSelected),e.serializer.addTempAttr(sa.lastSelected)}));return{getSelectedCells:function getSelectedCells(){return function fold(e,t,n,o){switch(e.tag){case"none":return t();case"single":return o(e.element);case"multiple":return n(e.elements)}}(n.get(),w([]),(function(e){return L(e,(function(e){return e.dom}))}),(function(e){return[e.dom]}))},clearSelectedCells:function clearSelectedCells(e){return o.clear(Re.fromDom(e))}}},cd=function Event(e){var t=[];return{bind:function bind(e){if(void 0===e)throw new Error("Event bind error: undefined handler");t.push(e)},unbind:function unbind(e){t=$(t,(function(t){return t!==e}))},trigger:function trigger(){for(var n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];var a={};F(e,(function(e,t){a[e]=o[t]})),F(t,(function(e){e(a)}))}}},sd=function create$1(e){return{registry:ne(e,(function(e){return{bind:e.bind,unbind:e.unbind}})),trigger:ne(e,(function(e){return e.trigger}))}},ld=function sort(e){return e.slice(0).sort()},fd=function baseWith(e,t,n){if(0===t.length)throw new Error("You must specify at least one required field.");return function validateStrArr(e,t){if(!m(t))throw new Error("The "+e+" fields must be an array. Was: "+t+".");F(t,(function(t){if(!l(t))throw new Error("The value "+t+" in the "+e+" fields was not a string.")}))}("required",t),function checkDupes(e){var t=ld(e);U(t,(function(e,n){return n<t.length-1&&e===t[n+1]})).each((function(e){throw new Error("The field: "+e+" occurs more than once in the combined fields: ["+t.join(", ")+"].")}))}(t),function(o){var i=Q(o);G(t,(function(e){return B(i,e)}))||function reqMessage(e,t){throw new Error("All required keys ("+ld(e).join(", ")+") were not specified. Specified keys were: "+ld(t).join(", ")+".")}(t,i),e(t,i);var a=$(t,(function(e){return!n.validate(o[e],e)}));return a.length>0&&function invalidTypeMessage(e,t){throw new Error("All values need to be of type: "+t+". Keys ("+ld(e).join(", ")+") were not.")}(a,n.label),o}},dd=function handleExact(e,t){var n=$(t,(function(t){return!B(e,t)}));n.length>0&&function unsuppMessage(e){throw new Error("Unsupported keys for object: "+ld(e).join(", "))}(n)},md=function exactly(e){return function base(e,t){return fd(e,t,{validate:b,label:"function"})}(dd,e)},gd=md(["compare","extract","mutate","sink"]),pd=md(["element","start","stop","destroy"]),hd=md(["forceDrop","drop","move","delayDrop"]),vd=function InDrag(){var e=D.none(),t=sd({move:cd(["info"])});return{onEvent:function onEvent(n,o){o.extract(n).each((function(n){var i=function update(t,n){var o=e.map((function(e){return t.compare(e,n)}));return e=D.some(n),o}(o,n);i.each((function(e){t.trigger.move(e)}))}))},reset:function reset(){e=D.none()},events:t.registry}},bd=function Movement(){var e=function NoDrag(){var e=sd({move:cd(["info"])});return{onEvent:C,reset:C,events:e.registry}}(),t=vd(),n=e;return{on:function on(){n.reset(),n=t},off:function off(){n.reset(),n=e},isOn:function isOn(){return n===t},onEvent:function onEvent(e,t){n.onEvent(e,t)},events:t.events}},yd=function setup(e,t,n){var o=!1,i=sd({start:cd([]),stop:cd([])}),a=bd(),u=function drop(){l.stop(),a.isOn()&&(a.off(),i.trigger.stop())},c=function last(e,t){var n=null,o=function cancel(){g(n)||(clearTimeout(n),n=null)};return{cancel:o,throttle:function throttle(){for(var i=arguments.length,a=new Array(i),u=0;u<i;u++)a[u]=arguments[u];o(),n=setTimeout((function(){n=null,e.apply(null,a)}),t)}}}(u,200);a.events.move.bind((function(n){t.mutate(e,n.info)}));var s=function runIfActive(e){return function(){if(o){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.apply(null,n)}}},l=t.sink(hd({forceDrop:u,drop:s(u),move:s((function mousemove(e){c.cancel(),a.onEvent(e,t)})),delayDrop:s(c.throttle)}),n);return{element:l.element,go:function go(e){l.start(e),a.on(),i.trigger.start()},on:function on(){o=!0},off:function off(){o=!1},isActive:function isActive(){return o},destroy:function destroy(){l.destroy()},events:i.registry}},Cd=function css(e){var t=e.replace(/\./g,"-");return{resolve:function resolve(e){return t+"-"+e}}},wd=Cd("ephox-dragster").resolve,xd=gd({compare:function compare(e,t){return Ar(t.left-e.left,t.top-e.top)},extract:function extract(e){return D.some(Ar(e.x,e.y))},sink:function sink(e,t){var n=function Blocker(e){var t=i({layerClass:wd("blocker")},e),n=Re.fromTag("div");return ke(n,"role","presentation"),Zt(n,{position:"fixed",left:"0px",top:"0px",width:"100%",height:"100%"}),Gf(n,wd("blocker")),Gf(n,t.layerClass),{element:w(n),destroy:function destroy(){tt(n)}}}(t),o=od(n.element(),"mousedown",e.forceDrop),a=od(n.element(),"mouseup",e.drop),u=od(n.element(),"mousemove",e.move),c=od(n.element(),"mouseout",e.delayDrop);return pd({element:n.element,start:function start(e){Ye(e,n.element())},stop:function stop(){tt(n.element())},destroy:function destroy(){n.destroy(),a.unbind(),u.unbind(),c.unbind(),o.unbind()}})},mutate:function mutate(e,t){e.mutate(t.left,t.top)}}),Sd=Cd("ephox-snooker").resolve,kd=function BarMutation(){var e=sd({drag:cd(["xDelta","yDelta","target"])}),t=D.none(),n=function Mutation(){var e=sd({drag:cd(["xDelta","yDelta"])});return{mutate:function mutate(t,n){e.trigger.drag(t,n)},events:e.registry}}();n.events.drag.bind((function(n){t.each((function(t){e.trigger.drag(n.xDelta,n.yDelta,t)}))}));return{assign:function assign(e){t=D.some(e)},get:function get(){return t},mutate:n.mutate,events:e.registry}},Td=Sd("resizer-bar"),Ed=Sd("resizer-rows"),Od=Sd("resizer-cols"),Ad=function destroy(e){var t=kt(e.parent(),"."+Td);F(t,tt)},_d=function drawBar(e,t,n){var o=e.origin();F(t,(function(t){t.each((function(t){var i=n(o,t);Gf(i,Td),Ye(e.parent(),i)}))}))},Dd=function refreshCol(e,t,n,o){_d(e,t,(function(e,t){var i=function col(e,t,n,o,i){var a=Re.fromTag("div");return Zt(a,{position:"absolute",left:t-o/2+"px",top:n+"px",height:i+"px",width:o+"px"}),Te(a,{"data-column":e,role:"presentation"}),a}(t.col,t.x-e.left,n.top-e.top,7,o);return Gf(i,Od),i}))},Rd=function refreshRow(e,t,n,o){_d(e,t,(function(e,t){var i=function row(e,t,n,o,i){var a=Re.fromTag("div");return Zt(a,{position:"absolute",left:t+"px",top:n-i/2+"px",height:i+"px",width:o+"px"}),Te(a,{"data-row":e,role:"presentation"}),a}(t.row,n.left-e.left,t.y-e.top,o,7);return Gf(i,Ed),i}))},Nd=function refreshGrid(e,t,n,o,i){var a=Dr(n),u=t.isResizable,c=o.length>0?Vr.positions(o,n):[],s=c.length>0?function resizableRows(e,t){return j(e.all,(function(e,n){return t(e.element)?[n]:[]}))}(e,u):[],l=$(c,(function(e,t){return I(s,(function(e){return t===e}))}));Rd(t,l,a,Xn(n));var d=i.length>0?jr.positions(i,n):[],m=d.length>0?function resizableColumns(e,t){var n=[];return P(e.grid.columns,(function(o){var i=hr.getColumnAt(e,o).map((function(e){return e.element}));i.forall(t)&&n.push(o)})),$(n,(function(n){var o=hr.filterItems(e,(function(e){return e.column===n}));return G(o,(function(e){return t(e.element)}))}))}(e,u):[],g=$(d,(function(e,t){return I(m,(function(e){return t===e}))}));Dd(t,g,a,Er(n))},Md=function refresh(e,t){if(Ad(e),e.isResizable(t)){var n=hr.fromTable(t),o=Cr(n),i=vr(n);Nd(n,e,t,o,i)}},Bd=function each(e,t){var n=kt(e.parent(),"."+Td);F(n,t)},Id=function hide(e){Bd(e,(function(e){Ut(e,"display","none")}))},Pd=function show(e){Bd(e,(function(e){Ut(e,"display","block")}))},Ld=Sd("resizer-bar-dragging"),Fd=function BarManager(e){var t=kd(),n=function transform(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=null!==(t=n.mode)&&void 0!==t?t:xd;return yd(e,o,n)}(t,{}),o=D.none(),i=function getResizer(e,t){return D.from(Ee(e,t))};t.events.drag.bind((function(e){i(e.target,"data-row").each((function(t){var n=Qt(e.target,"top");Ut(e.target,"top",n+e.yDelta+"px")})),i(e.target,"data-column").each((function(t){var n=Qt(e.target,"left");Ut(e.target,"left",n+e.xDelta+"px")}))}));var a=function getDelta(e,t){return Qt(e,t)-Kt(e,"data-initial-"+t,0)};n.events.stop.bind((function(){t.get().each((function(t){o.each((function(n){i(t,"data-row").each((function(e){var o=a(t,"top");Ae(t,"data-initial-top"),d.trigger.adjustHeight(n,o,parseInt(e,10))})),i(t,"data-column").each((function(e){var o=a(t,"left");Ae(t,"data-initial-left"),d.trigger.adjustWidth(n,o,parseInt(e,10))})),Md(e,n)}))}))}));var u=function handler(o,i){d.trigger.startAdjust(),t.assign(o),ke(o,"data-initial-"+i,Qt(o,i)),Gf(o,Ld),Ut(o,"opacity","0.2"),n.go(e.parent())},c=od(e.parent(),"mousedown",(function(e){(function isRowBar(e){return qf(e,Ed)})(e.target)&&u(e.target,"top"),function isColBar(e){return qf(e,Od)}(e.target)&&u(e.target,"left")})),s=function isRoot(t){return Ie(t,e.view())},l=od(e.view(),"mouseover",(function(t){(function findClosestEditableTable(e){return Rt(e,"table",s).filter(bi)})(t.target).fold((function(){yt(t.target)&&Ad(e)}),(function(t){n.isActive()&&(o=D.some(t),Md(e,t))}))})),d=sd({adjustHeight:cd(["table","delta","row"]),adjustWidth:cd(["table","delta","column"]),startAdjust:cd([])});return{destroy:function destroy$1(){c.unbind(),l.unbind(),n.destroy(),Ad(e)},refresh:function refresh$1(t){Md(e,t)},on:n.on,off:n.off,hideBars:curry(Id,e),showBars:curry(Pd,e),events:d.registry}},Hd=function create(e,t,n){var o=Vr,i=jr,a=Fd(e),u=sd({beforeResize:cd(["table","type"]),afterResize:cd(["table","type"]),startDrag:cd([])});return a.events.adjustHeight.bind((function(e){var t=e.table;u.trigger.beforeResize(t,"row");var n=o.delta(e.delta,t);Vu(t,n,e.row,o),u.trigger.afterResize(t,"row")})),a.events.startAdjust.bind((function(e){u.trigger.startDrag()})),a.events.adjustWidth.bind((function(e){var o=e.table;u.trigger.beforeResize(o,"col");var a=i.delta(e.delta,o),c=n(o);zu(o,a,e.column,t,c),u.trigger.afterResize(o,"col")})),{on:a.on,off:a.off,refreshBars:a.refresh,hideBars:a.hideBars,showBars:a.showBars,destroy:a.destroy,events:u.registry}},$d=function only(e,t){var n=Ce(e)?function documentElement(e){return Re.fromDom(He(e).dom.documentElement)}(e):e;return{parent:w(n),view:w(e),origin:w(Ar(0,0)),isResizable:t}},zd=function body(e,t,n){return{parent:w(t),view:w(e),origin:w(Ar(0,0)),isResizable:n}},Vd=function createContainer(){var e=Re.fromTag("div");return Zt(e,{position:"static",height:"0",width:"0",padding:"0",margin:"0",border:"0"}),Ye(function body$1(){return Ct(Re.fromDom(document))}(),e),e},Ud=function isTable(e){return v(e)&&"TABLE"===e.nodeName},Zd="bar-",Wd=function isResizable(e){return"false"!==Ee(e,"data-mce-resize")},jd=function TableResizeHandler(e){var t,n,o=cf(),i=cf(),a=cf(),u=function lazySizing(t){return es(e,t)},c=function lazyResizingBehaviour(){return oi(e)?Aa():Oa()},s=function afterCornerResize(o,i,a){var s=Ft(i,"e");if(""===n&&xs(o),a!==t&&""!==n){Ut(o,"width",n);var l=c(),d=u(o),m=oi(e)||s?function getNumColumns(e){return _a(e).columns}(o)-1:0;zu(o,a-t,m,l,d)}else if(function isPercentage$1(e){return/^(\d+(\.\d+)?)%$/.test(e)}(n)){var g=parseFloat(n.replace("%",""));Ut(o,"width",a*g/t+"%")}(function isPixel(e){return/^(\d+(\.\d+)?)px$/.test(e)})(n)&&function syncPixels(e){var t=hr.fromTable(e);hr.hasColumns(t)||F(un(e),(function(e){var t=Wt(e,"width");Ut(e,"width",t),Ae(e,"width")}))}(o)},l=function destroy(){i.on((function(e){e.destroy()})),a.on((function(t){!function remove(e,t){e.inline&&tt(t.parent())}(e,t)}))};e.on("init",(function(){var t=function get(e,t){return e.inline?zd(Re.fromDom(e.getBody()),Vd(),t):$d(Re.fromDom(e.getDoc()),t)}(e,Wd);if(a.set(t),function hasTableObjectResizing(e){var t=e.options.get("object_resizing");return B(t.split(","),"table")}(e)&&li(e)){var n=c(),s=Hd(t,n,u);s.on(),s.events.startDrag.bind((function(t){o.set(e.selection.getRng())})),s.events.beforeResize.bind((function(t){var n=t.table.dom;!function fireObjectResizeStart(e,t,n,o,i){e.dispatch("ObjectResizeStart",{target:t,width:n,height:o,origin:i})}(e,n,ki(n),Ti(n),Zd+t.type)})),s.events.afterResize.bind((function(t){var n=t.table,i=n.dom;xi(n),o.on((function(t){e.selection.setRng(t),e.focus()})),function fireObjectResized(e,t,n,o,i){e.dispatch("ObjectResized",{target:t,width:n,height:o,origin:i})}(e,i,ki(i),Ti(i),Zd+t.type),e.undoManager.add()})),i.set(s)}})),e.on("ObjectResizeStart",(function(o){var i=o.target;if(Ud(i)){var a=Re.fromDom(i);F(e.dom.select(".mce-clonedresizable"),(function(t){e.dom.addClass(t,"mce-"+ri(e)+"-columns")})),!ys(a)&&ci(e)?Ss(a):!bs(a)&&ui(e)&&xs(a),Cs(a)&&Lt(o.origin,Zd)&&xs(a),t=o.width,n=si(e)?"":function getRawWidth(e,t){var n=e.dom.getStyle(t,"width")||e.dom.getAttrib(t,"width");return D.from(n).filter($t)}(e,i).getOr("")}})),e.on("ObjectResized",(function(t){var n=t.target;if(Ud(n)){var o=Re.fromDom(n),i=t.origin;Lt(i,"corner-")&&s(o,i,t.width),xi(o),Yc(e,o.dom,Xc)}})),e.on("SwitchMode",(function(){i.on((function(t){e.mode.isReadOnly()?t.hideBars():t.showBars()}))})),e.on("dragstart dragend",(function(e){i.on((function(t){"dragstart"===e.type?(t.hideBars(),t.off()):(t.on(),t.showBars())}))})),e.on("remove",(function(){l()}));return{refresh:function refresh(e){i.on((function(t){return t.refreshBars(Re.fromDom(e))}))},hide:function hide(){i.on((function(e){return e.hideBars()}))},show:function show(){i.on((function(e){return e.showBars()}))}}},Gd=function setupTable(e){!function register(e){var t=e.options.register;t("table_clone_elements",{processor:"string[]"}),t("table_use_colgroups",{processor:"boolean",default:!0}),t("table_header_type",{processor:function processor(e){var t=B(["section","cells","sectionCells","auto"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be one of: section, cells, sectionCells or auto."}},default:"section"}),t("table_sizing_mode",{processor:"string",default:"auto"}),t("table_default_attributes",{processor:"object",default:{border:"1"}}),t("table_default_styles",{processor:"object",default:{"border-collapse":"collapse"}}),t("table_column_resizing",{processor:function processor(e){var t=B(["preservetable","resizetable"],e);return t?{value:e,valid:t}:{valid:!1,message:"Must be preservetable, or resizetable."}},default:"preservetable"}),t("table_resize_bars",{processor:"boolean",default:!0}),t("table_style_by_css",{processor:"boolean",default:!0}),t("table_merge_content_on_paste",{processor:"boolean",default:!0})}(e);var t=jd(e),n=ud(e,t),o=ts(e,t,n);return js(e,o),function registerQueryCommands(e,t){var n=wi(e),o=function lookupOnSelection(t){return ma(Si(e)).bind((function(o){return sn(o,n).map((function(n){var i=la(ga(e),n,o);return t(n,i)}))})).getOr("")};te({mceTableRowType:function mceTableRowType(){return o(t.getTableRowType)},mceTableCellType:function mceTableCellType(){return o(t.getTableCellType)},mceTableColType:function mceTableColType(){return o(t.getTableColType)}},(function(t,n){return e.addQueryValueHandler(n,t)}))}(e,o),pa(e,o),{getSelectedCells:n.getSelectedCells,clearSelectedCells:n.clearSelectedCells}},qd=function DomModel(e){return{table:Gd(e)}};!function Model(){e.add("dom",qd)}()}()},2938:function(e,t,n){n(2939)},2939:function(e,t,n){var o=n(12).default,i=n(13).default;!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function applyListFormat(e,t,n){var o="UL"===t?"InsertUnorderedList":"InsertOrderedList";e.execCommand(o,!1,!1===n?null:{"list-style-type":n})},n=function option(e){return function(t){return t.options.get(e)}},a=n("advlist_number_styles"),u=n("advlist_bullet_styles"),c=function isNullable(e){return null===e||void 0===e},s=function isNonNullable(e){return!c(e)},l=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=function(){function Optional(e,t){o(this,Optional),this.tag=e,this.value=t}return i(Optional,[{key:"fold",value:function fold(e,t){return this.tag?t(this.value):e()}},{key:"isSome",value:function isSome(){return this.tag}},{key:"isNone",value:function isNone(){return!this.tag}},{key:"map",value:function map(e){return this.tag?Optional.some(e(this.value)):Optional.none()}},{key:"bind",value:function bind(e){return this.tag?e(this.value):Optional.none()}},{key:"exists",value:function exists(e){return this.tag&&e(this.value)}},{key:"forall",value:function forall(e){return!this.tag||e(this.value)}},{key:"filter",value:function filter(e){return!this.tag||e(this.value)?this:Optional.none()}},{key:"getOr",value:function getOr(e){return this.tag?this.value:e}},{key:"or",value:function or(e){return this.tag?this:e}},{key:"getOrThunk",value:function getOrThunk(e){return this.tag?this.value:e()}},{key:"orThunk",value:function orThunk(e){return this.tag?this:e()}},{key:"getOrDie",value:function getOrDie(e){if(this.tag)return this.value;throw new Error(null!==e&&void 0!==e?e:"Called getOrDie on None")}},{key:"getOrNull",value:function getOrNull(){return this.tag?this.value:null}},{key:"getOrUndefined",value:function getOrUndefined(){return this.value}},{key:"each",value:function each(e){this.tag&&e(this.value)}},{key:"toArray",value:function toArray(){return this.tag?[this.value]:[]}},{key:"toString",value:function toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}],[{key:"some",value:function some(e){return new Optional(!0,e)}},{key:"none",value:function none(){return Optional.singletonNone}},{key:"from",value:function from(e){return s(e)?Optional.some(e):Optional.none()}}]),Optional}();d.singletonNone=new d(!1);var m=function matchNodeNames(e){return function(t){return s(t)&&e.test(t.nodeName)}},g=m(/^(OL|UL|DL)$/),p=m(/^(TH|TD)$/),h=function inList(e,t,n){return function findUntil(e,t,n){for(var o=0,i=e.length;o<i;o++){var a=e[o];if(t(a,o))return d.some(a);if(n(a,o))break}return d.none()}(t,(function(e){return g(e)&&!function isCustomList(e){return/\btox\-/.test(e.className)}(e)}),p).exists((function(t){return t.nodeName===n&&function isChildOfBody(e,t){return e.dom.isChildOf(t,e.getBody())}(e,t)}))},v=function normalizeStyleValue(e){return c(e)||"default"===e?"":e},b=function makeSetupHandler(e,t){return function(n){return function setNodeChangeHandler(e,t){var n=e.selection.getNode();return t({parents:e.dom.getParents(n),element:n}),e.on("NodeChange",t),function(){return e.off("NodeChange",t)}}(e,(function nodeChangeHandler(o){return function updateButtonState(e,o){var i=e.selection.getStart(!0);n.setActive(h(e,o,t)),n.setEnabled(!function isWithinNonEditableList(e,t){var n=e.dom.getParent(t,"ol,ul,dl");return function isWithinNonEditable(e,t){return null!==t&&!e.dom.isEditable(t)}(e,n)&&e.selection.isEditable()}(e,i)&&e.selection.isEditable())}(e,o.parents)}))}},y=function addSplitButton(e,n,o,i,a,u){e.ui.registry.addSplitButton(n,{tooltip:o,icon:"OL"===a?"ordered-list":"unordered-list",presets:"listpreview",columns:3,fetch:function fetch(e){e(l.map(u,(function(e){var t="OL"===a?"num":"bull",n="disc"===e||"decimal"===e?"default":e,o=v(e),i=function styleValueToText(e){return e.replace(/\-/g," ").replace(/\b\w/g,(function(e){return e.toUpperCase()}))}(e);return{type:"choiceitem",value:o,icon:"list-"+t+"-"+n,text:i}})))},onAction:function onAction(){return e.execCommand(i)},onItemAction:function onItemAction(n,o){t(e,a,o)},select:function select(t){var n=function getSelectedStyleType(e){var t=e.dom.getParent(e.selection.getNode(),"ol,ul"),n=e.dom.getStyle(t,"listStyleType");return d.from(n)}(e);return n.map((function(e){return t===e})).getOr(!1)},onSetup:b(e,a)})},C=function addControl(e,n,o,i,a,u){u.length>1?y(e,n,o,i,a,u):function addButton(e,n,o,i,a,u){e.ui.registry.addToggleButton(n,{active:!1,tooltip:o,icon:"OL"===a?"ordered-list":"unordered-list",onSetup:b(e,a),onAction:function onAction(){return e.queryCommandState(i)||""===u?e.execCommand(i):t(e,a,u)}})}(e,n,o,i,a,v(u[0]))};!function Plugin(){e.add("advlist",(function(e){e.hasPlugin("lists")?(function register$1(e){var t=e.options.register;t("advlist_number_styles",{processor:"string[]",default:"default,lower-alpha,lower-greek,lower-roman,upper-alpha,upper-roman".split(",")}),t("advlist_bullet_styles",{processor:"string[]",default:"default,circle,square".split(",")})}(e),function register(e){C(e,"numlist","Numbered list","InsertOrderedList","OL",a(e)),C(e,"bullist","Bullet list","InsertUnorderedList","UL",u(e))}(e),function register$2(e){e.addCommand("ApplyUnorderedListStyle",(function(n,o){t(e,"UL",o["list-style-type"])})),e.addCommand("ApplyOrderedListStyle",(function(n,o){t(e,"OL",o["list-style-type"])}))}(e)):console.error("Please use the Lists plugin together with the Advanced List plugin.")}))}()}()},2940:function(e,t,n){n(2941)},2941:function(e,t,n){var o=n(22).default,i=n(95).default,a=n(12).default,u=n(13).default;!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function isType$1(e){return function(t){return function typeOf(e){var t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&function hasProto(e,t,n){var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name}(e,String,(function(e,t){return t.isPrototypeOf(e)}))?"string":t}(t)===e}},n=function isSimpleType(e){return function(t){return typeof t===e}},c=t("string"),s=t("object"),l=t("array"),d=n("boolean"),m=function isNonNullable(e){return!function isNullable(e){return null===e||void 0===e}(e)},g=n("function"),p=n("number"),h=function noop(){},v=function constant(e){return function(){return e}},b=function tripleEquals(e,t){return e===t};var y=function not(e){return function(t){return!e(t)}},C=v(!1),w=function(){function Optional(e,t){a(this,Optional),this.tag=e,this.value=t}return u(Optional,[{key:"fold",value:function fold(e,t){return this.tag?t(this.value):e()}},{key:"isSome",value:function isSome(){return this.tag}},{key:"isNone",value:function isNone(){return!this.tag}},{key:"map",value:function map(e){return this.tag?Optional.some(e(this.value)):Optional.none()}},{key:"bind",value:function bind(e){return this.tag?e(this.value):Optional.none()}},{key:"exists",value:function exists(e){return this.tag&&e(this.value)}},{key:"forall",value:function forall(e){return!this.tag||e(this.value)}},{key:"filter",value:function filter(e){return!this.tag||e(this.value)?this:Optional.none()}},{key:"getOr",value:function getOr(e){return this.tag?this.value:e}},{key:"or",value:function or(e){return this.tag?this:e}},{key:"getOrThunk",value:function getOrThunk(e){return this.tag?this.value:e()}},{key:"orThunk",value:function orThunk(e){return this.tag?this:e()}},{key:"getOrDie",value:function getOrDie(e){if(this.tag)return this.value;throw new Error(null!==e&&void 0!==e?e:"Called getOrDie on None")}},{key:"getOrNull",value:function getOrNull(){return this.tag?this.value:null}},{key:"getOrUndefined",value:function getOrUndefined(){return this.value}},{key:"each",value:function each(e){this.tag&&e(this.value)}},{key:"toArray",value:function toArray(){return this.tag?[this.value]:[]}},{key:"toString",value:function toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}],[{key:"some",value:function some(e){return new Optional(!0,e)}},{key:"none",value:function none(){return Optional.singletonNone}},{key:"from",value:function from(e){return m(e)?Optional.some(e):Optional.none()}}]),Optional}();w.singletonNone=new w(!1);var x=Array.prototype.slice,S=Array.prototype.indexOf,k=Array.prototype.push,T=function contains$1(e,t){return function rawIndexOf(e,t){return S.call(e,t)}(e,t)>-1},E=function exists(e,t){for(var n=0,o=e.length;n<o;n++){if(t(e[n],n))return!0}return!1},O=function map(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;i++){var a=e[i];o[i]=t(a,i)}return o},A=function each$1(e,t){for(var n=0,o=e.length;n<o;n++){t(e[n],n)}},D=function filter$1(e,t){for(var n=[],o=0,i=e.length;o<i;o++){var a=e[o];t(a,o)&&n.push(a)}return n},R=function foldl(e,t,n){return A(e,(function(e,o){n=t(n,e,o)})),n},N=function findUntil(e,t,n){for(var o=0,i=e.length;o<i;o++){var a=e[o];if(t(a,o))return w.some(a);if(n(a,o))break}return w.none()},M=function find(e,t){return N(e,t,C)},B=function bind(e,t){return function flatten(e){for(var t=[],n=0,o=e.length;n<o;++n){if(!l(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);k.apply(t,e[n])}return t}(O(e,t))},I=function reverse(e){var t=x.call(e,0);return t.reverse(),t},P=function get$1(e,t){return t>=0&&t<e.length?w.some(e[t]):w.none()},L=function head(e){return P(e,0)},F=function last(e){return P(e,e.length-1)},H=function unique(e,t){for(var n=[],o=g(t)?function(e){return E(n,(function(n){return t(n,e)}))}:function(e){return T(n,e)},i=0,a=e.length;i<a;i++){var u=e[i];o(u)||n.push(u)}return n},$=function is$2(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;return e.exists((function(e){return n(e,t)}))},z=function lift2(e,t,n){return e.isSome()&&t.isSome()?w.some(n(e.getOrDie(),t.getOrDie())):w.none()},V=function fromDom$1(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:e}},U={fromHtml:function fromHtml(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){var o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return V(n.childNodes[0])},fromTag:function fromTag(e,t){var n=(t||document).createElement(e);return V(n)},fromText:function fromText(e,t){var n=(t||document).createTextNode(e);return V(n)},fromDom:V,fromPoint:function fromPoint(e,t,n){return w.from(e.dom.elementFromPoint(t,n)).map(V)}},Z=function is$1(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")},W=function eq(e,t){return e.dom===t.dom},j=Z,G="undefined"!==typeof window?window:Function("return this;")(),q=function resolve(e,t){return function path(e,t){for(var n=void 0!==t&&null!==t?t:G,o=0;o<e.length&&void 0!==n&&null!==n;++o)n=n[e[o]];return n}(e.split("."),t)},K=function getOrDie(e,t){var n=function unsafe(e,t){return q(e,t)}(e,t);if(void 0===n||null===n)throw new Error(e+" not available on this browser");return n},Y=Object.getPrototypeOf,X=function isPrototypeOf(e){var t=q("ownerDocument.defaultView",e);return s(e)&&(function sandHTMLElement(e){return K("HTMLElement",e)}(t).prototype.isPrototypeOf(e)||/^HTML\w*Element$/.test(Y(e).constructor.name))},J=function name(e){return e.dom.nodeName.toLowerCase()},Q=function type(e){return e.dom.nodeType},ee=function isType(e){return function(t){return Q(t)===e}},te=function isHTMLElement(e){return ne(e)&&X(e.dom)},ne=ee(1),re=ee(3),oe=ee(9),ie=ee(11),ae=function isTag(e){return function(t){return ne(t)&&J(t)===e}},ue=function parent(e){return w.from(e.dom.parentNode).map(U.fromDom)},ce=function children(e){return O(e.dom.childNodes,U.fromDom)},se=function child(e,t){var n=e.dom.childNodes;return w.from(n[t]).map(U.fromDom)},le=function firstChild(e){return se(e,0)},fe=function lastChild(e){return se(e,e.dom.childNodes.length-1)},de=g(Element.prototype.attachShadow)&&g(Node.prototype.getRootNode),me=de?function(e){return U.fromDom(e.dom.getRootNode())}:function documentOrOwner(e){return oe(e)?e:function owner(e){return U.fromDom(e.dom.ownerDocument)}(e)},ge=function getShadowRoot(e){var t=me(e);return function isShadowRoot(e){return ie(e)&&m(e.dom.host)}(t)?w.some(t):w.none()},pe=function getShadowHost(e){return U.fromDom(e.dom.host)},he=function inBody(e){var t=re(e)?e.dom.parentNode:e.dom;if(void 0===t||null===t||null===t.ownerDocument)return!1;var n=t.ownerDocument;return ge(U.fromDom(t)).fold((function(){return n.body.contains(t)}),function compose1(e,t){return function(n){return e(t(n))}}(inBody,pe))},ve=function ClosestOrAncestor(e,t,n,o,i){return e(n,o)?w.some(n):g(i)&&i(n)?w.none():t(n,o,i)},be=function ancestor$3(e,t,n){for(var o=e.dom,i=g(n)?n:C;o.parentNode;){o=o.parentNode;var a=U.fromDom(o);if(t(a))return w.some(a);if(i(a))break}return w.none()},ye=function closest$2(e,t,n){return ve((function is(e,t){return t(e)}),be,e,t,n)},Ce=function ancestor$2(e,t,n){return be(e,(function(e){return Z(e,t)}),n)},we=function closest(e){return function closest$1(e,t,n){return ve((function is(e,t){return Z(e,t)}),Ce,e,t,n)}(e,"[contenteditable]")},xe=function isEditable(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return he(e)?e.dom.isContentEditable:we(e).fold(v(t),(function(e){return"true"===Se(e)}))},Se=function getRaw(e){return e.dom.contentEditable},ke=function before$1(e,t){ue(e).each((function(n){n.dom.insertBefore(t.dom,e.dom)}))},Te=function after(e,t){var n=function nextSibling(e){return w.from(e.dom.nextSibling).map(U.fromDom)}(e);n.fold((function(){ue(e).each((function(e){Ee(e,t)}))}),(function(e){ke(e,t)}))},Ee=function append$1(e,t){e.dom.appendChild(t.dom)},Oe=function append(e,t){A(t,(function(t){Ee(e,t)}))},Ae=function empty(e){e.dom.textContent="",A(ce(e),(function(e){_e(e)}))},_e=function remove(e){var t=e.dom;null!==t.parentNode&&t.parentNode.removeChild(t)},De=tinymce.util.Tools.resolve("tinymce.dom.RangeUtils"),Re=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),Ne=tinymce.util.Tools.resolve("tinymce.util.VK"),Me=function fromDom(e){return O(e,U.fromDom)},Be=Object.keys,Ie=function each(e,t){for(var n=Be(e),o=0,i=n.length;o<i;o++){var a=n[o];t(e[a],a)}},Pe=function filter(e,t){var n={};return function internalFilter(e,t,n,o){Ie(e,(function(e,i){(t(e,i)?n:o)(e,i)}))}(e,t,function objAcc(e){return function(t,n){e[n]=t}}(n),h),n},Le=function setAll(e,t){var n=e.dom;Ie(t,(function(e,t){!function rawSet(e,t,n){if(!(c(n)||d(n)||p(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(n,t,e)}))},Fe=function clone$1(e){return R(e.dom.attributes,(function(e,t){return e[t.name]=t.value,e}),{})},He=function deep(e){return function clone(e,t){return U.fromDom(e.dom.cloneNode(t))}(e,!0)},$e=function mutate(e,t){var n=function shallowAs(e,t){var n=U.fromTag(t),o=Fe(e);return Le(n,o),n}(e,t);Te(e,n);var o=ce(e);return Oe(n,o),_e(e),n},ze=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),Ve=tinymce.util.Tools.resolve("tinymce.util.Tools"),Ue=function matchNodeName(e){return function(t){return m(t)&&t.nodeName.toLowerCase()===e}},Ze=function matchNodeNames(e){return function(t){return m(t)&&e.test(t.nodeName)}},We=function isTextNode$1(e){return m(e)&&3===e.nodeType},je=function isElement(e){return m(e)&&1===e.nodeType},Ge=Ze(/^(OL|UL|DL)$/),qe=Ze(/^(OL|UL)$/),Ke=Ue("ol"),Ye=Ze(/^(LI|DT|DD)$/),Xe=Ze(/^(DT|DD)$/),Je=Ze(/^(TH|TD)$/),Qe=Ue("br"),et=function isTextBlock(e,t){return m(t)&&t.nodeName in e.schema.getTextBlockElements()},tt=function isBlock(e,t){return m(e)&&e.nodeName in t},nt=function isVoid(e,t){return m(t)&&t.nodeName in e.schema.getVoidElements()},rt=function isEmpty$2(e,t,n){var o=e.isEmpty(t);return!(n&&e.select("span[data-mce-type=bookmark]",t).length>0)&&o},ot=function isChildOfBody(e,t){return e.isChildOf(t,e.getRoot())},it=function option(e){return function(t){return t.options.get(e)}},at=it("lists_indent_on_tab"),ut=it("forced_root_block"),ct=it("forced_root_block_attrs"),st=function createTextBlock(e,t){var n,o,i=e.dom,a=e.schema.getBlockElements(),u=i.createFragment(),c=ut(e),s=ct(e),l=!1;for(o=i.create(c,s),tt(t.firstChild,a)||u.appendChild(o);n=t.firstChild;){var d=n.nodeName;l||"SPAN"===d&&"bookmark"===n.getAttribute("data-mce-type")||(l=!0),tt(n,a)?(u.appendChild(n),o=null):(o||(o=i.create(c,s),u.appendChild(o)),o.appendChild(n))}return!l&&o&&o.appendChild(i.create("br",{"data-mce-bogus":"1"})),u},lt=ze.DOM,ft=ae("dd"),dt=ae("dt"),mt=function outdentDlItem(e,t){ft(t)?$e(t,"dt"):dt(t)&&function parentElement(e){return w.from(e.dom.parentElement).map(U.fromDom)}(t).each((function(n){return function splitList(e,t,n){var o=lt.select('span[data-mce-type="bookmark"]',t),i=st(e,n),a=lt.createRng();a.setStartAfter(n),a.setEndAfter(t);for(var u=a.extractContents(),c=u.firstChild;c;c=c.firstChild)if("LI"===c.nodeName&&e.dom.isEmpty(c)){lt.remove(c);break}e.dom.isEmpty(u)||lt.insertAfter(u,t),lt.insertAfter(i,t);var s=n.parentElement;s&&rt(e.dom,s)&&function removeAndKeepBookmarks(e){var t=e.parentNode;t&&Ve.each(o,(function(e){t.insertBefore(e,n.parentNode)})),lt.remove(e)}(s),lt.remove(n),rt(e.dom,t)&&lt.remove(t)}(e,n.dom,t.dom)}))},gt=function indentDlItem(e){dt(e)&&$e(e,"dd")},pt=function getNormalizedPoint(e,t){if(We(e))return{container:e,offset:t};var n=De.getNode(e,t);return We(n)?{container:n,offset:t>=e.childNodes.length?n.data.length:0}:n.previousSibling&&We(n.previousSibling)?{container:n.previousSibling,offset:n.previousSibling.data.length}:n.nextSibling&&We(n.nextSibling)?{container:n.nextSibling,offset:0}:{container:e,offset:t}},ht=function normalizeRange(e){var t=e.cloneRange(),n=pt(e.startContainer,e.startOffset);t.setStart(n.container,n.offset);var o=pt(e.endContainer,e.endOffset);return t.setEnd(o.container,o.offset),t},vt=["OL","UL","DL"],bt=vt.join(","),yt=function getParentList(e,t){var n=t||e.selection.getStart(!0);return e.dom.getParent(n,bt,St(e,n))},Ct=function getSelectedSubLists(e){var t=yt(e),n=e.selection.getSelectedBlocks();return function isParentListSelected(e,t){return m(e)&&1===t.length&&t[0]===e}(t,n)?function findSubLists(e){return D(e.querySelectorAll(bt),Ge)}(t):D(n,(function(e){return Ge(e)&&t!==e}))},wt=function getSelectedListItems(e){var t=e.selection.getSelectedBlocks();return D(function findParentListItemsNodes(e,t){var n=Ve.map(t,(function(t){return e.dom.getParent(t,"li,dd,dt",St(e,t))||t}));return H(n)}(e,t),Ye)},xt=function getClosestEditingHost(e,t){var n=e.dom.getParents(t,"TD,TH");return n.length>0?n[0]:e.getBody()},St=function getClosestListHost(e,t){var n=e.dom.getParents(t,e.dom.isBlock),o=M(n,(function(t){return function isListHost(e,t){return!Ge(t)&&!Ye(t)&&E(vt,(function(n){return e.isValidChild(t.nodeName,n)}))}(e.schema,t)}));return o.getOr(e.getBody())},kt=function findLastParentListNode(e,t){var n=e.dom.getParents(t,"ol,ul",St(e,t));return F(n)},Tt=function getSelectedListRoots(e){var t=function getSelectedLists(e){var t=kt(e,e.selection.getStart()),n=D(e.selection.getSelectedBlocks(),qe);return t.toArray().concat(n)}(e),n=function getParentLists(e){var t=e.selection.getStart();return e.dom.getParents(t,"ol,ul",St(e,t))}(e);return M(n,(function(e){return function isListInsideAnLiWithFirstAndLastNotListElement(e){return ue(e).exists((function(e){return Ye(e.dom)&&le(e).exists((function(e){return!Ge(e.dom)}))&&fe(e).exists((function(e){return!Ge(e.dom)}))}))}(U.fromDom(e))})).fold((function(){return Et(e,t)}),(function(e){return[e]}))},Et=function getUniqueListRoots(e,t){var n=O(t,(function(t){return kt(e,t).getOr(t)}));return H(n)},Ot=function isCustomList(e){return/\btox\-/.test(e.className)},At=function inList(e,t){return N(e,Ge,Je).exists((function(e){return e.nodeName===t&&!Ot(e)}))},_t=function isWithinNonEditable(e,t){return null!==t&&!e.dom.isEditable(t)},Dt=function isWithinNonEditableList(e,t){var n=e.dom.getParent(t,"ol,ul,dl");return _t(e,n)},Rt=function setNodeChangeHandler(e,t){var n=e.selection.getNode();return t({parents:e.dom.getParents(n),element:n}),e.on("NodeChange",t),function(){return e.off("NodeChange",t)}},Nt=function fromElements(e,t){var n=(t||document).createDocumentFragment();return A(e,(function(e){n.appendChild(e.dom)})),U.fromDom(n)},Mt=function fireListEvent(e,t,n){return e.dispatch("ListMutation",{action:t,element:n})},Bt=function blank(e){return function(t){return t.replace(e,"")}}(/^\s+|\s+$/g),It=function internalSet(e,t,n){if(!c(n))throw console.error("Invalid call to CSS.set. Property ",t,":: Value ",n,":: Element ",e),new Error("CSS value must be a string: "+n);(function isSupported(e){return void 0!==e.style&&g(e.style.getPropertyValue)})(e)&&e.style.setProperty(t,n)},Pt=function set(e,t,n){var o=e.dom;It(o,t,n)},Lt=function isList(e){return j(e,"OL,UL")},Ft=function hasFirstChildList(e){return le(e).exists(Lt)},Ht=function isEntryList(e){return"listAttributes"in e},$t=function isEntryComment(e){return"isComment"in e},zt=function isIndented(e){return e.depth>0},Vt=function isSelected(e){return e.isSelected},Ut=function cloneItemContent(e){var t=ce(e),n=function hasLastChildList(e){return fe(e).exists(Lt)}(e)?t.slice(0,-1):t;return O(n,He)},Zt=function joinSegment(e,t){Ee(e.item,t.list)},Wt=function createSegment(e,t){var n={list:U.fromTag(t,e),item:U.fromTag("li",e)};return Ee(n.list,n.item),n},jt=function writeShallow(e,t,n){var o=t.slice(0,n.depth);return F(o).each((function(t){if(Ht(n)){var o=function createItem(e,t,n){var o=U.fromTag("li",e);return Le(o,t),Oe(o,n),o}(e,n.itemAttributes,n.content);!function appendItem(e,t){Ee(e.list,t),e.item=t}(t,o),function normalizeSegment(e,t){J(e.list)!==t.listType&&(e.list=$e(e.list,t.listType)),Le(e.list,t.listAttributes)}(t,n)}else if(function isEntryFragment(e){return"isFragment"in e}(n))Oe(t.item,n.content);else{var i=U.fromHtml("\x3c!--".concat(n.content,"--\x3e"));Ee(t.list,i)}})),o},Gt=function writeDeep(e,t,n){var o=function createSegments(e,t,n){for(var o=[],i=0;i<n;i++)o.push(Wt(e,Ht(t)?t.listType:t.parentListType));return o}(e,n,n.depth-t.length);return function joinSegments(e){for(var t=1;t<e.length;t++)Zt(e[t-1],e[t])}(o),function populateSegments(e,t){for(var n=0;n<e.length-1;n++)Pt(e[n].item,"list-style-type","none");F(e).each((function(e){Ht(t)&&(Le(e.list,t.listAttributes),Le(e.item,t.itemAttributes)),Oe(e.item,t.content)}))}(o,n),function appendSegments(e,t){z(F(e),L(t),Zt)}(t,o),t.concat(o)},qt=function composeList(e,t){var n=w.none(),o=R(t,(function(t,o,i){return $t(o)?0===i?(n=w.some(o),t):jt(e,t,o):o.depth>t.length?Gt(e,t,o):jt(e,t,o)}),[]);return n.each((function(e){var t=U.fromHtml("\x3c!--".concat(e.content,"--\x3e"));L(o).each((function(e){!function prepend(e,t){le(e).fold((function(){Ee(e,t)}),(function(n){e.dom.insertBefore(t.dom,n.dom)}))}(e.list,t)}))})),L(o).map((function(e){return e.list}))},Kt=function normalizeEntries(e){return A(e,(function(t,n){(function closestSiblingEntry(e,t){var n=e[t].depth,o=function matches(e){return e.depth===n&&!e.dirty},i=function until(e){return e.depth<n};return N(I(e.slice(0,t)),o,i).orThunk((function(){return N(e.slice(t+1),o,i)}))})(e,n).fold((function(){t.dirty&&Ht(t)&&function cleanListProperties(e){e.listAttributes=Pe(e.listAttributes,(function(e,t){return"start"!==t}))}(t)}),(function(e){return function cloneListProperties(e,t){Ht(e)&&Ht(t)&&(e.listType=t.listType,e.listAttributes=i({},t.listAttributes))}(t,e)}))})),e},Yt=function parseSingleItem(e,t,n,o){var i;if(function isComment(e){return 8===Q(e)||"#comment"===J(e)}(o))return[{depth:e+1,content:null!==(i=o.dom.nodeValue)&&void 0!==i?i:"",dirty:!1,isSelected:!1,isComment:!0}];t.each((function(e){W(e.start,o)&&n.set(!0)}));var a=function createEntry(e,t,n){return ue(e).filter(ne).map((function(o){return{depth:t,dirty:!1,isSelected:n,content:Ut(e),itemAttributes:Fe(e),listAttributes:Fe(o),listType:J(o),isInPreviousLi:!1}}))}(o,e,n.get());t.each((function(e){W(e.end,o)&&n.set(!1)}));var u=fe(o).filter(Lt).map((function(o){return Jt(e,t,n,o)})).getOr([]);return a.toArray().concat(u)},Xt=function parseItem(e,t,n,o){return le(o).filter(Lt).fold((function(){return Yt(e,t,n,o)}),(function(i){var a=R(ce(o),(function(o,a,u){if(0===u)return o;if(function isListItem(e){return j(e,"LI")}(a))return o.concat(Yt(e,t,n,a));var c={isFragment:!0,depth:e,content:[a],isSelected:!1,dirty:!1,parentListType:J(i)};return o.concat(c)}),[]);return Jt(e,t,n,i).concat(a)}))},Jt=function parseList(e,t,n,o){return B(ce(o),(function(o){return(Lt(o)?parseList:Xt)(e+1,t,n,o)}))},Qt=function composeEntries(e,t){return B(function groupBy(e,t){if(0===e.length)return[];for(var n=t(e[0]),o=[],i=[],a=0,u=e.length;a<u;a++){var c=e[a],s=t(c);s!==n&&(o.push(i),i=[]),n=s,i.push(c)}return 0!==i.length&&o.push(i),o}(t,zt),(function(t){return L(t).exists(zt)?function indentedComposer(e,t){var n=Kt(t);return qt(e.contentDocument,n).toArray()}(e,t):function outdentedComposer(e,t){var n=Kt(t);return O(n,(function(t){var n=$t(t)?Nt([U.fromHtml("\x3c!--".concat(t.content,"--\x3e"))]):Nt(t.content);return U.fromDom(st(e,n.dom))}))}(e,t)}))},en=function listIndentation(e,t,n){var o=function parseLists(e,t){var n=function Cell(e){var t=e;return{get:function get(){return t},set:function set(e){t=e}}}(!1);return O(e,(function(e){return{sourceList:e,entries:Jt(0,t,n,e)}}))}(t,function getItemSelection(e){var t=O(wt(e),U.fromDom);return z(M(t,y(Ft)),M(I(t),y(Ft)),(function(e,t){return{start:e,end:t}}))}(e));A(o,(function(t){!function indentSelectedEntries(e,t){A(D(e,Vt),(function(e){return function indentEntry(e,t){switch(e){case"Indent":t.depth++;break;case"Outdent":t.depth--;break;case"Flatten":t.depth=0}t.dirty=!0}(t,e)}))}(t.entries,n);var o=Qt(e,t.entries);A(o,(function(t){Mt(e,"Indent"===n?"IndentList":"OutdentList",t.dom)})),function before(e,t){A(t,(function(t){ke(e,t)}))}(t.sourceList,o),_e(t.sourceList)}))},tn=function selectionIndentation(e,t){var n=Me(Tt(e)),o=Me(function getSelectedDlItems(e){return D(wt(e),Xe)}(e)),i=!1;if(n.length||o.length){var a=e.selection.getBookmark();en(e,n,t),function dlIndentation(e,t,n){A(n,"Indent"===t?gt:function(t){return mt(e,t)})}(e,t,o),e.selection.moveToBookmark(a),e.selection.setRng(ht(e.selection.getRng())),e.nodeChanged(),i=!0}return i},nn=function handleIndentation(e,t){return!function selectionIsWithinNonEditableList(e){var t=yt(e);return _t(e,t)}(e)&&tn(e,t)},rn=function indentListSelection(e){return nn(e,"Indent")},an=function outdentListSelection(e){return nn(e,"Outdent")},un=function flattenListSelection(e){return nn(e,"Flatten")},cn=function isZwsp(e){return"\ufeff"===e},sn=function ancestor(e,t){return function ancestor$1(e,t,n){return be(e,t,n).isSome()}(e,function curry(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),o=1;o<t;o++)n[o-1]=arguments[o];return function(){for(var t=arguments.length,o=new Array(t),i=0;i<t;i++)o[i]=arguments[i];var a=n.concat(o);return e.apply(null,a)}}(W,t))},ln=tinymce.util.Tools.resolve("tinymce.dom.BookmarkManager"),fn=ze.DOM,dn=function createBookmark(e){var t={},n=function setupEndPoint(n){var o=e[n?"startContainer":"endContainer"],i=e[n?"startOffset":"endOffset"];if(je(o)){var a=fn.create("span",{"data-mce-type":"bookmark"});o.hasChildNodes()?(i=Math.min(i,o.childNodes.length-1),n?o.insertBefore(a,o.childNodes[i]):fn.insertAfter(a,o.childNodes[i])):o.appendChild(a),o=a,i=0}t[n?"startContainer":"endContainer"]=o,t[n?"startOffset":"endOffset"]=i};return n(!0),e.collapsed||n(),t},mn=function resolveBookmark(e){var t=function restoreEndPoint(t){var n=e[t?"startContainer":"endContainer"],o=e[t?"startOffset":"endOffset"];if(n){if(je(n)&&n.parentNode){var i=n;o=function nodeIndex(e){for(var t,n=null===(t=e.parentNode)||void 0===t?void 0:t.firstChild,o=0;n;){if(n===e)return o;je(n)&&"bookmark"===n.getAttribute("data-mce-type")||o++,n=n.nextSibling}return-1}(n),n=n.parentNode,fn.remove(i),!n.hasChildNodes()&&fn.isBlock(n)&&n.appendChild(fn.create("br"))}e[t?"startContainer":"endContainer"]=n,e[t?"startOffset":"endOffset"]=o}};t(!0),t();var n=fn.createRng();return n.setStart(e.startContainer,e.startOffset),e.endContainer&&n.setEnd(e.endContainer,e.endOffset),ht(n)},gn=function listToggleActionFromListName(e){switch(e){case"UL":return"ToggleUlList";case"OL":return"ToggleOlList";case"DL":return"ToggleDLList"}},pn=function setAttribs(e,t){Ve.each(t,(function(t,n){e.setAttribute(n,t)}))},hn=function updateListWithDetails(e,t,n){!function updateListStyle(e,t,n){var o=n["list-style-type"]?n["list-style-type"]:null;e.setStyle(t,"list-style-type",o)}(e,t,n),function updateListAttrs(e,t,n){pn(t,n["list-attributes"]),Ve.each(e.select("li",t),(function(e){pn(e,n["list-item-attributes"])}))}(e,t,n)},vn=function isInline(e,t){return m(t)&&!tt(t,e.schema.getBlockElements())},bn=function getEndPointNode(e,t,n,o){var i=t[n?"startContainer":"endContainer"],a=t[n?"startOffset":"endOffset"];je(i)&&(i=i.childNodes[Math.min(a,i.childNodes.length-1)]||i),!n&&Qe(i.nextSibling)&&(i=i.nextSibling);var u=function findBetterContainer(t,n){for(var i,a,u=new Re(t,function findBlockAncestor(t){for(;!e.dom.isBlock(t)&&t.parentNode&&o!==t;)t=t.parentNode;return t}(t)),c=n?"next":"prev";a=u[c]();)if(!nt(e,a)&&!cn(a.textContent)&&0!==(null===(i=a.textContent)||void 0===i?void 0:i.length))return w.some(a);return w.none()};if(n&&We(i))if(cn(i.textContent))i=u(i,!1).getOr(i);else for(null!==i.parentNode&&vn(e,i.parentNode)&&(i=i.parentNode);null!==i.previousSibling&&(vn(e,i.previousSibling)||We(i.previousSibling));)i=i.previousSibling;if(!n&&We(i))if(cn(i.textContent))i=u(i,!0).getOr(i);else for(null!==i.parentNode&&vn(e,i.parentNode)&&(i=i.parentNode);null!==i.nextSibling&&(vn(e,i.nextSibling)||We(i.nextSibling));)i=i.nextSibling;for(;i.parentNode!==o;){var c=i.parentNode;if(et(e,i))return i;if(/^(TD|TH)$/.test(c.nodeName))return i;i=c}return i},yn=function applyList(e,t,n){var o=e.selection.getRng(),i="LI",a=St(e,function getRootSearchStart(e,t){var n=e.selection.getStart(!0),o=bn(e,t,!0,e.getBody());return sn(U.fromDom(o),U.fromDom(t.commonAncestorContainer))?t.commonAncestorContainer:n}(e,o)),u=e.dom;if("false"!==u.getContentEditable(e.selection.getNode())){"DL"===(t=t.toUpperCase())&&(i="DT");var c=dn(o),s=D(function getSelectedTextBlocks(e,t,n){for(var o,i=[],a=e.dom,u=bn(e,t,!0,n),c=bn(e,t,!1,n),s=[],l=u;l&&(s.push(l),l!==c);l=l.nextSibling);return Ve.each(s,(function(t){var u;if(et(e,t))return i.push(t),void(o=null);if(a.isBlock(t)||Qe(t))return Qe(t)&&a.remove(t),void(o=null);var c=t.nextSibling;ln.isBookmarkNode(t)&&(Ge(c)||et(e,c)||!c&&t.parentNode===n)?o=null:(o||(o=a.create("p"),null===(u=t.parentNode)||void 0===u||u.insertBefore(o,t),i.push(o)),o.appendChild(t))})),i}(e,o,a),e.dom.isEditable);Ve.each(s,(function(o){var a,c=o.previousSibling,s=o.parentNode;Ye(s)||(c&&Ge(c)&&c.nodeName===t&&function hasCompatibleStyle(e,t,n){var o=e.getStyle(t,"list-style-type"),i=n?n["list-style-type"]:"";return o===(null===i?"":i)}(u,c,n)?(a=c,o=u.rename(o,i),c.appendChild(o)):(a=u.create(t),s.insertBefore(a,o),a.appendChild(o),o=u.rename(o,i)),function removeStyles(e,t,n){Ve.each(n,(function(n){return e.setStyle(t,n,"")}))}(u,o,["margin","margin-right","margin-bottom","margin-left","margin-top","padding","padding-right","padding-bottom","padding-left","padding-top"]),hn(u,a,n),wn(e.dom,a))})),e.selection.setRng(mn(c))}},Cn=function shouldMerge(e,t,n){return function isValidLists(e,t){return Ge(e)&&e.nodeName===(null===t||void 0===t?void 0:t.nodeName)}(t,n)&&function hasSameListStyle(e,t,n){return e.getStyle(t,"list-style-type",!0)===e.getStyle(n,"list-style-type",!0)}(e,t,n)&&function hasSameClasses(e,t){return e.className===t.className}(t,n)},wn=function mergeWithAdjacentLists(e,t){var n,o=t.nextSibling;if(Cn(e,t,o)){for(var i=o;n=i.firstChild;)t.appendChild(n);e.remove(i)}if(o=t.previousSibling,Cn(e,t,o)){for(var a=o;n=a.lastChild;)t.insertBefore(n,t.firstChild);e.remove(a)}},xn=function updateList$1(e,t,n,o){if(t.nodeName!==n){var i=e.dom.rename(t,n);hn(e.dom,i,o),Mt(e,gn(n),i)}else hn(e.dom,t,o),Mt(e,gn(n),t)},Sn=function updateCustomList(e,t,n,o){if(t.classList.forEach((function(e,n,o){e.startsWith("tox-")&&(o.remove(e),0===o.length&&t.removeAttribute("class"))})),t.nodeName!==n){var i=e.dom.rename(t,n);hn(e.dom,i,o),Mt(e,gn(n),i)}else hn(e.dom,t,o),Mt(e,gn(n),t)},kn=function hasListStyleDetail(e){return"list-style-type"in e},Tn=function toggleList(e,t,n){var i=yt(e);if(!Dt(e,i)){var a=Ct(e),u=s(n)?n:{};a.length>0?function toggleMultipleLists(e,t,n,i,a){var u=Ge(t);if(!u||t.nodeName!==i||kn(a)||Ot(t)){yn(e,i,a);var c=dn(e.selection.getRng()),s=u?[t].concat(o(n)):n,l=u&&Ot(t)?Sn:xn;Ve.each(s,(function(t){l(e,t,i,a)})),e.selection.setRng(mn(c))}else un(e)}(e,i,a,t,u):function toggleSingleList(e,t,n,o){if(t!==e.getBody())if(t)if(t.nodeName!==n||kn(o)||Ot(t)){var i=dn(e.selection.getRng());Ot(t)&&t.classList.forEach((function(e,n,o){e.startsWith("tox-")&&(o.remove(e),0===o.length&&t.removeAttribute("class"))})),hn(e.dom,t,o);var a=e.dom.rename(t,n);wn(e.dom,a),e.selection.setRng(mn(i)),yn(e,n,o),Mt(e,gn(n),a)}else un(e);else yn(e,n,o),Mt(e,gn(n),t)}(e,i,t,u)}},En=ze.DOM,On=function normalizeLists(e,t){var n=Ve.grep(e.select("ol,ul",t));Ve.each(n,(function(t){!function normalizeList(e,t){var n=t.parentElement;if(n&&"LI"===n.nodeName&&n.firstChild===t){var o=n.previousSibling;o&&"LI"===o.nodeName?(o.appendChild(t),rt(e,n)&&En.remove(n)):En.setStyle(n,"listStyleType","none")}if(Ge(n)){var i=n.previousSibling;i&&"LI"===i.nodeName&&i.appendChild(t)}}(e,t)}))},An=function findNextCaretContainer(e,t,n,o){var i=t.startContainer,a=t.startOffset;if(We(i)&&(n?a<i.data.length:a>0))return i;var u=e.schema.getNonEmptyElements();je(i)&&(i=De.getNode(i,a));var c=new Re(i,o);n&&function isBogusBr(e,t){return!!Qe(t)&&e.isBlock(t.nextSibling)&&!Qe(t.previousSibling)}(e.dom,i)&&c.next();for(var s=n?c.next.bind(c):c.prev2.bind(c);i=s();){if("LI"===i.nodeName&&!i.hasChildNodes())return i;if(u[i.nodeName])return i;if(We(i)&&i.data.length>0)return i}return null},_n=function hasOnlyOneBlockChild(e,t){var n=t.childNodes;return 1===n.length&&!Ge(n[0])&&e.isBlock(n[0])},Dn=function unwrapSingleBlockChild(e,t){_n(e,t)&&function isUnwrappable(e){return w.from(e).map(U.fromDom).filter(te).exists((function(e){return xe(e)&&!T(["details"],J(e))}))}(t.firstChild)&&e.remove(t.firstChild,!0)},Rn=function moveChildren(e,t,n){var o,i=_n(e,n)?n.firstChild:n;if(Dn(e,t),!rt(e,t,!0))for(;o=t.firstChild;)i.appendChild(o)},Nn=function mergeLiElements(e,t,n){var o,i=t.parentNode;if(ot(e,t)&&ot(e,n)){Ge(n.lastChild)&&(o=n.lastChild),i===n.lastChild&&Qe(i.previousSibling)&&e.remove(i.previousSibling);var a=n.lastChild;a&&Qe(a)&&t.hasChildNodes()&&e.remove(a),rt(e,n,!0)&&Ae(U.fromDom(n)),Rn(e,t,n),o&&n.appendChild(o);var u=function contains(e,t){var n=e.dom,o=t.dom;return n!==o&&n.contains(o)}(U.fromDom(n),U.fromDom(t))?e.getParents(t,Ge,n):[];e.remove(t),A(u,(function(t){rt(e,t)&&t!==e.getRoot()&&e.remove(t)}))}},Mn=function mergeForward(e,t,n,o){var i=e.dom;if(i.isEmpty(o))!function mergeIntoEmptyLi(e,t,n){Ae(U.fromDom(n)),Nn(e.dom,t,n),e.selection.setCursorLocation(n,0)}(e,n,o);else{var a=dn(t);Nn(i,n,o),e.selection.setRng(mn(a))}},Bn=function backspaceDeleteFromListToListCaret(e,t){var n=e.dom,o=e.selection,i=o.getStart(),a=xt(e,i),u=n.getParent(o.getStart(),"LI",a);if(u){var c=u.parentElement;if(c===e.getBody()&&rt(n,c))return!0;var s=ht(o.getRng()),l=n.getParent(An(e,s,t,a),"LI",a),d=l&&(t?n.isChildOf(u,l):n.isChildOf(l,u));if(l&&l!==u&&!d)return e.undoManager.transact((function(){t?Mn(e,s,l,u):function isFirstChild(e){var t;return(null===(t=e.parentNode)||void 0===t?void 0:t.firstChild)===e}(u)?an(e):function mergeBackward(e,t,n,o){var i=dn(t);Nn(e.dom,n,o);var a=mn(i);e.selection.setRng(a)}(e,s,u,l)})),!0;if(d&&!t&&l!==u)return e.undoManager.transact((function(){if(s.commonAncestorContainer.parentElement){var t=dn(s),o=s.commonAncestorContainer.parentElement;Rn(n,s.commonAncestorContainer.parentElement,l),o.remove();var i=mn(t);e.selection.setRng(i)}})),!0;if(!l&&!t&&0===s.startOffset&&0===s.endOffset)return e.undoManager.transact((function(){un(e)})),!0}return!1},In=function backspaceDeleteIntoListCaret(e,t){var n=e.dom,o=e.selection.getStart(),i=xt(e,o),a=n.getParent(o,n.isBlock,i);if(a&&n.isEmpty(a)){var u=ht(e.selection.getRng()),c=n.getParent(An(e,u,t,i),"LI",i);if(c){var s=function findValidElement(e){return T(["td","th","caption"],J(e))},l=function findRoot(e){return e.dom===i};return!!function equals(e,t){return z(e,t,arguments.length>2&&void 0!==arguments[2]?arguments[2]:b).getOr(e.isNone()&&t.isNone())}(ye(U.fromDom(c),s,l),ye(U.fromDom(u.startContainer),s,l),W)&&(e.undoManager.transact((function(){var o=c.parentNode;!function removeBlock(e,t,n){var o=e.getParent(t.parentNode,e.isBlock,n);e.remove(t),o&&e.isEmpty(o)&&e.remove(o)}(n,a,i),wn(n,o),e.selection.select(c,!0),e.selection.collapse(t)})),!0)}}return!1},Pn=function hasListSelection(e){var t=e.selection.getStart(),n=xt(e,t);return e.dom.getParent(t,"LI,DT,DD",n)||wt(e).length>0},Ln=function backspaceDelete(e,t){var n=e.selection;return!Dt(e,n.getNode())&&(n.isCollapsed()?function backspaceDeleteCaret(e,t){return Bn(e,t)||In(e,t)}(e,t):function backspaceDeleteRange(e){return!!Pn(e)&&(e.undoManager.transact((function(){e.execCommand("Delete"),On(e.dom,e.getBody())})),!0)}(e))},Fn=function parseAlphabeticBase26(e){var t=I(Bt(e).split("")),n=O(t,(function(e,t){var n=e.toUpperCase().charCodeAt(0)-"A".charCodeAt(0)+1;return Math.pow(26,t)*n}));return R(n,(function(e,t){return e+t}),0)},Hn=function composeAlphabeticBase26(e){if(--e<0)return"";var t=e%26;return composeAlphabeticBase26(Math.floor(e/26))+String.fromCharCode("A".charCodeAt(0)+t)},$n=function parseDetail(e){var t=parseInt(e.start,10);return $(e.listStyleType,"upper-alpha")?Hn(t):$(e.listStyleType,"lower-alpha")?Hn(t).toLowerCase():e.start},zn=function open(e){var t=yt(e);Ke(t)&&!Dt(e,t)&&e.windowManager.open({title:"List Properties",body:{type:"panel",items:[{type:"input",name:"start",label:"Start list at number",inputMode:"numeric"}]},initialData:{start:$n({start:e.dom.getAttrib(t,"start","1"),listStyleType:w.from(e.dom.getStyle(t,"list-style-type"))})},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function onSubmit(t){(function parseStartValue(e){switch(function deduceListType(e){return function isNumeric(e){return/^[0-9]+$/.test(e)}(e)?2:function isUppercase(e){return/^[A-Z]+$/.test(e)}(e)?0:function isLowercase(e){return/^[a-z]+$/.test(e)}(e)?1:function isEmpty$1(e){return!function isNotEmpty(e){return e.length>0}(e)}(e)?3:4}(e)){case 2:return w.some({listStyleType:w.none(),start:e});case 0:return w.some({listStyleType:w.some("upper-alpha"),start:Fn(e).toString()});case 1:return w.some({listStyleType:w.some("lower-alpha"),start:Fn(e).toString()});case 3:return w.some({listStyleType:w.none(),start:""});case 4:return w.none()}})(t.getData().start).each((function(t){e.execCommand("mceListUpdate",!1,{attrs:{start:"1"===t.start?"":t.start},styles:{"list-style-type":t.listStyleType.getOr("")}})})),t.close()}})},Vn=function queryListCommandState(e,t){return function(){var n=yt(e);return m(n)&&n.nodeName===t}},Un=function registerDialog(e){e.addCommand("mceListProps",(function(){zn(e)}))},Zn=function register$2(e){e.on("BeforeExecCommand",(function(t){var n=t.command.toLowerCase();"indent"===n?rn(e):"outdent"===n&&an(e)})),e.addCommand("InsertUnorderedList",(function(t,n){Tn(e,"UL",n)})),e.addCommand("InsertOrderedList",(function(t,n){Tn(e,"OL",n)})),e.addCommand("InsertDefinitionList",(function(t,n){Tn(e,"DL",n)})),e.addCommand("RemoveList",(function(){un(e)})),Un(e),e.addCommand("mceListUpdate",(function(t,n){s(n)&&function updateList(e,t){var n=yt(e);null===n||Dt(e,n)||e.undoManager.transact((function(){s(t.styles)&&e.dom.setStyles(n,t.styles),s(t.attrs)&&Ie(t.attrs,(function(t,o){return e.dom.setAttrib(n,o,t)}))}))}(e,n)})),e.addQueryStateHandler("InsertUnorderedList",Vn(e,"UL")),e.addQueryStateHandler("InsertOrderedList",Vn(e,"OL")),e.addQueryStateHandler("InsertDefinitionList",Vn(e,"DL"))},Wn=tinymce.util.Tools.resolve("tinymce.html.Node"),jn=function isTextNode(e){return 3===e.type},Gn=function isEmpty(e){return 0===e.length},qn=function wrapInvalidChildren(e){var t=function insertListItem(t,n){var o=Wn.create("li");A(t,(function(e){return o.append(e)})),n?e.insert(o,n,!0):e.append(o)},n=R(e.children(),(function reducer(e,n){return jn(n)?[].concat(o(e),[n]):Gn(e)||jn(n)?e:(t(e,n),[])}),[]);Gn(n)||t(n)},Kn=function setup(e){at(e)&&function setupTabKey(e){e.on("keydown",(function(t){t.keyCode!==Ne.TAB||Ne.metaKeyPressed(t)||e.undoManager.transact((function(){(t.shiftKey?an(e):rn(e))&&t.preventDefault()}))}))}(e),function setup$2(e){e.on("ExecCommand",(function(t){var n=t.command.toLowerCase();"delete"!==n&&"forwarddelete"!==n||!Pn(e)||On(e.dom,e.getBody())})),e.on("keydown",(function(t){t.keyCode===Ne.BACKSPACE?Ln(e,!1)&&t.preventDefault():t.keyCode===Ne.DELETE&&Ln(e,!0)&&t.preventDefault()}))}(e)},Yn=function setupToggleButtonHandler(e,t){return function(n){return n.setEnabled(e.selection.isEditable()),Rt(e,(function toggleButtonHandler(o){n.setActive(At(o.parents,t)),n.setEnabled(!Dt(e,o.element)&&e.selection.isEditable())}))}},Xn=function setupMenuButtonHandler(e,t){return function(n){return Rt(e,(function menuButtonHandler(o){return n.setEnabled(At(o.parents,t)&&!Dt(e,o.element))}))}};!function Plugin(){e.add("lists",(function(e){return function register$3(e){(0,e.options.register)("lists_indent_on_tab",{processor:"boolean",default:!0})}(e),function setup$1(e){e.on("PreInit",(function(){e.parser.addNodeFilter("ul,ol",(function(e){return A(e,qn)}))}))}(e),e.hasPlugin("rtc",!0)?Un(e):(Kn(e),Zn(e)),function register$1(e){var t=function exec(t){return function(){return e.execCommand(t)}};e.hasPlugin("advlist")||(e.ui.registry.addToggleButton("numlist",{icon:"ordered-list",active:!1,tooltip:"Numbered list",onAction:t("InsertOrderedList"),onSetup:Yn(e,"OL")}),e.ui.registry.addToggleButton("bullist",{icon:"unordered-list",active:!1,tooltip:"Bullet list",onAction:t("InsertUnorderedList"),onSetup:Yn(e,"UL")}))}(e),function register(e){var t={text:"List properties...",icon:"ordered-list",onAction:function onAction(){return e.execCommand("mceListProps")},onSetup:Xn(e,"OL")};e.ui.registry.addMenuItem("listprops",t),e.ui.registry.addContextMenu("lists",{update:function update(t){var n=yt(e,t);return Ke(n)?["listprops"]:[]}})}(e),function get(e){return{backspaceDelete:function backspaceDelete(t){Ln(e,t)}}}(e)}))}()}()},2942:function(e,t,n){n(2943)},2943:function(e,t,n){var o=n(95).default,i=n(12).default,a=n(13).default;!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function isType(e){return function(t){return function typeOf(e){var t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&function hasProto(e,t,n){var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name}(e,String,(function(e,t){return t.isPrototypeOf(e)}))?"string":t}(t)===e}},n=function isSimpleType(e){return function(t){return typeof t===e}},u=t("string"),c=t("object"),s=t("array"),l=function eq(e){return function(t){return e===t}}(null),d=n("boolean"),m=function isNonNullable(e){return!function isNullable(e){return null===e||void 0===e}(e)},g=n("function"),p=function isArrayOf(e,t){if(s(e)){for(var n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1},h=function noop(){},v=function tripleEquals(e,t){return e===t},b=function(){function Optional(e,t){i(this,Optional),this.tag=e,this.value=t}return a(Optional,[{key:"fold",value:function fold(e,t){return this.tag?t(this.value):e()}},{key:"isSome",value:function isSome(){return this.tag}},{key:"isNone",value:function isNone(){return!this.tag}},{key:"map",value:function map(e){return this.tag?Optional.some(e(this.value)):Optional.none()}},{key:"bind",value:function bind(e){return this.tag?e(this.value):Optional.none()}},{key:"exists",value:function exists(e){return this.tag&&e(this.value)}},{key:"forall",value:function forall(e){return!this.tag||e(this.value)}},{key:"filter",value:function filter(e){return!this.tag||e(this.value)?this:Optional.none()}},{key:"getOr",value:function getOr(e){return this.tag?this.value:e}},{key:"or",value:function or(e){return this.tag?this:e}},{key:"getOrThunk",value:function getOrThunk(e){return this.tag?this.value:e()}},{key:"orThunk",value:function orThunk(e){return this.tag?this:e()}},{key:"getOrDie",value:function getOrDie(e){if(this.tag)return this.value;throw new Error(null!==e&&void 0!==e?e:"Called getOrDie on None")}},{key:"getOrNull",value:function getOrNull(){return this.tag?this.value:null}},{key:"getOrUndefined",value:function getOrUndefined(){return this.value}},{key:"each",value:function each(e){this.tag&&e(this.value)}},{key:"toArray",value:function toArray(){return this.tag?[this.value]:[]}},{key:"toString",value:function toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}],[{key:"some",value:function some(e){return new Optional(!0,e)}},{key:"none",value:function none(){return Optional.singletonNone}},{key:"from",value:function from(e){return m(e)?Optional.some(e):Optional.none()}}]),Optional}();b.singletonNone=new b(!1);var y=Array.prototype.indexOf,C=Array.prototype.push,w=function contains(e,t){return function rawIndexOf(e,t){return y.call(e,t)}(e,t)>-1},x=function flatten(e){for(var t=[],n=0,o=e.length;n<o;++n){if(!s(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);C.apply(t,e[n])}return t},S=function bind(e,t){return x(function map(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;i++){var a=e[i];o[i]=t(a,i)}return o}(e,t))},k=function findMap(e,t){for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o.isSome())return o}return b.none()},T=function is(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:v;return e.exists((function(e){return n(e,t)}))},E=function cat(e){for(var t=[],n=function push(e){t.push(e)},o=0;o<e.length;o++)e[o].each(n);return t},O=function someIf(e,t){return e?b.some(t):b.none()},A=function option(e){return function(t){return t.options.get(e)}},D=A("link_assume_external_targets"),R=A("link_context_toolbar"),N=A("link_list"),M=A("link_default_target"),B=A("link_default_protocol"),I=A("link_target_list"),P=A("link_rel_list"),L=A("link_class_list"),F=A("link_title"),H=A("allow_unsafe_link_target"),$=A("link_quicklink"),z=tinymce.util.Tools.resolve("tinymce.util.Tools"),V=function getValue(e){return u(e.value)?e.value:""},U=function sanitizeList(e,t){var n=[];return z.each(e,(function(e){var o=function getText(e){return u(e.text)?e.text:u(e.title)?e.title:""}(e);if(void 0!==e.menu){var i=sanitizeList(e.menu,t);n.push({text:o,items:i})}else{var a=t(e);n.push({text:o,value:a})}})),n},Z=function sanitizeWith(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:V;return function(t){return b.from(t).map((function(t){return U(t,e)}))}},W={sanitize:function sanitize(e){return Z(V)(e)},sanitizeWith:Z,createUi:function createUi(e,t){return function(n){return{name:e,type:"listbox",label:t,items:n}}},getValue:V},j=Object.keys,G=Object.hasOwnProperty,q=function internalFilter(e,t,n,o){!function each(e,t){for(var n=j(e),o=0,i=n.length;o<i;o++){var a=n[o];t(e[a],a)}}(e,(function(e,i){(t(e,i)?n:o)(e,i)}))},K=function has(e,t){return G.call(e,t)},Y=tinymce.util.Tools.resolve("tinymce.dom.TreeWalker"),X=tinymce.util.Tools.resolve("tinymce.util.URI"),J=function isAnchor(e){return m(e)&&"a"===e.nodeName.toLowerCase()},Q=function isLink(e){return J(e)&&!!ne(e)},ee=function collectNodesInRange(e,t){if(e.collapsed)return[];var n=e.cloneContents(),o=n.firstChild,i=new Y(o,n),a=[],u=o;do{t(u)&&a.push(u)}while(u=i.next());return a},te=function hasProtocol(e){return/^\w+:/i.test(e)},ne=function getHref(e){var t,n;return null!==(n=null!==(t=e.getAttribute("data-mce-href"))&&void 0!==t?t:e.getAttribute("href"))&&void 0!==n?n:""},re=function applyRelTargetRules(e,t){var n=["noopener"],o=e?e.split(/\s+/):[],i=function removeTargetRules(e){return e.filter((function(e){return-1===z.inArray(n,e)}))},a=t?function addTargetRules(e){return(e=i(e)).length>0?e.concat(n):n}(o):i(o);return a.length>0?function toString(e){return z.trim(e.sort().join(" "))}(a):""},oe=function getAnchorElement(e,t){return t=t||ue(e.selection.getRng())[0]||e.selection.getNode(),fe(t)?b.from(e.dom.select("a[href]",t)[0]):b.from(e.dom.getParent(t,"a[href]"))},ie=function isInAnchor(e,t){return oe(e,t).isSome()},ae=function getAnchorText(e,t){return function trimCaretContainers(e){return e.replace(/\uFEFF/g,"")}(t.fold((function(){return e.getContent({format:"text"})}),(function(e){return e.innerText||e.textContent||""})))},ue=function getLinksInSelection(e){return ee(e,Q)},ce=function getLinks$1(e){return z.grep(e,Q)},se=function hasLinks(e){return ce(e).length>0},le=function isOnlyTextSelected(e){var t=e.schema.getTextInlineElements();if(oe(e).exists((function(e){return e.hasAttribute("data-mce-block")})))return!1;var n=e.selection.getRng();return!!n.collapsed||0===ee(n,(function isElement(e){return 1===e.nodeType&&!J(e)&&!K(t,e.nodeName.toLowerCase())})).length},fe=function isImageFigure(e){return m(e)&&"FIGURE"===e.nodeName&&/\bimage\b/i.test(e.className)},de=function applyLinkOverrides(e,t){var n=o({},t);if(0===P(e).length&&!H(e)){var i=re(n.rel,"_blank"===n.target);n.rel=i||null}return b.from(n.target).isNone()&&!1===I(e)&&(n.target=M(e)),n.href=function handleExternalTargets(e,t){return"http"!==t&&"https"!==t||te(e)?e:t+"://"+e}(n.href,D(e)),n},me=function linkDomMutation(e,t,n){var o=e.selection.getNode(),i=oe(e,o),a=de(e,function getLinkAttrs(e){return function foldl(e,t,n){return function each$1(e,t){for(var n=0,o=e.length;n<o;n++)t(e[n],n)}(e,(function(e,o){n=t(n,e,o)})),n}(["title","rel","class","target"],(function(t,n){return e[n].each((function(e){t[n]=e.length>0?e:null})),t}),{href:e.href})}(n));e.undoManager.transact((function(){n.href===t.href&&t.attach(),i.fold((function(){!function createLink(e,t,n,o){var i=e.dom;fe(t)?be(i,t,o):n.fold((function(){e.execCommand("mceInsertLink",!1,o)}),(function(t){e.insertContent(i.createHTML("a",o,i.encode(t)))}))}(e,o,n.text,a)}),(function(t){e.focus(),function updateLink(e,t,n,o){n.each((function(e){K(t,"innerText")?t.innerText=e:t.textContent=e})),e.dom.setAttribs(t,o),e.selection.select(t)}(e,t,n.text,a)}))}))},ge=function unwrapOptions(e){var t=e.class,n=e.href,o=e.rel,i=e.target,a=e.text,u=e.title;return function filter(e,t){var n={};return q(e,t,function objAcc(e){return function(t,n){e[n]=t}}(n),h),n}({class:t.getOrNull(),href:n,rel:o.getOrNull(),target:i.getOrNull(),text:a.getOrNull(),title:u.getOrNull()},(function(e,t){return!1===l(e)}))},pe=function link(e,t,n){var i=function sanitizeData(e,t){var n=e.options.get,i={allow_html_data_urls:n("allow_html_data_urls"),allow_script_urls:n("allow_script_urls"),allow_svg_data_urls:n("allow_svg_data_urls")},a=t.href;return o(o({},t),{},{href:X.isDomSafe(a,"a",i)?a:""})}(e,n);e.hasPlugin("rtc",!0)?e.execCommand("createlink",!1,ge(i)):me(e,t,i)},he=function unlink(e){e.hasPlugin("rtc",!0)?e.execCommand("unlink"):function unlinkDomMutation(e){e.undoManager.transact((function(){var t=e.selection.getNode();fe(t)?ve(e,t):function unlinkSelection(e){var t=e.dom,n=e.selection,o=n.getBookmark(),i=n.getRng().cloneRange(),a=t.getParent(i.startContainer,"a[href]",e.getBody()),u=t.getParent(i.endContainer,"a[href]",e.getBody());a&&i.setStartBefore(a),u&&i.setEndAfter(u),n.setRng(i),e.execCommand("unlink"),n.moveToBookmark(o)}(e),e.focus()}))}(e)},ve=function unlinkImageFigure(e,t){var n,o=e.dom.select("img",t)[0];if(o){var i=e.dom.getParents(o,"a[href]",t)[0];i&&(null===(n=i.parentNode)||void 0===n||n.insertBefore(o,i),e.dom.remove(i))}},be=function linkImageFigure(e,t,n){var o,i=e.select("img",t)[0];if(i){var a=e.create("a",n);null===(o=i.parentNode)||void 0===o||o.insertBefore(a,i),a.appendChild(i)}},ye=function isListGroup(e){return function hasNonNullableKey(e,t){return K(e,t)&&void 0!==e[t]&&null!==e[t]}(e,"items")},Ce=function findTextByValue(e,t){return k(t,(function(t){return ye(t)?findTextByValue(e,t.items):O(t.value===e,t)}))},we=function getDelta(e,t,n,o){var i=o[t],a=e.length>0;return void 0!==i?Ce(i,n).map((function(t){return{url:{value:t.value,meta:{text:a?e:t.text,attach:h}},text:a?e:t.text}})):b.none()},xe=function init(e,t){var n={text:e.text,title:e.title},i=function onUrlChange(e){var t=function getTextFromUrlChange(e){var t;return O(n.text.length<=0,b.from(null===(t=e.meta)||void 0===t?void 0:t.text).getOr(e.value))}(e.url),i=function getTitleFromUrlChange(e){var t;return O(n.title.length<=0,b.from(null===(t=e.meta)||void 0===t?void 0:t.title).getOr(""))}(e.url);return t.isSome()||i.isSome()?b.some(o(o({},t.map((function(e){return{text:e}})).getOr({})),i.map((function(e){return{title:e}})).getOr({}))):b.none()},a=function onCatalogChange(e,o){var i=function findCatalog(e,t){return"link"===t?e.link:"anchor"===t?e.anchor:b.none()}(t,o).getOr([]);return we(n.text,o,i,e)};return{onChange:function onChange(e,t){var o=t.name;return"url"===o?i(e()):w(["anchor","link"],o)?a(e(),o):"text"===o||"title"===o?(n[o]=e()[o],b.none()):b.none()}}},Se=tinymce.util.Tools.resolve("tinymce.util.Delay"),ke=function tryEmailTransform(e){var t=e.href;return t.indexOf("@")>0&&-1===t.indexOf("/")&&-1===t.indexOf("mailto:")?b.some({message:"The URL you entered seems to be an email address. Do you want to add the required mailto: prefix?",preprocess:function preprocess(e){return o(o({},e),{},{href:"mailto:"+t})}}):b.none()},Te=function tryProtocolTransform(e,t){return function(n){var i=n.href;return 1===e&&!te(i)||0===e&&/^\s*www(\.|\d\.)/i.test(i)?b.some({message:"The URL you entered seems to be an external link. Do you want to add the required ".concat(t,":// prefix?"),preprocess:function preprocess(e){return o(o({},e),{},{href:t+"://"+i})}}):b.none()}},Ee=function preprocess(e,t){return k([ke,Te(D(e),B(e))],(function(e){return e(t)})).fold((function(){return Promise.resolve(t)}),(function(n){return new Promise((function(o){!function delayedConfirm(e,t,n){var o=e.selection.getRng();Se.setEditorTimeout(e,(function(){e.windowManager.confirm(t,(function(t){e.selection.setRng(o),n(t)}))}))}(e,n.message,(function(e){o(e?n.preprocess(t):t)}))}))}))},Oe=function getAnchors(e){var t=e.dom.select("a:not([href])"),n=S(t,(function(e){var t=e.name||e.id;return t?[{text:t,value:"#"+t}]:[]}));return n.length>0?b.some([{text:"None",value:""}].concat(n)):b.none()},Ae=function getClasses(e){var t=L(e);return t.length>0?W.sanitize(t):b.none()},_e=function parseJson(e){try{return b.some(JSON.parse(e))}catch(t){return b.none()}},De=function getLinks(e){var t=function extractor(t){return e.convertURL(t.value||t.url||"","href")},n=N(e);return new Promise((function(e){u(n)?fetch(n).then((function(e){return e.ok?e.text().then(_e):Promise.reject()})).then(e,(function(){return e(b.none())})):g(n)?n((function(t){return e(b.some(t))})):e(b.from(n))})).then((function(e){return e.bind(W.sanitizeWith(t)).map((function(e){if(e.length>0){return[{text:"None",value:""}].concat(e)}return e}))}))},Re=function getRels(e,t){var n=P(e);if(n.length>0){var o=T(t,"_blank");return(!1===H(e)?W.sanitizeWith((function safeRelExtractor(e){return re(W.getValue(e),o)})):W.sanitize)(n)}return b.none()},Ne=[{text:"Current window",value:""},{text:"New window",value:"_blank"}],Me=function getTargets(e){var t=I(e);return s(t)?W.sanitize(t).orThunk((function(){return b.some(Ne)})):!1===t?b.none():b.some(Ne)},Be=function nonEmptyAttr(e,t,n){var o=e.getAttrib(t,n);return null!==o&&o.length>0?b.some(o):b.none()},Ie=function collect(e,t){return De(e).then((function(n){var o=function extractFromAnchor(e,t){var n=e.dom,o=le(e)?b.some(ae(e.selection,t)):b.none(),i=t.bind((function(e){return b.from(n.getAttrib(e,"href"))})),a=t.bind((function(e){return b.from(n.getAttrib(e,"target"))})),u=t.bind((function(e){return Be(n,e,"rel")})),c=t.bind((function(e){return Be(n,e,"class")}));return{url:i,text:o,title:t.bind((function(e){return Be(n,e,"title")})),target:a,rel:u,linkClass:c}}(e,t);return{anchor:o,catalogs:{targets:Me(e),rels:Re(e,o.target),classes:Ae(e),anchor:Oe(e),link:n},optNode:t,flags:{titleEnabled:F(e)}}}))},Pe=function open$1(e){var t=function collectData(e){var t=oe(e);return Ie(e,t)}(e);t.then((function(t){var n=function handleSubmit(e,t){return function(n){var o=n.getData();if(!o.url.value)return he(e),void n.close();var i=function getChangedValue(e){return b.from(o[e]).filter((function(n){return!T(t.anchor[e],n)}))},a={href:o.url.value,text:i("text"),target:i("target"),rel:i("rel"),class:i("linkClass"),title:i("title")},u={href:o.url.value,attach:void 0!==o.url.meta&&o.url.meta.attach?o.url.meta.attach:h};Ee(e,a).then((function(t){pe(e,u,t)})),n.close()}}(e,t);return function makeDialog(e,t,n){var o=e.anchor.text.map((function(){return{name:"text",type:"input",label:"Text to display"}})).toArray(),i=e.flags.titleEnabled?[{name:"title",type:"input",label:"Title"}]:[],a=function getInitialData(e,t){var n=e.anchor,o=n.url.getOr("");return{url:{value:o,meta:{original:{value:o}}},text:n.text.getOr(""),title:n.title.getOr(""),anchor:o,link:o,rel:n.rel.getOr(""),target:n.target.or(t).getOr(""),linkClass:n.linkClass.getOr("")}}(e,b.from(M(n))),u=e.catalogs,c=xe(a,u);return{title:"Insert/Edit Link",size:"normal",body:{type:"panel",items:x([[{name:"url",type:"urlinput",filetype:"file",label:"URL",picker_text:"Browse links"}],o,i,E([u.anchor.map(W.createUi("anchor","Anchors")),u.rels.map(W.createUi("rel","Rel")),u.targets.map(W.createUi("target","Open link in...")),u.link.map(W.createUi("link","Link list")),u.classes.map(W.createUi("linkClass","Class"))])])},buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:a,onChange:function onChange(e,t){var n=t.name;c.onChange(e.getData,{name:n}).each((function(t){e.setData(t)}))},onSubmit:t}}(t,n,e)})).then((function(t){e.windowManager.open(t)}))},Le=tinymce.util.Tools.resolve("tinymce.util.VK"),Fe=function open(e){var t=document.createElement("a");t.target="_blank",t.href=e,t.rel="noreferrer noopener";var n=document.createEvent("MouseEvents");n.initMouseEvent("click",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),function appendClickRemove(e,t){document.body.appendChild(e),e.dispatchEvent(t),document.body.removeChild(e)}(t,n)},He=function getLink(e,t){return e.dom.getParent(t,"a[href]")},$e=function getSelectedLink(e){return He(e,e.selection.getStart())},ze=function gotoLink(e,t){if(t){var n=ne(t);if(/^#/.test(n)){var o=e.dom.select(n);o.length&&e.selection.scrollIntoView(o[0],!0)}else Fe(t.href)}},Ve=function openDialog(e){return function(){e.execCommand("mceLink",!1,{dialog:!0})}},Ue=function gotoSelectedLink(e){return function(){ze(e,$e(e))}},Ze=function toggleState(e,t){return e.on("NodeChange",t),function(){return e.off("NodeChange",t)}},We=function toggleLinkState(e){return function(t){var n=function updateState(){t.setActive(!e.mode.isReadOnly()&&ie(e,e.selection.getNode())),t.setEnabled(e.selection.isEditable())};return n(),Ze(e,n)}},je=function toggleLinkMenuState(e){return function(t){var n=function updateState(){t.setEnabled(e.selection.isEditable())};return n(),Ze(e,n)}},Ge=function toggleGotoLinkState(e){return function(t){var n=function updateState(){return t.setEnabled(function hasExactlyOneLinkInSelection(e){return 1===(e.selection.isCollapsed()?ce(e.dom.getParents(e.selection.getStart())):ue(e.selection.getRng())).length}(e))};return n(),Ze(e,n)}},qe=function toggleUnlinkState(e){return function(t){var n=function hasLinks$1(t){return se(t)||function hasLinksInSelection(e){return ue(e).length>0}(e.selection.getRng())},o=e.dom.getParents(e.selection.getStart()),i=function updateEnabled(o){t.setEnabled(n(o)&&e.selection.isEditable())};return i(o),Ze(e,(function(e){return i(e.parents)}))}},Ke=function setupContextToolbars(e){var t=function onSetupLink(t){var n=e.selection.getNode();return t.setEnabled(ie(e,n)),h};e.ui.registry.addContextForm("quicklink",{launch:{type:"contextformtogglebutton",icon:"link",tooltip:"Link",onSetup:We(e)},label:"Link",predicate:function predicate(t){return R(e)&&ie(e,t)},initValue:function initValue(){return oe(e).fold(function constant(e){return function(){return e}}(""),ne)},commands:[{type:"contextformtogglebutton",icon:"link",tooltip:"Link",primary:!0,onSetup:function onSetup(t){var n=e.selection.getNode();return t.setActive(ie(e,n)),We(e)(t)},onAction:function onAction(t){var n=t.getValue(),o=function getLinkText(t){var n=oe(e),o=le(e);if(n.isNone()&&o){var i=ae(e.selection,n);return O(0===i.length,t)}return b.none()}(n);pe(e,{href:n,attach:h},{href:n,text:o,title:b.none(),rel:b.none(),target:b.none(),class:b.none()}),function collapseSelectionToEnd(e){e.selection.collapse(!1)}(e),t.hide()}},{type:"contextformbutton",icon:"unlink",tooltip:"Remove link",onSetup:t,onAction:function onAction(t){he(e),t.hide()}},{type:"contextformbutton",icon:"new-tab",tooltip:"Open link",onSetup:t,onAction:function onAction(t){Ue(e)(),t.hide()}}]})};!function Plugin(){e.add("link",(function(e){!function register$1(e){var t=e.options.register;t("link_assume_external_targets",{processor:function processor(e){var t=u(e)||d(e);return t?!0===e?{value:1,valid:t}:"http"===e||"https"===e?{value:e,valid:t}:{value:0,valid:t}:{valid:!1,message:"Must be a string or a boolean."}},default:!1}),t("link_context_toolbar",{processor:"boolean",default:!1}),t("link_list",{processor:function processor(e){return u(e)||g(e)||p(e,c)}}),t("link_default_target",{processor:"string"}),t("link_default_protocol",{processor:"string",default:"https"}),t("link_target_list",{processor:function processor(e){return d(e)||p(e,c)},default:!0}),t("link_rel_list",{processor:"object[]",default:[]}),t("link_class_list",{processor:"object[]",default:[]}),t("link_title",{processor:"boolean",default:!0}),t("allow_unsafe_link_target",{processor:"boolean",default:!1}),t("link_quicklink",{processor:"boolean",default:!1})}(e),function setupButtons(e){e.ui.registry.addToggleButton("link",{icon:"link",tooltip:"Insert/edit link",onAction:Ve(e),onSetup:We(e)}),e.ui.registry.addButton("openlink",{icon:"new-tab",tooltip:"Open link",onAction:Ue(e),onSetup:Ge(e)}),e.ui.registry.addButton("unlink",{icon:"unlink",tooltip:"Remove link",onAction:function onAction(){return he(e)},onSetup:qe(e)})}(e),function setupMenuItems(e){e.ui.registry.addMenuItem("openlink",{text:"Open link",icon:"new-tab",onAction:Ue(e),onSetup:Ge(e)}),e.ui.registry.addMenuItem("link",{icon:"link",text:"Link...",shortcut:"Meta+K",onSetup:je(e),onAction:Ve(e)}),e.ui.registry.addMenuItem("unlink",{icon:"unlink",text:"Remove link",onAction:function onAction(){return he(e)},onSetup:qe(e)})}(e),function setupContextMenu(e){e.ui.registry.addContextMenu("link",{update:function update(t){return e.dom.isEditable(t)?se(e.dom.getParents(t,"a"))?"link unlink openlink":"link":""}})}(e),Ke(e),function setupGotoLinks(e){e.on("click",(function(t){var n=He(e,t.target);n&&Le.metaKeyPressed(t)&&(t.preventDefault(),ze(e,n))})),e.on("keydown",(function(t){if(!t.isDefaultPrevented()&&13===t.keyCode&&function hasOnlyAltModifier(e){return!0===e.altKey&&!1===e.shiftKey&&!1===e.ctrlKey&&!1===e.metaKey}(t)){var n=$e(e);n&&(t.preventDefault(),ze(e,n))}}))}(e),function register(e){e.addCommand("mceLink",(function(t,n){!0!==(null===n||void 0===n?void 0:n.dialog)&&$(e)?e.dispatch("contexttoolbar-show",{toolbarKey:"quicklink"}):Pe(e)}))}(e),function setup(e){e.addShortcut("Meta+K","",(function(){e.execCommand("mceLink")}))}(e)}))}()}()},2944:function(e,t,n){n(2945)},2945:function(e,t,n){var o=n(95).default,i=n(12).default,a=n(13).default;!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=Object.getPrototypeOf,n=function hasProto(e,t,n){var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name},u=function isType(e){return function(t){return function typeOf(e){var t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&n(e,String,(function(e,t){return t.isPrototypeOf(e)}))?"string":t}(t)===e}},c=function isSimpleType(e){return function(t){return typeof t===e}},s=u("string"),l=u("object"),d=function isPlainObject(e){return function is(e,o){return l(e)&&n(e,o,(function(e,n){return t(e)===n}))}(e,Object)},m=u("array"),g=function eq(e){return function(t){return e===t}}(null),p=c("boolean"),h=function isNonNullable(e){return!function isNullable(e){return null===e||void 0===e}(e)},v=c("function"),b=c("number"),y=function noop(){},C=function(){function Optional(e,t){i(this,Optional),this.tag=e,this.value=t}return a(Optional,[{key:"fold",value:function fold(e,t){return this.tag?t(this.value):e()}},{key:"isSome",value:function isSome(){return this.tag}},{key:"isNone",value:function isNone(){return!this.tag}},{key:"map",value:function map(e){return this.tag?Optional.some(e(this.value)):Optional.none()}},{key:"bind",value:function bind(e){return this.tag?e(this.value):Optional.none()}},{key:"exists",value:function exists(e){return this.tag&&e(this.value)}},{key:"forall",value:function forall(e){return!this.tag||e(this.value)}},{key:"filter",value:function filter(e){return!this.tag||e(this.value)?this:Optional.none()}},{key:"getOr",value:function getOr(e){return this.tag?this.value:e}},{key:"or",value:function or(e){return this.tag?this:e}},{key:"getOrThunk",value:function getOrThunk(e){return this.tag?this.value:e()}},{key:"orThunk",value:function orThunk(e){return this.tag?this:e()}},{key:"getOrDie",value:function getOrDie(e){if(this.tag)return this.value;throw new Error(null!==e&&void 0!==e?e:"Called getOrDie on None")}},{key:"getOrNull",value:function getOrNull(){return this.tag?this.value:null}},{key:"getOrUndefined",value:function getOrUndefined(){return this.value}},{key:"each",value:function each(e){this.tag&&e(this.value)}},{key:"toArray",value:function toArray(){return this.tag?[this.value]:[]}},{key:"toString",value:function toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}],[{key:"some",value:function some(e){return new Optional(!0,e)}},{key:"none",value:function none(){return Optional.singletonNone}},{key:"from",value:function from(e){return h(e)?Optional.some(e):Optional.none()}}]),Optional}();C.singletonNone=new C(!1);var w=Object.keys,x=Object.hasOwnProperty,S=function internalFilter(e,t,n,o){!function each(e,t){for(var n=w(e),o=0,i=n.length;o<i;o++){var a=n[o];t(e[a],a)}}(e,(function(e,i){(t(e,i)?n:o)(e,i)}))},k=function has(e,t){return x.call(e,t)},T=Array.prototype.push,E=function flatten(e){for(var t=[],n=0,o=e.length;n<o;++n){if(!m(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);T.apply(t,e[n])}return t},O=function head(e){return function get(e,t){return t>=0&&t<e.length?C.some(e[t]):C.none()}(e,0)};"undefined"!==typeof window?window:Function("return this;")();var A=function set(e,t,n){!function rawSet(e,t,n){if(!(s(n)||p(n)||b(n)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",n,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,n+"")}(e.dom,t,n)},D=function fromDom(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:e}},R={fromHtml:function fromHtml(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){var o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return D(n.childNodes[0])},fromTag:function fromTag(e,t){var n=(t||document).createElement(e);return D(n)},fromText:function fromText(e,t){var n=(t||document).createTextNode(e);return D(n)},fromDom:D,fromPoint:function fromPoint(e,t,n){return C.from(e.dom.elementFromPoint(t,n)).map(D)}},N=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),M=tinymce.util.Tools.resolve("tinymce.util.URI"),B=function isNotEmpty(e){return e.length>0},I=function option(e){return function(t){return t.options.get(e)}},P=function register$2(e){var t=e.options.register;t("image_dimensions",{processor:"boolean",default:!0}),t("image_advtab",{processor:"boolean",default:!1}),t("image_uploadtab",{processor:"boolean",default:!0}),t("image_prepend_url",{processor:"string",default:""}),t("image_class_list",{processor:"object[]"}),t("image_description",{processor:"boolean",default:!0}),t("image_title",{processor:"boolean",default:!1}),t("image_caption",{processor:"boolean",default:!1}),t("image_list",{processor:function processor(e){var t=!1===e||s(e)||function isArrayOf(e,t){if(m(e)){for(var n=0,o=e.length;n<o;++n)if(!t(e[n]))return!1;return!0}return!1}(e,l)||v(e);return t?{value:e,valid:t}:{valid:!1,message:"Must be false, a string, an array or a function."}},default:!1})},L=I("image_dimensions"),F=I("image_advtab"),H=I("image_uploadtab"),$=I("image_prepend_url"),z=I("image_class_list"),V=I("image_description"),U=I("image_title"),Z=I("image_caption"),W=I("image_list"),j=I("a11y_advanced_options"),G=I("automatic_uploads"),q=function parseIntAndGetMax(e,t){return Math.max(parseInt(e,10),parseInt(t,10))},K=function removePixelSuffix(e){return e&&(e=e.replace(/px$/,"")),e},Y=function addPixelSuffix(e){return e.length>0&&/^[0-9]+$/.test(e)&&(e+="px"),e},X=function isPlaceholderImage(e){return"IMG"===e.nodeName&&(e.hasAttribute("data-mce-object")||e.hasAttribute("data-mce-placeholder"))},J=function isSafeImageUrl(e,t){var n=e.options.get;return M.isDomSafe(t,"img",{allow_html_data_urls:n("allow_html_data_urls"),allow_script_urls:n("allow_script_urls"),allow_svg_data_urls:n("allow_svg_data_urls")})},Q=N.DOM,ee=function getHspace(e){return e.style.marginLeft&&e.style.marginRight&&e.style.marginLeft===e.style.marginRight?K(e.style.marginLeft):""},te=function getVspace(e){return e.style.marginTop&&e.style.marginBottom&&e.style.marginTop===e.style.marginBottom?K(e.style.marginTop):""},ne=function getBorder(e){return e.style.borderWidth?K(e.style.borderWidth):""},re=function getAttrib(e,t){var n;return e.hasAttribute(t)&&null!==(n=e.getAttribute(t))&&void 0!==n?n:""},oe=function hasCaption(e){return null!==e.parentNode&&"FIGURE"===e.parentNode.nodeName},ie=function updateAttrib(e,t,n){""===n||null===n?e.removeAttribute(t):e.setAttribute(t,n)},ae=function toggleCaption(e){oe(e)?function removeFigure(e){var t=e.parentNode;h(t)&&(Q.insertAfter(e,t),Q.remove(t))}(e):function wrapInFigure(e){var t=Q.create("figure",{class:"image"});Q.insertAfter(t,e),t.appendChild(e),t.appendChild(Q.create("figcaption",{contentEditable:"true"},"Caption")),t.contentEditable="false"}(e)},ue=function normalizeStyle(e,t){var n=e.getAttribute("style"),o=t(null!==n?n:"");o.length>0?(e.setAttribute("style",o),e.setAttribute("data-mce-style",o)):e.removeAttribute("style")},ce=function setSize(e,t){return function(e,n,o){var i=e.style;i[n]?(i[n]=Y(o),ue(e,t)):ie(e,n,o)}},se=function getSize(e,t){return e.style[t]?K(e.style[t]):re(e,t)},le=function setHspace(e,t){var n=Y(t);e.style.marginLeft=n,e.style.marginRight=n},fe=function setVspace(e,t){var n=Y(t);e.style.marginTop=n,e.style.marginBottom=n},de=function setBorder(e,t){var n=Y(t);e.style.borderWidth=n},me=function setBorderStyle(e,t){e.style.borderStyle=t},ge=function getBorderStyle(e){var t;return null!==(t=e.style.borderStyle)&&void 0!==t?t:""},pe=function isFigure(e){return h(e)&&"FIGURE"===e.nodeName},he=function getIsDecorative(e){return 0===Q.getAttrib(e,"alt").length&&"presentation"===Q.getAttrib(e,"role")},ve=function getAlt(e){return he(e)?"":re(e,"alt")},be=function getStyleValue(e,t){var n,o=document.createElement("img");return ie(o,"style",t.style),(ee(o)||""!==t.hspace)&&le(o,t.hspace),(te(o)||""!==t.vspace)&&fe(o,t.vspace),(ne(o)||""!==t.border)&&de(o,t.border),(ge(o)||""!==t.borderStyle)&&me(o,t.borderStyle),e(null!==(n=o.getAttribute("style"))&&void 0!==n?n:"")},ye=function read(e,t){return{src:re(t,"src"),alt:ve(t),title:re(t,"title"),width:se(t,"width"),height:se(t,"height"),class:re(t,"class"),style:e(re(t,"style")),caption:oe(t),hspace:ee(t),vspace:te(t),border:ne(t),borderStyle:ge(t),isDecorative:he(t)}},Ce=function updateProp(e,t,n,o,i){n[o]!==t[o]&&i(e,o,String(n[o]))},we=function setAlt(e,t,n){if(n){Q.setAttrib(e,"role","presentation");var o=R.fromDom(e);A(o,"alt","")}else{if(g(t)){!function remove(e,t){e.dom.removeAttribute(t)}(R.fromDom(e),"alt")}else{var i=R.fromDom(e);A(i,"alt",t)}"presentation"===Q.getAttrib(e,"role")&&Q.setAttrib(e,"role","")}},xe=function normalized(e,t){return function(n,o,i){e(n,i),ue(n,t)}},Se=function write(e,t,n){var o=ye(e,n);Ce(n,o,t,"caption",(function(e,t,n){return ae(e)})),Ce(n,o,t,"src",ie),Ce(n,o,t,"title",ie),Ce(n,o,t,"width",ce(0,e)),Ce(n,o,t,"height",ce(0,e)),Ce(n,o,t,"class",ie),Ce(n,o,t,"style",xe((function(e,t){return ie(e,"style",t)}),e)),Ce(n,o,t,"hspace",xe(le,e)),Ce(n,o,t,"vspace",xe(fe,e)),Ce(n,o,t,"border",xe(de,e)),Ce(n,o,t,"borderStyle",xe(me,e)),function updateAlt(e,t,n){n.alt===t.alt&&n.isDecorative===t.isDecorative||we(e,n.alt,n.isDecorative)}(n,o,t)},ke=function normalizeCss$1(e,t){var n=function mergeMargins(e){if(e.margin){var t=String(e.margin).split(" ");switch(t.length){case 1:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[0],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[0];break;case 2:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[0],e["margin-left"]=e["margin-left"]||t[1];break;case 3:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[1];break;case 4:e["margin-top"]=e["margin-top"]||t[0],e["margin-right"]=e["margin-right"]||t[1],e["margin-bottom"]=e["margin-bottom"]||t[2],e["margin-left"]=e["margin-left"]||t[3]}delete e.margin}return e}(e.dom.styles.parse(t)),o=e.dom.styles.parse(e.dom.styles.serialize(n));return e.dom.styles.serialize(o)},Te=function getSelectedImage(e){var t=e.selection.getNode(),n=e.dom.getParent(t,"figure.image");return n?e.dom.select("img",n)[0]:t&&("IMG"!==t.nodeName||X(t))?null:t},Ee=function splitTextBlock(e,t){var n,o=e.dom,i=function filter(e,t){var n={};return S(e,t,function objAcc(e){return function(t,n){e[n]=t}}(n),y),n}(e.schema.getTextBlockElements(),(function(t,n){return!e.schema.isValidChild(n,"figure")})),a=o.getParent(t.parentNode,(function(e){return function hasNonNullableKey(e,t){return k(e,t)&&void 0!==e[t]&&null!==e[t]}(i,e.nodeName)}),e.getBody());return a&&null!==(n=o.split(a,t))&&void 0!==n?n:t},Oe=function insertImageAtCaret(e,t){var n=function create(e,t){var n=document.createElement("img");if(Se(e,o(o({},t),{},{caption:!1}),n),we(n,t.alt,t.isDecorative),t.caption){var i=Q.create("figure",{class:"image"});return i.appendChild(n),i.appendChild(Q.create("figcaption",{contentEditable:"true"},"Caption")),i.contentEditable="false",i}return n}((function(t){return ke(e,t)}),t);e.dom.setAttrib(n,"data-mce-id","__mcenew"),e.focus(),e.selection.setContent(n.outerHTML);var i=e.dom.select('*[data-mce-id="__mcenew"]')[0];if(e.dom.setAttrib(i,"data-mce-id",null),pe(i)){var a=Ee(e,i);e.selection.select(a)}else e.selection.select(i)},Ae=function writeImageDataToSelection(e,t){var n=Te(e);if(n)if(Se((function(t){return ke(e,t)}),t,n),function syncSrcAttr(e,t){e.dom.setAttrib(t,"src",t.getAttribute("src"))}(e,n),pe(n.parentNode)){var o=n.parentNode;Ee(e,o),e.selection.select(n.parentNode)}else e.selection.select(n),function waitLoadImage(e,t,n){var o=function selectImage(){n.onload=n.onerror=null,e.selection&&(e.selection.select(n),e.nodeChanged())};n.onload=function(){t.width||t.height||!L(e)||e.dom.setAttribs(n,{width:String(n.clientWidth),height:String(n.clientHeight)}),o()},n.onerror=o}(e,t,n)},_e=function insertOrUpdateImage(e,t){var n=Te(e);if(n){var i=ye((function(t){return ke(e,t)}),n),a=o(o({},i),t),u=function sanitizeImageData(e,t){var n=t.src;return o(o({},t),{},{src:J(e,n)?n:""})}(e,a);a.src?Ae(e,u):function deleteImage(e,t){if(t){var n=e.dom.is(t.parentNode,"figure.image")?t.parentNode:t;e.dom.remove(n),e.focus(),e.nodeChanged(),e.dom.isEmpty(e.getBody())&&(e.setContent(""),e.selection.setCursorLocation())}}(e,n)}else t.src&&Oe(e,o(o({},{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}),t))},De=function baseMerge(e){return function(){if(0===arguments.length)throw new Error("Can't merge zero objects");for(var t={},n=0;n<arguments.length;n++){var o=n<0||arguments.length<=n?void 0:arguments[n];for(var i in o)k(o,i)&&(t[i]=e(t[i],o[i]))}return t}}((function deep(e,t){return d(e)&&d(t)?De(e,t):t})),Re=tinymce.util.Tools.resolve("tinymce.util.ImageUploader"),Ne=tinymce.util.Tools.resolve("tinymce.util.Tools"),Me=function getValue(e){return s(e.value)?e.value:""},Be=function sanitizeList(e,t){var n=[];return Ne.each(e,(function(e){var o=function getText(e){return s(e.text)?e.text:s(e.title)?e.title:""}(e);if(void 0!==e.menu){var i=sanitizeList(e.menu,t);n.push({text:o,items:i})}else{var a=t(e);n.push({text:o,value:a})}})),n},Ie=function sanitizer(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Me;return function(t){return t?C.from(t).map((function(t){return Be(t,e)})):C.none()}},Pe=function findEntryDelegate(e,t){return function findMap(e,t){for(var n=0;n<e.length;n++){var o=t(e[n],n);if(o.isSome())return o}return C.none()}(e,(function(e){return function isGroup(e){return k(e,"items")}(e)?findEntryDelegate(e.items,t):e.value===t?C.some(e):C.none()}))},Le=Ie,Fe=function sanitize(e){return Ie(Me)(e)},He=function findEntry(e,t){return e.bind((function(e){return Pe(e,t)}))},$e=function makeTab$2(e){return{title:"Advanced",name:"advanced",items:[{type:"grid",columns:2,items:[{type:"input",label:"Vertical space",name:"vspace",inputMode:"numeric"},{type:"input",label:"Horizontal space",name:"hspace",inputMode:"numeric"},{type:"input",label:"Border width",name:"border",inputMode:"numeric"},{type:"listbox",name:"borderstyle",label:"Border style",items:[{text:"Select...",value:""},{text:"Solid",value:"solid"},{text:"Dotted",value:"dotted"},{text:"Dashed",value:"dashed"},{text:"Double",value:"double"},{text:"Groove",value:"groove"},{text:"Ridge",value:"ridge"},{text:"Inset",value:"inset"},{text:"Outset",value:"outset"},{text:"None",value:"none"},{text:"Hidden",value:"hidden"}]}]}]}},ze=function collect(e){var t=Le((function(t){return e.convertURL(t.value||t.url||"","src")})),n=new Promise((function(n){!function createImageList(e,t){var n=W(e);s(n)?fetch(n).then((function(e){e.ok&&e.json().then(t)})):v(n)?n(t):t(n)}(e,(function(e){n(t(e).map((function(e){return E([[{text:"None",value:""}],e])})))}))})),o=Fe(z(e)),i=F(e),a=H(e),u=function hasUploadUrl(e){return B(e.options.get("images_upload_url"))}(e),c=function hasUploadHandler(e){return h(e.options.get("images_upload_handler"))}(e),l=function readImageDataFromSelection(e){var t=Te(e);return t?ye((function(t){return ke(e,t)}),t):{src:"",alt:"",title:"",width:"",height:"",class:"",style:"",caption:!1,hspace:"",vspace:"",border:"",borderStyle:"",isDecorative:!1}}(e),d=V(e),m=U(e),g=L(e),p=Z(e),b=j(e),y=G(e),w=C.some($(e)).filter((function(e){return s(e)&&e.length>0}));return n.then((function(e){return{image:l,imageList:e,classList:o,hasAdvTab:i,hasUploadTab:a,hasUploadUrl:u,hasUploadHandler:c,hasDescription:d,hasImageTitle:m,hasDimensions:g,hasImageCaption:p,prependURL:w,hasAccessibilityOptions:b,automaticUploads:y}}))},Ve=function makeItems(e){var t=e.imageList.map((function(e){return{name:"images",type:"listbox",label:"Image list",items:e}})),n={name:"alt",type:"input",label:"Alternative description",enabled:!(e.hasAccessibilityOptions&&e.image.isDecorative)},i=e.classList.map((function(e){return{name:"classes",type:"listbox",label:"Class",items:e}}));return E([[{name:"src",type:"urlinput",filetype:"image",label:"Source",picker_text:"Browse files"}],t.toArray(),e.hasAccessibilityOptions&&e.hasDescription?[{type:"label",label:"Accessibility",items:[{name:"isDecorative",type:"checkbox",label:"Image is decorative"}]}]:[],e.hasDescription?[n]:[],e.hasImageTitle?[{name:"title",type:"input",label:"Image title"}]:[],e.hasDimensions?[{name:"dimensions",type:"sizeinput"}]:[],[o(o({},function getDialogContainerType(e){return e?{type:"grid",columns:2}:{type:"panel"}}(e.classList.isSome()&&e.hasImageCaption)),{},{items:E([i.toArray(),e.hasImageCaption?[{type:"label",label:"Caption",items:[{type:"checkbox",name:"caption",label:"Show caption"}]}]:[]])})]])},Ue=function makeTab$1(e){return{title:"General",name:"general",items:Ve(e)}},Ze=Ve,We=function makeTab(e){return{title:"Upload",name:"upload",items:[{type:"dropzone",name:"fileinput"}]}},je=function fromImageData(e){return{src:{value:e.src,meta:{}},images:e.src,alt:e.alt,title:e.title,dimensions:{width:e.width,height:e.height},classes:e.class,caption:e.caption,style:e.style,vspace:e.vspace,border:e.border,hspace:e.hspace,borderstyle:e.borderStyle,fileinput:[],isDecorative:e.isDecorative}},Ge=function toImageData(e,t){return{src:e.src.value,alt:null!==e.alt&&0!==e.alt.length||!t?e.alt:null,title:e.title,width:e.dimensions.width,height:e.dimensions.height,class:e.classes,style:e.style,caption:e.caption,hspace:e.hspace,vspace:e.vspace,border:e.border,borderStyle:e.borderstyle,isDecorative:e.isDecorative}},qe=function addPrependUrl(e,t){var n=t.getData();(function addPrependUrl2(e,t){return/^(?:[a-zA-Z]+:)?\/\//.test(t)?C.none():e.prependURL.bind((function(e){return t.substring(0,e.length)!==e?C.some(e+t):C.none()}))})(e,n.src.value).each((function(e){t.setData({src:{value:e,meta:n.src.meta}})}))},Ke=function formFillFromMeta(e,t){var n=t.getData(),o=n.src.meta;if(void 0!==o){var i=De({},n);!function formFillFromMeta2(e,t,n){e.hasDescription&&s(n.alt)&&(t.alt=n.alt),e.hasAccessibilityOptions&&(t.isDecorative=n.isDecorative||t.isDecorative||!1),e.hasImageTitle&&s(n.title)&&(t.title=n.title),e.hasDimensions&&(s(n.width)&&(t.dimensions.width=n.width),s(n.height)&&(t.dimensions.height=n.height)),s(n.class)&&He(e.classList,n.class).each((function(e){t.classes=e.value})),e.hasImageCaption&&p(n.caption)&&(t.caption=n.caption),e.hasAdvTab&&(s(n.style)&&(t.style=n.style),s(n.vspace)&&(t.vspace=n.vspace),s(n.border)&&(t.border=n.border),s(n.hspace)&&(t.hspace=n.hspace),s(n.borderstyle)&&(t.borderstyle=n.borderstyle))}(e,i,o),t.setData(i)}},Ye=function changeSrc(e,t,n,o){qe(t,o),Ke(t,o),function calculateImageSize(e,t,n,o){var i=o.getData(),a=i.src.value,u=i.src.meta||{};u.width||u.height||!t.hasDimensions||(B(a)?e.imageSize(a).then((function(e){n.open&&o.setData({dimensions:e})})).catch((function(e){return console.error(e)})):o.setData({dimensions:{width:"",height:""}}))}(e,t,n,o),function updateImagesDropdown(e,t,n){var o=n.getData(),i=He(e.imageList,o.src.value);t.prevImage=i,n.setData({images:i.map((function(e){return e.value})).getOr("")})}(t,n,o)},Xe=function changeFileInput(e,t,n,o){var i=o.getData();o.block("Uploading image"),O(i.fileinput).fold((function(){o.unblock()}),(function(i){var a=URL.createObjectURL(i),u=function finalize(){o.unblock(),URL.revokeObjectURL(a)},c=function updateSrcAndSwitchTab(i){o.setData({src:{value:i,meta:{}}}),o.showTab("general"),Ye(e,t,n,o)};(function blobToDataUri(e){return new Promise((function(t,n){var o=new FileReader;o.onload=function(){t(o.result)},o.onerror=function(){var e;n(null===(e=o.error)||void 0===e?void 0:e.message)},o.readAsDataURL(e)}))})(i).then((function(n){var s=e.createBlobCache(i,a,n);t.automaticUploads?e.uploadImage(s).then((function(e){c(e.url),u()})).catch((function(t){u(),e.alertErr(t)})):(e.addToBlobCache(s),c(s.blobUri()),o.unblock())}))}))},Je=function changeHandler(e,t,n){return function(o,i){"src"===i.name?Ye(e,t,n,o):"images"===i.name?function changeImages(e,t,n,o){var i=o.getData(),a=He(t.imageList,i.images);a.each((function(e){var t=""===i.alt||n.prevImage.map((function(e){return e.text===i.alt})).getOr(!1);t?""===e.value?o.setData({src:e,alt:n.prevAlt}):o.setData({src:e,alt:e.text}):o.setData({src:e})})),n.prevImage=a,Ye(e,t,n,o)}(e,t,n,o):"alt"===i.name?n.prevAlt=o.getData().alt:"fileinput"===i.name?Xe(e,t,n,o):"isDecorative"===i.name&&o.setEnabled("alt",!o.getData().isDecorative)}},Qe=function closeHandler(e){return function(){e.open=!1}},et=function makeDialogBody(e){return e.hasAdvTab||e.hasUploadUrl||e.hasUploadHandler?{type:"tabpanel",tabs:E([[Ue(e)],e.hasAdvTab?[$e(e)]:[],e.hasUploadTab&&(e.hasUploadUrl||e.hasUploadHandler)?[We(e)]:[]])}:{type:"panel",items:Ze(e)}},tt=function submitHandler(e,t,n){return function(i){var a=De(je(t.image),i.getData()),u=o(o({},a),{},{style:be(n.normalizeCss,Ge(a,!1))});e.execCommand("mceUpdateImage",!1,Ge(u,t.hasAccessibilityOptions)),e.editorUpload.uploadImagesAuto(),i.close()}},nt=function imageSize(e){return function(t){return J(e,t)?function getImageSize(e){return new Promise((function(t){var n=document.createElement("img"),o=function done(e){n.onload=n.onerror=null,n.parentNode&&n.parentNode.removeChild(n),t(e)};n.onload=function(){var e={width:q(n.width,n.clientWidth),height:q(n.height,n.clientHeight)};o(Promise.resolve(e))},n.onerror=function(){o(Promise.reject("Failed to get image dimensions for: ".concat(e)))};var i=n.style;i.visibility="hidden",i.position="fixed",i.bottom=i.left="0px",i.width=i.height="auto",document.body.appendChild(n),n.src=e}))}(e.documentBaseURI.toAbsolute(t)).then((function(e){return{width:String(e.width),height:String(e.height)}})):Promise.resolve({width:"",height:""})}},rt=function createBlobCache(e){return function(t,n,o){var i;return e.editorUpload.blobCache.create({blob:t,blobUri:n,name:null===(i=t.name)||void 0===i?void 0:i.replace(/\.[^\.]+$/,""),filename:t.name,base64:o.split(",")[1]})}},ot=function addToBlobCache(e){return function(t){e.editorUpload.blobCache.add(t)}},it=function alertErr(e){return function(t){e.windowManager.alert(t)}},at=function normalizeCss(e){return function(t){return ke(e,t)}},ut=function parseStyle(e){return function(t){return e.dom.parseStyle(t)}},ct=function serializeStyle(e){return function(t,n){return e.dom.serializeStyle(t,n)}},st=function uploadImage(e){return function(t){return Re(e).upload([t],!1).then((function(e){var t;return 0===e.length?Promise.reject("Failed to upload image"):!1===e[0].status?Promise.reject(null===(t=e[0].error)||void 0===t?void 0:t.message):e[0]}))}},lt=function Dialog(e){var t={imageSize:nt(e),addToBlobCache:ot(e),createBlobCache:rt(e),alertErr:it(e),normalizeCss:at(e),parseStyle:ut(e),serializeStyle:ct(e),uploadImage:st(e)};return{open:function open(){ze(e).then((function(n){var o=function createState(e){return{prevImage:He(e.imageList,e.image.src),prevAlt:e.image.alt,open:!0}}(n);return{title:"Insert/Edit Image",size:"normal",body:et(n),buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],initialData:je(n.image),onSubmit:tt(e,n,t),onChange:Je(t,n,o),onClose:Qe(o)}})).then(e.windowManager.open)}}},ft=function hasImageClass(e){var t=e.attr("class");return h(t)&&/\bimage\b/.test(t)},dt=function toggleContentEditableState(e){return function(t){for(var n=t.length,o=function toggleContentEditable(t){t.attr("contenteditable",e?"true":null)};n--;){var i=t[n];ft(i)&&(i.attr("contenteditable",e?"false":null),Ne.each(i.getAll("figcaption"),o))}}},mt=function onSetupEditable(e){return function(t){var n=function nodeChanged(){t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),function(){e.off("NodeChange",n)}}};!function Plugin(){e.add("image",(function(e){P(e),function setup(e){e.on("PreInit",(function(){e.parser.addNodeFilter("figure",dt(!0)),e.serializer.addNodeFilter("figure",dt(!1))}))}(e),function register(e){e.ui.registry.addToggleButton("image",{icon:"image",tooltip:"Insert/edit image",onAction:lt(e).open,onSetup:function onSetup(t){t.setActive(h(Te(e)));var n=e.selection.selectorChangedWithUnbind("img:not([data-mce-object]):not([data-mce-placeholder]),figure.image",t.setActive).unbind,o=mt(e)(t);return function(){n(),o()}}}),e.ui.registry.addMenuItem("image",{icon:"image",text:"Image...",onAction:lt(e).open,onSetup:mt(e)}),e.ui.registry.addContextMenu("image",{update:function update(t){return e.selection.isEditable()&&(pe(t)||function isImage(e){return"IMG"===e.nodeName}(t)&&!X(t))?["image"]:[]}})}(e),function register$1(e){e.addCommand("mceImage",lt(e).open),e.addCommand("mceUpdateImage",(function(t,n){e.undoManager.transact((function(){return _e(e,n)}))}))}(e)}))}()}()},2946:function(e,t,n){n(2947)},2947:function(e,t,n){var o=n(5).default,i=n(95).default,a=n(12).default,u=n(13).default;!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function isType(e){return function(t){return function typeOf(e){var t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&function hasProto(e,t,n){var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name}(e,String,(function(e,t){return t.isPrototypeOf(e)}))?"string":t}(t)===e}},n=t("string"),c=t("object"),s=t("array"),l=function isNonNullable(e){return!function isNullable(e){return null===e||void 0===e}(e)},d=function(){function Optional(e,t){a(this,Optional),this.tag=e,this.value=t}return u(Optional,[{key:"fold",value:function fold(e,t){return this.tag?t(this.value):e()}},{key:"isSome",value:function isSome(){return this.tag}},{key:"isNone",value:function isNone(){return!this.tag}},{key:"map",value:function map(e){return this.tag?Optional.some(e(this.value)):Optional.none()}},{key:"bind",value:function bind(e){return this.tag?e(this.value):Optional.none()}},{key:"exists",value:function exists(e){return this.tag&&e(this.value)}},{key:"forall",value:function forall(e){return!this.tag||e(this.value)}},{key:"filter",value:function filter(e){return!this.tag||e(this.value)?this:Optional.none()}},{key:"getOr",value:function getOr(e){return this.tag?this.value:e}},{key:"or",value:function or(e){return this.tag?this:e}},{key:"getOrThunk",value:function getOrThunk(e){return this.tag?this.value:e()}},{key:"orThunk",value:function orThunk(e){return this.tag?this:e()}},{key:"getOrDie",value:function getOrDie(e){if(this.tag)return this.value;throw new Error(null!==e&&void 0!==e?e:"Called getOrDie on None")}},{key:"getOrNull",value:function getOrNull(){return this.tag?this.value:null}},{key:"getOrUndefined",value:function getOrUndefined(){return this.value}},{key:"each",value:function each(e){this.tag&&e(this.value)}},{key:"toArray",value:function toArray(){return this.tag?[this.value]:[]}},{key:"toString",value:function toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}],[{key:"some",value:function some(e){return new Optional(!0,e)}},{key:"none",value:function none(){return Optional.singletonNone}},{key:"from",value:function from(e){return l(e)?Optional.some(e):Optional.none()}}]),Optional}();d.singletonNone=new d(!1);var m=Array.prototype.push,g=function each$1(e,t){for(var n=0,o=e.length;n<o;n++){t(e[n],n)}},p=function flatten(e){for(var t=[],n=0,o=e.length;n<o;++n){if(!s(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);m.apply(t,e[n])}return t},h=Object.keys,v=Object.hasOwnProperty,b=function get$1(e,t){return y(e,t)?d.from(e[t]):d.none()},y=function has(e,t){return v.call(e,t)},C=function option(e){return function(t){return t.options.get(e)}},w=C("audio_template_callback"),x=C("video_template_callback"),S=C("iframe_template_callback"),k=C("media_live_embeds"),T=C("media_filter_html"),E=C("media_url_resolver"),O=C("media_alt_source"),A=C("media_poster"),D=C("media_dimensions"),R=tinymce.util.Tools.resolve("tinymce.util.Tools"),N=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),M=tinymce.util.Tools.resolve("tinymce.html.DomParser"),B=N.DOM,I=function trimPx(e){return e.replace(/px$/,"")},P=function getEphoxEmbedData(e){var t=e.attr("style"),n=t?B.parseStyle(t):{};return{type:"ephox-embed-iri",source:e.attr("data-ephox-embed-iri"),altsource:"",poster:"",width:b(n,"max-width").map(I).getOr(""),height:b(n,"max-height").map(I).getOr("")}},L=function htmlToData(e,t){for(var n={},o=M({validate:!1,forced_root_block:!1},t).parse(e);o;o=o.walk())if(1===o.type){var i=o.name;if(o.attr("data-ephox-embed-iri")){n=P(o);break}n.source||"param"!==i||(n.source=o.attr("movie")),"iframe"!==i&&"object"!==i&&"embed"!==i&&"video"!==i&&"audio"!==i||(n.type||(n.type=i),n=R.extend(o.attributes.map,n)),"source"===i&&(n.source?n.altsource||(n.altsource=o.attr("src")):n.source=o.attr("src")),"img"!==i||n.poster||(n.poster=o.attr("src"))}return n.source=n.source||n.src||"",n.altsource=n.altsource||"",n.poster=n.poster||"",n},F=function guess(e){var t,n=null!==(t=e.toLowerCase().split(".").pop())&&void 0!==t?t:"";return b({mp3:"audio/mpeg",m4a:"audio/x-m4a",wav:"audio/wav",mp4:"video/mp4",webm:"video/webm",ogg:"video/ogg",swf:"application/x-shockwave-flash"},n).getOr("")},H=tinymce.util.Tools.resolve("tinymce.html.Node"),$=tinymce.util.Tools.resolve("tinymce.html.Serializer"),z=function Parser(e){return M(i({forced_root_block:!1,validate:!1,allow_conditional_comments:!0},arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}),e)},V=N.DOM,U=function addPx(e){return/^[0-9.]+$/.test(e)?e+"px":e},Z=function updateEphoxEmbed(e,t){var n=t.attr("style"),o=n?V.parseStyle(n):{};l(e.width)&&(o["max-width"]=U(e.width)),l(e.height)&&(o["max-height"]=U(e.height)),t.attr("style",V.serializeStyle(o))},W=["source","altsource"],j=function updateHtml(e,t,n,o){var i=0,a=0,u=z(o);u.addNodeFilter("source",(function(e){return i=e.length}));for(var c=u.parse(e),s=c;s;s=s.walk())if(1===s.type){var l=s.name;if(s.attr("data-ephox-embed-iri")){Z(t,s);break}switch(l){case"video":case"object":case"embed":case"img":case"iframe":void 0!==t.height&&void 0!==t.width&&(s.attr("width",t.width),s.attr("height",t.height))}if(n)switch(l){case"video":s.attr("poster",t.poster),s.attr("src",null);for(var d=i;d<2;d++)if(t[W[d]]){var m=new H("source",1);m.attr("src",t[W[d]]),m.attr("type",t[W[d]+"mime"]||null),s.append(m)}break;case"iframe":s.attr("src",t.source);break;case"object":var g=s.getAll("img").length>0;if(t.poster&&!g){s.attr("src",t.poster);var p=new H("img",1);p.attr("src",t.poster),p.attr("width",t.width),p.attr("height",t.height),s.append(p)}break;case"source":if(a<2&&(s.attr("src",t[W[a]]),s.attr("type",t[W[a]+"mime"]||null),!t[W[a]])){s.remove();continue}a++;break;case"img":t.poster||s.remove()}}return $({},o).serialize(c)},G=[{regex:/youtu\.be\/([\w\-_\?&=.]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/youtube\.com(.+)v=([^&]+)(&([a-z0-9&=\-_]+))?/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$2?$4",allowFullscreen:!0},{regex:/youtube.com\/embed\/([a-z0-9\?&=\-_]+)/i,type:"iframe",w:560,h:314,url:"www.youtube.com/embed/$1",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?h=$2&title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)\?h=(\w+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?h=$3&title=0&amp;byline=0",allowFullscreen:!0},{regex:/vimeo\.com\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$1?title=0&byline=0&portrait=0&color=8dc7dc",allowFullscreen:!0},{regex:/vimeo\.com\/(.*)\/([0-9]+)/,type:"iframe",w:425,h:350,url:"player.vimeo.com/video/$2?title=0&amp;byline=0",allowFullscreen:!0},{regex:/maps\.google\.([a-z]{2,3})\/maps\/(.+)msid=(.+)/,type:"iframe",w:425,h:350,url:'maps.google.com/maps/ms?msid=$2&output=embed"',allowFullscreen:!1},{regex:/dailymotion\.com\/video\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0},{regex:/dai\.ly\/([^_]+)/,type:"iframe",w:480,h:270,url:"www.dailymotion.com/embed/video/$1",allowFullscreen:!0}],q=function getUrl(e,t){var n=function getProtocol(e){var t=e.match(/^(https?:\/\/|www\.)(.+)$/i);return t&&t.length>1?"www."===t[1]?"https://":t[1]:"https://"}(t),o=e.regex.exec(t),i=n+e.url;if(l(o))for(var a=function _loop(e){i=i.replace("$"+e,(function(){return o[e]?o[e]:""}))},u=0;u<o.length;u++)a(u);return i.replace(/\?$/,"")},K=function matchPattern(e){var t=G.filter((function(t){return t.regex.test(e)}));return t.length>0?R.extend({},t[0],{url:q(t[0],e)}):null},Y=function dataToHtml(e,t){var n,o=R.extend({},t);if(!o.source&&(R.extend(o,L(null!==(n=o.embed)&&void 0!==n?n:"",e.schema)),!o.source))return"";o.altsource||(o.altsource=""),o.poster||(o.poster=""),o.source=e.convertURL(o.source,"source"),o.altsource=e.convertURL(o.altsource,"source"),o.sourcemime=F(o.source),o.altsourcemime=F(o.altsource),o.poster=e.convertURL(o.poster,"poster");var i=K(o.source);if(i&&(o.source=i.url,o.type=i.type,o.allowfullscreen=i.allowFullscreen,o.width=o.width||String(i.w),o.height=o.height||String(i.h)),o.embed)return j(o.embed,o,!0,e.schema);var a=w(e),u=x(e),c=S(e);return o.width=o.width||"300",o.height=o.height||"150",R.each(o,(function(t,n){o[n]=e.dom.encode(""+t)})),"iframe"===o.type?function getIframeHtml(e,t){if(t)return t(e);var n=e.allowfullscreen?' allowFullscreen="1"':"";return'<iframe src="'+e.source+'" width="'+e.width+'" height="'+e.height+'"'+n+"></iframe>"}(o,c):"application/x-shockwave-flash"===o.sourcemime?function getFlashHtml(e){var t='<object data="'+e.source+'" width="'+e.width+'" height="'+e.height+'" type="application/x-shockwave-flash">';return e.poster&&(t+='<img src="'+e.poster+'" width="'+e.width+'" height="'+e.height+'" />'),t+"</object>"}(o):-1!==o.sourcemime.indexOf("audio")?function getAudioHtml(e,t){return t?t(e):'<audio controls="controls" src="'+e.source+'">'+(e.altsource?'\n<source src="'+e.altsource+'"'+(e.altsourcemime?' type="'+e.altsourcemime+'"':"")+" />\n":"")+"</audio>"}(o,a):function getVideoHtml(e,t){return t?t(e):'<video width="'+e.width+'" height="'+e.height+'"'+(e.poster?' poster="'+e.poster+'"':"")+' controls="controls">\n<source src="'+e.source+'"'+(e.sourcemime?' type="'+e.sourcemime+'"':"")+" />\n"+(e.altsource?'<source src="'+e.altsource+'"'+(e.altsourcemime?' type="'+e.altsourcemime+'"':"")+" />\n":"")+"</video>"}(o,u)},X=function isMediaElement(e){return e.hasAttribute("data-mce-object")||e.hasAttribute("data-ephox-embed-iri")},J={},Q=function loadedData(e){return function(t){return Y(e,t)}},ee=function getEmbedHtml(e,t){var n=E(e);return n?function embedPromise(e,t,n){return new Promise((function(o,i){var a=function wrappedResolve(n){return n.html&&(J[e.source]=n),o({url:e.source,html:n.html?n.html:t(e)})};J[e.source]?a(J[e.source]):n({url:e.source},a,i)}))}(t,Q(e),n):function defaultPromise(e,t){return Promise.resolve({html:t(e),url:e.source})}(t,Q(e))},te=function unwrap(e,t){var n=t&&"dimensions"!==t?function extractMeta(e,t){return b(t,e).bind((function(e){return b(e,"meta")}))}(t,e).getOr({}):{},a=function getValue(e,t,n){return function(i){var a=function getFromData(){return b(e,i)},u=function getFromMetaData(){return b(t,i)},s=function getNonEmptyValue(e){return b(e,"value").bind((function(e){return e.length>0?d.some(e):d.none()}))};return o({},i,(i===n?function getFromValueFirst(){return a().bind((function(e){return c(e)?s(e).orThunk(u):u().orThunk((function(){return d.from(e)}))}))}():function getFromMetaFirst(){return u().orThunk((function(){return a().bind((function(e){return c(e)?s(e):d.from(e)}))}))}()).getOr(""))}}(e,n,t);return i(i(i(i(i({},a("source")),a("altsource")),a("poster")),a("embed")),function getDimensions(e,t){var n={};return b(e,"dimensions").each((function(e){g(["width","height"],(function(o){b(t,o).orThunk((function(){return b(e,o)})).each((function(e){return n[o]=e}))}))})),n}(e,n))},ne=function wrap(e){var t=i(i({},e),{},{source:{value:b(e,"source").getOr("")},altsource:{value:b(e,"altsource").getOr("")},poster:{value:b(e,"poster").getOr("")}});return g(["width","height"],(function(n){b(e,n).each((function(e){var o=t.dimensions||{};o[n]=e,t.dimensions=o}))})),t},re=function handleError(e){return function(t){var n=t&&t.msg?"Media embed handler error: "+t.msg:"Media embed handler threw unknown error.";e.notificationManager.open({type:"error",text:n})}},oe=function addEmbedHtml(e,t){return function(o){if(n(o.url)&&o.url.trim().length>0){var a=o.html,u=L(a,t.schema),c=i(i({},u),{},{source:o.url,embed:a});e.setData(ne(c))}}},ie=function handleInsert(e,t){var n=e.dom.select("*[data-mce-object]");e.insertContent(t),function selectPlaceholder(e,t){for(var n=e.dom.select("*[data-mce-object]"),o=0;o<t.length;o++)for(var i=n.length-1;i>=0;i--)t[o]===n[i]&&n.splice(i,1);e.selection.select(n[0])}(e,n),e.nodeChanged()},ae=function isEmbedIframe(e,t){return l(t)&&"ephox-embed-iri"===t&&l(K(e))},ue=function shouldInsertAsNewIframe(e,t){return function hasDimensionsChanged(e,t){return e.width!==t.width||e.height!==t.height}(e,t)&&ae(t.source,e.type)},ce=function submitForm(e,t,n){var o;t.embed=ue(e,t)&&D(n)?Y(n,i(i({},t),{},{embed:""})):j(null!==(o=t.embed)&&void 0!==o?o:"",t,!1,n.schema),t.embed&&(e.source===t.source||function isCached(e){return y(J,e)}(t.source))?ie(n,t.embed):ee(n,t).then((function(e){ie(n,e.html)})).catch(re(n))},se=function showDialog(e){var t=function getEditorData(e){var t=e.selection.getNode(),n=X(t)?e.serializer.serialize(t,{selection:!0}):"",o=L(n,e.schema),a=function getDimensionsOfElement(){if(ae(o.source,o.type)){var n=e.dom.getRect(t);return{width:n.w.toString().replace(/px$/,""),height:n.h.toString().replace(/px$/,"")}}return{}}();return i(i({embed:n},o),a)}(e),n=function Cell(e){var t=e;return{get:function get(){return t},set:function set(e){t=e}}}(t),o=ne(t),a=D(e)?[{type:"sizeinput",name:"dimensions",label:"Constrain proportions",constrain:!0}]:[],u={title:"General",name:"general",items:p([[{name:"source",type:"urlinput",filetype:"media",label:"Source",picker_text:"Browse files"}],a])},c={title:"Embed",items:[{type:"textarea",name:"embed",label:"Paste your embed code below:"}]},s=[];O(e)&&s.push({name:"altsource",type:"urlinput",filetype:"media",label:"Alternative source URL"}),A(e)&&s.push({name:"poster",type:"urlinput",filetype:"image",label:"Media poster (Image URL)"});var l={title:"Advanced",name:"advanced",items:s},d=[u,c];s.length>0&&d.push(l);var m={type:"tabpanel",tabs:d},g=e.windowManager.open({title:"Insert/Edit Media",size:"normal",body:m,buttons:[{type:"cancel",name:"cancel",text:"Cancel"},{type:"submit",name:"save",text:"Save",primary:!0}],onSubmit:function onSubmit(t){var o=te(t.getData());ce(n.get(),o,e),t.close()},onChange:function onChange(t,o){switch(o.name){case"source":!function handleSource(t,n){var o=te(n.getData(),"source");t.source!==o.source&&(oe(g,e)({url:o.source,html:""}),ee(e,o).then(oe(g,e)).catch(re(e)))}(n.get(),t);break;case"embed":!function handleEmbed(t){var n,o=te(t.getData()),i=L(null!==(n=o.embed)&&void 0!==n?n:"",e.schema);t.setData(ne(i))}(t);break;case"dimensions":case"altsource":case"poster":!function handleUpdate(t,n,o){var a=te(t.getData(),n),u=ue(o,a)&&D(e)?i(i({},a),{},{embed:""}):a,c=Y(e,u);t.setData(ne(i(i({},u),{},{embed:c})))}(t,o.name,n.get())}n.set(te(t.getData()))},initialData:o})},le=function startsWith(e,t){return function checkRange(e,t,n){return""===t||e.length>=t.length&&e.substr(n,n+t.length)===t}(e,t,0)},fe=tinymce.util.Tools.resolve("tinymce.Env"),de=function isLiveEmbedNode(e){var t=e.name;return"iframe"===t||"video"===t||"audio"===t},me=function getDimension(e,t,n){var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=e.attr(n);return l(i)?i:y(t,n)?null:o},ge=function setDimensions(e,t,n){var o="img"===t.name||"video"===e.name,i=o?"300":null,a="audio"===e.name?"30":"150",u=o?a:null;t.attr({width:me(e,n,"width",i),height:me(e,n,"height",u)})},pe=function createPlaceholderNode(e,t){var n=t.name,o=new H("img",1);return ve(e,t,o),ge(t,o,{}),o.attr({style:t.attr("style"),src:fe.transparentSrc,"data-mce-object":n,class:"mce-object mce-object-"+n}),o},he=function createPreviewNode(e,t){var n,o=t.name,i=new H("span",1);i.attr({contentEditable:"false",style:t.attr("style"),"data-mce-object":o,class:"mce-preview-object mce-object-"+o}),ve(e,t,i);var a=e.dom.parseStyle(null!==(n=t.attr("style"))&&void 0!==n?n:""),u=new H(o,1);if(ge(t,u,a),u.attr({src:t.attr("src"),style:t.attr("style"),class:t.attr("class")}),"iframe"===o)u.attr({allowfullscreen:t.attr("allowfullscreen"),frameborder:"0",sandbox:t.attr("sandbox")});else{g(["controls","crossorigin","currentTime","loop","muted","poster","preload"],(function(e){u.attr(e,t.attr(e))}));var c=i.attr("data-mce-html");l(c)&&function appendNodeContent(e,t,n,o){for(var i=z(e.schema).parse(o,{context:t});i.firstChild;)n.append(i.firstChild)}(e,o,u,unescape(c))}var s=new H("span",1);return s.attr("class","mce-shim"),i.append(u),i.append(s),i},ve=function retainAttributesAndInnerHtml(e,t,n){for(var o,i=null!==(o=t.attributes)&&void 0!==o?o:[],a=i.length;a--;){var u=i[a].name,c=i[a].value;"width"===u||"height"===u||"style"===u||le(u,"data-mce-")||("data"!==u&&"src"!==u||(c=e.convertURL(c,u)),n.attr("data-mce-p-"+u,c))}var s=$({inner:!0},e.schema),l=new H("div",1);g(t.children(),(function(e){return l.append(e)}));var d=s.serialize(l);d&&(n.attr("data-mce-html",escape(d)),n.empty())},be=function isPageEmbedWrapper(e){var t=e.attr("class");return n(t)&&/\btiny-pageembed\b/.test(t)},ye=function isWithinEmbedWrapper(e){for(var t=e;t=t.parent;)if(t.attr("data-ephox-embed-iri")||be(t))return!0;return!1},Ce=function setup$1(e){e.on("PreInit",(function(){var t=e.schema,n=e.serializer,o=e.parser,i=t.getBoolAttrs();g("webkitallowfullscreen mozallowfullscreen".split(" "),(function(e){i[e]={}})),function each(e,t){for(var n=h(e),o=0,i=n.length;o<i;o++){var a=n[o];t(e[a],a)}}({embed:["wmode"]},(function(e,n){var o=t.getElementRule(n);o&&g(e,(function(e){o.attributes[e]={},o.attributesOrder.push(e)}))})),o.addNodeFilter("iframe,video,audio,object,embed",function placeHolderConverter(e){return function(t){for(var n,o=t.length;o--;)(n=t[o]).parent&&(n.parent.attr("data-mce-object")||(de(n)&&k(e)?ye(n)||n.replace(he(e,n)):ye(n)||n.replace(pe(e,n))))}}(e)),n.addAttributeFilter("data-mce-object",(function(t,n){for(var o,i=t.length,a=function _loop2(){var a=t[i];if(!a.parent)return"continue";var u=a.attr(n),c=new H(u,1);if("audio"!==u){var s=a.attr("class");s&&-1!==s.indexOf("mce-preview-object")&&a.firstChild?c.attr({width:a.firstChild.attr("width"),height:a.firstChild.attr("height")}):c.attr({width:a.attr("width"),height:a.attr("height")})}c.attr({style:a.attr("style")});for(var l=null!==(o=a.attributes)&&void 0!==o?o:[],d=l.length;d--;){var m=l[d].name;0===m.indexOf("data-mce-p-")&&c.attr(m.substr(11),l[d].value)}var p=a.attr("data-mce-html");if(p){var h=function parseAndSanitize(e,t,n){var o=(0,e.options.get)("xss_sanitization"),i=T(e);return z(e.schema,{sanitize:o,validate:i}).parse(n,{context:t})}(e,u,unescape(p));g(h.children(),(function(e){return c.append(e)}))}a.replace(c)};i--;)a()}))})),e.on("SetContent",(function(){var t=e.dom;g(t.select("span.mce-preview-object"),(function(e){0===t.select("span.mce-shim",e).length&&t.add(e,"span",{class:"mce-shim"})}))}))},we=function onSetupEditable(e){return function(t){var n=function nodeChanged(){t.setEnabled(e.selection.isEditable())};return e.on("NodeChange",n),n(),function(){e.off("NodeChange",n)}}};!function Plugin(){e.add("media",(function(e){return function register$2(e){var t=e.options.register;t("audio_template_callback",{processor:"function"}),t("video_template_callback",{processor:"function"}),t("iframe_template_callback",{processor:"function"}),t("media_live_embeds",{processor:"boolean",default:!0}),t("media_filter_html",{processor:"boolean",default:!0}),t("media_url_resolver",{processor:"function"}),t("media_alt_source",{processor:"boolean",default:!0}),t("media_poster",{processor:"boolean",default:!0}),t("media_dimensions",{processor:"boolean",default:!0})}(e),function register$1(e){e.addCommand("mceMedia",(function showDialog$1(){se(e)}))}(e),function register(e){var t=function onAction(){return e.execCommand("mceMedia")};e.ui.registry.addToggleButton("media",{tooltip:"Insert/edit media",icon:"embed",onAction:t,onSetup:function onSetup(t){var n=e.selection;t.setActive(X(n.getNode()));var o=n.selectorChangedWithUnbind("img[data-mce-object],span[data-mce-object],div[data-ephox-embed-iri]",t.setActive).unbind,i=we(e)(t);return function(){o(),i()}}}),e.ui.registry.addMenuItem("media",{icon:"embed",text:"Media...",onAction:t,onSetup:we(e)})}(e),function setup(e){e.on("ResolveName",(function(e){var t;1===e.target.nodeType&&(t=e.target.getAttribute("data-mce-object"))&&(e.name=t)}))}(e),Ce(e),function setup$2(e){e.on("click keyup touchend",(function(){var t=e.selection.getNode();t&&e.dom.hasClass(t,"mce-preview-object")&&e.dom.getAttrib(t,"data-mce-selected")&&t.setAttribute("data-mce-selected","2")})),e.on("ObjectResized",(function(t){var n=t.target;if(n.getAttribute("data-mce-object")){var o=n.getAttribute("data-mce-html");o&&(o=unescape(o),n.setAttribute("data-mce-html",escape(j(o,{width:String(t.width),height:String(t.height)},!1,e.schema))))}}))}(e),function get(e){return{showDialog:function showDialog$1(){se(e)}}}(e)}))}()}()},2948:function(e,t,n){n(2949)},2949:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function isType(e){return function(t){return function typeOf(e){var t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&function hasProto(e,t,n){var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name}(e,String,(function(e,t){return t.isPrototypeOf(e)}))?"string":t}(t)===e}},n=t("string"),o=t("object"),i=t("array"),a=function isSimpleType(e){return function(t){return typeof t===e}}("function"),u=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),c=tinymce.util.Tools.resolve("tinymce.EditorManager"),s=tinymce.util.Tools.resolve("tinymce.Env"),l=tinymce.util.Tools.resolve("tinymce.util.Tools"),d=function option(e){return function(t){return t.options.get(e)}},m=d("importcss_merge_classes"),g=d("importcss_exclusive"),p=d("importcss_selector_converter"),h=d("importcss_selector_filter"),v=d("importcss_groups"),b=d("importcss_append"),y=d("importcss_file_filter"),C=d("skin"),w=d("skin_url"),x=Array.prototype.push,S=function bind(e,t){return function flatten(e){for(var t=[],n=0,o=e.length;n<o;++n){if(!i(e[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+e);x.apply(t,e[n])}return t}(function map(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;i++){var a=e[i];o[i]=t(a,i)}return o}(e,t))},k=/^\.(?:ephox|tiny-pageembed|mce)(?:[.-]+\w+)+$/,T=function compileFilter(e){return n(e)?function(t){return-1!==t.indexOf(e)}:e instanceof RegExp?function(t){return e.test(t)}:e},E=function getSelectors(e,t,o){var i=[],a={},u=function append(t,a){var u,d=t.href;if((d=function removeCacheSuffix(e){var t=s.cacheSuffix;return n(e)&&(e=e.replace("?"+t,"").replace("&"+t,"")),e}(d))&&(!o||o(d,a))&&!function isSkinContentCss(e,t){var n=C(e);if(n){var o=w(e),i=o?e.documentBaseURI.toAbsolute(o):c.baseURL+"/skins/ui/"+n,a=c.baseURL+"/skins/content/";return t===i+"/content"+(e.inline?".inline":"")+".min.css"||-1!==t.indexOf(a)}return!1}(e,d)){l.each(t.imports,(function(e){append(e,!0)}));try{u=t.cssRules||t.rules}catch(m){}l.each(u,(function(e){(function isCssImportRule(e){return e.styleSheet})(e)&&e.styleSheet?append(e.styleSheet,!0):function isCssPageRule(e){return e.selectorText}(e)&&l.each(e.selectorText.split(","),(function(e){i.push(l.trim(e))}))}))}};l.each(e.contentCSS,(function(e){a[e]=!0})),o||(o=function fileFilter(e,t){return t||a[e]});try{l.each(t.styleSheets,(function(e){u(e)}))}catch(d){}return i},O=function defaultConvertSelectorToFormat(e,t){var n={},o=/^(?:([a-z0-9\-_]+))?(\.[a-z0-9_\-\.]+)$/i.exec(t);if(o){var i=o[1],a=o[2].substr(1).split(".").join(" "),u=l.makeMap("a,img");return o[1]?(n={title:t},e.schema.getTextBlockElements()[i]?n.block=i:e.schema.getBlockElements()[i]||u[i.toLowerCase()]?n.selector=i:n.inline=i):o[2]&&(n={inline:"span",title:t.substr(1),classes:a}),m(e)?n.classes=a:n.attributes={class:a},n}},A=function isExclusiveMode(e,t){return null===t||g(e)},D=function setup(e){e.on("init",(function(){var t=function generate(){var e=[],t=[],n={};return{addItemToGroup:function addItemToGroup(e,o){n[e]?n[e].push(o):(t.push(e),n[e]=[o])},addItem:function addItem(t){e.push(t)},toFormats:function toFormats(){return S(t,(function(e){var t=n[e];return 0===t.length?[]:[{title:e,items:t}]})).concat(e)}}}(),n={},o=T(h(e)),i=function compileUserDefinedGroups(e){return l.map(e,(function(e){return l.extend({},e,{original:e,selectors:{},filter:T(e.filter)})}))}(v(e)),a=function processSelector(t,o){if(function isUniqueSelector(e,t,n,o){return!(A(e,n)?t in o:t in n.selectors)}(e,t,o,n)){!function markUniqueSelector(e,t,n,o){A(e,n)?o[t]=!0:n.selectors[t]=!0}(e,t,o,n);var i=function convertSelectorToFormat(e,t,n,o){var i=p(e);return(o&&o.selector_converter?o.selector_converter:i||function selectorConverter(){return O(e,n)}).call(t,n,o)}(e,e.plugins.importcss,t,o);if(i){var a=i.name||u.DOM.uniqueId();return e.formatter.register(a,i),{title:i.title,format:a}}}return null};l.each(E(e,e.getDoc(),T(y(e))),(function(e){if(!k.test(e)&&(!o||o(e))){var n=function getGroupsBySelector(e,t){return l.grep(e,(function(e){return!e.filter||e.filter(t)}))}(i,e);if(n.length>0)l.each(n,(function(n){var o=a(e,n);o&&t.addItemToGroup(n.title,o)}));else{var u=a(e,null);u&&t.addItem(u)}}}));var c=t.toFormats();e.dispatch("addStyleModifications",{items:c,replace:!b(e)})}))};!function Plugin(){e.add("importcss",(function(e){return function register(e){var t=e.options.register,i=function filterProcessor(e){return n(e)||a(e)||o(e)};t("importcss_merge_classes",{processor:"boolean",default:!0}),t("importcss_exclusive",{processor:"boolean",default:!0}),t("importcss_selector_converter",{processor:"function"}),t("importcss_selector_filter",{processor:i}),t("importcss_file_filter",{processor:i}),t("importcss_groups",{processor:"object[]"}),t("importcss_append",{processor:"boolean",default:!1})}(e),D(e),function get(e){return{convertSelectorToFormat:function convertSelectorToFormat(t){return O(e,t)}}}(e)}))}()}()},2950:function(e,t,n){n(2951)},2951:function(e,t,n){var o=n(12).default,i=n(13).default;!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function isSimpleType(e){return function(t){return typeof t===e}},n=function isType$1(e){return function(t){return function typeOf(e){var t=typeof e;return null===e?"null":"object"===t&&Array.isArray(e)?"array":"object"===t&&function hasProto(e,t,n){var o;return!!n(e,t.prototype)||(null===(o=e.constructor)||void 0===o?void 0:o.name)===t.name}(e,String,(function(e,t){return t.isPrototypeOf(e)}))?"string":t}(t)===e}}("string"),a=t("boolean"),u=function isNonNullable(e){return!function isNullable(e){return null===e||void 0===e}(e)},c=t("function"),s=t("number"),l=function constant(e){return function(){return e}}(!1),d=function(){function Optional(e,t){o(this,Optional),this.tag=e,this.value=t}return i(Optional,[{key:"fold",value:function fold(e,t){return this.tag?t(this.value):e()}},{key:"isSome",value:function isSome(){return this.tag}},{key:"isNone",value:function isNone(){return!this.tag}},{key:"map",value:function map(e){return this.tag?Optional.some(e(this.value)):Optional.none()}},{key:"bind",value:function bind(e){return this.tag?e(this.value):Optional.none()}},{key:"exists",value:function exists(e){return this.tag&&e(this.value)}},{key:"forall",value:function forall(e){return!this.tag||e(this.value)}},{key:"filter",value:function filter(e){return!this.tag||e(this.value)?this:Optional.none()}},{key:"getOr",value:function getOr(e){return this.tag?this.value:e}},{key:"or",value:function or(e){return this.tag?this:e}},{key:"getOrThunk",value:function getOrThunk(e){return this.tag?this.value:e()}},{key:"orThunk",value:function orThunk(e){return this.tag?this:e()}},{key:"getOrDie",value:function getOrDie(e){if(this.tag)return this.value;throw new Error(null!==e&&void 0!==e?e:"Called getOrDie on None")}},{key:"getOrNull",value:function getOrNull(){return this.tag?this.value:null}},{key:"getOrUndefined",value:function getOrUndefined(){return this.value}},{key:"each",value:function each(e){this.tag&&e(this.value)}},{key:"toArray",value:function toArray(){return this.tag?[this.value]:[]}},{key:"toString",value:function toString(){return this.tag?"some(".concat(this.value,")"):"none()"}}],[{key:"some",value:function some(e){return new Optional(!0,e)}},{key:"none",value:function none(){return Optional.singletonNone}},{key:"from",value:function from(e){return u(e)?Optional.some(e):Optional.none()}}]),Optional}();d.singletonNone=new d(!1);var m=function each(e,t){for(var n=0,o=e.length;n<o;n++){t(e[n],n)}},g=function fromDom(e){if(null===e||void 0===e)throw new Error("Node cannot be null or undefined");return{dom:e}},p={fromHtml:function fromHtml(e,t){var n=(t||document).createElement("div");if(n.innerHTML=e,!n.hasChildNodes()||n.childNodes.length>1){var o="HTML does not have a single root node";throw console.error(o,e),new Error(o)}return g(n.childNodes[0])},fromTag:function fromTag(e,t){var n=(t||document).createElement(e);return g(n)},fromText:function fromText(e,t){var n=(t||document).createTextNode(e);return g(n)},fromDom:g,fromPoint:function fromPoint(e,t,n){return d.from(e.dom.elementFromPoint(t,n)).map(g)}},h=function is(e,t){var n=e.dom;if(1!==n.nodeType)return!1;var o=n;if(void 0!==o.matches)return o.matches(t);if(void 0!==o.msMatchesSelector)return o.msMatchesSelector(t);if(void 0!==o.webkitMatchesSelector)return o.webkitMatchesSelector(t);if(void 0!==o.mozMatchesSelector)return o.mozMatchesSelector(t);throw new Error("Browser lacks native selectors")};"undefined"!==typeof window?window:Function("return this;")();var v=function isType(e){return function(t){return function type(e){return e.dom.nodeType}(t)===e}},b=v(1),y=v(3),C=v(9),w=v(11),x=function children$2(e){return function map(e,t){for(var n=e.length,o=new Array(n),i=0;i<n;i++){var a=e[i];o[i]=t(a,i)}return o}(e.dom.childNodes,p.fromDom)},S=function set(e,t,o){!function rawSet(e,t,o){if(!(n(o)||a(o)||s(o)))throw console.error("Invalid call to Attribute.set. Key ",t,":: Value ",o,":: Element ",e),new Error("Attribute value was not simple");e.setAttribute(t,o+"")}(e.dom,t,o)},k=function remove(e,t){e.dom.removeAttribute(t)},T=c(Element.prototype.attachShadow)&&c(Node.prototype.getRootNode)?function(e){return p.fromDom(e.dom.getRootNode())}:function documentOrOwner(e){return C(e)?e:function owner(e){return p.fromDom(e.dom.ownerDocument)}(e)},E=function getShadowRoot(e){var t=T(e);return function isShadowRoot(e){return w(e)&&u(e.dom.host)}(t)?d.some(t):d.none()},O=function getShadowHost(e){return p.fromDom(e.dom.host)},A=function inBody(e){var t=y(e)?e.dom.parentNode:e.dom;if(void 0===t||null===t||null===t.ownerDocument)return!1;var n=t.ownerDocument;return E(p.fromDom(t)).fold((function(){return n.body.contains(t)}),function compose1(e,t){return function(n){return e(t(n))}}(inBody,O))},D=function ancestor(e,t,n){return function ancestor$1(e,t,n){for(var o=e.dom,i=c(n)?n:l;o.parentNode;){o=o.parentNode;var a=p.fromDom(o);if(t(a))return d.some(a);if(i(a))break}return d.none()}(e,(function(e){return h(e,t)}),n)},R=function get(e,t){var n=e.dom,o=window.getComputedStyle(n).getPropertyValue(t);return""!==o||A(e)?o:N(n,t)},N=function getUnsafeProperty(e,t){return function isSupported(e){return void 0!==e.style&&c(e.style.getPropertyValue)}(e)?e.style.getPropertyValue(t):""},M=function getDirection(e){return"rtl"===R(e,"direction")?"rtl":"ltr"},B=function children(e,t){return function children$1(e,t){return function filter(e,t){for(var n=[],o=0,i=e.length;o<i;o++){var a=e[o];t(a,o)&&n.push(a)}return n}(x(e),t)}(e,(function(e){return h(e,t)}))},I=function getParentElement(e){return function parent(e){return d.from(e.dom.parentNode).map(p.fromDom)}(e).filter(b)},P=function isTag(e){return function(t){return b(t)&&function name(e){return e.dom.nodeName.toLowerCase()}(t)===e}}("li"),L=function setDirOnElements(e,t,n){m(t,(function(t){var o=p.fromDom(t),i=P(o),a=function getNormalizedBlock(e,t){return(t?D(e,"ol,ul"):d.some(e)).getOr(e)}(o,i);I(a).each((function(t){if(e.setStyle(a.dom,"direction",null),M(t)===n?k(a,"dir"):S(a,"dir",n),M(a)!==n&&e.setStyle(a.dom,"direction",n),i){var o=B(a,"li[dir],li[style]");m(o,(function(t){k(t,"dir"),e.setStyle(t.dom,"direction",null)}))}}))}))},F=function setDir(e,t){e.selection.isEditable()&&(L(e.dom,e.selection.getSelectedBlocks(),t),e.nodeChanged())},H=function getNodeChangeHandler(e,t){return function(n){var o=function nodeChangeHandler(o){var i=p.fromDom(o.element);n.setActive(M(i)===t),n.setEnabled(e.selection.isEditable())};return e.on("NodeChange",o),n.setEnabled(e.selection.isEditable()),function(){return e.off("NodeChange",o)}}};!function Plugin(){e.add("directionality",(function(e){!function register$1(e){e.addCommand("mceDirectionLTR",(function(){F(e,"ltr")})),e.addCommand("mceDirectionRTL",(function(){F(e,"rtl")}))}(e),function register(e){e.ui.registry.addToggleButton("ltr",{tooltip:"Left to right",icon:"ltr",onAction:function onAction(){return e.execCommand("mceDirectionLTR")},onSetup:H(e,"ltr")}),e.ui.registry.addToggleButton("rtl",{tooltip:"Right to left",icon:"rtl",onAction:function onAction(){return e.execCommand("mceDirectionRTL")},onSetup:H(e,"rtl")})}(e)}))}()}()},2952:function(e,t,n){n(2953)},2953:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=tinymce.util.Tools.resolve("tinymce.Env"),n=function option(e){return function(t){return t.options.get(e)}},o=n("min_height"),i=n("max_height"),a=n("autoresize_overflow_padding"),u=n("autoresize_bottom_margin"),c=function toggleScrolling(e,t){var n=e.getBody();n&&(n.style.overflowY=t?"":"hidden",t||(n.scrollTop=0))},s=function parseCssValueToInt(e,t,n,o){var i,a=parseInt(null!==(i=e.getStyle(t,n,o))&&void 0!==i?i:"",10);return isNaN(a)?0:a},l=function resize(e,n,u,l){var d,m=e.dom,g=e.getDoc();if(g)if(function isFullscreen(e){return e.plugins.fullscreen&&e.plugins.fullscreen.isFullscreen()}(e))c(e,!0);else{var p=g.documentElement,h=l?l():a(e),v=null!==(d=o(e))&&void 0!==d?d:e.getElement().offsetHeight,b=v,y=s(m,p,"margin-top",!0),C=s(m,p,"margin-bottom",!0),w=p.offsetHeight+y+C+h;w<0&&(w=0);var x=e.getContainer().offsetHeight-e.getContentAreaContainer().offsetHeight;w+x>v&&(b=w+x);var S=i(e);if(S&&b>S?(b=S,c(e,!0)):c(e,!1),b!==n.get()){var k=b-n.get();if(m.setStyle(e.getContainer(),"height",b+"px"),n.set(b),function fireResizeEditor(e){e.dispatch("ResizeEditor")}(e),t.browser.isSafari()&&(t.os.isMacOS()||t.os.isiOS())){var T=e.getWin();T.scrollTo(T.pageXOffset,T.pageYOffset)}e.hasFocus()&&function shouldScrollIntoView(e){if("setcontent"===(null===e||void 0===e?void 0:e.type.toLowerCase())){var t=e;return!0===t.selection||!0===t.paste}return!1}(u)&&e.selection.scrollIntoView(),(t.browser.isSafari()||t.browser.isChromium())&&k<0&&resize(e,n,u,l)}}};!function Plugin(){e.add("autoresize",(function(e){if(function register$1(e){var t=e.options.register;t("autoresize_overflow_padding",{processor:"number",default:1}),t("autoresize_bottom_margin",{processor:"number",default:50})}(e),e.options.isSet("resize")||e.options.set("resize",!1),!e.inline){var n=function Cell(e){var t=e;return{get:function get(){return t},set:function set(e){t=e}}}(0);!function register(e,t){e.addCommand("mceAutoResize",(function(){l(e,t)}))}(e,n),function setup(e,n){var o,i,c=function getExtraMarginBottom(){return u(e)};e.on("init",(function(i){o=0;var u=a(e),s=e.dom;s.setStyles(e.getDoc().documentElement,{height:"auto"}),t.browser.isEdge()||t.browser.isIE()?s.setStyles(e.getBody(),{paddingLeft:u,paddingRight:u,"min-height":0}):s.setStyles(e.getBody(),{paddingLeft:u,paddingRight:u}),l(e,n,i,c),o+=1})),e.on("NodeChange SetContent keyup FullscreenStateChanged ResizeContent",(function(t){if(1===o)i=e.getContainer().offsetHeight,l(e,n,t,c),o+=1;else if(2===o){var a=i<e.getContainer().offsetHeight;if(a){var u=e.dom,s=e.getDoc();u.setStyles(s.documentElement,{"min-height":0}),u.setStyles(e.getBody(),{"min-height":"inherit"})}c=a?function constant(e){return function(){return e}}(0):c,o+=1}else l(e,n,t,c)}))}(e,n)}}))}()}()},2954:function(e,t,n){n(2955)},2955:function(e,t){!function(){"use strict";var e=tinymce.util.Tools.resolve("tinymce.PluginManager"),t=function isSimpleType(e){return function(t){return typeof t===e}}("function"),n=tinymce.util.Tools.resolve("tinymce.dom.DOMUtils"),o=tinymce.util.Tools.resolve("tinymce.util.Tools"),i=function option(e){return function(t){return t.options.get(e)}},a=i("save_enablewhendirty"),u=i("save_onsavecallback"),c=i("save_oncancelcallback"),s=function displayErrorMessage(e,t){e.notificationManager.open({text:t,type:"error"})},l=function register$1(e){e.addCommand("mceSave",(function(){!function save(e){var o=n.DOM.getParent(e.id,"form");if(!a(e)||e.isDirty()){e.save();var i=u(e);if(t(i))return i.call(e,e),void e.nodeChanged();o?(e.setDirty(!1),o.onsubmit&&!o.onsubmit()||("function"===typeof o.submit?o.submit():s(e,"Error: Form submit field collision.")),e.nodeChanged()):s(e,"Error: No form element found.")}}(e)})),e.addCommand("mceCancel",(function(){!function cancel(e){var n=o.trim(e.startContent),i=c(e);t(i)?i.call(e,e):e.resetContent(n)}(e)}))},d=function stateToggle(e){return function(t){var n=function handler(){t.setEnabled(!a(e)||e.isDirty())};return n(),e.on("NodeChange dirty",n),function(){return e.off("NodeChange dirty",n)}}};!function Plugin(){e.add("save",(function(e){!function register$2(e){var t=e.options.register;t("save_enablewhendirty",{processor:"boolean",default:!0}),t("save_onsavecallback",{processor:"function"}),t("save_oncancelcallback",{processor:"function"})}(e),function register(e){e.ui.registry.addButton("save",{icon:"save",tooltip:"Save",enabled:!1,onAction:function onAction(){return e.execCommand("mceSave")},onSetup:d(e)}),e.ui.registry.addButton("cancel",{icon:"cancel",tooltip:"Cancel",enabled:!1,onAction:function onAction(){return e.execCommand("mceCancel")},onSetup:d(e)}),e.addShortcut("Meta+S","","mceSave")}(e),l(e)}))}()}()}}]);